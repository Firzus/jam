/*
    @license
    Sirv v3.7.11 (d9416467)
    Copyright 2022 Sirv Limited
    https://sirv.com
*/

window.Sirv||function(){var _this5=this;window.Sirv={};var sirvRequirejs=function(window){var requirejs,require,define;return function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!(void 0===window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(t,e){return e||""}function isFunction(t){return"[object Function]"===ostring.call(t)}function isArray(t){return"[object Array]"===ostring.call(t)}function each(t,e){if(t)for(var i=0;i<t.length&&(!t[i]||!e(t[i],i,t));i+=1);}function eachReverse(t,e){if(t)for(var i=t.length-1;-1<i&&(!t[i]||!e(t[i],i,t));--i);}function hasProp(t,e){return hasOwn.call(t,e)}function getOwn(t,e){return hasProp(t,e)&&t[e]}function eachProp(t,e){for(var i in t)if(hasProp(t,i)&&e(t[i],i))break}function mixin(i,t,s,n){return t&&eachProp(t,function(t,e){!s&&hasProp(i,e)||(!n||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?i[e]=t:(i[e]||(i[e]={}),mixin(i[e],t,s,n)))}),i}function bind(t,e){return function(){return e.apply(t,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(t){throw t}function getGlobal(t){if(!t)return t;var e=global;return each(t.split("."),function(t){e=e[t]}),e}function makeError(t,e,i,s){e=new Error(e+"\nhttps://requirejs.org/docs/errors.html#"+t);return e.requireType=t,e.requireModules=s,i&&(e.originalError=i),e}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(t,e,i,s){var n,o=defContextName;return isArray(t)||"string"==typeof t||(n=t,isArray(e)?(t=e,e=i,i=s):t=[]),n&&n.context&&(o=n.context),s=(s=getOwn(contexts,o))||(contexts[o]=req.s.newContext(o)),n&&s.configure(n),s.require(t,e,i)},req.config=function(t){return req(t)},req.nextTick=void 0!==setTimeout?function(t){setTimeout(t,4)}:function(t){t()},require=require||req,req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(t,e,i){var s=t.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return s.type=t.scriptType||"text/javascript",s.charset="utf-8",s.async=!0,s},req.load=function(e,i,s){var t,n=e&&e.config||{};if(isBrowser)return(t=req.createNode(n,i,s)).setAttribute("data-requirecontext",e.contextName),t.setAttribute("data-requiremodule",i),!t.attachEvent||t.attachEvent.toString&&t.attachEvent.toString().indexOf("[native code")<0||isOpera?(t.addEventListener("load",e.onScriptLoad,!1),t.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,t.attachEvent("onreadystatechange",e.onScriptLoad)),t.src=s,n.onNodeCreated&&n.onNodeCreated(t,n,i,s),currentlyAddingScript=t,baseElement?head.insertBefore(t,baseElement):head.appendChild(t),currentlyAddingScript=null,t;if(isWebWorker)try{setTimeout(function(){},0),importScripts(s),e.completeLoad(i)}catch(t){e.onError(makeError("importscripts","importScripts failed for "+i+" at "+s,t,[i]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(t){if(head=head||t.parentNode,dataMain=t.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(t,i,e){var s,n;"string"!=typeof t&&(e=i,i=t,t=null),isArray(i)||(e=i,i=null),!i&&isFunction(e)&&(i=[],e.length&&(e.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(t,e){i.push(e)}),i=(1===e.length?["require"]:["require","exports","module"]).concat(i))),useInteractive&&(s=currentlyAddingScript||getInteractiveScript())&&(t=t||s.getAttribute("data-requiremodule"),n=contexts[s.getAttribute("data-requirecontext")]),n?(n.defQueue.push([t,i,e]),n.defQueueMap[t]=!0):globalDefQueue.push([t,i,e])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(h){var e,t,u,l,i,f={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},c={},d={},s={},p=[],m={},n={},g={},v=1,S=1;function y(t,e,i){var s,n,o,r,a,h,l,c,d,u=e&&e.split("/"),p=f.map,m=p&&p["*"];if(t&&(e=(t=t.split("/")).length-1,f.nodeIdCompat&&jsSuffixRegExp.test(t[e])&&(t[e]=t[e].replace(jsSuffixRegExp,"")),"."===t[0].charAt(0)&&u&&(t=u.slice(0,u.length-1).concat(t)),function(t){for(var e,i=0;i<t.length;i++)"."===(e=t[i])?(t.splice(i,1),--i):".."===e&&(0===i||1===i&&".."===t[2]||".."===t[i-1]||0<i&&(t.splice(i-1,2),i-=2))}(t),t=t.join("/")),i&&p&&(u||m)){t:for(o=(n=t.split("/")).length;0<o;--o){if(a=n.slice(0,o).join("/"),u)for(r=u.length;0<r;--r)if(s=getOwn(p,u.slice(0,r).join("/")),s=s&&getOwn(s,a)){h=s,l=o;break t}!c&&m&&getOwn(m,a)&&(c=getOwn(m,a),d=o)}!h&&c&&(h=c,l=d),h&&(n.splice(0,l,h),t=n.join("/"))}return getOwn(f.pkgs,t)||t}function w(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===u.contextName)return t.parentNode.removeChild(t),!0})}function b(t){var e=getOwn(f.paths,t);return e&&isArray(e)&&1<e.length&&(e.shift(),u.require.undef(t),u.makeRequire(null,{skipMap:!0})([t]),1)}function E(t){var e,i=t?t.indexOf("!"):-1;return-1<i&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function I(t,e,i,s){var n,o,r,a=null,h=e?e.name:null,l=t,c=!0,d="";return t||(c=!1,t="_@r"+(v+=1)),a=(r=E(t))[0],t=r[1],a&&(a=y(a,h,s),o=getOwn(m,a)),t&&(a?d=i?t:o&&o.normalize?o.normalize(t,function(t){return y(t,h,s)}):-1===t.indexOf("!")?y(t,h,s):t:(a=(r=E(d=y(t,h,s)))[0],d=r[1],i=!0,n=u.nameToUrl(d))),{prefix:a,name:d,parentMap:e,unnormalized:!!(i=!a||o||i?"":"_unnormalized"+(S+=1)),url:n,originalName:l,isDefine:c,id:(a?a+"!"+d:d)+i}}function C(t){var e=t.id;return getOwn(c,e)||(c[e]=new u.Module(t))}function x(t,e,i){var s=t.id,n=getOwn(c,s);!hasProp(m,s)||n&&!n.defineEmitComplete?(n=C(t)).error&&"error"===e?i(n.error):n.on(e,i):"defined"===e&&i(m[s])}function z(e,t){var i=e.requireModules,s=!1;t?t(e):(each(i,function(t){t=getOwn(c,t);t&&(t.error=e,t.events.error&&(s=!0,t.emit("error",e)))}),s||req.onError(e))}function P(){globalDefQueue.length&&(each(globalDefQueue,function(t){var e=t[0];"string"==typeof e&&(u.defQueueMap[e]=!0),p.push(t)}),globalDefQueue=[])}function N(t){delete c[t],delete d[t]}function O(){var s,t=1e3*f.waitSeconds,n=t&&u.startTime+t<(new Date).getTime(),o=[],r=[],a=!1,h=!0;if(!e){if(e=!0,eachProp(d,function(t){var e=t.map,i=e.id;if(t.enabled&&(e.isDefine||r.push(t),!t.error))if(!t.inited&&n)b(i)?a=s=!0:(o.push(i),w(i));else if(!t.inited&&t.fetched&&e.isDefine&&(a=!0,!e.prefix))return h=!1}),n&&o.length)return(t=makeError("timeout","Load timeout for modules: "+o,null,o)).contextName=u.contextName,z(t),0;h&&each(r,function(t){!function s(n,o,r){var t=n.map.id;n.error?n.emit("error",n.error):(o[t]=!0,each(n.depMaps,function(t,e){var i=t.id,t=getOwn(c,i);!t||n.depMatched[e]||r[i]||(getOwn(o,i)?(n.defineDep(e,m[i]),n.check()):s(t,o,r))}),r[t]=!0)}(t,{},{})}),n&&!s||!a||!isBrowser&&!isWebWorker||i||(i=setTimeout(function(){i=0,O()},50)),e=!1}}function r(t){hasProp(m,t[0])||C(I(t[0],null,!0)).init(t[1],t[2])}function o(t,e,i,s){t.detachEvent&&!isOpera?s&&t.detachEvent(s,e):t.removeEventListener(i,e,!1)}function a(t){t=t.currentTarget||t.srcElement;return o(t,u.onScriptLoad,"load","onreadystatechange"),o(t,u.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function A(){var t;for(P();p.length;){if(null===(t=p.shift())[0])return z(makeError("mismatch","Mismatched anonymous define() module: "+t[t.length-1])),0;r(t)}u.defQueueMap={}}return l={require:function(t){return t.require||(t.require=u.makeRequire(t.map))},exports:function(t){if(t.usingExports=!0,t.map.isDefine)return t.exports?m[t.map.id]=t.exports:t.exports=m[t.map.id]={}},module:function(t){return t.module||(t.module={id:t.map.id,uri:t.map.url,config:function(){return getOwn(f.config,t.map.id)||{}},exports:t.exports||(t.exports={})})}},(t=function(t){this.events=getOwn(s,t.id)||{},this.map=t,this.shim=getOwn(f.shim,t.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(t,e,i,s){s=s||{},this.inited||(this.factory=e,i?this.on("error",i):this.events.error&&(i=bind(this,function(t){this.emit("error",t)})),this.depMaps=t&&t.slice(0),this.errback=i,this.inited=!0,this.ignore=s.ignore,s.enabled||this.enabled?this.enable():this.check())},defineDep:function(t,e){this.depMatched[t]||(this.depMatched[t]=!0,--this.depCount,this.depExports[t]=e)},fetch:function(){if(!this.fetched){this.fetched=!0,u.startTime=(new Date).getTime();var t=this.map;if(!this.shim)return t.prefix?this.callPlugin():this.load();u.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return t.prefix?this.callPlugin():this.load()}))}},load:function(){var t=this.map.url;n[t]||(n[t]=!0,u.load(this.map.id,t))},check:function(){if(this.enabled&&!this.enabling){var e,t,i,s=this.map.id,n=this.depExports,o=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(r)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{o=u.execCb(s,r,n,o)}catch(t){e=t}else o=u.execCb(s,r,n,o);if(this.map.isDefine&&void 0===o&&((t=this.module)?o=t.exports:this.usingExports&&(o=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",z(this.error=e)}else o=r;this.exports=o,this.map.isDefine&&!this.ignore&&(m[s]=o,req.onResourceLoad&&(i=[],each(this.depMaps,function(t){i.push(t.normalizedMap||t)}),req.onResourceLoad(u,this.map,i))),N(s),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(u.defQueueMap,s)||this.fetch()}},callPlugin:function(){var a=this.map,h=a.id,t=I(a.prefix);this.depMaps.push(t),x(t,"defined",bind(this,function(t){var o,e,i=getOwn(g,this.map.id),s=this.map.name,n=this.map.parentMap?this.map.parentMap.name:null,r=u.makeRequire(a.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(t.normalize&&(s=t.normalize(s,function(t){return y(t,n,!0)})||""),x(e=I(a.prefix+"!"+s,this.map.parentMap,!0),"defined",bind(this,function(t){this.map.normalizedMap=e,this.init([],function(){return t},null,{enabled:!0,ignore:!0})})),void((s=getOwn(c,e.id))&&(this.depMaps.push(e),this.events.error&&s.on("error",bind(this,function(t){this.emit("error",t)})),s.enable()))):i?(this.map.url=u.nameToUrl(i),void this.load()):((o=bind(this,function(t){this.init([],function(){return t},null,{enabled:!0})})).error=bind(this,function(t){this.inited=!0,(this.error=t).requireModules=[h],eachProp(c,function(t){0===t.map.id.indexOf(h+"_unnormalized")&&N(t.map.id)}),z(t)}),o.fromText=bind(this,function(t,e){var i=a.name,s=I(i),n=useInteractive;e&&(t=e),n&&(useInteractive=!1),C(s),hasProp(f.config,h)&&(f.config[i]=f.config[h]);try{req.exec(t)}catch(t){return z(makeError("fromtexteval","fromText eval for "+h+" failed: "+t,t,[h]))}n&&(useInteractive=!0),this.depMaps.push(s),u.completeLoad(i),r([i],o)}),void t.load(a.name,r,o,f))})),u.enable(t,this),this.pluginMaps[t.id]=t},enable:function(){(d[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(t,e){var i,s;if("string"==typeof t){if(t=I(t,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[e]=t,s=getOwn(l,t.id))return void(this.depExports[e]=s(this));this.depCount+=1,x(t,"defined",bind(this,function(t){this.undefed||(this.defineDep(e,t),this.check())})),this.errback?x(t,"error",bind(this,this.errback)):this.events.error&&x(t,"error",bind(this,function(t){this.emit("error",t)}))}i=t.id,s=c[i],hasProp(l,i)||!s||s.enabled||u.enable(t,this)})),eachProp(this.pluginMaps,bind(this,function(t){var e=getOwn(c,t.id);e&&!e.enabled&&u.enable(t,this)})),this.enabling=!1,this.check()},on:function(t,e){(this.events[t]||(this.events[t]=[])).push(e)},emit:function(t,e){each(this.events[t],function(t){t(e)}),"error"===t&&delete this.events[t]}},(u={config:f,contextName:h,registry:c,defined:m,urlFetched:n,defQueue:p,defQueueMap:{},Module:t,makeModuleMap:I,nextTick:req.nextTick,onError:z,configure:function(t){var i;t.baseUrl&&"/"!==t.baseUrl.charAt(t.baseUrl.length-1)&&(t.baseUrl+="/"),"string"==typeof t.urlArgs&&(i=t.urlArgs,t.urlArgs=function(t,e){return(-1===e.indexOf("?")?"?":"&")+i});var s=f.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(t,function(t,e){n[e]?(f[e]||(f[e]={}),mixin(f[e],t,!0,!0)):f[e]=t}),t.bundles&&eachProp(t.bundles,function(t,e){each(t,function(t){t!==e&&(g[t]=e)})}),t.shim&&(eachProp(t.shim,function(t,e){isArray(t)&&(t={deps:t}),!t.exports&&!t.init||t.exportsFn||(t.exportsFn=u.makeShimExports(t)),s[e]=t}),f.shim=s),t.packages&&each(t.packages,function(t){var e=(t="string"==typeof t?{name:t}:t).name;t.location&&(f.paths[e]=t.location),f.pkgs[e]=t.name+"/"+(t.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(c,function(t,e){t.inited||t.map.unnormalized||(t.map=I(e,null,!0))}),(t.deps||t.callback)&&u.require(t.deps||[],t.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}},makeRequire:function(o,r){function a(t,e,i){var s,n;return r.enableBuildCallback&&e&&isFunction(e)&&(e.__requireJsBuild=!0),"string"==typeof t?isFunction(e)?z(makeError("requireargs","Invalid require call"),i):o&&hasProp(l,t)?l[t](c[o.id]):req.get?req.get(u,t,o,a):(s=I(t,o,!1,!0).id,hasProp(m,s)?m[s]:z(makeError("notloaded",'Module name "'+s+'" has not been loaded yet for context: '+h+(o?"":". Use require([])")))):(A(),u.nextTick(function(){A(),(n=C(I(null,o))).skipMap=r.skipMap,n.init(t,e,i,{enabled:!0}),O()}),a)}return r=r||{},mixin(a,{isBrowser:isBrowser,toUrl:function(t){var e,i=t.lastIndexOf("."),s=t.split("/")[0];return-1!==i&&(!("."===s||".."===s)||1<i)&&(e=t.substring(i,t.length),t=t.substring(0,i)),u.nameToUrl(y(t,o&&o.id,!0),e,!0)},defined:function(t){return hasProp(m,I(t,o,!1,!0).id)},specified:function(t){return t=I(t,o,!1,!0).id,hasProp(m,t)||hasProp(c,t)}}),o||(a.undef=function(i){P();var t=I(i,o,!0),e=getOwn(c,i);e.undefed=!0,w(i),delete m[i],delete n[t.url],delete s[i],eachReverse(p,function(t,e){t[0]===i&&p.splice(e,1)}),delete u.defQueueMap[i],e&&(e.events.defined&&(s[i]=e.events),N(i))}),a},enable:function(t){getOwn(c,t.id)&&C(t).enable()},completeLoad:function(t){var e,i,s,n=getOwn(f.shim,t)||{},o=n.exports;for(P();p.length;){if(null===(i=p.shift())[0]){if(i[0]=t,e)break;e=!0}else i[0]===t&&(e=!0);r(i)}if(u.defQueueMap={},s=getOwn(c,t),!e&&!hasProp(m,t)&&s&&!s.inited){if(!(!f.enforceDefine||o&&getGlobal(o)))return b(t)?void 0:z(makeError("nodefine","No define call for "+t,null,[t]));r([t,n.deps||[],n.exportsFn])}O()},nameToUrl:function(t,e,i){var s,n,o,r,a,h=getOwn(f.pkgs,t);if(h&&(t=h),h=getOwn(g,t))return u.nameToUrl(h,e,i);if(req.jsExtRegExp.test(t))r=t+(e||"");else{for(s=f.paths,o=(n=t.split("/")).length;0<o;--o)if(a=getOwn(s,n.slice(0,o).join("/"))){isArray(a)&&(a=a[0]),n.splice(0,o,a);break}r=n.join("/"),r=("/"===(r+=e||(/^data\:|^blob\:|\?/.test(r)||i?"":".js")).charAt(0)||r.match(/^[\w\+\.\-]+:/)?"":f.baseUrl)+r}return f.urlArgs&&!/^blob\:/.test(r)?r+f.urlArgs(t,r):r},load:function(t,e){req.load(u,t,e)},execCb:function(t,e,i,s){return e.apply(s,i)},onScriptLoad:function(t){"load"!==t.type&&!readyRegExp.test((t.currentTarget||t.srcElement).readyState)||(interactiveScript=null,t=a(t),u.completeLoad(t.id))},onScriptError:function(t){var i=a(t);if(!b(i.id)){var s=[];return eachProp(c,function(t,e){0!==e.indexOf("_@r")&&each(t.depMaps,function(t){if(t.id===i.id)return s.push(e),!0})}),z(makeError("scripterror",'Script error for "'+i.id+(s.length?'", needed by: '+s.join(", "):'"'),t,[i.id]))}}}).require=u.makeRequire(),u}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(t){if("interactive"===t.readyState)return interactiveScript=t}),interactiveScript}}(_this5,"undefined"==typeof setTimeout?void 0:setTimeout),{requirejs:requirejs,require:require,define:define}}({document:!0});Sirv.define=sirvRequirejs.define;var sirvRequire=null,isLazyImage=!1,SIRV_ASSETS_URL="",SIRV_BASE_URL="",SIRV_HTTP_PROTOCOL="https:",sirvDeps=["bHelpers","magicJS","globalVariables","globalFunctions","EventEmitter","helper","EventManager","Loader","RoundLoader","ComponentLoader","ResponsiveImage","ViewerImage","defaultsVideoOptions","ContextMenu","Slider","SliderBuilder","BaseInstance","Instance","HotspotInstance","Hotspot","Hotspots","SpinHotspots","getDPPX"];!function(){for(var e,t=null,i=document.getElementsByTagName("script"),s=function(t){return(e=e||document.createElement("a")).setAttribute("href",t),("!!"+e.href).replace("!!","")},n=null,o=null,r=null,a=null,h=null,l=null,c={Spin:["bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter","ResponsiveImage","HotspotInstance","Zoominstance","Hint","ProgressLoader"],Zoom:["bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter","ResponsiveImage","RoundLoader","HotspotInstance","Zoominstance","Hint"],Video:["bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter","defaultsVideoOptions","Instance"],LazyImage:["bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter","ResponsiveImage","BaseInstance","getDPPX"],Description:["bHelpers","magicJS","EventEmitter","helper"],ProductDetail:["bHelpers","magicJS","helper","Description"],SocialButtons:["bHelpers","magicJS","EventEmitter","helper"]},d={Spin:"Spin",Zoom:"Zoom",Video:"Video",Image:"LazyImage",Description:"Description",Productdetail:"ProductDetail",Socialbuttons:"SocialButtons"},u=["Image","Spin","Video","Zoom"],p=0,m=i.length;p<m;p++){var f=i[p].getAttribute("src")||"";null!==i[p].getAttribute("data-sirvjs-test")?SIRV_ASSETS_URL=s(f).replace(/([^#?]+)\/.*$/,"$1/"):(/sirv\.(com|localhost(:\d+)?)\/(([^#?]+)\/)?sirv\.js([?#].*)?$/i.test(f)||/sirv\.(com|localhost(:\d+)?)\/(([^#?]+)\/)?sirv\.full\.js([?#].*)?$/i.test(f))&&(SIRV_BASE_URL=s(f).replace(/(^https?:\/\/[^/]*).*/,"$1/"),SIRV_ASSETS_URL=s(f).replace(/([^#?]+)\/.*$/,"$1/"),(/sirv\.localhost(:\d+)?\/(([^#?]+)\/)?sirv\.js([?#].*)?$/i.test(f)||/sirv\.localhost(:\d+)?\/(([^#?]+)\/)?sirv\.full\.js([?#].*)?$/i.test(f))&&(SIRV_HTTP_PROTOCOL="http:"));f=(f=i[p].getAttribute("data-components"))&&(f=f.trim()).replace(/\s+/g," ");if(!t&&f&&""!==f){t=f.split(/,/.test(f)?",":" ");break}}if(!t&&window.SirvComponents)try{t=JSON.parse(JSON.stringify(window.SirvComponents))}catch(t){}(t=((t=t||u)||[]).concat(u)).forEach(function(t){var e=t.trim();if(""!==e&&(e=e.toLowerCase(),e=(t=e).charAt(0).toUpperCase()+t.slice(1),d[e]))if(c[d[e]].forEach(function(t){-1===sirvDeps.indexOf(t)&&sirvDeps.push(t)}),-1===sirvDeps.indexOf(d[e])&&sirvDeps.push(d[e]),"Image"===e)isLazyImage=!0;else switch(e){case"Spin":n=d[e];break;case"Zoom":o=d[e];break;case"Video":r=d[e];break;case"Description":a=d[e];break;case"Productdetail":h=d[e];break;case"Socialbuttons":l=d[e]}}),sirvRequire=sirvRequirejs.require.config({waitSeconds:0,baseUrl:SIRV_ASSETS_URL,deps:sirvDeps,paths:{polyfill:"components/polyfill",EventEmitter:"components/emitter",bHelpers:"components/bHelpers",magicJS:"components/magicjs",BaseInstance:"components/baseinstance",Instance:"components/instance",HotspotInstance:"components/hotspotinstance",Zoominstance:"components/zoominstance",globalVariables:"components/globalVariables",globalFunctions:"components/globalFunctions",helper:"components/helper-module",EventManager:"components/eventmanager",ContextMenu:"components/contextmenu",Hint:"components/hint",ResponsiveImage:"components/imageclass",Loader:"components/loader",RoundLoader:"components/roundloader",ComponentLoader:"components/componentloader",ProgressLoader:"components/progressloader",LazyImage:"components/lazyimage",ViewerImage:"components/image",Spin:"components/spin",defaultsVideoOptions:"components/defaultsVideoOptions",Description:"components/description",ProductDetail:"components/productDetail",SocialButtons:"components/socialButtons",SliderBuilder:"components/sliderBuilder",VideoLib:"vjs/sirv.videojs",Video:"components/video",Zoom:"components/zoom",Slider:"components/slider",Hotspot:"components/hotspot",Hotspots:"components/hotspots",SpinHotspots:"components/spinHotspots",Vimeo:"components/vimeo",ImageZoom:"components/imagezoom",qualitySelector:"vjs/qualityselector",getDPPX:"components/getdppx"},urlArgs:"v=v3.7.11",config:{Slider:{spin:n,zoom:o,video:r,description:a,productDetail:h,socialButtons:l},Video:{libcss:SIRV_ASSETS_URL+"vjs/sirv.videojs.css",libjs:"VideoLib",qualitySelectorcss:SIRV_ASSETS_URL+"vjs/qualityselector.css",qualitySelectorjs:"qualitySelector"}}})}(),Sirv.define("Promise",{load:function(t,e,i,s){window.Promise?i(window.Promise):e(["polyfill"],function(t){i(t.Promise)})}}),Sirv.define("bHelpers",function(){var t={};return t.inheritsLoose=function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e},t.assertThisInitialized=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.readOnlyError=function(t){throw new Error('"'+t+'" is read-only')},t.classPrivateFieldGet=function(t,e){if(!(e=e.get(t)))throw new TypeError("attempted to get private field on non-instance");return e.get?e.get.call(t):e.value},t.classPrivateFieldSet=function(t,e,i){if(!(e=e.get(t)))throw new TypeError("attempted to set private field on non-instance");if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}return i},t}),Sirv.define("magicJS",["bHelpers"],function(mt){var t=function(){var e,i,a=window,d=a.undefined,u=document,s=new WeakMap,t={UUID:0,storage:{},$uuid:function(t){return t.$J_UUID||(t.$J_UUID=++l.UUID)},getStorage:function(t){return l.storage[t]||(l.storage[t]={})},$false:function(){return!1},$true:function(){return!0},stylesId:"mjs-"+Math.floor(Math.random()*(new Date).getTime()),defined:function(t){return t!=d},contains:function(t,e,i){return-1!==t.indexOf(e,i)},typeOf:function(t){if(!l.defined(t))return!1;if(t.$J_TYPE)return t.$J_TYPE;if(t.nodeType){if(1===t.nodeType)return"element";if(3===t.nodeType)return"textnode"}if(t===a)return"window";if(t===u)return"document";if(t instanceof a.Array)return"array";if(t instanceof a.Function)return"function";if(t instanceof a.String)return"string";if(l.browser.trident){if(l.defined(t.cancelBubble))return"event"}else if(t===a.event||t.constructor==a.Event||t.constructor==a.MouseEvent||t.constructor==a.UIEvent||t.constructor==a.KeyboardEvent||t.constructor==a.KeyEvent)return"event";return t instanceof a.Date?"date":t instanceof a.RegExp?"regexp":t.length&&t.item?"collection":t.length&&t.callee?"arguments":typeof t},extend:function(t,e){if(t instanceof a.Array||(t=[t]),!e)return t[0];for(var i=0,s=t.length;i<s;i++)if(l.defined(t))for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))try{t[i][n]=e[n]}catch(t){}return t[0]},implement:function(t,e){t instanceof a.Array||(t=[t]);for(var i=0,s=t.length;i<s;i++)if(l.defined(t[i])&&t[i].prototype)for(var n in e||{})t[i].prototype[n]||(t[i].prototype[n]=e[n]);return t[0]},nativize:function(t,e){if(!l.defined(t))return t;for(var i in e||{})t[i]||(t[i]=e[i]);return t},$try:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var s=0,n=e.length;s<n;s++)try{return e[s]()}catch(t){}return null},$A:function(t){if(!l.defined(t))return l.$([]);if(t.toArray)return l.$(t.toArray());if(t.item){for(var e=t.length||0,i=new Array(e);e--;)i[e]=t[e];return l.$(i)}return l.$(Array.prototype.slice.call(t))},now:function(){return(new Date).getTime()},detach:function(t){var e;switch(l.typeOf(t)){case"object":for(var i in e={},t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=l.detach(t[i]));break;case"array":e=[];for(var s=0,n=t.length;s<n;s++)e[s]=l.detach(t[s]);break;default:return t}return l.$(e)},$:function(t){var e=t;switch(l.typeOf(t)){case"string":var i=u.getElementById(t),e=l.defined(i)?l.$(i):null;break;case"window":case"document":e=s.has(t)?s.get(t):new I(t);break;case"element":e=s.has(t)?s.get(t):new E(t);break;case"event":e=new l.Events.MagicEvent(t)}return e},$new:function(t,e,i){return l.$(u.createElement(t)).setProps(e||{}).setCss(i||{})},addCSS:function(t,e,i,s){var n=[],o=u.head||u.body;if(s&&(o=h(s).node||s),i=i||l.stylesId,(s=h(o.querySelector("#"+i)))||(s=l.$new("style",{id:i,type:"text/css"}),o.insertBefore(s.node,o.firstChild)),o=(o=s.node.sheet)||s.node.styleSheet,"string"!==l.typeOf(e)){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(r+":"+e[r]);e=n.join(";")}return o.insertRule?o.insertRule(t+" {"+e+"}",o.cssRules.length):o.addRule(t,e)},removeCSS:function(t,e){t=l.$(t);"element"===l.typeOf(t)&&((t=t.sheet||t.styleSheet).deleteRule?t.deleteRule(e):t.removeRule&&t.removeRule(e))},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}).toUpperCase()},getAbsoluteURL:function(t){return(e=e||u.createElement("a")).setAttribute("href",t),("!!"+e.href).replace("!!","")},getHashCode:function(t){for(var e=0,i=t.length,s=0;s<i;++s)e=31*e+t.charCodeAt(s),e%=4294967296;return e},camelize:function(t){return t.replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()})},dashize:function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.charAt(0).toLowerCase()})},stringHas:function(t,e,i){return-1<((i=i||"")+t+i).indexOf(i+e+i)}},l=t,h=l.$,c={},n=navigator.userAgent.toLowerCase(),o=n.match(/(webkit|gecko|trident|presto)\/(\d+\.?\d*)/i),r=n.match(/(edge|opr)\/(\d+\.?\d*)/i)||n.match(/(crios|chrome|safari|firefox|opera|opr)\/(\d+\.?\d*)/i),p=n.match(/version\/(\d+\.?\d*)/i),m=u.documentElement.style,f=function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);return t in m||"Webkit"+e in m||"Moz"+e in m||"ms"+e in m||"O"+e in m};l.browser={features:{xpath:!!u.evaluate,air:!!a.runtime,query:!!u.querySelector,fullScreen:!!(u.fullscreenEnabled||u.msFullscreenEnabled||u.exitFullscreen||u.cancelFullScreen||u.webkitexitFullscreen||u.webkitCancelFullScreen||u.mozCancelFullScreen||u.oCancelFullScreen||u.msCancelFullScreen),xhr2:!!a.ProgressEvent&&!!a.FormData&&a.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,transition:f("transition"),transform:f("transform"),perspective:f("perspective"),animation:f("animation"),requestAnimationFrame:!1,multibackground:!1,cssFilters:!1,canvas:!1,svg:u.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")},touchScreen:"ontouchstart"in a||a.DocumentTouch&&u instanceof DocumentTouch||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,mobile:!!n.match(/(android|bb\d+|meego).+|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/),engine:(f="unknown",o&&o[1]?f=o[1].toLowerCase():a.opera?f="presto":a.ActiveXObject?f="trident":u.getBoxObjectFor!==d||null!==a.mozInnerScreenY?f="gecko":null===a.WebKitPoint&&navigator.taintEnabled||(f="webkit"),f),version:o&&o[2]?parseFloat(o[2]):0,uaName:r&&r[1]?r[1].toLowerCase():"",uaVersion:r&&r[2]?parseFloat(r[2]):0,cssPrefix:"",cssDomPrefix:"",domPrefix:"",ieMode:0,platform:n.match(/ip(?:ad|od|hone)/)?"ios":(n.match(/(?:webos|android)/)||(navigator.platform.match(/mac|win|linux/i)||["other"]))[0].toLowerCase(),backCompat:u.compatMode&&"backcompat"===u.compatMode.toLowerCase(),scrollbarsWidth:0,getDoc:function(){return u.compatMode&&"backcompat"===u.compatMode.toLowerCase()?u.body:u.documentElement},requestAnimationFrame:a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||d,cancelAnimationFrame:a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.mozCancelAnimationFrame||a.oCancelAnimationFrame||a.msCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||d,ready:!1,onready:function(){if(!l.browser.ready){var t,e,i;l.browser.ready=!0;try{var s=l.$new("div").setCss({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999}).appendTo(u.body);l.browser.scrollbarsWidth=s.offsetWidth-s.clientWidth,s.remove()}catch(t){}try{(e=(t=l.$new("div")).style).cssText="background:url(https://),url(https://),red url(https://)",l.browser.features.multibackground=/(url\s*\(.*?){3}/.test(e.background),t=e=null}catch(t){}l.browser.cssTransformProp||(l.browser.cssTransformProp=l.dashize(l.normalizeCSS("transform")));try{(t=l.$new("div")).style.cssText=l.dashize(l.normalizeCSS("filter"))+":blur(2px);",l.browser.features.cssFilters=!!t.style.length&&(!l.browser.ieMode||9<l.browser.ieMode),t=null}catch(t){}l.browser.features.cssFilters||l.$(u.documentElement).addClass("no-cssfilters-magic");try{l.browser.features.canvas=!(!(i=l.$new("canvas")).getContext||!i.getContext("2d"))}catch(t){}a.TransitionEvent===d&&a.WebKitTransitionEvent!==d&&(c.transitionend="webkitTransitionEnd"),l.$(u).callEvent("domready")}}},function(){var t,e=[];switch(l.browser.engine){case"trident":l.browser.version||(l.browser.version=a.XMLHttpRequest?3:2);break;case"gecko":l.browser.version=r&&r[2]?parseFloat(r[2]):0}l.browser[l.browser.engine]=!0,r&&"crios"===r[1]&&(l.browser.uaName="chrome"),a.chrome&&(l.browser.chrome=!0),r&&"opr"===r[1]&&(l.browser.uaName="opera",l.browser.opera=!0),"safari"===l.browser.uaName&&p&&p[1]&&(l.browser.uaVersion=parseFloat(p[1])),"android"===l.browser.platform&&l.browser.webkit&&p&&p[1]&&(l.browser.androidBrowser=!0);var i={gecko:["-moz-","Moz","moz"],webkit:["-webkit-","Webkit","webkit"],trident:["-ms-","ms","ms"],presto:["-o-","O","o"]}[l.browser.engine]||["","",""];if(l.browser.cssPrefix=i[0],l.browser.cssDomPrefix=i[1],l.browser.domPrefix=i[2],l.browser.ieMode=function(){var t;if(l.browser.trident)if(u.documentMode)t=u.documentMode;else if(l.browser.backCompat)t=5;else{var e=0;switch(l.browser.version){case 2:e=6;break;case 3:e=7}t=e}else t=d;return t}(),!l.browser.mobile&&"mac"===l.browser.platform&&l.browser.touchScreen&&(l.browser.mobile=!0,l.browser.platform="ios"),e.push(l.browser.platform+"-magic"),l.browser.mobile&&e.push("mobile-magic"),l.browser.androidBrowser&&e.push("android-browser-magic"),l.browser.ieMode)for(l.browser.uaName="ie",l.browser.uaVersion=l.browser.ieMode,e.push("ie"+l.browser.ieMode+"-magic"),t=11;t>l.browser.ieMode;t--)e.push("lt-ie"+t+"-magic");l.browser.webkit&&l.browser.version<536&&(l.browser.features.fullScreen=!1),l.browser.requestAnimationFrame&&l.browser.requestAnimationFrame.call(a,function(){l.browser.features.requestAnimationFrame=!0}),l.browser.features.svg?e.push("svg-magic"):e.push("no-svg-magic");i=(u.documentElement.className||"").match(/\S+/g)||[];u.documentElement.className=l.$(i).concat(e).join(" ");try{u.documentElement.setAttribute("data-magic-ua",l.browser.uaName),u.documentElement.setAttribute("data-magic-ua-ver",l.browser.uaVersion),u.documentElement.setAttribute("data-magic-engine",l.browser.engine),u.documentElement.setAttribute("data-magic-engine-ver",l.browser.version)}catch(t){}l.browser.ieMode&&l.browser.ieMode<9&&(u.createElement("figure"),u.createElement("figcaption")),a.navigator.pointerEnabled||["Down","Up","Move","Over","Out"].forEach(function(t){var e="pointer"+t.toLowerCase();"edge"===l.browser.uaName?c[e]=e:a.navigator.msPointerEnabled?c[e]="MSPointer"+t:c[e]=-1})}(),i={capable:l.browser.features.fullScreen,enabled:function(){return!!(u.fullscreenElement||u[l.browser.domPrefix+"FullscreenElement"]||u.fullScreen||u.webkitIsFullScreen||u[l.browser.domPrefix+"FullScreen"])},request:function(t,e){e=e||{},i.capable&&!e.windowFullscreen?(i.onchange=function(t){i.enabled()?e.onEnter&&e.onEnter():(l.$(u).removeEvent(i.changeEventName,i.onchange),e.onExit&&e.onExit())},l.$(u).addEvent(i.changeEventName,i.onchange),i.onerror=function(t){e.fallback&&e.fallback(),l.$(u).removeEvent(i.errorEventName,i.onerror)},l.$(u).addEvent(i.errorEventName,i.onerror),((t=h(t).node).requestFullscreen||t[l.browser.domPrefix+"RequestFullscreen"]||t[l.browser.domPrefix+"RequestFullScreen"]||function(){}).call(t)):e.fallback&&e.fallback()},cancel:u.exitFullscreen||u.cancelFullScreen||document[l.browser.domPrefix+"ExitFullscreen"]||document[l.browser.domPrefix+"CancelFullScreen"]||function(){},changeEventName:(u.msExitFullscreen?b="MSFullscreenChange":(b=u.exitFullscreen?"":l.browser.domPrefix,b+="fullscreenchange"),b),errorEventName:(u.msExitFullscreen?C="MSFullscreenError":(C=u.exitFullscreen?"":l.browser.domPrefix,C+="fullscreenerror"),C),prefix:l.browser.domPrefix,activeElement:null},l.browser.fullScreen=i;function g(t){var e;return!((!l.browser.webkit||"filter"!==t)&&t in m)&&(e=l.browser.cssDomPrefix+t.charAt(0).toUpperCase()+t.slice(1))in m?e:t}var v=/^(border(Top|Bottom|Left|Right)Width)|((padding|margin)(Top|Bottom|Left|Right))$/,S={float:void 0===m.styleFloat?"cssFloat":"styleFloat"},y={fontWeight:!0,lineHeight:!0,opacity:!0,zIndex:!0,zoom:!0},w=a.getComputedStyle?function(t,e){t=a.getComputedStyle(t,null);return t?t.getPropertyValue(e)||t[e]:null}:function(t,e){var i=t.currentStyle,s=null;return null===(s=i?i[e]:null)&&t.style&&t.style[e]&&(s=t.style[e]),s};l.normalizeCSS=g;var b=function(){"use strict";function t(t){this.node=t,this.$J_UUID=++l.UUID,this.$J_TYPE=null,this.$J_EXT=function(){},s.set(this.node,this)}var e=t.prototype;return e.fetch=function(t,e){var i=l.getStorage(this.$J_UUID),s=i[t],n=null;return e!==d&&s===d&&(i[t]=e,s=i[t]),l.defined(s)&&(n=s),n},e.store=function(t,e){return l.getStorage(this.$J_UUID)[t]=e,this},e.del=function(t){return delete l.getStorage(this.$J_UUID)[t],this},e.addEvent=function(e,i,s,n){var o=this;if("string"===l.typeOf(e)&&1<(t=e.split(" ")).length&&(e=t),"array"===l.typeOf(e))return e.forEach(function(t){o.addEvent(t,i,s,n)}),this;if(!(e=c[e]||e)||!i||"string"!==l.typeOf(e)||"function"!==l.typeOf(i))return this;if("domready"===e&&l.browser.ready)return i(),this;s=parseInt(s||50,10),i.$J_EUID||(i.$J_EUID=Math.floor(Math.random()*l.now()));var t,r=this.fetch("_EVENTS_",{});(t=r[e])||(t=[],r[e]=t,l.Events.handlers[e]?l.Events.handlers[e].add.call(this,n):(t.handle=function(t){t=l.extend(t||a.e,{$J_TYPE:"event"}),o.callEvent(e,l.$(t))},this.node[l._event_add_](l._event_prefix_+e,t.handle,!1)));r={type:e,fn:i,priority:s,euid:i.$J_EUID};return t.push(r),t.sort(function(t,e){return t.priority-e.priority}),this},e.removeEvent=function(t,e){var i,s,n=this,o=this.fetch("_EVENTS_",{}),t=arguments.length<=0?void 0:t,r=1<arguments.length?arguments.length<=1?void 0:e:-100;if("string"===l.typeOf(t)&&1<(s=t.split(" ")).length&&(t=s),"array"===l.typeOf(t))return t.forEach(function(t){n.removeEvent(t,r)}),this;if(!(t=c[t]||t)||"string"!==l.typeOf(t)||!o||!o[t])return this;for(var a=o[t]||[],h=0;h<a.length;h++)i=a[h],(-100===r||r&&r.$J_EUID===i.euid)&&a.splice(h--,1);return 0===a.length&&(l.Events.handlers[t]?l.Events.handlers[t].remove.call(this):this.node[l._event_del_](l._event_prefix_+t,a.handle,!1),delete o[t]),this},e.callEvent=function(t,e){var i=this.fetch("_EVENTS_",{});if((t=c[t]||t)&&"string"===l.typeOf(t)&&i&&i[t]){try{e&&e.type||(e=l.extend(e||{},{type:t}))}catch(t){}e.timeStamp===d&&(e.timeStamp=l.now());for(var s=i[t]||[],n=0;n<s.length&&(!e.isQueueStopped||!e.isQueueStopped());n++)s[n].fn.call(this,e)}else;},e.raiseEvent=function(t,e){var i,s="domready"!==t,n=this;return t=c[t]||t,s?(n===u&&u.createEvent&&!n.dispatchEvent&&(n=u.documentElement),u.createEvent?(i=u.createEvent(t)).initEvent(e,!0,!0):(i=u.createEventObject()).eventType=t,u.createEvent?n.dispatchEvent(i):n.fireEvent("on"+e,i),i):(this.callEvent(t),this)},e.clearEvents=function(){var t,e=this.fetch("_EVENTS_");if(!e)return this;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.removeEvent(t);return this.del("_EVENTS_"),this},t}(),E=function(e){"use strict";function t(t){t=e.call(this,t)||this;return t.$J_TYPE="magicjs-element",t}mt.inheritsLoose(t,e);var i=t.prototype;return i.requestFullScreen=function(){l.browser.fullScreen.capable&&!u.requestFullScreen?l.browser.fullScreen.request(this.node):this.node.requestFullScreen(this.node)},i.addClass=function(t){var e=this;return(t=t?t.split(" "):[""]).forEach(function(t){(t=t.trim())&&e.node.classList.add(t)}),this},i.removeClass=function(t){return this.node.classList.remove(t),this},i.toggleClass=function(t){return this.node.classList.toggle(t),this},i.getCss=function(t){var e=l.camelize(t),i=null;if(S[e]||(S[e]=g(e)),t=S[e],"auto"===(i=w(this.node,t))&&(i=null),null!==i){if("opacity"===t)return l.defined(i)?parseFloat(i):1;v.test(t)&&(i=parseInt(i,10)?i:"0px")}return i},i.setCssProp=function(t,e){var i=l.camelize(t);try{S[i]||(S[i]=g(i)),t=S[i],this.node.style[t]=e+("number"!==l.typeOf(e)||y[i]?"":"px")}catch(t){}return this},i.setCss=function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&this.setCssProp(e,t[e]);return this},i.getStyles=function(){for(var e=this,i={},t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return s.forEach(function(t){i[t]=e.getCss(t)}),i},i.setProps=function(t){for(var e in t)"class"===e?this.addClass(""+t[e]):this.node.setAttribute(e,""+t[e]);return this},i.getTransitionDuration=function(){var t=0,e=0,t=this.getCss("transition-duration"),e=this.getCss("transition-delay");return-1<t.indexOf("ms")?t=parseFloat(t):-1<t.indexOf("s")&&(t=1e3*parseFloat(t)),-1<e.indexOf("ms")?e=parseFloat(e):-1<e.indexOf("s")&&(e=1e3*parseFloat(e)),t+e},i.getSize=function(){return{width:this.node.offsetWidth,height:this.node.offsetHeight}},i.getInnerSize=function(t){var e=this.getSize();return e.width-=parseFloat(this.getCss("border-left-width")||0)+parseFloat(this.getCss("border-right-width")||0),e.height-=parseFloat(this.getCss("border-top-width")||0)+parseFloat(this.getCss("border-bottom-width")||0),t||(e.width-=parseFloat(this.getCss("padding-left")||0)+parseFloat(this.getCss("padding-right")||0),e.height-=parseFloat(this.getCss("padding-top")||0)+parseFloat(this.getCss("padding-bottom")||0)),e},i.getScroll=function(){return{top:this.node.scrollTop,left:this.node.scrollLeft}},i.getFullScroll=function(){for(var t=this.node,e={top:0,left:0};e.left+=t.scrollLeft||0,e.top+=t.scrollTop||0,t=t.parentNode,t;);return e},i.getPosition=function(){var t=this.node,e=0,i=0;if(l.defined(u.documentElement.getBoundingClientRect)){var s=this.node.getBoundingClientRect(),n=l.$(u).getScroll(),o=l.browser.getDoc();return{top:s.top+n.y-o.clientTop,left:s.left+n.x-o.clientLeft}}for(;e+=t.offsetLeft||0,i+=t.offsetTop||0,t=t.offsetParent,t&&!/^(?:body|html)$/i.test(t.tagName););return{top:i,left:e}},i.getRect=function(){var t=this.getPosition(),e=this.getSize();return{top:t.top,bottom:t.top+e.height,left:t.left,right:t.left+e.width}},i.changeContent=function(e){try{this.node.innerHTML=e}catch(t){this.node.innerText=e}return this},i.remove=function(){var t=this;return this.node.parentNode&&(t=l.$(this.node.parentNode.removeChild(this.node))),t},i.kill=function(){return l.$A(this.node.childNodes).forEach(function(t){3!==t.nodeType&&8!==t.nodeType&&l.$(t).kill()}),this.remove(),this.clearEvents(),this.$J_UUID&&(l.storage[this.$J_UUID]=null,delete l.storage[this.$J_UUID]),null},i.append=function(t,e){void 0===e&&(e="bottom");var i=this.node.firstChild;return t=l.$(t),"top"===e&&i?this.node.insertBefore(t.node,i):this.node.appendChild(t.node||t),this},i.appendTo=function(t,e){return l.$(t).append(this,e),this},i.getTagName=function(){return this.node.tagName.toLowerCase()},i.attr=function(t,e){var i=this;return l.defined(e)?this.node.setAttribute(t,e):(i=this.node.getAttribute(t))&&"string"===l.typeOf(i)&&""!==i.trim()||(i=null),i},i.removeAttr=function(t){return this.node.removeAttribute(t),this},i.hasClass=function(t){if(this.node.classList)return this.node.classList.contains(t);var e=this.node.className;return this.node.className instanceof SVGAnimatedString&&(e=this.node.className.baseVal),!l.stringHas(t||""," ")&&l.stringHas(e||""," ")},i.hasAttribute=function(t){return this.node.hasAttribute(t)},t}(b),I=function(i){"use strict";function t(t){var e=i.call(this,t)||this,t=t===a?"magicjs-window":"magicjs-document";return e.$J_TYPE=t,e}mt.inheritsLoose(t,i);var e=t.prototype;return e.getSize=function(){return l.browser.touchScreen||l.browser.presto925||l.browser.webkit419?{width:a.innerWidth,height:a.innerHeight}:{width:l.browser.getDoc().clientWidth,height:l.browser.getDoc().clientHeight}},e.getScroll=function(){return{x:a.pageXOffset||l.browser.getDoc().scrollLeft,y:a.pageYOffset||l.browser.getDoc().scrollTop}},e.getFullSize=function(){var t=this.getSize();return{width:Math.max(l.browser.getDoc().scrollWidth,t.width),height:Math.max(l.browser.getDoc().scrollHeight,t.height)}},t}(b);l.Events={};var C=function(){"use strict";function t(t){this.oe=t,this.$J_TYPE="event",this.isQueueStopped=l.$false,this.type=this.oe.type,this.timeStamp=this.oe.timeStamp,this.propertyName=this.oe.propertyName,this.pointerType=this.oe.pointerType}var e=t.prototype;return e.getOriginEvent=function(){return this.oe},e.stop=function(){return this.stopDistribution().stopDefaults()},e.stopDistribution=function(){return this.oe.stopPropagation?this.oe.stopPropagation():this.oe.cancelBubble=!0,this},e.stopDefaults=function(){return this.oe.preventDefault?this.oe.preventDefault():this.oe.returnValue=!1,this},e.stopQueue=function(){return this.isQueueStopped=l.$true,this},e.getClientXY=function(){var t={x:0,y:0},e=/touch/i.test(this.type)?this.oe.changedTouches[0]:this.oe;return l.defined(e)&&(t={x:e.clientX,y:e.clientY}),t},e.getPageXY=function(){var t={x:0,y:0},e=/touch/i.test(this.type)?this.oe.changedTouches[0]:this.oe;return l.defined(e)&&(t={x:e.pageX||e.clientX+l.browser.getDoc().scrollLeft,y:e.pageY||e.clientY+l.browser.getDoc().scrollTop}),t},e.getTarget=function(){for(var t=(t=this.oe.target)||this.oe.srcElement;t&&3===t.nodeType;)t=t.parentNode;return t},e.getRelated=function(){var e=null;switch(this.type){case"mouseover":case"pointerover":case"MSPointerOver":e=(e=this.oe.relatedTarget)||this.oe.fromElement;break;case"mouseout":case"pointerout":case"MSPointerOut":e=(e=this.oe.relatedTarget)||this.oe.toElement;break;default:return e}try{for(;e&&3===e.nodeType;)e=e.parentNode}catch(t){e=null}return e},e.getButton=function(){var t=this.oe.which;return this.oe.which||this.oe.button===d||(t=1&this.oe.button?1:2&this.oe.button?3:4&this.oe.button?2:0),t},e.isTouchEvent=function(){return this.oe.pointerType&&("touch"===this.oe.pointerType||this.oe.pointerType===this.oe.MSPOINTER_TYPE_TOUCH)||/touch/i.test(this.type)},e.isPrimaryTouch=function(){return this.oe.pointerType?("touch"===this.oe.pointerType||this.oe.MSPOINTER_TYPE_TOUCH===this.oe.pointerType)&&this.oe.isPrimary:this.oe instanceof a.TouchEvent&&(1===this.oe.changedTouches.length&&(!this.oe.targetTouches.length||this.oe.targetTouches[0].identifier===this.oe.changedTouches[0].identifier))},e.getPrimaryTouch=function(){var t=null;return this.oe.pointerType?!this.oe.isPrimary||"touch"!==this.oe.pointerType&&this.oe.MSPOINTER_TYPE_TOUCH!==this.oe.pointerType||(t=this.oe):this.oe instanceof a.TouchEvent&&(t=this.oe.changedTouches[0]),t},e.getPrimaryTouchId=function(){var t=null;return this.oe.pointerType?!this.oe.isPrimary||"touch"!==this.oe.pointerType&&this.oe.MSPOINTER_TYPE_TOUCH!==this.oe.pointerType||(t=this.oe.pointerId):this.oe instanceof a.TouchEvent&&(t=this.oe.changedTouches[0].identifier),t},t}();l.Events.MagicEvent=C,l._event_add_="addEventListener",l._event_del_="removeEventListener",l._event_prefix_="",u.addEventListener||(l._event_add_="attachEvent",l._event_del_="detachEvent",l._event_prefix_="on");var x,z,P,N,O,A,T,D,L,R,M,F,k,_,B,U,H,V,b=function(){"use strict";function t(t){this.$J_TYPE="event.custom",this.magicEvent="event"===t.$J_TYPE?t:t.magicEvent,this.type=this.magicEvent.type,this.x=this.magicEvent.oe.x,this.y=this.magicEvent.oe.y,this.button=this.magicEvent.getButton(),this.timeStamp=this.magicEvent.oe.timeStamp,this.relatedTarget=this.magicEvent.getRelated(),this.isQueueStopped=this.magicEvent.isQueueStopped,this.events=[]}var e=t.prototype;return e.getOriginEvent=function(){return this.magicEvent.getOriginEvent()},e.pushToEvents=function(t){this.events.push(t)},e.stop=function(){return this.stopDistribution().stopDefaults()},e.stopDistribution=function(){return this.events.forEach(function(t){try{t.stopDistribution()}catch(t){}}),this},e.stopDefaults=function(){return this.events.forEach(function(t){try{t.stopDefaults()}catch(t){}}),this},e.stopQueue=function(){return this.isQueueStopped=l.$true,this.magicEvent.stopQueue(),this},e.getClientXY=function(){return{x:this.clientX||this.magicEvent.oe.clientX,y:this.clientY||this.magicEvent.oe.clientY}},e.getPageXY=function(){return{x:this.x,y:this.y}},e.getTarget=function(){return this.target||this.magicEvent.oe.target},e.getRelated=function(){return this.relatedTarget},e.getButton=function(){return this.button},e.getOriginalTarget=function(){var t=d;return 0<this.events.length&&(t=this.events[0].getTarget()),t},e.isTouchEvent=function(){return this.magicEvent.isTouchEvent()},e.isPrimaryTouch=function(){return this.magicEvent.isPrimaryTouch()},e.getPrimaryTouch=function(){return this.magicEvent.getPrimaryTouch()},e.getPrimaryTouchId=function(){return this.magicEvent.getPrimaryTouchId()},t}();function W(t){t.stopDefaults()}function q(t){var e,i,s=this.fetch("event:btnclick:options");"dblclick"!==t.type&&t.getButton()!==s.button||(this.fetch("event:btnclick:ignore")?this.del("event:btnclick:ignore"):"mousedown"===t.type?(e=new P(t,this),this.store("event:btnclick:btnclickEvent",e)):"mouseup"===t.type?(e=this.fetch("event:btnclick:btnclickEvent"))&&(i=t.getPageXY(),this.del("event:btnclick:btnclickEvent"),e.pushToEvents(t),t.timeStamp-e.timeStamp<=s.threshold&&Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))<=5&&this.callEvent("btnclick",e),h(u).callEvent("mouseup",t)):"dblclick"===t.type&&(e=new P(t,this),this.callEvent("btnclick",e)))}function Z(t){1===t.getButton()&&(t=new O(t,this,"dragstart"),this.store("event:mousedrag:dragstart",t))}function Y(t){var e=this.fetch("event:mousedrag:dragstart");e&&(t.stopDefaults(),e=new O(t,this,"dragend"),this.del("event:mousedrag:dragstart"),this.callEvent("mousedrag",e))}function $(t){var e=this,i=this.fetch("event:dblbtnclick:event"),s=this.fetch("event:dblbtnclick:options");i?(clearTimeout(i.tm),this.del("event:dblbtnclick:event"),i.timedout||(i.pushToEvents(t),t.stopQueue().stop(),this.callEvent("dblbtnclick",i))):((i=new T(t,this)).tm=setTimeout(function(){i.timedout=!0,t.isQueueStopped=A.$false,e.callEvent("btnclick",t),e.del("event:dblbtnclick:event")},s.threshold+10),this.store("event:dblbtnclick:event",i),t.stopQueue())}function G(t){t.stopDefaults()}function j(t){t.isPrimaryTouch()?(this.store("event:tap:event",new L(t,this)),this.store("event:btnclick:ignore",!0)):this.del("event:tap:event")}function X(t){var e=this.fetch("event:tap:event");e&&t.isPrimaryTouch()&&(this.del("event:tap:event"),e.id===t.getPrimaryTouchId()&&t.timeStamp-e.timeStamp<=200&&Math.sqrt(Math.pow(t.getPrimaryTouch().pageX-e.x,2)+Math.pow(t.getPrimaryTouch().pageY-e.y,2))<=10&&(this.del("event:btnclick:btnclickEvent"),t.stop(),e.pushToEvents(t),this.callEvent("tap",e)))}function Q(t){var e=this,i=this.fetch("event:dbltap:event"),s=this.fetch("event:dbltap:options");i?(clearTimeout(i.tm),this.del("event:dbltap:event"),i.timedout||(i.pushToEvents(t),t.stopQueue().stop(),this.callEvent("dbltap",i))):((i=new M(t,this)).tm=setTimeout(function(){i.timedout=!0,t.isQueueStopped=R.$false,e.callEvent("tap",t)},s.threshold+10),this.store("event:dbltap:event",i),t.stopQueue())}function J(t){t.isPrimaryTouch()&&(t=new k(t,this,"dragstart"),this.store("event:touchdrag:dragstart",t))}function K(t){var e=this.fetch("event:touchdrag:dragstart");e&&e.dragged&&e.id===t.getPrimaryTouchId()&&(e=new k(t,this,"dragend"),this.del("event:touchdrag:dragstart"),this.callEvent("touchdrag",e))}function tt(t){var e=this.fetch("event:touchdrag:dragstart");e&&t.isPrimaryTouch()&&(e.id===t.getPrimaryTouchId()?(!e.dragged&&10<Math.sqrt(Math.pow(t.getPrimaryTouch().pageX-e.x,2)+Math.pow(t.getPrimaryTouch().pageY-e.y,2))&&(e.dragged=!0,this.callEvent("touchdrag",e)),e.dragged&&(e=new k(t,this,"dragmove"),this.callEvent("touchdrag",e))):this.del("event:touchdrag:dragstart"))}function et(t,e){var i=e.x-t.x,t=e.y-t.y;return Math.sqrt(i*i+t*t)}function it(t,e){var i;return(t=t.getOriginEvent()).targetTouches&&t.changedTouches?(i=t.targetTouches||t.changedTouches,i=Array.prototype.slice.call(i)):(i=[],e&&e.forEach(function(t){i.push(t)})),i}function st(t,e,i){var s=!1;return!t.pointerId||"touch"!==t.pointerType||i&&!e.has(t.pointerId)||(e.set(t.pointerId,t),s=!0),s}function nt(t){return t=t.pointerId&&"touch"===t.pointerType?t.pointerId:t.identifier}function ot(t,e){for(var i,s=!1,n=0;n<t.length&&2!==e.length;n++)i=nt(t[n]),_.contains(e,i)||(e.push(i),s=!0);return s}function rt(t,e){var i,s,n,o=!1;if(e)for(n=[],t.forEach(function(t){n.push(nt(t))}),s=n,i=0;i<e.length;i++)if(!_.contains(s,e[i])){e.splice(i,1),o=!0;break}return o}function at(t,e){for(var i=[],s=0;s<t.length&&(!_.contains(e,nt(t[s]))||(i.push(t[s]),2!==i.length));s++);return i}function ht(t){var e=t.fetch("event:pinch:target");e&&e.removeEvent(["touchend"],t.fetch("event:pinch:listeners:document:end")),t.del("event:pinch:target")}function lt(t){var e=t.fetch("event:pinch:cache");e&&e.clear(),t.del("event:pinch:cache")}function ct(t,e){var i,s,n,o,r=e.space;1<t.length?(e.space=(i=t,s=e,n=Array.prototype.slice.call(i),o=Math.abs(n[1].pageX-n[0].pageX),t=Math.abs(n[1].pageY-n[0].pageY),i=Math.min(n[1].pageX,n[0].pageX)+o/2,o=Math.min(n[1].pageY,n[0].pageY)+t/2,s.points=[n[0],n[1]],t=Math.pow(et({x:n[0].pageX,y:n[0].pageY},{x:n[1].pageX,y:n[1].pageY}),2),s.centerPoint={x:i,y:o},s.x=s.centerPoint.x,s.y=s.centerPoint.y,t),e.startSpace||(e.startSpace=e.space),r>e.space?e.zoom=-1:r<e.space?e.zoom=1:e.zoom=0,e.scale=e.space/B):e.points=[]}function dt(t){var e=this.fetch("event:pinch:variables"),i=this.fetch("event:pinch:cache"),s=this.fetch("event:pinch:activepoints");(e=e||_.extend({},_.detach(V))).started&&(t.pointerId&&!st(t,i,!0)||(t.stop(),ct(at(it(t,i),s),e),e=new H(t,this,"pinchmove",e),this.callEvent("pinch",e)))}function ut(t){var e,i,s=this.fetch("event:pinch:cache"),n=this.fetch("event:pinch:activepoints");"mouse"!==t.pointerType&&(n||(n=[],this.store("event:pinch:activepoints",n)),s||(s=new Map,this.store("event:pinch:cache",s)),this.fetch("event:pinch:target")||(this.store("event:pinch:target",U(t.getTarget())),U(t.getTarget()).addEvent(["touchend"],this.fetch("event:pinch:listeners:document:end"),1)),st(t,s),i=it(t,s),ot(i,n),2===i.length&&(e=this.fetch("event:pinch:pinchstart"),s=(s=this.fetch("event:pinch:variables"))||_.extend({},_.detach(V)),ct(at(i,n),s),e||(e=new H(t,this,"pinchstart",s),this.store("event:pinch:pinchstart",e),this.store("event:pinch:variables",s),B=s.space,this.callEvent("pinch",e),s.started=!0)))}function pt(t){var e,i,s,n,o,r=this.fetch("event:pinch:cache");"mouse"!==t.pointerType&&(!t.pointerId||r&&r.has(t.pointerId))&&(e=this.fetch("event:pinch:pinchstart"),i=this.fetch("event:pinch:variables"),s=this.fetch("event:pinch:activepoints"),n=it(t,r),o=r,(r=t).pointerId&&"touch"===r.pointerType&&o&&o.has(r.pointerId)&&o.delete(r.pointerId),r=rt(n,s),e&&i&&i.started&&r&&s&&(r&&ot(n,s),r="pinchend",1<n.length?r="pinchresize":(this.del("event:pinch:pinchstart"),this.del("event:pinch:variables"),this.del("event:pinch:activepoints"),lt(this),ht(this)),ct(at(n,s),i),e=new H(t,this,r,i),this.callEvent("pinch",e)))}return l.Events.Custom=b,l.Events.handlers={},x=t,"interactive"===u.readyState||"complete"===u.readyState?setTimeout(function(){return x.browser.onready()},0):(x.$(u).addEvent("readystatechange",function(t){"interactive"!==t.getTarget().readyState&&"complete"!==t.getTarget().readyState||x.browser.onready()}),x.$(u).addEvent("DOMContentLoaded",x.browser.onready),x.$(a).addEvent("load",x.browser.onready)),P=function(n){"use strict";function t(t,e){var i=n.call(this,t)||this,s=t.getPageXY();return i.type="btnclick",i.x=s.x,i.y=s.y,i.clientX=t.oe.clientX,i.clientY=t.oe.clientY,i.target=e.node,i.pushToEvents(t),i}return mt.inheritsLoose(t,n),t}((z=t).Events.Custom),N={threshold:300,button:1},C={add:function(t){this.store("event:btnclick:options",z.extend(z.detach(N),t||{})),this.addEvent("mousedown",q,1),this.addEvent("mouseup",q,1),this.addEvent("click",W,1)},remove:function(){this.removeEvent("mousedown",q),this.removeEvent("mouseup",q),this.removeEvent("click",W)}},z.Events.handlers.btnclick=C,O=function(o){"use strict";function t(t,e,i){var s=o.call(this,t)||this,n=t.getPageXY();return s.x=n.x,s.y=n.y,s.type="mousedrag",s.clientX=t.clientX,s.clientY=t.clientY,s.target=e.node,s.state=i,s.dragged=!1,s.pushToEvents(t),s}return mt.inheritsLoose(t,o),t}((b=t).Events.Custom),C={add:function(){var t=function(t){var e=this.fetch("event:mousedrag:dragstart");e&&(t.stopDefaults(),e.dragged||(e.dragged=!0,this.callEvent("mousedrag",e)),e=new O(t,this,"dragmove"),this.callEvent("mousedrag",e))}.bind(this),e=Y.bind(this);this.addEvent("mousedown",Z,1),this.addEvent("mouseup",Y,1),h(u).addEvent("mousemove",t,1),h(u).addEvent("mouseup",e,1),this.store("event:mousedrag:listeners:document:move",t),this.store("event:mousedrag:listeners:document:end",e)},remove:function(){function t(){}this.removeEvent("mousedown",Z),this.removeEvent("mouseup",Y),h(u).removeEvent("mousemove",this.fetch("event:mousedrag:listeners:document:move")||t),h(u).removeEvent("mouseup",this.fetch("event:mousedrag:listeners:document:end")||t),this.del("event:mousedrag:listeners:document:move"),this.del("event:mousedrag:listeners:document:end")}},b.Events.handlers.mousedrag=C,T=function(n){"use strict";function t(t,e){var i=n.call(this,t)||this,s=t.getPageXY();return i.x=s.x,i.y=s.y,i.type="dblbtnclick",i.clientX=t.clientX,i.clientY=t.clientY,i.target=e.node,i.timedout=!1,i.tm=null,i.pushToEvents(t),i}return mt.inheritsLoose(t,n),t}((A=t).Events.Custom),D={threshold:200},b={add:function(t){this.store("event:dblbtnclick:options",A.extend(A.detach(D),t||{})),this.addEvent("btnclick",$,1)},remove:function(){this.removeEvent("btnclick",$)}},A.Events.handlers.dblbtnclick=b,L=function(n){"use strict";function t(t,e){var i=n.call(this,t)||this,s=t.getPrimaryTouch();return i.type="tap",i.id=s.pointerId||s.identifier,i.x=s.pageX,i.y=s.pageY,i.pageX=s.pageX,i.pageY=s.pageY,i.clientX=s.clientX,i.clientY=s.clientY,i.button=0,i.target=e.node,i.pushToEvents(t),i}return mt.inheritsLoose(t,n),t}((C=t).Events.Custom),b={add:function(t){this.addEvent(["touchstart","pointerdown"],j,1),this.addEvent(["touchend","pointerup"],X,1),this.addEvent("click",G,1)},remove:function(){this.removeEvent(["touchstart","pointerdown"],j),this.removeEvent(["touchend","pointerup"],X),this.removeEvent("click",G)}},C.Events.handlers.tap=b,M=function(s){"use strict";function t(t,e){var i=s.call(this,t)||this;return i.type="dbltap",i.x=t.x,i.y=t.y,i.clientX=t.clientX,i.clientY=t.clientY,i.target=e.node,i.timedout=!1,i.tm=null,i.pushToEvents(t),i}return mt.inheritsLoose(t,s),t}((R=t).Events.Custom),F={threshold:300},C={add:function(t){this.store("event:dbltap:options",R.extend(R.detach(F),t||{})),this.addEvent("tap",Q,1)},remove:function(){this.removeEvent("tap",Q)}},R.Events.handlers.dbltap=C,k=function(o){"use strict";function t(t,e,i){var s=o.call(this,t)||this,n=t.getPrimaryTouch();return s.type="touchdrag",s.id=n.pointerId||n.identifier,s.clientX=n.clientX,s.clientY=n.clientY,s.pageX=n.pageX,s.pageY=n.pageY,s.x=n.pageX,s.y=n.pageY,s.button=0,s.target=e.node,s.state=i,s.dragged=!1,s.pushToEvents(t),s}return mt.inheritsLoose(t,o),t}((b=t).Events.Custom),C={add:function(){var t=tt.bind(this),e=K.bind(this);this.addEvent(["touchstart","pointerdown"],J,1),this.addEvent(["touchend","pointerup"],K,1),this.addEvent(["touchmove","pointermove"],tt,1),this.store("event:touchdrag:listeners:document:move",t),this.store("event:touchdrag:listeners:document:end",e),h(u).addEvent("pointermove",t,1),h(u).addEvent("pointerup",e,1)},remove:function(){function t(){}this.removeEvent(["touchstart","pointerdown"],J),this.removeEvent(["touchend","pointerup"],K),this.removeEvent(["touchmove","pointermove"],tt),h(u).removeEvent("pointermove",this.fetch("event:touchdrag:listeners:document:move")||t,1),h(u).removeEvent("pointerup",this.fetch("event:touchdrag:listeners:document:end")||t,1),this.del("event:touchdrag:listeners:document:move"),this.del("event:touchdrag:listeners:document:end")}},b.Events.handlers.touchdrag=C,B=null,U=(_=t).$,H=function(o){"use strict";function t(t,e,i,s){var n=o.call(this,t)||this;return n.type="pinch",n.target=e.node,n.state=i,n.x=s.x,n.y=s.y,n.scale=s.scale,n.space=s.space,n.zoom=s.zoom,n.state=i,n.centerPoint=s.centerPoint,n.points=s.points,n.pushToEvents(t),n}return mt.inheritsLoose(t,o),t}(_.Events.Custom),V={x:0,y:0,space:0,scale:1,zoom:0,startSpace:0,startScale:1,started:!1,dragged:!1,points:[],centerPoint:{x:0,y:0}},C={add:function(t){B||((i=_.W.getSize()).width=Math.min(i.width,i.height),i.height=i.width,B=Math.pow(et({x:0,y:0},{x:i.width,y:i.height}),2));var e=dt.bind(this),i=pt.bind(this);this.addEvent(["touchstart","pointerdown"],ut,1),this.addEvent(["pointerup"],pt,1),this.addEvent(["touchmove","pointermove"],dt,1),this.store("event:pinch:listeners:document:move",e),this.store("event:pinch:listeners:document:end",i),U(u).addEvent("pointermove",e,1),U(u).addEvent("pointerup",i,1)},remove:function(){function t(){}this.removeEvent(["touchstart","pointerdown"],ut),this.removeEvent(["pointerup"],pt),this.removeEvent(["touchmove","pointermove"],dt),U(u).removeEvent("pointermove",this.fetch("event:pinch:listeners:document:move")||t,1),U(u).removeEvent("pointerup",this.fetch("event:pinch:listeners:document:end")||t,1),this.del("event:pinch:listeners:document:move"),this.del("event:pinch:listeners:document:end"),ht(this),lt(this),this.del("event:pinch:variables"),this.del("event:pinch:activepoints"),this.del("event:pinch:pinchstart")}},_.Events.handlers.pinch=C,function(r){var t="wheel";"onwheel"in u||8<r.browser.ieMode||(t="mousewheel");function a(){h=null}function e(t){var e,i=0,s=0,n=0,o=0;(e=t.getOriginEvent()).detail&&(n=-1*t.detail),e.wheelDelta!==d&&(n=e.wheelDelta),e.wheelDeltaY!==d&&(n=e.wheelDeltaY),e.wheelDeltaX!==d&&(s=-1*e.wheelDeltaX),e.deltaY&&(n=-1*e.deltaY),e.deltaX&&(s=e.deltaX),0===n&&0===s||(i=0===n?s:n,o=Math.max(Math.abs(n),Math.abs(s)),(!h||o<h)&&(h=o),o=0<i?"floor":"ceil",i=Math[o](i/h),s=Math[o](s/h),n=Math[o](n/h),l&&clearTimeout(l),l=setTimeout(a,200),(s=new c(t,this,i,s,n,0,h)).isMouse=(n=h,e=e.deltaMode||0,50<n||1===e&&!("win"===r.browser.platform&&n<1)||n%12==0||n%4.000244140625==0),this.callEvent("mousescroll",s))}var h,l,c=function(l){"use strict";function t(t,e,i,s,n,o,r){var a=l.call(this,t)||this,h=t.getPageXY();return a.x=h.x,a.y=h.y,a.type="mousescroll",a.target=e.node,a.delta=i||0,a.deltaX=s||0,a.deltaY=n||0,a.deltaZ=o||0,a.deltaFactor=r||0,a.deltaMode=t.deltaMode||0,a.isMouse=!1,a.pushToEvents(t),a}return mt.inheritsLoose(t,l),t}(r.Events.Custom),i={add:function(){this.addEvent(t,e,1)},remove:function(){this.removeEvent(t,e,1)}};r.Events.handlers.mousescroll=i}(t),l.W=l.$(a),l.D=l.$(u),l.U=d,l.DPPX=2<=window.devicePixelRatio?2:1,t}();return function(r){if(!r)throw"MagicJS not found";var s,i,t;r.FX||(s=r.$,i={linear:"linear",sineIn:"easeInSine",sineOut:"easeOutSine",expoIn:"easeInExpo",expoOut:"easeOutExpo",quadIn:"easeInQuad",quadOut:"easeOutQuad",cubicIn:"easeInCubic",cubicOut:"easeOutCubic",backIn:"easeInBack",backOut:"easeOutBack",elasticIn:function(t,e){return e=e||[],Math.pow(2,10*--t)*Math.cos(20*t*Math.PI*(e[0]||1)/3)},elasticOut:function(t,e){return 1-i.elasticIn(1-t,e)},bounceIn:function(t){for(var e=0,i=1;;e+=i,i/=2)if((7-4*e)/11<=t)return i*i-Math.pow((11-6*e-11*t)/4,2)},bounceOut:function(t){return 1-i.bounceIn(1-t)},none:function(t){return 0}},t=function(){"use strict";function e(t,e){var i=this;this.styles=null,this.cubicBezier=null,this.easeFn=null,this.state=0,this.pStyles=[],this.alternate=!1,this.continuous=!1,this.startTime=null,this.finishTime=null,this.options={fps:60,duration:600,transition:"ease",cycles:1,direction:"normal",onStart:function(){},onComplete:function(){},onBeforeRender:function(){},onAfterRender:function(){},forceAnimation:!1,roundCss:!1},this.els=[],Array.isArray(t)||(t=[t]),t.forEach(function(t){t&&i.els.push(s(t))}),this.options=r.extend(this.options,e),this.timer=!1,this.setTransition(this.options.transition),"string"===r.typeOf(this.options.cycles)&&(this.options.cycles="infinite"===this.options.cycles?1/0:parseInt(this.options.cycles,10)||1)}e.getTransition=function(){return i};var t=e.prototype;return t.setTransition=function(t){this.options.transition=t,this.easeFn=e.cubicBezierAtTime;t=i[this.options.transition]||this.options.transition;"function"===r.typeOf(t)?this.easeFn=t:this.cubicBezier=this.parseCubicBezier(t)||this.parseCubicBezier("ease")},t.start=function(t){var e,i,s=this,n=/\%$/;if(2===this.state)return this;this.state=1,this.cycle=0,this.alternate=r.contains(["alternate","alternate-reverse"],this.options.direction),this.continuous=r.contains(["continuous","continuous-reverse"],this.options.direction),t=t||{},Array.isArray(t)||(t=[t]),this.styles=t;var o=this.styles.length;for(this.pStyles=new Array(o),i=0;i<o;i++)for(e in this.pStyles[i]={},this.styles[i])n.test(this.styles[i][e][0])&&(this.pStyles[e]=!0),r.contains(["reverse","alternate-reverse","continuous-reverse"],this.options.direction)&&this.styles[i][e].reverse();return this.startTime=r.now(),this.finishTime=this.startTime+this.options.duration,this.options.onStart(),0===this.options.duration?(this.render(1),this.options.onComplete(this.els.length<2?this.els[0]:this.els)):(this.state=2,!this.options.forceAnimation&&r.browser.features.requestAnimationFrame?this.timer=r.browser.requestAnimationFrame.call(r.W.node,this.loop.bind(this)):this.timer=setInterval(function(){s.loop()},Math.round(1e3/this.options.fps))),this},t.stopAnimation=function(){this.timer&&(!this.options.forceAnimation&&r.browser.features.requestAnimationFrame&&r.browser.cancelAnimationFrame?r.browser.cancelAnimationFrame.call(r.W.node,this.timer):clearInterval(this.timer),this.timer=!1)},t.stop=function(t){return r.contains([0,3],this.state)||(r.defined(t)||(t=!1),this.stopAnimation(),this.state=3,t&&(this.render(1),this.options.onComplete(this.els.length<2?this.els[0]:this.els))),this},t.loop=function(){var t,e=r.now(),i=(e-this.startTime)/this.options.duration,s=Math.floor(i);if(e>=this.finishTime&&s>=this.options.cycles)return this.stopAnimation(),this.render(1),this.options.onComplete(this.els.length<2?this.els[0]:this.els),this;if(this.alternate&&this.cycle<s)for(t=0;t<this.styles.length;t++)for(var n in this.styles[t])this.styles[t][n].reverse();this.cycle=s,!this.options.forceAnimation&&r.browser.features.requestAnimationFrame&&(this.timer=r.browser.requestAnimationFrame.call(r.W.node,this.loop.bind(this))),this.render((this.continuous?s:0)+this.easeFn(i%1,this.options.duration,this.cubicBezier))},t.render=function(t){for(var e,i,s=[],n=this.els.length,o=0;o<n;o++)s.push(this.renderOverLoad(t,this.els[o],this.styles[o],this.pStyles[o]));e=this.els,i=s,n<2&&(e=this.els[0],i=s[0]),this.options.onBeforeRender(i,e),this.set(s),this.options.onAfterRender(i,e)},t.renderOverLoad=function(t,e,i,s){var n,o={};for(n in i)"opacity"===n?o[n]=Math.round(100*this.calc(i[n][0],i[n][1],t))/100:(o[n]=this.calc(i[n][0],i[n][1],t),s[n]&&(o[n]+="%"));return o},t.calc=function(t,e,i){return t=parseFloat(t),((e=parseFloat(e))-t)*i+t},t.set=function(t){for(var e=0;e<this.els.length;e++)this.els[e].setCss(t[e]);return this},t.parseCubicBezier=function(t){var e,i=null;if("string"!==r.typeOf(t))return null;switch(t){case"linear":i=s([0,0,1,1]);break;case"ease":i=s([.25,.1,.25,1]);break;case"ease-in":i=s([.42,0,1,1]);break;case"ease-out":i=s([0,0,.58,1]);break;case"ease-in-out":i=s([.42,0,.58,1]);break;default:if((t=t.replace(/\s/g,"")).match(/^cubic-bezier\((?:-?[0-9\.]{0,}[0-9]{1,},){3}(?:-?[0-9\.]{0,}[0-9]{1,})\)$/))for(e=(i=t.replace(/^cubic-bezier\s*\(|\)$/g,"").split(",")).length-1;0<=e;e--)i[e]=parseFloat(i[e])}return s(i)},e.cubicBezierAtTime=function(t,e,i){function l(t){return((c*t+d)*t+u)*t}function s(t,e){for(var i,s,n,o,r=function(t){return 0<=t?t:0-t},a=t,h=0;h<8;h++){if(r(n=l(a)-t)<e)return a;if(r(o=(3*c*(o=a)+2*d)*o+u)<1e-6)break;a-=n/o}if((a=t)<(i=0))return i;if((s=1)<a)return s;for(;i<s;){if(r((n=l(a))-t)<e)return a;n<t?i=a:s=a,a=.5*(s-i)+i}return a}var n,c=0,d=0,u=0,o=0,r=0,a=0,u=3*i[0],d=3*(i[2]-i[0])-u,c=1-u-d,a=3*i[1],r=3*(i[3]-i[1])-a,o=1-a-r;return n=s(t,n=1/(200*e)),((o*n+r)*n+a)*n},e}(),r.FX=t)}(t),function(r){if(!r)throw"MagicJS not found";var n,o,a,h,l,c,t;r.Options||(r.$,n=null,o={boolean:1,array:2,number:3,function:4,url:5,string:100},a={boolean:function(t,e,i){if("boolean"!==r.typeOf(e)){if(i||"string"!==r.typeOf(e))return!1;if(!/^(true|false)$/.test(e))return!1;e=!e.replace(/true/i,"").trim()}return!(t.hasOwnProperty("enum")&&!r.contains(t.enum,e))&&(n=e,!0)},url:function(t,e,i){var s=!1;return"string"!==r.typeOf(e)||!/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/i.test(e)||t.hasOwnProperty("enum")&&!r.contains(t.enum,e)||(s=!0),s},string:function(t,e,i){return"string"===r.typeOf(e)&&(!(t.hasOwnProperty("enum")&&!r.contains(t.enum,e))&&(n=""+e,!0))},number:function(t,e,i){var s="string"===r.typeOf(e)&&/%$/.test(e);return(!i||!1!==typeof e)&&(e=parseFloat(e),!isNaN(e)&&(isNaN(t.minimum)&&(t.minimum=Number.NEGATIVE_INFINITY),isNaN(t.maximum)&&(t.maximum=Number.POSITIVE_INFINITY),!(t.hasOwnProperty("enum")&&!r.contains(t.enum,e))&&(!(t.minimum>e||e>t.maximum)&&(n=s?e+"%":e,!0))))},array:function(t,e,i){if("string"===r.typeOf(e))try{e=e.replace(/'/g,'"'),e=r.W.node.JSON.parse(e)}catch(t){return!1}return"array"===r.typeOf(e)&&(n=e,!0)},function:function(t,e,i){return"function"===r.typeOf(e)&&(n=e,!0)}},h=function(t,e,i){var s=t.hasOwnProperty("oneOf")?t.oneOf:[t];if("array"!==r.typeOf(s))return!1;for(var n=0,o=s.length-1;n<=o;n++)if(a[s[n].type](s[n],e,i))return!0;return!1},l=function(t){var n={},o=function(t,e){var i,s;for(i in t)s=e.slice(0),"object"!==r.typeOf(t[i])||function(t){var e,i=!1;for(e in t)if("defaults"===e){i=!0;break}return i}(t[i])?(s.push(i),n[s.join(".")]=t[i]):(s.push(i),o(t[i],s))};return o(t,[]),n},c=function(t){return r.camelize((t+"").trim())},t=function(){"use strict";function t(t){this.schema={},this.options={},this.parseSchema(t)}var e=t.prototype;return e.parseSchema=function(t,e){var i,s;for(i in t=l(t))if(t.hasOwnProperty(i)&&(s=c(i),!this.schema.hasOwnProperty(s)||e)){if(this.schema[s]=function(t){var e,i,s,n;if(t.hasOwnProperty("oneOf"))for(s=t.oneOf.length,e=0;e<s;e++)for(i=e+1;i<s;i++)o[t.oneOf[e].type]>o[t.oneOf[i].type]&&(n=t.oneOf[e],t.oneOf[e]=t.oneOf[i],t.oneOf[i]=n);return t}(t[i]),!function(t){var e=t.hasOwnProperty("oneOf")?t.oneOf:[t];if("array"!==r.typeOf(e))return!1;for(var i=e.length-1;0<=i;i--){if(!e[i].type||!o.hasOwnProperty(e[i].type))return!1;if(r.defined(e[i].enum)){if("array"!==r.typeOf(e[i].enum))return!1;for(var s=e[i].enum.length-1;0<=s;s--)if(!a[e[i].type]({type:e[i].type},e[i].enum[s],!0))return!1}}return!(t.hasOwnProperty("defaults")&&!h(t,t.defaults,!0))}(this.schema[s]))throw"Incorrect definition of the '"+i+"' parameter in "+t;r.defined(this.options[s])&&this.checkValue(s,this.options[s])||(this.options[s]=r.U)}},e.set=function(t,e){t=c(t),"string"===r.typeOf(e)&&(e=e.trim()),this.schema.hasOwnProperty(t)&&(n=e,h(this.schema[t],e)&&(this.options[t]=n),n=null)},e.get=function(t){if(t=c(t),this.schema.hasOwnProperty(t))return r.defined(this.options[t])?this.options[t]:this.schema[t].defaults},e.fromJSON=function(t){for(var e in t=l(t))this.set(e,t[e])},e.getJSON=function(){var t,e=r.extend({},this.options);for(t in e)e[t]===r.U&&this.schema[t].defaults!==r.U&&(e[t]=this.schema[t].defaults);return function(t){var e,o={};for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&function(t,i){var s=o,n=t.length;""===t[n-1].trim()&&t.splice(n-1,1),t.forEach(function(t,e){e===n-1?s[t]=i:(s[t]||(s[t]={}),s=s[t])})}(e.split("."),t[e]);return o}(e)},e.fromString=function(t,s){var e=this,n={};s=s||{};return t.split(";").forEach(function(t){!function(t){var e,i=!0;for(e in t=t.trim(),s)if(Object.prototype.hasOwnProperty.call(s,e)&&s[e].test&&s[e].test(t)){n[e]||(n[e]=""),n[e]+=t+";",i=!1;break}return i}(t)||(t=t.split(":"),e.set(t.shift().trim(),t.join(":")))}),n},e.checkValue=function(t,e){var i=!1;return t=c(t),"string"===r.typeOf(e)&&(e=e.trim()),this.schema.hasOwnProperty(t)&&(n=e,h(this.schema[t],e)&&(i=!0),n=null),i},e.exists=function(t){return t=c(t),this.schema.hasOwnProperty(t)},e.isset=function(t){return t=c(t),this.exists(t)&&r.defined(this.options[t])},e.remove=function(t){t=c(t),this.exists(t)&&(delete this.options[t],delete this.schema[t])},t}(),r.Options=t)}(t),t}),Sirv.define("globalVariables",["bHelpers","magicJS"],function(t,e){e.$;return{smv:"smv",CSS_RULES_ID:"sirv-core-css-reset",SIRV_HTTP_PROTOCOL:"https:",SIRV_ASSETS_URL:"",SIRV_BASE_URL:"",CSS_CURSOR_ZOOM_IN:"smv-cursor-zoom-in",CSS_CURSOR_FULSCREEN_ALWAYS:"smv-cursor-fullscreen-always",REG_URL_QUERY_STRING:/([^\?]+)\??([^\?]+)?/,FULLSCREEN_VIEWERS_IDs_ARRAY:[],CUSTOM_DEPENDENCIES:null,MIN_RATIO:1.2,SLIDE_SHOWN_BY:{NONE:0,AUTOPLAY:1,USER:2,INIT:3,ENABLE:4},VIDEO:{NONE:0,PLAY:1,PAUSE:2,PLAYING:3},FULLSCREEN:{CLOSED:0,OPENING:1,OPENED:2,CLOSING:3},APPEARANCE:{HIDDEN:0,SHOWING:1,SHOWN:2,HIDING:3},SLIDE:{TYPES:{NONE:0,HTML:1,IMAGE:2,PANZOOM:3,ZOOM:4,SPIN:5,VIDEO:6},NAMES:["none","html","image","panzoom","zoom","spin","video"]}}}),Sirv.define("globalFunctions",["bHelpers","magicJS","globalVariables","helper","Promise!"],function(t,e,r,h,l){function i(t){var e=t.replace(/^(https?:)?/,"https:");return/^(http(s)?:)?\/\/[^/]+?sirv\.localhost(:\d+)?\/.*$/i.test(t)&&(e=t.replace(/^(https?:)?/,"http:")),e}function s(t){return t.replace(/^((?:https?:)?\/\/)([^/].*)/,function(t,e,i){return e+i.split("/").map(function(t,e){return 0===e?t:function(t){try{t=decodeURIComponent(t)}catch(t){}return encodeURIComponent(t)}(t)}).join("/")})}var a=e,c=a.$,n={rootDOM:new(function(){"use strict";function i(){this.CSSMap={},this.sirvNodesMap=new WeakMap,this.rootNodesMap=new Map,this.rootNodes=[],this.sirvCSSSrc="viewer.full.css",this.mainCSSID="sirv-stylesheet-sirv"}i.getShadowDOM=function(t){var e=!1,t=(t=c(t).node).parentNode;return t&&window.ShadowRoot&&(e=t instanceof window.ShadowRoot?t:i.getShadowDOM(t)),e};var t=i.prototype;return t.rootContains=function(e){return this.rootNodes.some(function(t){return t===a.D.node&&(t=a.D.node.body),!!t&&t.contains(e)})},t.addModuleCSSByName=function(t,e,i,s){this.CSSMap[t]||(this.CSSMap[t]={functionOfCssString:e,id:i,position:s})},t.getRootNode=function(t){t=c(t).node;var e=i.getShadowDOM(t),t=e||a.D.node;return this.rootNodesMap.has(t)||(this.rootNodesMap.set(t,{isResetCSSAdded:!1,isVideoCSSAdded:!1,isSirvAdAdded:!1,styles:{},modulesCss:{},isShadowDOM:!!e}),this.rootNodes.push(t)),t},t.attachNode=function(t){var e;t=c(t).node,this.sirvNodesMap.has(t)||(e=this.getRootNode(t),this.sirvNodesMap.set(t,e))},t.detachNode=function(t){return t=c(t).node,this.sirvNodesMap.delete(t)},t.addCSSStringToHtml=function(){this.addCSSString(a.D.node.head||a.D.node.body)},t.addCSSString=function(t){var i=this;t=t||(a.D.node.head||a.D.node.body),t=c(t).node;var t=this.sirvNodesMap.get(t),s=this.rootNodesMap.get(t),n=null;s.isShadowDOM&&(n=t),h.objEach(this.CSSMap,function(t,e){s.modulesCss[t]||(s.modulesCss[t]=1,h.addCss(e.functionOfCssString(),e.id,e.position,n,"#"+i.mainCSSID))})},t.addMainStyleToHtml=function(){this.resetGlobalCSS(a.D.node.head||a.D.node.body),this.addStyle(a.D.node.head||a.D.node.body,r.SIRV_ASSETS_URL+this.sirvCSSSrc,this.mainCSSID,"#"+r.CSS_RULES_ID)},t.addMainStyle=function(t){return this.addMainStyleToHtml(),this.resetGlobalCSS(t),this.addStyle(t,r.SIRV_ASSETS_URL+this.sirvCSSSrc,this.mainCSSID,"#"+r.CSS_RULES_ID)},t.addStyle=function(t,s,n,o){t=c(t).node;var r=this.sirvNodesMap.get(t),a=this.rootNodesMap.get(r);return a.styles[n]||(a.styles[n]=new l(function(t,e){var i=null;a.isShadowDOM&&(i=r),h.loadStylesheet(s,n,i,o).then(t).catch(e)})),a.styles[n]},t.resetGlobalCSS=function(t){t=t||(a.D.node.head||a.D.node.body),t=c(t).node;var e=this.sirvNodesMap.get(t),i=this.rootNodesMap.get(e);i.isResetCSSAdded||(i.isResetCSSAdded=!0,t=null,i.isShadowDOM&&(t=e),a.addCSS(".smv",{display:"flex !important"},r.CSS_RULES_ID,t),a.addCSS(".smv.smv-selectors-top",{"flex-direction":"column-reverse"},r.CSS_RULES_ID,t),a.addCSS(".smv.smv-selectors-left",{"flex-direction":"row-reverse"},r.CSS_RULES_ID,t),a.addCSS(".smv.smv-selectors-right",{"flex-direction":"row"},r.CSS_RULES_ID,t),a.addCSS(".smv.smv-selectors-bottom",{"flex-direction":"column"},r.CSS_RULES_ID,t),a.addCSS(".smv-slides-box",{"flex-grow":1,"flex-shrink":1},r.CSS_RULES_ID,t),a.addCSS("figure > .Sirv",{"vertical-align":"top"},r.CSS_RULES_ID,t),a.addCSS(".Sirv > iframe, .Sirv > video",{display:"none"},r.CSS_RULES_ID,t),a.addCSS(":not(.smv) smv-thumbnail",{display:"none"},r.CSS_RULES_ID,t),a.addCSS(".Sirv, .Sirv .smv-component",{"-webkit-box-sizing":"border-box !important","-moz-box-sizing":"border-box !important","box-sizing":"border-box !important"},r.CSS_RULES_ID,t),a.addCSS("div.Sirv, div.Sirv div.smv-component, figure.Sirv, div.smv-component",{width:"100%",height:"100%",margin:0,"text-align":"center"},r.CSS_RULES_ID,t),a.addCSS("div.Sirv",{"max-height":"100%","block-size":"inherit"},r.CSS_RULES_ID,t),a.addCSS(".Sirv img",{width:"100%",height:"100%"},r.CSS_RULES_ID,t),a.addCSS("img.Sirv, .Sirv img",{"max-width":"100%"},r.CSS_RULES_ID,t),a.addCSS("img.Sirv:not([width]):not([height])",{width:"100%"},r.CSS_RULES_ID,t),a.addCSS("img.Sirv",{display:"inline-block","font-size":0,"line-height":0},r.CSS_RULES_ID,t),a.addCSS(".Sirv.smv-bg-image.smv-bg-contain, .Sirv.smv-bg-image.smv-bg-cover",{"background-repeat":"no-repeat","background-position":"center"},r.CSS_RULES_ID,t),a.addCSS(".Sirv.smv-bg-image.smv-bg-contain",{"background-size":"contain"},r.CSS_RULES_ID,t),a.addCSS(".Sirv.smv-bg-image.smv-bg-cover",{"background-size":"cover"},r.CSS_RULES_ID,t),a.addCSS("img.Sirv:not([src]), img.Sirv.sirv-image-loading:not([src])",{opacity:"0"},r.CSS_RULES_ID,t),a.addCSS("img.Sirv.sirv-image-loaded",{opacity:"1",transition:"opacity 0.5s linear"},r.CSS_RULES_ID,t))},t.showSirvAd=function(t,e,i,s){var n,o;/^my.sirv.(com|localhost)$/i.test(a.D.node.location.hostname)||(t=t||(a.D.node.head||a.D.node.body),t=c(t).node,n=this.sirvNodesMap.get(t),t=null,this.rootNodesMap.get(n).isShadowDOM&&(t=n),n="sirvCR"+Math.floor(Math.random()*a.now()),a.addCSS("#"+n,{display:"inline-block !important;",visibility:"visible !important;","z-index":"2147483647 !important;",width:"auto !important;",height:"auto !important;","max-width":"none !important;","max-height":"none !important;",transform:"none !important;",left:"auto !important;",top:"auto !important;",bottom:"8 !important;",right:"8 !important;",margin:"auto !important",padding:"0 !important",opacity:"1 !important;"},r.CSS_RULES_ID,t),a.addCSS("#crSirv"+n+" > img",{display:"inline-block !important;",visibility:"visible !important;",position:"static !important;",width:"90px !important;",height:"18px !important;","max-width":"none !important;","max-height":"none !important;",transform:"none !important;",margin:"0 !important",padding:"0 !important"},r.CSS_RULES_ID,t),(o=a.$new("a",{id:n,href:i,target:"_blank"})).attr("style","position: absolute !important; opacity: 1 !important"),o.setCss({display:"inline-block",overflow:"hidden",visibility:"visible","font-size":0,"font-weight":"normal","font-family":"sans-serif",bottom:8,right:8,margin:"auto",width:"auto",height:"auto",transform:"none","z-index":2147483647}).appendTo(e).addEvent("tap btnclick",function(t){t.stopDistribution(),a.W.node.open(o.attr("href"))}).append(a.$new("img",{width:90,height:18,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAAkCAYAAAAgqxBxAAAMJ0lEQVR4nO1ce5AUxRnv4yH4wCfREogIqFHOI94uVoSNMnFvZ6e/30+TGB/BRFPRUomWRiMKd2tUTKEWKlGSCBKCxtJSSKkxKLhnKqaiJvgOYjSAAhdQ8EDkIYgm8fLH9hzNZGZn9+68o8r5VU3V7fbXX389+5vu79FzSiVIkCBBggQJegiu6w4DMIlkkeRKklsBbCG5EsAzJKeJyCnldDiOs5/neaO6y+YECUJBciaAz0i2xV0AFmut+wV1iMhoAK1GZqnjOAN7Yi4JvsDQWu9PckkIaTcBWAbgHZI7Am1vKqV6BXUBWBzQ87MemFKCLzJIvhIg671a63Gu6+7ryziOMxBAA4DpADYDuDRC14qArl9130wSfOEhIpcFCPjduD75fP5gx3H2C2sDcJal62MAx3W91QkShKMGwDqL0DO7QimAsQAubGhoOKIr9CVIUBHy+XxtYHUe3tM2JUjQYWitT7PI/EFP25MgQadA8kxrhd7mOE6fnrYpk8kMEJHRnud9padtSRADkm0NDQ0HRLU3NDQcAWBzd9njed7XbZdDa31SZ3WKSB2AR80133GcA+1213W/bLXf5H+fzWYPATAHwAdmx1jjt+Xz+YMBPALgIZIPxxV2gkhNLp6TamqeV18oPlxfKM7p7BwTGOxphM5kMgNI/tdyO57urE7bjTHXYLsdwHFW2/umz5BAcNoGYIvfx3GcPradJP9cjU2pQnFdqtDclio0t9UXis93do4JDPY0QiulFIB7AkS6Kb5XNLTWp1r6Pslms4fZ7SQHW+RcaL5bGXgI/gNgmVKqxu8nIj+xZTKZzIBK7Plq45PH+GROFZrbUpOL6c7ML4GFPZHQjuMcCODfAUI9lsvlBnVEXxyhXdc9lOQnfgGHZKP1MP0GwNhcLjcon88frqxKZD6fPzzgHp1TiT31heYpu1bn5tWVTqKfiAw1N6EmTh7AQQCGl/txuwqmwjU87NxBEFrrfp7nHWl+hOA8anK53CARGVpB8FRDcrCIDLXHrZbQ/n0123bsfe0oAJwccl5jB8lpWush1eiKI3Q2mz3EKqOvB7DTkPkHFdj5nKV7QSX2pJqKS9tX56ZiIcrokQCeBnAQybnGsKUAVgFYJyITwvp5npcl+aI5vLKE5EZzyCVjGV0AMCOsP8lbSD4c0fZrABf6n0UkZ8ZoIfmqGWt2Op3ex+4H4HXHcfqIyDUkN5JcYUq7x1kyFwNYTfKfJJcAaAXQpEJIJiJXkHwXwCqSb5B8n+TMdDq9D4CdlRDacZz9ANxN8n1zX1cDeE9ErvLHBPAQgO9H6TIrWktwvlEwxZDWEGJ/AuC+Sit+cYQ2nNkecHNmVaKb5EVWn521tbV7lZOvb1w40nY3aictCC/0iEgdyQ0A/iIil6TT6b5W2wkkV4jINYE+3zE/rqhdROhtSqUbtNauUu2Rd0vIsDWGVOtDyq41ANb5qR6t9bcArNFaj/MFMpnMAADzADxlja9ItgC4EsDvABwUHBTATwG8TPJo/zsTxLwAYGpAdgrJN0Skzv/OcZz+ACaSXEByaxyhzcOwSEQm2DuByR68TvIW8/lsAM9E6SJ5LYD7otrDYDINs0JI7V932b91GCohNICPLJntjuP0r9S+atyOVFOx0O5uNBWfixQ0hG4jeWNYu+d5o0hu9yeTTqf3IblRa31qmDzJMwGsMU9cbwCbXdc91pbRWmdIPgtgnoicbbcBON5/CMzq1gpgbHAcQ67V/sNjxm4B8HrY0661HklyY/BHMfdgKMkdxtdTnucdSXK71npE2ByNvxjrcvjEidAxnOQO13WH1dbW7kVyg+u6wyJk3wRwctRY5SAiJwCYjdI56OAJvGX5fL42qm+1hAYwrxrbAPze6ju/nGyqqfiWRegLyk24zvw4kbV6AM8DuMDIjwfwUoyhy0WE5u/5InJFYMw7jVtwUdDtMCvsHCN3HoDIpxHA7SR/6X82hL48Yp53AvhFGV3NvptjVuHHomSNu1URoT3PO7HMmE8AmGj+niEiNwRltNYnAViuOul3mxXxRpJbg25I1IPbAUJfXY1NZqdvLwZFxUappkWjdvnOzZ8edfnC6BjKbH8flRsYwAwA083f0wH8PEZ+Ns3ZWQAXAHjCau4FYC3Jo3O53CAAmwPB1gKYU2IA7gFwa9Q4JC8ybof/uSWqoADghXLbGoC7ReRm8/dDACZFyWaz2cMqJXS5ABbAFN+V0FrXk1ypAsQFMEtEJkfpqBau6x4K4NHASr1GKdU7KNsBQp9RjS2O4/Qnuc3vLyLfDJOzsxuppubyu4Ah9JoYmetI3q+UUiQfjLvBAG4CMFsppXK53CD76UMpCn/Fkn1Oa32aUkql0+m+JpAaaNoeB/ABgHfCLuPHP+vrItli+7wBm9YanzZK14cA7jZ6/ogykbopDlSS5fi43H0yxz3bI3yWAl7H/zxmzJi9WQpuB4cq6AQAzAmQ+sqgTLWE1lrrDtjxgEXo34bJpArFt31CnzB5kVNWoSF0a8yg15Oc6xuAUlagnPxUWIfBAfwdwDfM3zNINlrjX+Xr1lpnALxs9XtcRK4xNy70spPyMYReo7V2y+nyswgA/kTy/Kj5pdPpvhUSeme5+0Tyx7ZrA+ByAPda92Z8YHfrUgBYbhH67WB7tYT23cxqICJeIKjcLY1a11g81vKdy/LUV1gH4NNy+VgAs/3tWERu9lffKARXcZZSdD9TpZzuu7SyDCYgW6+U6iUik20XA6Uo/ZbYSewapxyhXwBwViV6AMwjeW1Uu18YqMTlKJdqA3Cbvyso1e7nbrQerCeq3carQcgLAbsdOe0OQiulFMkPfR2e52XttlSheJuVe55WyaTqSLbl8/lUmQFXWEFeA4BVKuQdNKXat+P1dj5aRE4h+azWuh7AayH6X/Q870SSf7AnJCLjSb4aO4ldeiIJTXKaH2zGwQSskUEhAFThQ4+LkgHwkoicF/huvoic6zjOQJLvxuVnOwOTlrVTZ67d3l2ENjFXqNtR3/TUivYVunHhyEomVYfS28FzI9rPBbDayln2YqkgEfoeGoBJxm1oD27MFr3e+OKNwT4s5VmvN25BexA1ZsyYvY3v+73YiajyhNZajzC+fH2cHq31EJJbtdahNxDAkwA+q4TQiEhHkRSSG4N5eK21NoHxpSTviLO1MzDpSTvjIQFbuoXQIvI1a5wdjqPavYX6QnGOIXRlC5sh9FIAj5C8S0SOUUrVmGN+l7JUKBkX7GMIeoPrusPS6XTffD5/FIBbAaxFSCUKpWLHWtvd8GH6rgWwKNhm/OpWAFO01iMcx+njOE5/z/NGAZgoIqN92XKENnb/EECriEwwgVZNJpMZYFJjU13XPdSSnQBgDYAzDOl6marqAyYF+I8KfOjnSc4FMMcUino1NDQcgFLmp9UPhgPobYLUJQCOj9LfFRCR0Tahg7t0dxHa6HrP13O6m835348qPHNSqtDclmpsjnQBg5OqA7DKlIyvMpH2BgDvoVT4iFrxhgCYhVIpd5MJMO7yixNBkPw2ylS7ANwXtRKb1W4mgOVmrLUk/yoi12mtv2SN8WBUccIaJ43SWdwWAJtYKqcXReSyYIoNQN6sxuvMQ7UYpkRtHoB9w0cppcdMhbWGpfTiYuu+PgIg8qQYgNsBLC43j64AgIJF2K3BymE3E/rWMLfjsInFfeubiu+OaipW9nCb1TasPJ2ghwDgSRG55PMcw8Q6G6yA8N6gTHcS2vbnAWyy21JNi0aps+b/X548SlFC6D0IxlXZorXev5p+psQ93XabomCyKX8LuBtHBeW6k9BG37JdAaoberQiFgmh9yyQvCMuLRoGa8veZty38wEcr7XeX2vdz8REYwFMZalYY6frQkvW3U1olkrzJZt4etX3QCmVEHpPgO+7m8LP5rDAOQ4mHgg7VbeVpYrq9rB2BE4ZBuw61ZL7NO74aGcJ7bruMGu8dR1SkhC654HSwagtJP8F4PSO6NBanwbg6QhSh12vRGRZdtMZ6LNbCd7kytssQo/viO02ALy5y+1gWfui0Ls73jZJEIvKgp4YaK1HAPgRyftReivkDZJvAXgNwFMicnOlb1obf34igKsBXBmsejqO019ErjAyE9EF/9wGwMVmV9nGzzkPnyBBggQJugP/A94x91x//ZrKAAAAAElFTkSuQmCC"}).setProps({alt:s})))},i}()),viewerFilters:[],getNodeWithSirvClassName:function(t){var e=null;return t&&(e=(t=c(t)).hasClass("Sirv")?t.node:n.getNodeWithSirvClassName(t.node.parentNode)),e},iconsHash:{nodes:[],elements:[[{classes:["smv-arrow-control"]},{classes:["smv-arrow"]},{classes:["smv-icon"]}],[{classes:["smv-button-fullscreen-open"]},{classes:["smv-icon"]}],[{classes:["smv-button-fullscreen-close"]},{classes:["smv-icon"]}],[{classes:["smv-thumbnails"]},{classes:["smv-selector"],attrs:[{name:"data-type",value:"spin"}]}]],waitBody:function(){return new l(function(t,e){var i=document.body;i?t(i):setTimeout(function(){n.iconsHash.waitBody().then(t)},16)})},make:function(){n.iconsHash.elements.forEach(function(t){var i=[];t.reverse().forEach(function(t){var e=a.$new("div");t.classes&&t.classes.forEach(function(t){e.addClass(t)}),t.attrs&&t.attrs.forEach(function(t){e.attr(t.name,t.value)}),i.push(e)});for(var e=1,s=i.length;e<s;e++)i[e].append(i[e-1]);n.iconsHash.nodes.push(i[i.length-1])}),n.iconsHash.nodes.forEach(function(t){t.setCss({top:"-10000px",left:"-10000px",width:"10px",height:"10px",position:"absolute",visibility:"hodden",opacity:0}),n.iconsHash.waitBody().finally(function(){a.$(a.D.node.body).append(t)})})},remove:function(){n.iconsHash.nodes.length&&(n.iconsHash.nodes.forEach(function(t){t.remove()}),n.iconsHash.nodes=[])}},adjustURL:function(t){return/^(http(s)?:)?\/\//.test(t)||(t=r.SIRV_BASE_URL+t),i(t).replace(/([^:])\/+/g,"$1/")},normalizeURL:function(t){return s(i(t))}};return n.rootDOM.attachNode(a.D.node.head||a.D.node.body),n});var _this=this;Sirv.define("helper",["require","bHelpers","magicJS","globalVariables","Promise!"],function(i,t,e,h,d){var w=e,u=w.$,c={},e=function(){"use strict";function t(){this.started=!1,this.callbacks=[]}var e=t.prototype;return e.wait=function(t){this.started?t():this.callbacks.push(t)},e.start=function(){this.started||(this.started=!0,this.callbacks.forEach(function(t){return t()}))},e.destroy=function(){this.callbacks=[]},t}();c.WaitToStart=e,c.addCss=function(t,e,i,s,n){var o,r=document.head||document.body,a=w.$new("style",{type:"text/css"});a.attr("id",e||"sirv-module-"+a.$J_UUID),i=i||"top",s&&(r=u(s).node||s),"top"===i&&(o=r.firstChild);n=r.querySelector(n);return n&&n.nextSibling&&(o=n.nextSibling),r.insertBefore(a.node,o),a.node.innerHTML=t,a},c.cleanQueryString=function(t){return t=(t=(t=(t=(t=(t=t.replace(/&+/g,"&")).replace(/&$/,"")).replace(/\?&/,"?")).replace(/profile=&|profile=$/g,"")).replace(/image=&/g,"image&")).replace(/image=$/g,"image")},c.createReadOnlyProp=function(t,e,i){Object.defineProperty(t,e,{value:i,writable:!1})};var o,r,s,n,a,l,p,m,f,g,v,S,y,b,E;function I(t){var e=!1;return t&&(e=""!==(t+="").trim()),e}function C(t){var i,s=[];return Array.isArray(t)?t.forEach(function(t){var e;(e=null)!==(t=t)&&(t=parseFloat(t),isNaN(t)||(t<0&&(t=0),1<t&&(t=1),e=t)),null===(i=e)||w.contains(s,i)||s.push(i)}):s=[0],s}function x(t){return new d(function(e,i){var s=new XMLHttpRequest;s.open("GET",t,!0),s.onreadystatechange=function(){if(4===s.readyState&&200===s.status)try{var t=JSON.parse(s.responseText)[0];e(t)}catch(t){i(null)}},s.send(!0)})}function z(t){return(t=u(t))&&t.getTagName&&"video"===t.getTagName()}function P(t){var e=null;return void 0!==(t=t.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]&&(t=t[2].split(/[^0-9a-z_\-]/i)).length&&t[0]&&(e=t[0]),e}function N(t){var e=null;return(t=t.match(/(?:https?:\/\/)?(?:www.)?(?:player.)?vimeo.com\/(?:[a-z]*\/)*([0-9]{6,11})[?]?.*/)[1])&&(e=t),e}function O(t){var e,i,s=null;if("string"===w.typeOf(t))s=t;else if((t=u(t))&&"element"===w.typeOf(t.node))if(w.contains(["iframe","div"],t.getTagName()))s=t.attr("src")||t.attr("data-src");else if(z(t)&&!(s=t.attr("src")||t.attr("data-src")))for(s=null,e=w.$A(t.node.children);(i=u(e.shift()))&&"element"===w.typeOf(i.node)&&"source"===i.getTagName()&&(s=i.attr("src")||i.attr("data-src")),!s&&i;);return s}return c.debounce=function(s,o,t){var r,a,i,h,l,c,e,d=0,u=!1,p=!1,n=!0,m=!o&&0!==o&&w.browser.features.requestAnimationFrame;if("function"!=typeof s)throw new TypeError("Expected a function");o=+o||0,(e=t)&&"object"==typeof e&&e.constructor===Object&&(u=!!t.leading,p="maxWait"in t,i=p?Math.max(+t.maxWait||0,o):i,n="trailing"in t?!!t.trailing:n);function f(t){var e=r,i=a;return r=w.U,a=r,d=t,h=s.apply(i,e)}function g(t,e){return m?(w.browser.cancelAnimationFrame(l),w.browser.requestAnimationFrame(t)):setTimeout(t,e)}function v(t){var e=t-c,t=t-d;return c===w.U||o<=e||e<0||p&&i<=t}function S(t){return l=w.U,n&&r?f(t):(r=w.U,a=r,h)}var y=function(){var t,e=Date.now();return v(e)?S(e):(l=g(y,(e=(t=e)-d,t=o-(t-c),p?Math.min(t,i-e):t)),w.U)},t=function(){for(var t=Date.now(),e=v(t),i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];if(r=s,a=_this,c=t,e){if(l===w.U)return d=e=c,l=g(y,o),u?f(e):h;if(p)return l=g(y,o),f(c)}return l===w.U&&(l=g(y,o)),h};return t.cancel=function(){var t;l!==w.U&&(t=l,m?w.browser.cancelAnimationFrame(t):clearTimeout(t)),d=0,r=w.U,l=a=c=r},t.flush=function(){return l===w.U?h:S(Date.now())},t.pending=function(){return l!==w.U},t},c.deepExtend=(o=function(n,t){var e=w.typeOf(t);return w.defined(n)||(n="array"===e?[]:{}),"array"===e?t.forEach(function(t,e){var i=w.typeOf(t);"array"===i&&"array"===w.typeOf(n[e])||"object"===i&&"object"===w.typeOf(n[e])?n[e]=o(n[e],t):n.push(t)}):c.objEach(t,function(t,e,i){var s=w.typeOf(e);n[t]="array"===s||"object"===s?o(n[t],e):e}),n},function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var s=null;return(e=w.$A(e)).length&&(s=e.shift(),e.forEach(function(t){var e=w.typeOf(t);"array"!==e&&"object"!==e||(s=o(s,t))})),s}),c.fixSize=function(i,s){i=u(i);return["width","height"].forEach(function(t){var e;w.browser.ieMode&&!i.attr("src")&&(e=t,"auto"===i.attr(e)&&(s[t]=0)),0===s[t]&&(s[t]=c.imageLib.getPartSize(i,t)),s[t]=((t=s[t])<=4&&(t=0),t)}),s},c.generateUUID=function(){return parseInt(1e7*Math.random(),10)},c.getArrayIndex=function(t,e){return(t%=e)<0&&(t+=e),t},c.getDPPX=function(t,e,i){t=e/t;return t=t>=w.DPPX||i?w.DPPX:(t*=100,Math.ceil(t)/100)},c.getMatrix=function(t){function e(t,i){var s={},n=["x","y","z"];return t.forEach(function(t,e){s[n[e]]=(t=i[t],parseFloat(t.trim()))}),s}var i=null,s=u(t).getCss("transform")+"";return"none"!==s&&(i={},t=6<(s=(s=(s=s.split("(")[1]).split(")")[0]).split(",")).length,i.transform=e(t?[12,13,14]:[4,5],s),i.scale=e(t?[0,5,10]:[0,3],s)),i},c.getRemoteData=(r=window.fetch?function(t,e){return fetch(t,{referrerPolicy:e||"no-referrer-when-downgrade"}).then(function(t){if(200===t.status)return t.json();throw{status:t.status,data:t}})}:function(t){return new d(function(i,s){var n=null;w.browser.features.xhr2?n=new XMLHttpRequest:window.XDomainRequest&&(n=new XDomainRequest),n?(n.onerror=function(t){s(t||!0)},n.onload=function(t){try{if(200!==n.status)throw{status:n.status,data:t};var e=JSON.parse(n.responseText);i(e)}catch(t){s(t)}},n.open("GET",t),void 0!==n.responseType&&(n.responseType="text"),n.send(null)):s(!0)})},function(s,n,t){return new d(function(e,i){r(s,t).then(e).catch(function(t){var o,r;t&&t.status&&w.contains([404,200],t.status)?i(t):(console.log("XHR error. Switching to JSONP."),n=n||"sirv_data_"+c.generateUUID(),o=s,r=n,new d(function(t,e){var i=!1,s=document.createElement("script");window[r]||(window[r]=function(){i=!0,delete window[r],document.body.removeChild(s),t(arguments.length<=0?void 0:arguments[0])});function n(){i||(delete window[r],document.body.removeChild(s),e(o))}s.onreadystatechange=function(){"complete"!==_this.readyState&&"loaded"!==_this.readyState||(_this.onreadystatechange=null,setTimeout(n,0))},s.onerror=n,s.onload=n,s.src=o+"&callback="+r,document.body.appendChild(s)}).then(e).catch(i))})})}),c.getSirvType=function(t){var e,i,s=(t=u(t)).attr("data-type")||t.attr("data-effect"),n=t.fetch("view-content"),o=null;return I(s)&&"static"!==s?(i=0<=(i=h.SLIDE.NAMES.indexOf(s))?i:h.SLIDE.TYPES.ZOOM,s=t.attr("data-src"),I(s)?e=s:(s=u(t.node.getElementsByTagName("img")[0])).attr&&(e=s.attr("src")||s.attr("data-src"))):(s=t.attr("data-src"),I(s)?c.isSpin(s)&&"img"!==t.getTagName()||n===h.SLIDE.TYPES.SPIN?(i=h.SLIDE.TYPES.SPIN,e=s):c.isVideo(s)?(i=h.SLIDE.TYPES.VIDEO,e=s):(e=s,i=h.SLIDE.TYPES.IMAGE,n&&(i=n)):(s=t.attr("src"),I(s)&&"img"===t.getTagName()&&(e=s,i=h.SLIDE.TYPES.IMAGE))),i&&(o={type:i,imgSrc:e}),o},w.hashKeys||(Object.keys?w.hashKeys=Object.keys:function(){"use strict";Object.prototype.hasOwnProperty,{toString:null}.propertyIsEnumerable("toString")}()),c.imageLib={isNumber:function(t){return/(px|%)$/.test(t)},getSize:function(s,n){return new d(function(t,e){var i=u(s).getInnerSize();n=n||100,--n,!i.width&&!i.height&&0<n?setTimeout(function(){c.imageLib.getSize(s,n).then(t)},16):t(i)})},getBackgroundValue:function(t){var e=null;return t&&/px$/.test(t)&&(e=parseInt(t,10)),e},getBackgroundSize:function(t){var e=null,i=u(t).getCss("background-size");return i&&(i=i.split(",")[0].split(" "),null!==(t=c.imageLib.getBackgroundValue((i[0]||"").trim()))&&(e={width:t}),null!==(i=c.imageLib.getBackgroundValue((i[1]||"").trim()))&&((e=e||{}).height=i)),e},calcProportionalBackgroundSize:function(t,e){var i={width:e.width,height:e.height};return t.width&&e.width>t.width&&(i.width=t.width,i.height=t.width*e.height/e.width),t.height&&e.height>t.height&&(i.height=t.height,i.width=t.height*e.width/e.height),i},getBackgroundPositionValue:function(t){var e;switch(t){case"top":case"left":e=0;break;case"center":e=50;break;case"right":case"bottom":e=100;break;default:e=c.imageLib.isNumber(t)?parseInt(t,10):0}return e},getBackgroundPosition:function(t){var e={side:"left",position:0,sign:"%"},i={side:"top",position:0,sign:"%"},s=0,n=1,t=u(t).getCss("background-position");return t&&(2<(t=(t=(t=(t=(t=t.replace(/important/,"")).replace(/!/g,"")).trim()).replace(/\s+/g," ")).split(" ")).length&&(s=1,n=3,w.contains(["left","right"],t[0])&&(e.side=t[0]),w.contains(["top","bottom"],t[2])&&(i.side=t[2])),e.position=c.imageLib.getBackgroundPositionValue(t[s]),i.position=c.imageLib.getBackgroundPositionValue(t[n]),/px$/.test(t[s])&&(e.sign="px"),/px$/.test(t[n])&&(i.sign="px")),{x:e,y:i}},getPartSize:function(t,e){var i=0,e=(w.browser.ieMode?t.currentStyle[e]||"0":t.getCss(e)||"0").replace(/px$/,"");return isFinite(e)&&(i=Math.round(parseFloat(e))-parseFloat(t.getCss("border-top-width")||0)-parseFloat(t.getCss("border-bottom-width")||0)-parseFloat(t.getCss("padding-top")||0)-parseFloat(t.getCss("padding-bottom")||0)),i},checkMaxSize:function(t,e,i){var s;return(t.width>e.width*i||t.height>e.height*i)&&(i=t.width>e.width?(s="width","height"):(s="height","width"),t[s]=e[s],t[i]&&(t[i]=e[i]),t.round=!1),t},calcImageProportion:function(t,e,i,s){var n=i[e]/i[t],i={};return i[t]=s,i[e]=parseInt(n*i[t],10),i},contain:function(t,e){t={width:t.width,height:t.height};return e.width&&t.width>e.width&&(t=c.imageLib.calcImageProportion("width","height",t,e.width)),e.height&&t.height>e.height&&(t=c.imageLib.calcImageProportion("height","width",t,e.height)),t},cover:function(t,e){t={width:t.width,height:t.height};return e.width&&t.width<e.width&&(t=c.imageLib.calcImageProportion("width","height",t,e.width)),e.height&&t.height<e.height&&(t=c.imageLib.calcImageProportion("height","width",t,e.height)),t},calcProportionSize:function(t,e,i){function s(){o.height=t.height,o.width=parseInt(h*t.height,10)}function n(){o.width=t.width,o.height=parseInt(l*t.width,10)}var o={},r=e.width,a=e.height,h=r/a,l=a/r;return(t.width>r||t.height>a)&&(t.width>r?(t.width=r,t.height&&(t.height>a?t.height=a:s())):(t.height=a,t.width&&(t.width>r?t.width=r:n()))),(t.width||t.height)&&(t.width&&t.height?t.width/t.height-h<=t.height/t.width-l?n:s:t.width?n:s)(),i&&(c.imageLib.isNumber(i.width)&&c.imageLib.isNumber(i.height)?(r=parseInt(i.width,10),/%$/.test(i.width)&&(r=r/100*t.width),a=parseInt(i.height,10),/%$/.test(i.height)&&(a=a/100*t.height),o=r<e.width/e.height*a?c.imageLib.calcImageProportion("width","height",e,r):c.imageLib.calcImageProportion("height","width",e,a)):(c.imageLib.isNumber(i.width)&&(r=parseInt(i.width,10),/%$/.test(i.width)&&(r=r/100*t.width),o=c.imageLib.calcImageProportion("width","height",e,r)),c.imageLib.isNumber(i.height)&&(a=parseInt(i.height,10),/%$/.test(i.height)&&(a=a/100*t.height),o=c.imageLib.calcImageProportion("height","width",e,a)),w.contains([i.width,i.height],"initial")?(o.width=e.width,o.height=e.height):w.contains([i.width,i.height],"cover")?o=c.imageLib.cover(o,t):w.contains([i.width,i.height],"contain")&&(o=c.imageLib.contain(o,t)))),o}},c.InViewModule=(s=function(t){var e=!0;return"body"!==t.getTagName()&&(e="none"!==t.getCss("display")&&s(u(t.node.parentNode))),e},n=new(function(){"use strict";function t(){this.timer=null,this.started=!1,this.list=[]}var e=t.prototype;return e._startTimer=function(){var t=this;this.list.length&&(clearTimeout(this.timer),this.timer=setTimeout(function(){t._check(),t.started&&t._startTimer()},500))},e._check=function(){this.list.forEach(function(t){var e=s(t.obj.node),i=e!==t.obj.isShown;t.obj.isShown=e,i&&t.callback(t.obj)})},e.push=function(t,e){e={obj:t,callback:e};this.list.push(e),this.started||(this.started=!0,this._startTimer())},e.remove=function(t){for(var e=0,i=this.list.length;e<i;e++)if(this.list[e].obj.node.node===t){this.list.splice(e,1);break}this.list.length||(this.started=!1)},t}()),a=function(){"use strict";function t(t,e){this.callback=t,this.options=w.extend({rootMargin:"0px",threshold:[0],root:null},e||{}),this.options.rootMargin=function(t){function i(){return 0}var e,s,n=[];if(t&&!Array.isArray(t))if("number"===w.typeOf(t))t=[t];else if("string"===w.typeOf(t))for(e=(t=t.split(" ")).length,s=0;s<e;s++)t[s]=t[s].trim();else t=null;if(Array.isArray(t))switch(4<(e=t.length)&&(e=4),t.forEach(function(t){var e;w.contains(["string","number"],w.typeOf(t))?(e=parseInt(t,10),/%$/.test(t)?n.push(function(t){return t/100*e}):n.push(function(t){return e})):n.push(i)}),e){case 1:n.push(n[0]),n.push(n[0]),n.push(n[0]);break;case 2:n.push(n[0]),n.push(n[1]);break;case 3:n.push(n[1])}else n=[i,i,i,i];return n}(this.options.rootMargin),this.options.threshold=C(this.options.threshold),this.nodeList=[],this.last=[],this.viewPortSize={top:0,left:0,width:0,height:0},this.correctPosition={top:0,left:0},this.eventWasAdded=!1,this.bindedRender=this._render.bind(this),this.bindedResize=this._resize.bind(this),this._resize()}var e=t.prototype;return e._setEvents=function(){this.eventWasAdded||(this.eventWasAdded=!0,u(window).addEvent("resize",this.bindedResize),u(this.options.root||window).addEvent("scroll",this.bindedRender))},e._removeEvents=function(){this.eventWasAdded&&(this.eventWasAdded=!1,u(window).removeEvent("resize",this.bindedResize),u(this.options.root||window).removeEvent("scroll",this.bindedRender))},e._resize=function(){var t,e=this.options.rootMargin,i={width:(t=(t=this.options.root)||window).offsetWidth||t.innerWidth||document.documentElement.clientWidth,height:t.offsetHeight||t.innerHeight||document.documentElement.clientHeight};u(e).map(function(t){return t(i.width)}),this.correctPosition={top:0-e[0](i.width),left:0-e[1](i.width)},this.viewPortSize={width:i.width+e[1](i.width)+e[3](i.width),height:i.height+e[0](i.width)+e[2](i.width)}},e._renderElement=function(t){var e,i,s,n,o,r=null;return t.isShown&&(o=function(t,e,i){var s,n=w.extend({},e);try{s=u(t).getBoundingClientRect(),n.top+=s.top,n.left+=s.left}catch(t){}return n=w.extend(n,i)}(this.options.root,this.correctPosition,this.viewPortSize),e=t.node.node.getBoundingClientRect(),i=o,s=e.width||1,n=e.height||1,o=Math.min(e.left+s,i.left+i.width)-Math.max(e.left,i.left),i=Math.min(e.top+n,i.top+i.height)-Math.max(e.top,i.top),o<0&&(o=0),i<0&&(i=0),i=o*i,n=0<(n=s*n)?i/n:0,function(t,e,i){var s,n=!1,o=t.length;if(e!==i)if(e<i){for(s=0;s<o;s++)if(0===t[s]&&0===e||e<t[s]&&t[s]<=i){n=!0;break}}else for(s=0;s<o;s++)if(1===t[s]&&1===e||e>t[s]&&t[s]>=i){n=!0;break}return n}(this.options.threshold,t.intersectionRatio,n)&&(t.intersectionRatio=n,r={target:t.node.node,intersectionRatio:t.intersectionRatio,isIntersecting:0<t.intersectionRatio})),r},e._render=function(){var e=this,i=[];this.nodeList.forEach(function(t){t=e._renderElement(t);t&&i.push(t)}),i.length&&(this.last=i,this.callback(i))},e.takeRecords=function(){return this._render(),this.last},e.observe=function(t){var e=this;t={node:t=u(t),isShown:s(t),intersectionRatio:0,isIntersecting:!1},n.push(t,function(t){t=e._renderElement(t);t&&(e.last=[t],e.callback([t]))}),this.nodeList.push(t),this._setEvents();var i=this._renderElement(t),t=i||{target:t.node.node,intersectionRatio:0,isIntersecting:!1};this.callback([t])},e.unobserve=function(t){var e=[];t=u(t),this.nodeList.forEach(function(t){e.push(t.node.node)});var i=e.indexOf(t.node);n.remove(t.node),-1<i&&this.nodeList.splice(i,1),this.nodeList.length||this._removeEvents()},e.disconnect=function(){this.nodeList.forEach(function(t){n.remove(t.node)}),this.nodeList=[],this._removeEvents()},t}(),function(){"use strict";function t(t,e){var i=window.IntersectionObserver||a;this.observer=new i(t,e||{})}t.isInView=function(t){t=u(t).getBoundingClientRect();return(0<=t.top||t.top-t.bottom<t.top)&&0<=t.left&&t.top<=(window.innerHeight||document.documentElement.clientHeight)};var e=t.prototype;return e.takeRecords=function(){return this.observer.takeRecords()},e.observe=function(t){t.node&&(t=t.node),this.observer.observe(t)},e.unobserve=function(t){this.observer.unobserve(t)},e.disconnect=function(){this.observer.disconnect()},t}()),c.isIe=function(){return"edge"===w.browser.uaName||"ie"===w.browser.uaName&&w.contains([10,11],w.browser.uaVersion)},c.isPercentage=function(t){return/^([-]?[0-9]*\.?[0-9]+)%$/.test(""+t)},c.isSVG=function(t){var e=!1;return t&&(t=(t=(t=t.split("?")[0]).split("."))[t.length-1],e=/svg/i.test(t)),e},c.isSpin=function(t){return t=(t||"").split("?")[0],/([^#?]+)\/?([^#?]+\.spin)(\?([^#]*))?(#(.*))?$/.test(t)},c.isVideo=function(t){return t=(t||"").split("?")[0],/([^#?]+)\/?([^#?]+\.(mp4|mov|avi|m4v|mkv|webm|wmv|ogv|ogg))(\?([^#]*))?(#(.*))?$/i.test(t)},c.loadImage=function(r){return new d(function(e,i){var s,n,o,t=!1;w.contains(["array","string"],w.typeOf(r))?("string"===w.typeOf(r)&&(r=[r]),(s=w.$new("img").setCss({maxWidth:"none",maxHeight:"none"})).attr("referrerpolicy","no-referrer-when-downgrade"),t=!0):(s=u(r)).node.parentNode||(t=!0),t&&((n=w.$new("div").setCss({top:"-10000px",left:"-10000px",width:"10px",height:"10px",position:"absolute",overflow:"hidden"})).append(s),u(w.D.node.body).append(n)),s.node.complete&&s.node.src?(n&&n.remove(),e({image:null,size:s.getSize()})):(o=function(t){s.removeEvent("load error",o),"error"===t.type?i({error:t}):e({image:t,size:{width:s.node.naturalWidth||s.node.width,height:s.node.naturalHeight||s.node.height}}),n&&n.remove()},s.addEvent("load error",o),n&&"array"===w.typeOf(r)&&(s.attr("src",r[0]),r[1]&&s.attr("srcset",r[1]+" 2x")))})},c.loadStylesheet=function(a,h,l,c){return new d(function(t,e){var i,s,n,o=!1,r=l||w.D.node;w.$A(r.querySelectorAll("link")).forEach(function(t){t=u(t).attr("href")||"";w.getAbsoluteURL(t)===w.getAbsoluteURL(a)&&(o=!0)}),o?t():(i=w.$new("link"),h!==w.U&&(i.node.id=h),i.node.rel="stylesheet",i.node.type="text/css",i.node.onload=function(){t()},i.node.onerror=function(t){e(t)},i.node.href=a,s=w.D.node.head||w.D.node.getElementsByTagName("head")[0]||w.D.node.body||w.D.node.documentElement,l&&(s=l),n=s.firstChild,(r=s.querySelector(c))&&r.nextSibling&&(n=r.nextSibling),s.insertBefore(i.node,n))})},c.makeQueryblePromise=function(t){if(t.isResolved)return t;var e=!0,i=!1,s=!1,t=t.then(function(t){return s=!(e=!1),t},function(t){return i=!(e=!1),t});return t.isFulfilled=function(){return s},t.isPending=function(){return e},t.isRejected=function(){return i},t},c.objEach=function(t,e){var i,s=0;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e(i,t[i],s),s+=1)},c.paramsFromQueryString=(l={w:"scale.width",h:"scale.height",cw:"crop.width",ch:"crop.height",cx:"crop.x",cy:"crop.y",q:"quality",s:"size",text:"text.text",watermark:"watermark.image","watermark.w":"watermark.scale.width","watermark.h":"watermark.scale.height","watermark.cw":"watermark.crop.width","watermark.ch":"watermark.crop.height","watermark.cx":"watermark.crop.x","watermark.cy":"watermark.crop.y"},function(t){var i={};return t&&(u(t.split("&")).forEach(function(t){var n=t.split("=");n[0]=l[n[0]]||n[0],n[0].trim().split(".").reduce(function(t,e,i,s){return/^\d$/.test(e)&&(t.__toArray=!0),void 0===t[e]&&(i<s.length-1?t[e]={}:t[e]=function(t){for(var e,i="",s=0,n=t.split(/(%(?:D0|D1)%.{2})/),o=n.length;s<o;s++){try{e=decodeURIComponent(n[s])}catch(t){e=n[s]}i+=e}return i}(n[1]||"")),t[e]},i)}),u(w.hashKeys(i)).forEach(function(e){var t;"object"==typeof i[e]&&i[e].__toArray&&(delete i[e].__toArray,t=w.hashKeys(i[e]),i[e]=u(t).map(function(t){return i[e][t]}))})),i}),c.paramsToQueryString=(p={"scale.width":"w","scale.height":"h","crop.width":"cw","crop.height":"ch","crop.x":"cx","crop.y":"cy",quality:"q",size:"s","text.text":"text","watermark.image":"watermark","watermark.scale.width":"watermark.w","watermark.scale.height":"watermark.h","watermark.crop.width":"watermark.cw","watermark.crop.height":"watermark.ch","watermark.crop.x":"watermark.cx","watermark.crop.y":"watermark.cy"},m=function(t,i){var s,e,n,o=[];for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&"$J"!==(s+"").substring(0,2)&&(n=t[s],"object"===w.typeOf(n)?(n=m(n,(i||"")+s+"."),o.push(n)):"array"===w.typeOf(n)?u(n).forEach(function(t,e){n=m(t,(i||"")+s+"."+e+"."),o.push(n)}):(e=p[e=(i||"")+s]||e,o.push(e+"="+encodeURIComponent(n))));return o.join("&")}),c.round=function(t,e,i){return e=e||0,e=Math.pow(10,e),e=i?parseInt(t*e,10)/e:Math.round(t*e)/e},c.roundSize=function(t,e){return e=e||100,t=t&&Math.ceil(t/e)*e},c.sendRawStats=function(t,e){try{var i=null,s=(w.browser.ieMode<11?h.SIRV_HTTP_PROTOCOL:"https:")+"//stats.sirv.com/"+ +new Date;if(!0===e&&navigator.sendBeacon)return void navigator.sendBeacon(s,c.paramsToQueryString(t));if(w.browser.features.xhr2?i=new XMLHttpRequest:w.W.node.XDomainRequest&&(i=new XDomainRequest),!i)return;i.open("POST",s),void 0!==i.responseType&&(i.responseType="text"),i.send(c.paramsToQueryString(t))}catch(t){}},c.sliderLib={findIndex:function(t,e,i,s){var n=null;if("string"===w.typeOf(t))switch(t){case"next":t=e+1;break;case"prev":t=e-1}return"number"===w.typeOf(t)&&((n=t)<0?n=s?c.getArrayIndex(n,i):0:i<=t&&(n=s?c.getArrayIndex(n,i):i-1)),n},getSrc:function(t){var e=null;return w.defined(t)&&""!==(t+"").trim()&&(e=t+""),e}},c.sortSlidesByOrder=function(t,e){var i=e.slice(),s=[];if(t&&t.length)for(var n=0,o=Math.min(t.length,i.length);n<o;n++)for(var r=0,a=i.length;r<a;r++)if(h.SLIDE.NAMES.indexOf(t[n])===i[r].type&&i[r].enabled){s.push(i[r]),i.splice(r,1);break}return i.forEach(function(t){s.push(t)}),s},c.spinLib=f={calcProportionSize:function(t,e,i,s){var n,o=e.width,r=e.height;return o>t.width&&(n=r/o,o=t.width,r=parseInt(o*n,10)),r>t.height&&(n=o/r,r=t.height,o=parseInt(r*n,10)),s||e.width<o&&(o=e.width,r=e.height),{width:o,height:r}},reverse:function(t,e,i){if(t)for(var s=0,n=i.length;s<n;s++)i[s].reverse();return e&&i.reverse(),i},getNextIndex:function(t,e,i,s,n){var o;return i?"next"===i?(o=t+e,n?o=c.getArrayIndex(o,s):s<=o&&(o=s-1)):(o=t-e,n?o=c.getArrayIndex(o,s):o<0&&(o=0)):(o=e,n?o=c.getArrayIndex(o,s):(s<=o&&(o=s-1),o<0&&(o=0))),o},getUrl:function(t){return(t=t.split("/")).splice(t.length-1,1),t=(t=t.join("/")).replace(/https?:/,"")},swapLayers:function(t,e){var s=t;return e&&(s={},c.objEach(t,function(i,t){c.objEach(t,function(t,e){s[t]||(s[t]={}),s[t][i]=e})})),s},getMaxCount:function(t){var s=0;return c.objEach(t,function(t,e,i){e=w.hashKeys(e).length;s<e&&(s=e)}),s},correctArray:function(t,e){var i,s,n,o,r=[],a=e-t.length,h=t.length;if(0<a){for(i=0;i<h-1;i++)if(n=parseInt(t[i],10),o=parseInt(t[i+1],10),s=o-n-1,r.push(t[i]),0<s&&0<a)for(a<s&&(s=a);0<s;)--s,--a,r.push(t[i]);if(r.push(t[h-1]),0<a){if(0<(s=parseInt(t[0],10)-1))for(;0<s;)--s,--a,r.unshift(t[0]);if(0<a)for(;0<a;)--a,r.push(t[t.length-1])}}else r=JSON.parse(JSON.stringify(t));return r},getFrames:function(i,t){var s={},t=f.correctArray(w.hashKeys(i),t);return u(t).forEach(function(t,e){s[e+1+""]=i[t]}),s},checkLayers:function(t){var s={},n=f.getMaxCount(t);return c.objEach(t,function(t,e,i){s[i+1+""]=f.getFrames(e,n)}),s}},c.videoModule=(v=g=null,S={},y="0.jpg",b="default.jpg",E={aspectratio:9/16,getAspectRatio:function(s){return new d(function(e,i){var t;(s=O(s))&&S[s]&&e(S[s].aspectratio),"vimeo"===E.getType(s)&&(t=N(s))?x("https://vimeo.com/api/v2/video/"+t+".json").then(function(t){e(t?t.height/t.width:E.aspectratio)}).catch(function(t){i(t)}):e(E.aspectratio)})},getId:function(t){var e=null;if(E.isVideo(t))switch(t=O(t),E.getType(t)){case"youtube":e=P(t);break;case"vimeo":e=N(t)}return e},isVideo:function(t){var e=!1;return z(t)?e=!0:(t=O(t))&&(e=w.contains(["youtube","vimeo"],E.getType(t))),e},getType:function(t){var e=null;return z(t)?e="video":(t=O(t))&&(/^(https?:)?\/\/((www\.)?youtube\.com|youtu\.be)\//.test(t)?e="youtube":/^(https?:)?\/\/((www|player)\.)?vimeo\.com\//.test(t)&&(e="vimeo")),e},getImageSrc:function(l,c){return new d(function(i,e){var t,s,n,o,r,a,h=null;if(l&&u(l)&&"element"===w.typeOf(u(l).node)&&(r=l),l=O(l)){if(S[l])if(c){if(S[l].all)return void i(S[l].all)}else{if(S[l].url)return void i(S[l].url);if(S[l].all)return void i(S[l].all.thumbnail.url)}switch(E.getType(r||l)){case"youtube":(t=P(l))&&(h=c?{thumbnail:{url:"https://img.youtube.com/vi/"+t+"/"+b,width:120,height:90},medium:{url:"https://img.youtube.com/vi/"+t+"/"+y,width:480,height:360}}:"https://img.youtube.com/vi/"+t+"/"+b,S[l]||(S[l]={}),S[l].aspectratio=E.aspectratio,c?S[l].all=h:S[l].url=h),i(h);break;case"vimeo":(t=N(l))?x(h="https://vimeo.com/api/v2/video/"+t+".json").then(function(t){var e=null;t&&(e=c?{thumbnail:{url:t.thumbnail_small,width:100,height:75},medium:{url:t.thumbnail_medium,width:200,height:150}}:t.thumbnail_small),e&&(S[l]||(S[l]={}),c?S[l].all=e:S[l].url=e,S[l].aspectratio=t.height/t.width),i(e)}).catch(e):i(h);break;case"video":r?((r=u(r.node.cloneNode(!0))).attr&&(h=r.attr("poster")),h&&""!==h.trim()?(S[l]||(S[l]={}),S[l].aspectratio=E.aspectratio,c?(S[l].all={thumbnail:{url:h,width:200,height:150},medium:{url:h,width:200,height:150}},i(S[l].all)):(S[l].url=h,i(h))):(s=w.$new("canvas"),n=s.node.getContext("2d"),o=function(){r.removeEvent("loadedmetadata loadeddata abort error stalled"),r.remove()},(a=r.attr("data-src"))&&r.attr("src",a),w.$A(r.node.children).forEach(function(t){(t=u(t))&&"source"===t.getTagName()&&(a=t.attr("data-src"))&&t.attr("src",a)}),r.setCss({top:-1e5,left:-1e5,width:200,height:150,position:"absolute"}),r.muted=!0,r.addEvent("loadedmetadata",function(t){var e=r.getSize();e.width&&e.height||(e.width=200,e.height=150),r.setCss({width:e.width,height:e.height}),s.node.width=e.width,s.node.height=e.height,0<r.node.duration&&(r.node.currentTime=0)}),r.addEvent("loadeddata",function(t){r.currentTime=0}),r.addEvent("abort error stalled",function(t){o(),e(null)}),r.addEvent("seeked",function(t){n.drawImage(r.node,0,0,s.node.width,s.node.height),o();try{h=s.node.toDataURL()}catch(t){}h?(S[l]||(S[l]={}),S[l].aspectratio=E.aspectratio,c?(S[l].all={thumbnail:{url:h,width:200,height:150},medium:{url:h,width:200,height:150}},i(S[l].all)):(S[l].url=h,i(h))):i(h)}),r.appendTo(w.D.node.body),r.node.load())):i(h);break;default:i(h)}}else i(h)})},getSrc:O,getAPI:function(t){var e=null;if(E.isVideo(t))switch(E.getType(t)){case"video":e=d.resolve();break;case"vimeo":e=g=g||new d(function(e,t){i(["Vimeo"],function(t){e({Player:t})})});break;case"youtube":e=v=v||(w.W.node.YT?d.resolve(w.W.node.YT):new d(function(t,e){var i=w.W.node.onYouTubeIframeAPIReady||function(){};w.W.node.onYouTubeIframeAPIReady=function(){i(),t(w.W.node.YT)},document.querySelector('script[src$="youtube.com/iframe_api"]')||w.$new("script",{src:"https://www.youtube.com/iframe_api"}).appendTo(w.D.node.body)}))}else e=d.reject(!0);return e}}),c}),Sirv.define("EventEmitter",["bHelpers","magicJS","helper"],function(t,e,s){function n(t,e){return"string"===o.typeOf(t)&&""!==(t=t.trim())||(t=e),t}var o=e,i=o.$,r=function(){"use strict";function t(t,e,i){this.type=t,this.direction=e,this.propagation=!0,this.nextCalls=!0,this.emptyEvent=!0,this.data=o.extend(i,{eventType:this.type,eventDirection:this.direction,stopEmptyEvent:this.stopEmptyEvent.bind(this),stopPropagation:this.stopPropagation.bind(this),stopNextCalls:this.stopNextCalls.bind(this),stop:this.stop.bind(this),stopAll:this.stopAll.bind(this)})}var e=t.prototype;return e.copyData=function(){var i={};return s.objEach(this.data,function(t,e){o.contains(["eventDirection","stopEmptyEvent","stopPropagation","stopNextCalls","stop","stopAll"],t)||(i[t]=e)}),i},e.getCustomData=function(){return this.data},e.getDirection=function(){return this.direction},e.isEmptyEventStopped=function(){return!this.emptyEvent},e.isPropagationStopped=function(){return!this.propagation},e.isNextCallsStopped=function(){return!this.nextCalls},e.stopEmptyEvent=function(){this.emptyEvent=!1},e.stopPropagation=function(){this.propagation=!1},e.stopNextCalls=function(){this.nextCalls=!1},e.stop=function(){this.stopPropagation(),this.stopEmptyEvent()},e.stopAll=function(){this.stop(),this.stopNextCalls()},t}();return function(){"use strict";function t(){this.__parent=null,this.__childs=i([]),this.__subscribers={},this.__NAME_OF_EMPTY_EVENT="__empty__"}var e=t.prototype;return e.__setChild=function(t){this.__childs.push(t)},e.__removeChild=function(t){t=this.__childs.indexOf(t);-1!==t&&this.__childs.splice(t,1)},e.setParent=function(t){this.__parent=t,this.__parent.__setChild(this)},e.__removeParent=function(){this.__parent&&(this.__parent.__removeChild(this),this.__parent=null)},e.__callNext=function(e){e.isPropagationStopped()||("up"===e.getDirection()?this.__parent&&this.__parent.__next(e):this.__childs.forEach(function(t){t.__next(e)}))},e.__next=function(t){var e=this.__subscribers[t.type];if(t=new r(t.type,t.direction,t.copyData()),e)for(var i=0;i<e.length&&(e[i](t.getCustomData(),t,this),!t.isNextCallsStopped());i++);if(Object.prototype.hasOwnProperty.call(this.__subscribers,this.__NAME_OF_EMPTY_EVENT)&&!t.isEmptyEventStopped())for(var s=0;s<this.__subscribers[this.__NAME_OF_EMPTY_EVENT].length;s++)this.__subscribers[this.__NAME_OF_EMPTY_EVENT][s](t.getCustomData());this.__callNext(t)},e.emit=function(t,e){e&&"object"===o.typeOf(e)||("object"===o.typeOf(t)?(e=t,t=null):e={}),t=n(t,this.__NAME_OF_EMPTY_EVENT),this.__callNext(new r(t,"up",e))},e.broadcast=function(t,e){e&&"object"===o.typeOf(e)||("object"===o.typeOf(t)?(e=t,t=null):e={}),t=n(t,this.__NAME_OF_EMPTY_EVENT),this.__callNext(new r(t,"down",e))},e.on=function(t,e){var i=this;return"function"===o.typeOf(t)&&(e=t,t=null),e?(t=n(t,this.__NAME_OF_EMPTY_EVENT),this.__subscribers[t]||(this.__subscribers[t]=[]),this.__subscribers[t].push(e),function(){return i.off(t,e)}):null},e.off=function(t,e){var i;"function"===o.typeOf(t)&&(e=t,t=null),t=n(t,this.__NAME_OF_EMPTY_EVENT),e?Object.prototype.hasOwnProperty.call(this.__subscribers,t)&&-1!==(i=this.__subscribers[t].indexOf(e))&&this.__subscribers[t].splice(i,1):delete this.__subscribers[t]},e.destroy=function(){this.__removeParent(),this.__childs=i([]),this.__subscribers={}},t}()}),Sirv.define("EventManager",["bHelpers","magicJS","globalVariables","globalFunctions","EventEmitter","helper"],function(e,t,i,a,s,h){var l=t;l.$;return function(i){"use strict";function r(t){var e=i.call(this)||this;return e.items=t,e.events={lazyimage:{},viewer:{},spin:{},zoom:{},image:{},video:{}},e.reversedEvents=[],e.setEvents(),e}e.inheritsLoose(r,i),r.eventsNameParser=function(t){var e=null;return t&&"string"===l.typeOf(t)&&(e=t.split(":").map(function(t){return t.trim()}).filter(function(t){return""!==t}),/sirv/i.test(e[0])&&e.shift(),e.length<2&&(e=null)),e},r.triggerCustomEvent=function(e,t,i,s,n){var o;s===l.U&&(s=!0),n===l.U&&(n=!0);try{o=new CustomEvent(e,{bubbles:s,cancelable:n,detail:i})}catch(t){try{(o=l.D.createEvent("Event")).initEvent(e,s,n),o.detail=i}catch(t){}}o&&t.node.dispatchEvent(o)};var t=r.prototype;return t.addReverseEvent=function(t,e,i){this.reversedEvents.push({eventName:t,componentName:i,callback:e})},t.callReverseCallback=function(t,e,i){for(var s=!1,n=0,o=this.reversedEvents.length;n<o;n++)if(this.reversedEvents[n].componentName===t&&this.reversedEvents[n].eventName===e){this.reversedEvents[n].callback(i),this.reversedEvents.splice(n,1),s=!0;break}return s},t.setEvents=function(){var o=this;this.on("destroy",function(t){t.stopAll(),a.stop(t.data.node,"viewer")}),this.on("imagePublicEvent",function(e){var t;e.stopAll(),o.callReverseCallback("lazyimage",e.data.type,e.data.image)||(r.triggerCustomEvent("sirv:lazyimage:"+e.data.type,e.data.node,l.extend({},e.data.image)),(t=o.events.lazyimage[e.data.type])&&t.forEach(function(t){t(e.data.image)}))}),this.on("viewerPublicEvent",function(i){var t,s;i.stopAll();var e,n="viewer";"componentEvent"===i.data.slider.type?(e=i.data.type,s=l.extend({},i.data.slide[i.data.slide.component]),n=i.data.slide.component,i.data.node&&(t=i.data.componentEventData.node),h.objEach(i.data.componentEventData,function(t,e){"node"===t?i.data.node&&(s[t]=e.node):"type"!==t&&(s[t]=e)})):("ready"===(e=i.data.slider.type)&&a.iconsHash.remove(),i.data.node&&(t=i.data.node),i.data.slider&&(s=i.data.slider,"sendStats"===e&&(s.statsData=i.data.event)),l.contains(["beforeSlideIn","beforeSlideOut","afterSlideIn","afterSlideOut","enableItem","disableItem","thumbnailClick"],e)&&(s=i.data.slide)),o.callReverseCallback(n,e,s)||(t&&r.triggerCustomEvent("sirv:"+n+":"+e,t,l.extend({},s)),(e=o.events[n][e])&&e.forEach(function(t){t(s)}))}),this.on(function(t){t.stopAll()})},t.addEvent=function(t,e){var i,s=this,n=function(){return!1},o=r.eventsNameParser(t);return o&&this.events[o[0]]&&e&&(this.events[o[0]][o[1]]||(this.events[o[0]][o[1]]=[]),this.events[o[0]][o[1]].push(e),!l.contains(["ready","init","onLoad"],o[1])||("viewer"==(i="lazyimage"===o[0]?"image":"viewer")&&"onLoad"!==o[1]||"onLoad"===o[1]&&"image"==i)&&setTimeout(function(){s.items[i].forEach(function(t){t.checkReadiness(o[1],o[0])&&(s.addReverseEvent(o[1],e,o[0]),t.sendEvent(o[1],o[0]))})},0),n=function(){return s.removeEvent(t,e)}),n},t.removeEvent=function(t,e){t=r.eventsNameParser(t);if(t&&this.events[t[0]]&&this.events[t[0]][t[1]]){if(!e)return delete this.events[t[0]][t[1]],!0;e=this.events[t[0]][t[1]].indexOf(e);if(0<=e)return this.events[t[0]][t[1]].splice(e,1),!0}return!1},r}(s)}),Sirv.define("ContextMenu",["bHelpers","magicJS","globalVariables","globalFunctions"],function(t,e,i,s){var o=e,n=o.$;return function(){"use strict";function t(t,e,i){void 0===i&&(i="magic"),this.CSS_CLASS=i+"-contextmenu",this.target=t,this.conext=null,this.overlay=null,this.items={},this.active=!1,this.showBind=null,this.hideBind=null,this.hideOnScrollBind=null,this.canShow=!0,this.position={top:null,left:null},this.fullScreenBox=null,this.setup(e||[])}var e=t.prototype;return e.isExist=function(t){return!!this.items[t]},e.setup=function(t){var e=this;this.context=o.$new("ul").addClass(this.CSS_CLASS).addEvent("contextmenu dragstart selectstart",function(t){t.stop()}),t.forEach(function(t){e.addItem(t)}),this.hideFX=new o.FX(this.context,{duration:200,onComplete:function(){e.context.remove()}}),this.target.addEvent("contextmenu",this.showBind=this.show.bind(this)),this.overlay=o.$new("div").addClass(this.CSS_CLASS+"-overlay").addEvent("click contextmenu",this.hide.bind(this)).addEvent("mousescroll",function(t){t.stop(),n(t).events[0].stop().stopQueue()}),this.hideBind=n(function(t){e.active&&(t.stop(),27===t.getOriginEvent().keyCode&&e.hide())}).bind(this),o.W.addEvent("keydown",this.hideBind,1),this.hideOnScrollBind=n(function(t){e.active&&e.hide()}).bind(this),o.W.addEvent("scroll",this.hideOnScrollBind)},e.addItem=function(e){var i=this,s=o.$new("li").appendTo(this.context);o.defined(e.separator)?s.addClass("menu-separator"):o.defined(e.label)&&(s.append(o.D.node.createTextNode(e.label)),o.defined(e.disabled)&&!0===e.disabled&&s.attr("disabled",!0),"function"===o.typeOf(e.action)&&s.addEvent("btnclick",function(t){t.stop(),s.attr("disabled")||(i.hide(),e.action.call(e.action,i.position))})),o.defined(e.hidden)&&!0===e.hidden&&s.setCss({display:"none"});var t=e.id||"item-"+Math.floor(Math.random()*o.now());return this.items[t]=s,t},e.hideItem=function(t){this.items[t]&&n(this.items[t]).setCss({display:"none"})},e.showItem=function(t){this.items[t]&&n(this.items[t]).setCss({display:""})},e.disableItem=function(t){this.items[t]&&n(this.items[t]).attr("disabled",!0)},e.enableItem=function(t){this.items[t]&&n(this.items[t]).removeAttr("disabled")},e.show=function(t){var e,i,s,n=o.D.node.body;this.canShow&&(this.hideFX.stop(),o.browser.fullScreen.enabled()&&(this.fullScreenBox||o.D.msFullscreenElement)&&(n=this.fullScreenBox||o.D.msFullscreenElement),this.overlay.appendTo(n),this.context.setCss({top:-1e4}).appendTo(n),e=(s=t.getClientXY()).x,i=s.y,n=t.getPageXY(),this.position.top=n.y,this.position.left=n.x,s=5,t=o.W.getSize(),n=o.W.getScroll(),s={left:s=s||0,right:t.width-s,top:s,bottom:t.height-s,x:n.x,y:n.y},n=this.context.getSize(),s.right<e+n.width&&(e-=n.width),s.bottom<i+n.height&&(i=s.bottom-n.height),this.context.setCss({top:i,left:e,display:"block",opacity:1}),this.active=!0)},e.hide=function(t){var e,i;this.active&&(this.overlay.remove(),this.hideFX.start({opacity:[1,0]}),this.active=!1,t&&(t.stopDefaults(),"contextmenu"===t.type&&(e=t.getPageXY(),(i=this.target.getRect()).left<=e.x&&i.right>=e.x&&i.top<=e.y&&i.bottom>=e.y&&this.show(t))))},e.setCanShow=function(t){this.canShow=t},e.setFullScreenBox=function(t){this.setFullScreenBox=t},e.destroy=function(){this.target.removeEvent("contextmenu",this.showBind),o.W.removeEvent("keydown",this.hideBind).removeEvent("scroll",this.hideOnScrollBind);try{this.context.kill()}catch(t){}try{this.overlay.kill()}catch(t){}},t}()}),Sirv.define("BaseInstance",["bHelpers","magicJS","EventEmitter","helper"],function(o,t,e,i){var s=t,r=s.$;return function(n){"use strict";function t(t,e,i){var s=n.call(this)||this;return s.defaultSchema=i,s.options=e,s.instanceNode=r(t),s.instanceUrl=s.instanceNode.attr("data-src")||s.instanceNode.attr("src")||s.instanceNode.attr("data-bg-src"),s.option=null,s._isReady=!1,s.id=null,s.isCustomId=!1,s.isStartedFullInit=!1,s.isStarted=!1,s.destroyed=!1,s.referrerPolicy=s.instanceNode.attr("data-referrerpolicy")||s.instanceNode.attr("referrerpolicy")||"no-referrer-when-downgrade",s.instanceOptions=s.makeOptions(),s.createOptionFunction(),s.api={isReady:s.isReady.bind(o.assertThisInitialized(s)),resize:s.resize.bind(o.assertThisInitialized(s)),getOptions:s.getOptions.bind(o.assertThisInitialized(s))},s}o.inheritsLoose(t,n);var e=t.prototype;return e.setOptions=function(t,e,i,s){return t.fromJSON(e),t.fromString(i),t.fromString(s),t},e.makeGlobalOptions=function(t){var e=this.options.options;return this.setOptions(t,e.common.common,e.local.common,this.instanceNode.attr("data-options")||"")},e.makeMobileOptions=function(t){var e=this.options.options;return this.setOptions(t,e.common.mobile,e.local.mobile,this.instanceNode.attr("data-mobile-options")||"")},e.makeOptions=function(){var t=new s.Options(this.defaultSchema),t=this.makeGlobalOptions(t);return s.browser.touchScreen&&s.browser.mobile&&(t=this.makeMobileOptions(t)),t},e.getOptionsForStartFullInit=function(t){t&&(this.options.options=t,this.instanceOptions=this.makeOptions(),this.createOptionFunction())},e.isReady=function(){return this._isReady},e.getOptions=function(){return this.instanceOptions.getJSON()},e.resize=function(){return!!this._isReady&&this.onResize()},e.onResize=function(){return!0},e.getImageClassContainer=function(){return{}},e.checkImage=function(t,e){var i=this.getImageClassContainer(),t=e?i.isExist(t):i.isLoaded(t);return t},e.getId=function(t,e){this.id=this.instanceNode.attr("id"),this.id||(this.isCustomId=!0,t=t||"component-",e=e||"smv-",this.id=e+t+i.generateUUID(),this.id=this.id.trim(),this.instanceNode.attr("id",this.id))},e.createOptionFunction=function(){var t=this;this.option=function(){return 1<arguments.length?t.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):t.instanceOptions.get(arguments.length<=0?void 0:arguments[0])}},e.startFullInit=function(t){this.destroyed||this.isStartedFullInit||(this.isStartedFullInit=!0,this.getOptionsForStartFullInit(t))},e.getOriginImageUrl=function(){},e.run=function(){return!this.isStarted&&(this.isStarted=!0)},e.done=function(){this._isReady=!0},e.destroy=function(){this.destroyed=!0,this.isStarted=!1,this._isReady=!1,this.isStartedFullInit=!1,this.isCustomId&&(this.instanceNode.removeAttr("id"),this.isCustomId=!1),this.instanceNode=null,n.prototype.destroy.call(this)},t}(e)}),Sirv.define("Instance",["bHelpers","magicJS","Promise!","globalVariables","BaseInstance","helper"],function(i,t,s,o,e,r){function a(t){return new Error("This method '"+t+"' is not implemented.")}var h=t;h.$;return function(n){"use strict";function t(t,e,i){var s=n.call(this,t,e,i)||this;return s.type=o.SLIDE.TYPES.NONE,s.always=e.always,s.quality=e.quality,s.hdQuality=e.hdQuality,s.isHDQualitySet=e.isHDQualitySet,s.isFullscreenEnabled=e.isFullscreen,s.dataAlt=null,s.isSlideShown=!1,s.isInView=!1,s.preload=!1,s.firstSlideAhead=!1,s.infoSize=null,s.pinchCloud=null,s.onLoad=!1,s.waitToStart=new r.WaitToStart,s.waitGettingInfo=new r.WaitToStart,s.gettingInfoPromise=null,s.fullscreenState=o.FULLSCREEN.CLOSED,s.on("stats",function(t){t.data.component=o.SLIDE.NAMES[s.type]}),s}i.inheritsLoose(t,n);var e=t.prototype;return e.sendEvent=function(t,e){(e=e||{}).event||(e.event={}),e.id=this.id,e.url=this.instanceUrl,e.event.timestamp=+new Date,e.event.type=o.SLIDE.NAMES[this.type]+":"+t,this.emit("componentEvent",{data:{type:t,data:e}})},e.onStartActions=function(){},e.onStopActions=function(){},e.onInView=function(){},e.onBeforeFullscreenIn=function(){},e.onAfterFullscreenIn=function(){},e.onBeforeFullscreenOut=function(){},e.onAfterFullscreenOut=function(){},e.onMouseAction=function(){},e.onSecondSelectorClick=function(){},e.onStopContext=function(){},e.loadContent=function(){return!0},e.loadThumbnail=function(){return!this.destroyed&&(this.waitToStart.start(),!0)},e.startGettingInfo=function(){return!this.destroyed&&(this.waitGettingInfo.start(),!0)},e.startFullInit=function(t){var e=this;this.isStartedFullInit||(n.prototype.startFullInit.call(this,t),t&&(this.always=t.always),this.dataAlt=this.instanceNode.attr("data-alt"),this.on("startActions",function(t){t.stop(),e.isSlideShown=!0,e.onStartActions(t.who)}),this.on("stopActions",function(t){t.stop(),e.isSlideShown=!1,e.onStopActions()}),this.on("inView",function(t){t.stop();t=t.data;e.onInView(t),e.isInView=t}),this.setEvents())},e.isFullscreenActionEnded=function(){return h.contains([o.FULLSCREEN.CLOSED,o.FULLSCREEN.OPENED],this.fullscreenState)},e.setEvents=function(){var e=this;this.on("beforeFullscreenIn",function(t){t.stop(),e.fullscreenState===o.FULLSCREEN.OPENED||e.destroyed||(e.fullscreenState=o.FULLSCREEN.OPENING,e.onBeforeFullscreenIn(t.data))}),this.on("afterFullscreenIn",function(t){t.stop(),e.destroyed||(e.fullscreenState=o.FULLSCREEN.OPENED,e.onAfterFullscreenIn(t.data))}),this.on("beforeFullscreenOut",function(t){t.stop(),e.fullscreenState===o.FULLSCREEN.CLOSED||e.destroyed||(e.fullscreenState=o.FULLSCREEN.CLOSING,e.onBeforeFullscreenOut(t.data))}),this.on("afterFullscreenOut",function(t){t.stop(),e.destroyed||(e.fullscreenState=o.FULLSCREEN.CLOSED,e.onAfterFullscreenOut(t.data))})},e.getOriginImageUrl=function(){throw a("getInfoSize")},e.getSelectorImgUrl=function(){return s.reject(a("getSelectorImgUrl"))},e.getInfoSize=function(){return s.reject(a("getInfoSize"))},e.run=function(t,e,i){var s=n.prototype.run.call(this);return s&&(this.isSlideShown=t,this.preload=e,this.firstSlideAhead=i,this.firstSlideAhead||this.waitToStart.start()),s},e.getThumbnailData=function(){return{src:null}},e.getSocialButtonData=function(t){var e=t;return(this.infoSize.width<t.width||this.infoSize.height<t.height)&&(e.width=this.infoSize.width,e.height=this.infoSize.height),this.getThumbnailData(e).src},e.createPinchEvent=function(t){var e=this,i={isAdded:!1,pinch:!1,scale:0,block:!1,onPinchStart:function(t){},onPinchResize:function(t){},onPinchMove:function(t){},onPinchEnd:function(t){i.pinch&&(i.pinch=!1,e.sendEvent("pinchEnd")),i.block=!1},handler:function(t){switch(t.state){case"pinchstart":i.onPinchStart(t);break;case"pinchresize":i.onPinchResize(t);break;case"pinchmove":i.onPinchMove(t);break;case"pinchend":i.onPinchEnd(t)}i.pinch&&t.stop()},addEvent:function(){!i.isAdded&&h.browser.touchScreen&&(t.addEvent("pinch",i.handler),i.isAdded=!0)},removeEvent:function(){i.isAdded&&(t.removeEvent("pinch",i.handler),i.isAdded=!1,i.block=!1,i.pinch=!1)}};i.addEvent(),this.pinchCloud=i},e.done=function(){var e=this;n.prototype.done.call(this),this.createPinchEvent(),this.on("resize",function(t){t.stop(),e.onResize()}),this.on("stopContext",function(t){t.stop(),e.onStopContext()}),this.on("secondSelectorClick",function(t){t.stopAll(),e.onSecondSelectorClick()}),this.on("mouseAction",function(t){t.stop(),e.onMouseAction(t.data.type)}),this.on("dragEvent",function(t){t.stop(),e.pinchCloud&&("dragstart"===t.data.type?e.pinchCloud.removeEvent():"dragend"===t.data.type&&e.pinchCloud.addEvent())}),this.sendEvent("ready")},e.sendContentLoadedEvent=function(){this.onLoad||(this.onLoad=!0,this.sendEvent("contentLoaded"))},e.destroy=function(){this.off("stats"),this.off("startActions"),this.off("stopActions"),this.off("inView"),this.off("resize"),this.off("stopContext"),this.off("secondSelectorClick"),this.off("mouseAction"),this.off("dragEvent"),this.off("beforeFullscreenIn"),this.off("afterFullscreenIn"),this.off("beforeFullscreenOut"),this.off("afterFullscreenOut"),this.pinchCloud=null,this.isSlideShown=!1,n.prototype.destroy.call(this),this.waitGettingInfo.destroy(),this.waitGettingInfo=null,this.waitToStart.destroy(),this.waitToStart=null,this.gettingInfoPromise=null},t}(e)}),Sirv.define("HotspotInstance",["bHelpers","magicJS","Promise!","Instance"],function(o,t,e,i){function r(t,e){console.warn("sirv.js: The "+t+" method is deprecated and will be removed. \r\n           Use "+e+" instead.")}var a=t,s=a.$;return function(n){"use strict";function t(t,e,i){i=n.call(this,t,e,i)||this;i.hotspots=null;var s=o.assertThisInitialized(i);return i.api=a.extend(i.api,{addHotspot:function(t){r(".addHotspot()",".hotspots.add()"),s.hotspots.api.add(t),s.isInView&&s.isSlideShown&&s.hotspots.showNeededElements()},removeHotspot:function(t){r(".removeHotspot()",".hotspots.remove()"),s.hotspots.api.remove(t)},removeAllHotspots:function(){r(".removeAllHotspots()",".hotspots.removeAll()"),s.hotspots.api.removeAll()},getHotspots:function(){return r(".getHotspots()",".hotspots.list()"),s.hotspots.api.list()}}),i}o.inheritsLoose(t,n);var e=t.prototype;return e.createHotspotsClass=function(t,e){var s=this;this.hotspots=new t(e),this.hotspots.setParent(this),this.on("hotspotActivate",function(t){t.stopAll(),s.onHotspotActivate(t.data),s.sendEvent("hotspotOpened")}),this.on("hotspotDeactivate",function(t){t.stopAll(),s.onHotspotDeactivate(t.data),s.sendEvent("hotspotClosed")}),this.api=a.extend(this.api,{hotspots:this.hotspots.api});var n=this;this.api.hotspots.add=function(t){var e,i;t&&(i=null,n.hotspots.getHotspots().length||(e=s.getParentContainer(),i=n.hotspots.getRightBoundengClientRect(s.getContainerForBoundengClientRect()),n.hotspots.appendTo(e)),n.hotspots.addHotspot(t),n.hotspots.setContainerSize(i),n.hotspots.showAll(),n.isInView&&n.isSlideShown&&n.hotspots.showNeededElements())}},e.getContainerForBoundengClientRect=function(){return this.getParentContainer()},e.done=function(){var t;this._isReady||this.destroyed||(t=this.getParentContainer(),this.hotspots&&(this.hotspotsData&&this.hotspotsData.length&&this.hotspots.appendTo(t),this.hotspots.createHotspots(this.hotspotsData),this.nativeFullscreen&&this.hotspots.changeBoxContainerParent(!0),this.hotspots.showAll())),n.prototype.done.call(this)},e.getParentContainer=function(){var t=this.instanceNode;return"img"===t.getTagName()&&(t=s(t.node.parentNode)),t},e.onHotspotActivate=function(){},e.onHotspotDeactivate=function(){},e.onStartActions=function(){this.hotspots&&this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements(),n.prototype.onStartActions.call(this)},e.onStopActions=function(){this.hotspots&&this.hotspots.hideActiveHotspotBox(!0),n.prototype.onStopActions.call(this)},e.onBeforeFullscreenIn=function(){this.hotspots&&(this.hotspots.hideActiveHotspotBox(),this.nativeFullscreen&&this.hotspots.changeBoxContainerParent(!0))},e.onBeforeFullscreenOut=function(){this.hotspots&&(this.hotspots.hideActiveHotspotBox(),this.nativeFullscreen&&this.hotspots.changeBoxContainerParent())},e.onAfterFullscreenOut=function(){this.hotspots&&this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements()},e.destroy=function(){this.hotspots&&this.hotspots.destroy(),this.hotspots=null,this.off("hotspotActivate"),this.off("hotspotDeactivate"),n.prototype.destroy.call(this)},t}(i)}),Sirv.define("Zoominstance",["bHelpers","magicJS","HotspotInstance","ImageZoom"],function(n,t,e,o){var r=t;r.$;return function(s){"use strict";function t(t,e,i){i=s.call(this,t,e,i)||this;return i.zoom=null,i.upscale=!1,i.defaultZoomOptions={},i.zoomContainer=i.instanceNode,i.zoomClassName="smv-zoomed-in",i.api=r.extend(i.api,{zoomIn:i.zoomIn.bind(n.assertThisInitialized(i)),zoomOut:i.zoomOut.bind(n.assertThisInitialized(i)),isZoomed:i.isZoomed.bind(n.assertThisInitialized(i))}),i}n.inheritsLoose(t,s);var e=t.prototype;return e.setDefaultZoomOptions=function(){this.defaultZoomOptions={test:!1,upscale:this.upscale,smoothing:!0}},e.createZoom=function(t,e){if(this.destroyed)return null;var i=r.extend({},this.defaultZoomOptions);return e&&(i=r.extend(i,e)),this.zoom=new o(this.instanceNode,i),this.zoom.setParent(this),i},e.onZoomGetImage=function(t){t.data.exactSize=!0,t.data.maxSize=!1,t.data.round=!1,t.data.callbackData={lens:!0,indexX:t.data.indexX,indexY:t.data.indexY,level:t.data.level,number:t.data.number,map:t.data.map}},e.onZoomCancelLoadingOfTiles=function(t){t.data.callbackData||(t.data.callbackData={}),t.data.callbackData.lens=!0},e.onZoomBeforeShow=function(){},e.onZoomShown=function(){},e.onZoomHidden=function(){},e.setZoomEvents=function(){var e=this;this.zoom&&(this.on("zoomGetImage",function(t){t.stopAll(),e.onZoomGetImage(t)}),this.on("zoomCancelLoadingOfTiles",function(t){t.stopAll(),e.onZoomCancelLoadingOfTiles(t)}),this.on("zoomBeforeShow",function(t){t.stopAll(),e.onZoomBeforeShow(t)}),this.on("zoomShown",function(t){t.stopAll(),e.onZoomShown(t)}),this.on("zoomHidden",function(t){t.stopAll(),e.onZoomHidden(t)}))},e.zoomIn=function(){return!!this._isReady},e.zoomOut=function(){return!!this._isReady},e.getZoomData=function(){return this._isReady&&this.zoom?this.zoom.getZoomData():0},e.isZoomed=function(){return!(!this._isReady||!this.zoom)&&(this.zoom.isShown()||this.zoom.isShowing())},e.isZoomSizeExist=function(){return!1},e.clearZoom=function(){this.zoom&&(this.off("zoomGetImage"),this.off("zoomCancelLoadingOfTiles"),this.off("zoomBeforeShow"),this.off("zoomShown"),this.off("zoomHidden"),this.zoom.destroy(),this.zoom=null)},e.destroy=function(){this.clearZoom(),s.prototype.destroy.call(this)},t}(e)}),Sirv.define("Hotspot",["bHelpers","globalFunctions","magicJS","EventEmitter","helper","Promise!"],function(i,t,e,s,o,n){var r=e,a=r.$,h="sirv-hotspot-tooltip",l="sirv-hotspot-box-out-of-width",c="sirv-hotspot-box-out-of-height",d="sirv-hotspot-overwrite-pointer-event",u={AUTO:0,VISIBLE:1};return function(n){"use strict";function t(t,e,i){var s=n.call(this)||this;return s.container=t,s.hotspotData=e,s.id=i,s.box=null,s.boxContainer=r.D.node.body,s.baseBoxSize=null,s.tooltip=null,s.version=1,s.pointer=null,s.hotspotSettings={},s.dX=1,s.dY=1,s.isActive=!1,s.isDisabled=!1,s.isPointerInDoc=!1,s.isHovered=!1,s.isShown=!1,s.isBoxContent=!1,s.tooltipState=u.AUTO,s.boxState=u.AUTO,s.init(),s}i.inheritsLoose(t,n);var e=t.prototype;return e.isTooltipHovered=function(){return this.isHovered},e.isBoxActivated=function(){return this.isActive},e.isBoxAlwaysVisible=function(){return this.boxState===u.VISIBLE},e.isTooltipAlwaysVisible=function(){return this.tooltipState===u.VISIBLE},e.init=function(){this.setVersion(),this.parseHotspotData(),this.createBlocks(),this.setEvents(),this.createBox()},e.setVersion=function(){(this.hotspotData.style||this.hotspotData.tooltip||this.hotspotData.box&&this.hotspotData.box.content)&&(this.version=2)},e.parseHotspotData=function(){var e=this;o.objEach(this.hotspotData,function(t){e.hotspotSettings[t]=e.hotspotData[t]}),this.hotspotSettings.pointerPositionPercentage={top:o.isPercentage(""+this.hotspotSettings.pointer.y),left:o.isPercentage(""+this.hotspotSettings.pointer.x)}},e.createBlocks=function(){this.pointer=r.$new("div").addClass("sirv-hotspot-pointer").attr("data-spot-id",this.id),this.pointer.addClass("hotspot-pointer"),1<this.version&&this.hotspotSettings.tooltip&&this.hotspotSettings.tooltip.content&&(this.tooltip=r.$new("div").addClass(h).changeContent(this.hotspotSettings.tooltip.content),this.hotspotSettings.tooltip.style&&this.tooltip.addClass(h+"--"+this.hotspotSettings.tooltip.style))},e.setTooltipPosition=function(){var t,e;this.tooltip&&(t=this.pointer.getRect(),(e={top:0,left:0}).top=this.hotspotSettings.tooltip.style?t.top:t.bottom,e.left=this.hotspotSettings.tooltip.style?(t.left+t.right)/2:t.right,"body"!==r.$(this.boxContainer).getTagName()&&(t=this.pointer.node.getBoundingClientRect(),e.top=this.hotspotSettings.tooltip.style?t.top-this.container.node.getBoundingClientRect().top:t.bottom-this.container.node.getBoundingClientRect().top,e.left=this.hotspotSettings.tooltip.style?t.left-this.container.node.getBoundingClientRect().left+t.width/2:t.left-this.container.node.getBoundingClientRect().left+t.width),this.tooltip.setCss(e))},e.showTooltip=function(){this.isHovered||this.isDisabled||this.tooltip&&(this.setTooltipPosition(),this.tooltip.appendTo(this.boxContainer).addClass(h+"-visible"),this.isHovered=!0,this.emit("hotspotHovered",{data:{hotspot:this}}))},e.setEvents=function(){var e,i=this;this.pointer.addEvent("click mousedown",function(t){t.stop()}),this.pointer.addEvent("btnclick tap",function(t){return 3===t.getButton()||(i.hotspotSettings.link?(r.W.node.open(i.hotspotSettings.link),t.stop()):i.isBoxContent&&(t.stop(),i.showBox()),!1)}),"edge"!==r.browser.uaName&&!r.browser.ieMode||this.pointer.addEvent("mousedown",function(t){t.stopDistribution()}),this.hotspotSettings.tooltip&&this.hotspotSettings.tooltip.content&&(this.pointer.addEvent("mouseenter",function(t){i.showTooltip()}),this.pointer.addEvent("mouseleave",function(){i.tooltipState!==u.VISIBLE&&(i.hideTooltip(),i.isHovered=!1,i.emit("hotspotLeft",{data:{hotspot:i}}))})),a(r.W).addEvent("resize",function(t){clearTimeout(e),e=setTimeout(function(){var t;!i.isActive||(t=i.hotspotSettings)&&i.box.setCss(i.correctBoxPosition(i.getBoxPosition(t)))},42)})},e.createBox=function(){var t,e=this,i=null;1<this.version&&this.hotspotSettings.box&&this.hotspotSettings.box.content?i=this.hotspotSettings.box.content:this.hotspotSettings.data&&(i=this.hotspotSettings.data),this.box=r.$new("div").addClass("sirv-hotspot-box"),i&&(this.isBoxContent=!0,t=r.$new("div").addClass("sirv-hotspot-box-wrapper").append(r.$new("div").addEvent("btnclick tap",function(t){e.boxState!==u.VISIBLE&&(t.stop(),e.hideBox(!0))}).addClass("sirv-hotspot-close-button")),i=r.$new("div").addClass("sirv-hotspot-box-content").changeContent(i+"").addEvent("click",function(t){t.stopDistribution()}),t.append(i),this.box.append(t)),this.box.setCss({top:"-10000px",left:"-10000px",position:"absolute",opacity:0})},e.getBoxPosition=function(t){var e={top:0,left:0,transform:""};if(t&&t.box){var i=t.box.x,s=t.box.y;if(this.hotspotSettings.box.fixed){var n=this.container.getRect();if(e.position="absolute","body"!==r.$(this.boxContainer).getTagName()){switch(s){case"top":e.top=0;break;case"bottom":e.top=n.bottom-n.top,e.transform+=" translateY(-100%)";break;case"center":e.top=(n.bottom-n.top+0)/2,e.transform+=" translateY(-50%)";break;default:e.top=0+(parseFloat(s)||0)}switch(i){case"left":e.left=0;break;case"right":e.left=n.right-n.left,e.transform+=" translateX(-100%)";break;case"center":e.left=(n.right-n.left)/2,e.transform+=" translateX(-50%)";break;default:e.left=n.left+(parseFloat(i)||0)}}else{switch(s){case"top":e.top=n.top;break;case"bottom":e.top=n.bottom,e.transform+=" translateY(-100%)";break;case"center":e.top=(n.top+n.bottom)/2,e.transform+=" translateY(-50%)";break;default:e.top=n.top+(parseFloat(s)||0)}switch(i){case"left":e.left=n.left;break;case"right":e.left=n.right,e.transform+=" translateX(-100%)";break;case"center":e.left=(n.left+n.right)/2,e.transform+=" translateX(-50%)";break;default:e.left=n.left+(parseFloat(i)||0)}}}else{t=this.pointer.getPosition(),n=r.W.getScroll();e.left=t.left-n.x+(parseFloat(i)||0),e.top=t.top-n.y+(parseFloat(s)||0)}}return e},e.correctBoxPosition=function(t){var e;return this.hotspotSettings.box&&!this.hotspotSettings.box.fixed&&(this.box.removeClass(l),this.box.removeClass(c),e=r.W.getSize(),this.baseBoxSize.width>e.width?this.box.addClass(l):t.left+this.baseBoxSize.width>e.width&&(t.left=e.width-this.baseBoxSize.width),this.baseBoxSize.height>e.height?this.box.addClass(c):t.top+this.baseBoxSize.height>e.height&&(t.top=e.height-this.baseBoxSize.height)),t},e.setBoxPosition=function(){var t=this.correctBoxPosition(this.getBoxPosition(this.hotspotSettings));this.box.setCssProp("position",""),this.box.setCss(t).getSize()},e.showBox=function(){this.isActive||this.isDisabled||(this.tooltip&&this.tooltipState===u.AUTO&&this.tooltip.removeClass(h+"-visible"),this.box.setCss({opacity:0}),this.box.appendTo(this.boxContainer),this.setBaseBoxSize(this.box.getSize()),this.setBoxPosition(),this.box.setCss({opacity:1}),this.isActive=!0,this.emit("hotspotActivate",{data:{hotspot:this}}))},e.hideBox=function(t){var e=this;if(this.isActive){if(t)return this.box&&this.box.setCssProp("opacity",0),setTimeout(function(){e.hideBox()},300),this.id;this.box&&this.box.remove(),this.isActive=!1,this.emit("hotspotDeactivate",{data:{hotspot:this}})}return this.id},e.changeBoxContainer=function(t){this.boxContainer=null!=t?t:r.D.node.body},e.setBaseBoxSize=function(t,e){(t&&e||!this.baseBoxSize)&&(this.baseBoxSize={width:t.width,height:t.height})},e.setHotspotSettings=function(t){for(var e in t)!{}.hasOwnProperty.call(t,e)||(this.hotspotSettings[e]=t[e])},e.getHotspotSettings=function(){return this.hotspotSettings},e.setAspectRatio=function(t,e){this.dX=t,this.dY=e},e.setPointerPosition=function(){var t=this.hotspotSettings;t&&this.pointer.setCss({top:t.pointerPositionPercentage.top?t.pointer.y:Math.ceil(t.pointer.y*this.dY),left:t.pointerPositionPercentage.left?t.pointer.x:Math.ceil(t.pointer.x*this.dX)})},e.showPointer=function(){var t;this.hotspotSettings&&!this.isDisabled?(this.pointer.addClass("pulsating-point"),this.setPointerPosition(),(this.hotspotSettings.style||this.hotspotSettings.pointer.style)&&(t=(t=this.hotspotSettings.style)||this.hotspotSettings.pointer.style,this.pointer.addClass(t)),this.isPointerInDoc||(this.isPointerInDoc=!0,this.pointer.appendTo(this.container))):this.hidePointer()},e.hidePointer=function(){this.isPointerInDoc&&(this.isPointerInDoc=!1,this.pointer.remove())},e.isHotspotShown=function(){return this.isShown},e.show=function(){this.isDisabled||this.isShown||(this.isShown=!0,this.showPointer(),this.boxState===u.SHOW&&this.showBox(),this.tooltipState===u.SHOW&&this.showTooltip())},e.hide=function(){this.isShown&&(this.isShown=!1,this.hideBox(),this.hideTooltip(),this.hidePointer())},e.isEnabled=function(){return!this.isDisabled},e.enable=function(){this.isDisabled&&(this.isDisabled=!1)},e.disable=function(){this.isDisabled||(this.isDisabled=!0,this.hide())},e.hideTooltip=function(){this.isHovered&&(this.isHovered=!1,this.tooltip&&this.tooltip.removeClass(h+"-visible"))},e.overridePointerEvent=function(){this.isBoxAlwaysVisible()||this.isTooltipAlwaysVisible()||this.container.addClass(d)},e.removeOverridePointerEvent=function(){this.container.removeClass(d)},e.getId=function(){return this.id},e.setId=function(t){this.id=t},e.setState=function(t,e){this.boxState!==t.popup&&(this.boxState=t.popup,t.popup===u.VISIBLE?e||this.showBox():this.hideBox()),this.tooltipState!==t.tooltip&&(this.tooltipState=t.tooltip,t.tooltip===u.VISIBLE?e||this.showTooltip():this.hideTooltip())},e.rewriteAttrPointer=function(t){t=t||this.id;this.pointer.attr("data-spot-id",t)},e.getHotspotPointer=function(){return this.pointer},e.destroy=function(){this.hideBox(),this.hideTooltip(),this.hotspotData=null,this.container=null,this.id=null,this.pointer.clearEvents(),this.tooltip&&this.tooltip.clearEvents(),this.pointer.remove(),this.box=null,this.boxContainer=null,this.baseBoxSize=null,this.tooltip=null,this.version=null,this.pointer=null,this.hotspotSettings=null,this.isActive=!1,this.isDisabled=!1,this.isPointerInDoc=!1,this.isHovered=!1,n.prototype.destroy.call(this)},t}(s)}),Sirv.define("Hint",["bHelpers","magicJS","globalVariables","globalFunctions","helper"],function(t,e,i,s,n){var o=e,r=o.$;return function(){"use strict";function t(t,e){this.parent=r(t),this.options=o.extend({html:"hint",showClass:"show",additionalClass:null,autohide:3500},e||{}),this.instanceNode=o.$new("div").addClass("sirv-hint"),this.hintContainer=o.$new("span").addClass("sirv-hint-message"),this.inDoc=!1,this.isShown=!1,this.timer=null,this.instanceNode.addClass(this.options.additionalClass),this.hintContainer.node.innerHTML=this.options.html,this.instanceNode.append(this.hintContainer)}var e=t.prototype;return e.getAutoHideTime=function(){return this.options.autohide},e.getActionTime=function(){var t=0,e=this.instanceNode.getCss("transition");try{e=e.split(" ")[1]}catch(t){e=0}return e&&(e=e.trim(),/m?s$/.test(e)&&(/s$/.test(e)?(t=parseFloat(e),t*=1e3):t=parseInt(e,10))),t},e.getMovingTime=function(){return this.getAutoHideTime()+this.getActionTime()},e.append=function(){this.inDoc||(this.inDoc=!0,this.parent.append(this.instanceNode))},e.removeEvent=function(){this.instanceNode.removeEvent("transitionend")},e.show=function(){var t=this;this.append(),clearTimeout(this.timer),this.timer=null,this.instanceNode.getSize(),this.removeEvent(),this.instanceNode.addClass(this.options.showClass),this.isShown=!0,this.options.autohide&&(this.timer=setTimeout(function(){t.hide()},this.options.autohide))},e.hide=function(){var e=this;this.inDoc&&(this.removeEvent(),clearTimeout(this.timer),this.timer=null,this.instanceNode.addEvent("transitionend",function(t){t.stop(),e.removeEvent(),e.inDoc=!1,e.instanceNode.remove()}),this.instanceNode.removeClass(this.options.showClass),this.isShown=!1)},e.destroy=function(){this.instanceNode.setCssProp("transitionend","none"),this.hide(),this.removeEvent(),this.hintContainer.remove(),this.hintContainer.node.innerHTML="",this.instanceNode.remove(),this.inDoc=!1},t}()}),Sirv.define("ResponsiveImage",["bHelpers","magicJS","globalVariables","globalFunctions","Promise!","helper","EventEmitter"],function(e,t,i,s,r,l,n){function a(t,e){return e=t+("?"+l.paramsToQueryString(e)),e=l.cleanQueryString(e)}function c(t,e){var i,s=d.extend({},t);return delete s.src,delete s.srcset,s.imageSettings=d.extend({},(null==t?void 0:t.imageSettings)||{}),1<e&&((i=JSON.parse(JSON.stringify(s))).width&&(i.width=parseInt(i.width*e,10)),i.height&&(i.height=parseInt(i.height*e,10)),i.imageSettings.crop&&(i.imageSettings.crop.width&&(i.imageSettings.crop.width=parseInt(i.imageSettings.crop.width*e,10)),i.imageSettings.crop.height&&(i.imageSettings.crop.height=parseInt(i.imageSettings.crop.height*e,10))),i.dppx=e),s.imageSettings=d.extend(s.imageSettings,t.src),i&&t.srcset&&(i.imageSettings=d.extend(i.imageSettings,t.srcset)),{src:s,srcset:i}}function h(t){return(100*t).toFixed(4)+"%"}function o(t,e){var i=null;return t&&t.crop&&t.crop[e]&&(i=t.crop[e]),i}var d=t,u=d.$,p=function(){"use strict";function t(t,e,i,s,n,o){this.name=t,this.state=0,this.imageNode=null,this.size={width:0,height:0},this.loader=null,this.callbacks=[],this.srcSettings=i,this.srcsetSettings=s,this.dontLoad=n,this.dppx=this.srcsetSettings?this.srcsetSettings.dppx:1,this.referrerPolicy=o,""===i.profile&&delete i.profile,s&&""===s.profile&&delete s.profile,this.src=a(e,i),this.srcset=null,s&&(this.srcset=a(e,s.settings))}var e=t.prototype;return e.load=function(){var s=this;return new r(function(e,i){s.dontLoad||s.state?e(s):(s.state=1,s.imageNode=u(new Image),s.imageNode.attr("referrerpolicy",s.referrerPolicy||"no-referrer-when-downgrade"),s.imageNode.addEvent("load",function(t){t.stop(),s.state=2,s.size={width:s.imageNode.node.naturalWidth||s.imageNode.node.width,height:s.imageNode.node.naturalHeight||s.imageNode.node.height},"safari"===d.browser.uaName&&(t=!1,s.srcSettings.scale.width?s.size.width>s.srcSettings.scale.width+5&&(t=!0):s.size.height>s.srcSettings.scale.height+5&&(t=!0),t&&(s.size.width/=s.dppx,s.size.height/=s.dppx)),e(s)}),s.imageNode.addEvent("error",function(t){t.stop(),s.state=3,s.imageNode=null,i(s)}),s.setSrc(),s.setSrcset())})},e.setSrc=function(){this.imageNode.node.src=this.src},e.setSrcset=function(){this.srcset&&(this.imageNode.node.srcset=this.srcset+" "+this.dppx+"x")},e.isLoading=function(){return 1===this.state},e.destroy=function(){1===this.state&&this.imageNode&&this.imageNode.attr("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),this.state=0},t}(),m=function(a){"use strict";function t(t,e,i,s,n,o,r){o=a.call(this,t,e,i,s,n,o)||this;return o.tileName=r,o}return e.inheritsLoose(t,a),t.prototype.setSrc=function(){1===this.dppx&&a.prototype.setSrc.call(this)},t}(p),f={};return function(s){"use strict";function n(t,e){var i=s.call(this)||this;return"string"!==d.typeOf(t)&&(t=u(t).attr("src")),i.o=d.extend({type:"main",infoId:"sirv-image-"+l.generateUUID(),imageSettings:{},round:!0,dontLoad:!1,convertSmallerSideToZero:!0,referrerPolicy:"no-referrer-when-downgrade",loadNewImage:!1},e),i.imageInfoPromise=null,i.images={},i.originUrl=d.getAbsoluteURL(t).split("?")[0],i.infoUrl=i.originUrl+"?nometa&info",i.imageSettings=d.extend({},i.o.imageSettings),i}e.inheritsLoose(n,s),n.roundImageSize=function(t,e){var i;return e=e||{width:Number.MAX_VALUE,height:Number.MAX_VALUE},t.width&&t.height?t.width>=t.height?(i=l.roundSize(t.width))<=e.width&&(t.height=Math.floor(t.height/t.width*i),t.width=i):(i=l.roundSize(t.height))<=e.height&&(t.width=Math.floor(t.width/t.height*i),t.height=i):t.width?(i=l.roundSize(t.width))<=e.width&&(t.width=i):t.height&&(i=l.roundSize(t.height))<=e.height&&(t.height=i),t};var t=n.prototype;return t._convertImageSettings=function(t){function e(t,e){e.width&&(t.width=e.width),e.height&&(t.height=e.height)}t=t||{},t=d.extend({},t);var i=this.getClearSizeWithoutProcessingSettings({width:t.width,height:t.height});e(t,i);var s=c(t,t.dppx);return(t.round||!t.hasOwnProperty("round")&&this.o.round)&&(t=this.getOriginSize(),e(s,i=n.roundImageSize(s.src,t)),s.srcset&&e(s,i=n.roundImageSize(s.srcset,t))),s},t._mixSettings=function(t){return function(t,e,i){e=l.deepExtend({},e);return t&&t.imageSettings.processingSettings&&(e.crop||(e.crop={}),e.crop=l.deepExtend(e.crop,t.cropSettings),e.crop&&(e.crop.width&&/100(\.0*)?%/.test(e.crop.width)&&delete e.crop.width,e.crop.height&&/100(\.0*)?%/.test(e.crop.height)&&delete e.crop.height),e.canvas||(e.canvas={}),e.canvas=l.deepExtend(e.canvas,t.canvasSettings),e.frame||(e.frame={}),e.frame=l.deepExtend(e.frame,t.frameSettings),e.scale||(e.scale={}),e.scale.option||(e.scale.option="fill")),i.width&&"auto"!==i.width&&(e.scale.width=i.width),i.height&&"auto"!==i.height&&(e.scale.height=i.height),i.imageSettings&&(e=l.deepExtend(e,i.imageSettings)),e}(f[this.o.infoId],this.imageSettings,t)},t._calcProcessingSettings=function(){var t=f[this.o.infoId],e={},i={},s={};t.imageSettings.viewer||(t.imageSettings.viewer={});var n=t.imageSettings.viewer,o={width:t.imageSettings.original.width,height:t.imageSettings.original.height,widthScale:1,heightScale:1};n.scale&&(n.scale.width&&(o.width*=n.scale.width),n.scale.height&&(o.height*=n.scale.height)),o.widthScale=o.width/t.imageSettings.width,o.heightScale=o.height/t.imageSettings.height,n.crop&&(n.crop.width&&(e.width=h(n.crop.width)),n.crop.height&&(e.height=h(n.crop.height)),n.crop.x&&(e.x=h(n.crop.x)),n.crop.y&&(e.y=h(n.crop.y))),n.canvas&&(n.canvas.width&&(i.width=h(n.canvas.width)),n.canvas.height&&(i.height=h(n.canvas.height)),n.canvas.border&&(i.border={},n.canvas.border.width&&(i.border.width=h(n.canvas.border.width)),n.canvas.border.height&&(i.border.height=h(n.canvas.border.height)))),n.frame&&n.frame.width&&(s.width=h(n.frame.width)),t=d.extend(t,{cropSettings:e,canvasSettings:i,frameSettings:s,originSize:o})},t._addImage=function(t,e){var i=this,s=(d.defined(e.src.dontLoad)?e.src:this.o).dontLoad,n=function(t){t=i._mixSettings(t);return t.scale&&t.scale.width&&t.scale.height&&"ignore"!==t.scale.option&&(t.scale.width>=t.scale.height?i.o.convertSmallerSideToZero&&(t.scale.height=0):i.o.convertSmallerSideToZero&&(t.scale.width=0)),t},o=n(e.src),r=null,a=null;e.src.imageSettings&&e.src.imageSettings.tile&&(a=e.src.imageSettings.tile.number+""),e.srcset&&(r={dppx:e.srcset.dppx,settings:n(e.srcset)});n=null,n=null===a?new p(t,this.originUrl,o,r,s,this.o.referrerPolicy):new m(t,this.originUrl,o,r,s,this.o.referrerPolicy,a);return this.images[t]={serverWidth:e.src.width,serverHeight:e.src.height,image:n},this.images[t]},t._load=function(t,e){var i,s,n=this;this._addImage(t,e).image.load().then(function(t){i="imageOnload",(s=t)instanceof p&&(n.someImageIsLoaded=!0)}).catch(function(t){s=t,i="imageOnerror"}).finally(function(){s instanceof p&&(n.someImageIsComplete=!0);var t=n.images[s.name];t&&n.emit(i,{data:n._createImageData(t,e.src.callbackData)})})},t._createImageData=function(t,e){var i=t.image;return{callbackData:e,name:i.name,tileName:i.tileName,tile:i instanceof m,node:i.imageNode,serverWidth:t.serverWidth,serverHeight:t.serverHeight,width:i.size.width,height:i.size.height,src:i.src,srcset:i.srcset,state:i.state,dppx:i.dppx||1}},t._filter=function(i){var s=[];return l.objEach(this.images,function(t,e){e.image instanceof m==!!i&&s.push(e)}),s},t.getCropPosition=function(){var t=f[this.o.infoId],e=o(this.imageSettings,"x");e&&!/%$/.test(e)&&(e=h(e/t.originSize.width));var i=o(this.imageSettings,"y");return i&&!/%$/.test(i)&&(i=h(i/t.originSize.height)),{x:e||t.cropSettings.x,y:i||t.cropSettings.y,type:o(this.imageSettings,"type")||o(t.imageSettings.processingSettings,"type")}},t.isExist=function(t){t=this._convertImageSettings(t);var e=this.getImageName(t.src),i=Object.prototype.hasOwnProperty.call(this.images,e);return i||t.src.imageSettings&&t.src.imageSettings.tile||!t.src.width||(e=this._filter(!1),i=this._getBiggerImage(t.src.width,e)),!!i},t.isLoaded=function(t){t=this._convertImageSettings(t);t=this.images[this.getImageName(t.src)];return!!(t=t&&2===t.image.state)},t.isReady=function(){return this.someImageIsLoaded},t.isComplete=function(){return this.someImageIsComplete},t.getOriginSize=function(){var t,e=null,i=null;return f[this.o.infoId]&&(i=f[this.o.infoId].imageSettings),i&&(i=i.processingSettings?(t=i.width,i.height):(t=i.original.width,i.original.height),e={width:t,height:i}),e},t.getImageInfo=function(){var o=this;return this.imageInfoPromise||(this.imageInfoPromise=new r(function(e,i){var t=o.originUrl,s=d.getHashCode(o.infoUrl.replace(/^http(s)?:\/\//,"")),n=l.paramsToQueryString(o.imageSettings);""!==n?(t+="?"+n,t+="&"):t+="?",t+="nometa&info=sirv_image_info_"+s+"_"+o.o.type,t=l.cleanQueryString(t),l.getRemoteData(t,"image_info_"+l.generateUUID(),o.o.referrerPolicy).then(function(t){!t.width||t._isplaceholder?i(t):(f[o.o.infoId]={imageSettings:t},o._calcProcessingSettings(),e(f[o.o.infoId]))}).catch(i)})),this.imageInfoPromise},t._getBiggerImage=function(i,t,s){var n=null;return i=i||0,t=t||this.images,s===d.U&&(s=this.o.dontLoad),l.objEach(t,function(t,e){i<e.serverWidth&&(2!==e.image.state&&!s||n&&!(n.serverWidth>e.serverWidth)||(n=e))}),n},t.sendLoad=function(t){var e;t=this._convertImageSettings(t),e=(e=this.images[this.getImageName(t.src)])||this._getBiggerImage(t.src.width),this.emit("imageOnload",{data:this._createImageData(e,t.src.callbackData)})},t.cancelLoadingImage=function(t){t=this._convertImageSettings(t);var e=this.getImageName(t.src),t=this.images[e];t&&t.image.isLoading()&&(t.image.destroy(),delete this.images[e])},t.getImageName=function(t){var e;return e=l.cleanQueryString(this.originUrl+("?"+l.paramsToQueryString(this._mixSettings(t)))),t=(e=(e=(e=e.replace("?+","?")).replace("&+","&")).split("?"))[1],e=e[0],t=(t=t.split("&")).sort(),""+d.getHashCode(e+"?"+t.join("&"))},t.getClearSizeWithoutProcessingSettings=function(t){var e={},i=f[this.o.infoId];return t.width&&(e.width=Math.round(t.width*i.originSize.widthScale)),t.height&&(e.height=Math.round(t.height*i.originSize.heightScale)),e},t.getImage=function(t){var e=this._convertImageSettings(t),i=(d.defined(e.src.dontLoad)?e.src:this.o).dontLoad,s=this.getImageName(e.src),t=this.images[s];return t||this._load(s,d.extend({},e)),t&&t.image.state<2&&!i&&(t=null),t||!e.src.maxSize&&this.o.loadNewImage||(e.src.exactSize?i&&(t=this.images[s]):t=this._getBiggerImage(null,null,i)),t=t&&this._createImageData(t,e.src.callbackData)},t.getOriginImageUrl=function(){var t=null;return this.originUrl&&(t=this.originUrl),t},t.getProcessingSettings=function(){var t=f[this.o.infoId];return{crop:t.cropSettings,cropClear:t.cropSettingsClear,canvas:t.canvasSettings,canvasClear:t.canvasSettingsClear}},t.getDescription=function(){var t=null,e=f[this.o.infoId];return e&&(t=e.imageSettings.original.description||null),t},t.getThumbnail=function(n){var t,e,o,i,s,r,a=this,h={imageSettings:null,size:null,src:null,srcset:null};return f[this.o.infoId]&&(t=c(n,d.DPPX),e=null,o=this.o.convertSmallerSideToZero,i=n.originUrl||this.originUrl,s=function(t,e){var i,s={scale:{option:"fill"}};(t.width||t.height)&&(t.width&&t.height?(s.scale.width=t.width,s.scale.height=t.height):(i=t.width||t.height,s.scale.width=i,s.scale.height=i)),t.width===t.height&&(n.crop?s.crop={x:"center",y:"center",width:t.width,height:t.height}:(s.scale.option="fit",s.canvas||(s.canvas={}),s.canvas.width=t.width,s.canvas.height=t.height)),s.scale&&(n.width&&n.height?f[a.o.infoId].imageSettings.original.width>=f[a.o.infoId].imageSettings.original.height?o&&(s.scale.height=0):o&&(s.scale.width=0):n.width?o&&(s.scale.height=0):n.height&&o&&(s.scale.width=0)),e&&(s=d.extend(s,e));e=s;return(s={}).imageSettings=e,(s=a._mixSettings(s)).text&&delete s.text,!n.watermark&&s.watermark&&delete s.watermark,l.paramsToQueryString(s)},r=function(t){var e={};return t.width&&(e.width=t.width),t.height&&(e.height=t.height),e},(t.src.crop||t.src.width&&t.src.height)&&(o=!1),h={callbackData:n.callbackData,size:r(t.src.imageSettings),src:l.cleanQueryString(i+"?"+s(r(t.src),t.src.imageSettings))},1<d.DPPX&&(e=s(r(t.srcset),t.srcset.imageSettings))&&(h.srcset=l.cleanQueryString(i+"?"+e))),h},t.getAccountInfo=function(){var t={},e=f[this.o.infoId];return e&&(t.account=e.imageSettings.account,t.branded=e.imageSettings.branded),t},t.destroy=function(){l.objEach(this.images,function(t,e){e.image.destroy()}),this.images={},this.someImageIsLoaded=!1,this.someImageIsComplete=!1,f[this.infoId]&&(delete f[this.infoId],this.infoId=null),s.prototype.destroy.call(this)},n}(n)}),Sirv.define("Loader",["bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter"],function(i,t,e,s,n,o){var r=t,a=r.$;return function(s){"use strict";function t(t,e){var i=s.call(this)||this;return i.parentNode=a(t),i.options=r.extend({width:null,height:null,class:null},e||{}),i.node=r.$new("div").addClass("smv-loader"),i.type="simple",i.inDoc=!1,i.options.class&&i.node.addClass(i.options.class),i.options.width&&i.node.setCssProp("width",i.options.width),i.options.height&&i.node.setCssProp("height",i.options.height),i}i.inheritsLoose(t,s);var e=t.prototype;return e.append=function(){this.inDoc||(this.inDoc=!0,this.parentNode.append(this.node))},e.show=function(){this.append(),this.node.setCss({display:"",visibility:"visible"})},e.hide=function(){this.node.setCss({display:"none",visibility:"hidden"})},e.destroy=function(){this.hide(),this.node.remove(),this.node=null,this.inDoc=!1,s.prototype.destroy.call(this)},t}(o)}),Sirv.define("RoundLoader",["bHelpers","magicJS","globalVariables","globalFunctions","helper","Loader"],function(s,t,n,e,i,o){var r=t,a=(r.$,"smv-show");return function(i){"use strict";function t(t,e){e=i.call(this,t,e)||this;return e.type="round",e.state=n.APPEARANCE.HIDDEN,e.timer=null,e.loaderElement=r.$new("div"),e.addClass(),e.node.append(e.loaderElement),e}s.inheritsLoose(t,i);var e=t.prototype;return e.addClass=function(){this.node.addClass("smv-round-loader")},e.isHiding=function(){return this.state===n.APPEARANCE.HIDING},e.show=function(){var e=this;r.contains([n.APPEARANCE.SHOWING,n.APPEARANCE.SHOWN],this.state)||(this.state=n.APPEARANCE.SHOWING,this.timer=setTimeout(function(){e.timer=null,e.append(),e.node.removeEvent("transitionend"),e.node.addEvent("transitionend",function(t){t.stop(),e.state=n.APPEARANCE.SHOWN}),e.node.getSize(),e.node.addClass(a)},250))},e.hide=function(t){var e=this;this.state===n.APPEARANCE.HIDDEN&&!t||(clearTimeout(this.timer),this.node.removeEvent("transitionend"),this.state!==n.APPEARANCE.SHOWN&&(t=!0),this.state=n.APPEARANCE.HIDING,t?(this.node.remove(),this.inDoc=!1,this.state=n.APPEARANCE.HIDDEN):this.node.addEvent("transitionend",function(t){t.stop(),e.node.remove(),e.inDoc=!1,e.state=n.APPEARANCE.HIDDEN}),this.node.removeClass(a))},e.destroy=function(){this.hide(!0),this.state=n.APPEARANCE.HIDDEN,this.node.innerHTML="",i.prototype.destroy.call(this)},t}(o)}),Sirv.define("ProgressLoader",["bHelpers","magicJS","globalVariables","globalFunctions","helper","RoundLoader"],function(i,t,n,e,s,o){function r(t,e){var i=h(a.D.node.createElementNS("http://www.w3.org/2000/svg",t));return e=e||{},s.objEach(e,function(t,e){i.attr(t,e)}),i}var a=t,h=a.$,l=0,c=1,d=2;return function(s){"use strict";function t(t,e){var i;return(i=(i=e)||{}).width||(i.width=44),i.height||(i.height=44),i.max||(i.max=0),e=i,(e=s.call(this,t,e)||this).type="progress",e.lineSize=125,e.currentLineSize=125,e.currentPersent=0,e.currentValue=0,e.progressState=l,e.maxOpacityFlag=!1,e.maxOpacity=1,e.circles=[],e.size={width:e.options.width,height:e.options.height},e.state=n.APPEARANCE.HIDDEN,e._createCircles(),e}i.inheritsLoose(t,s);var e=t.prototype;return e.addClass=function(){this.node.addClass("smv-progress-loader")},e._createCircles=function(){this.p='<span class="smv-pl-text-percent">%</span>',this.loaderElement.addClass("smv-pl-wrapper"),this.circleWrapper=a.$new("div").addClass("smv-pl-circle-wrapper");var t=this.size.width,e=t/2;this.circles.push(r("circle",{class:"smv-pl-pie",r:e-2,cx:e,cy:e})),this.circles.push(r("circle",{class:"smv-pl-slice",r:e-2,cx:e,cy:e})),this.svg=r("svg",{class:"smv-pl-indicator",viewBox:"0 0 "+t+" "+t}),this.circles[1].node.style.strokeDasharray=this.lineSize,this.circles[1].node.style.strokeDashoffset=this.lineSize,h(this.circles[1]).addEvent("transitionend",function(t){t.stop()}).setCssProp("transition","stroke-dashoffset .1s linear"),h(this.svg).append(this.circles[0]),h(this.svg).append(this.circles[1]),this.textWrapper=a.$new("div").addClass("smv-pl-text-wrapper"),this.text=a.$new("span").addClass("smv-pl-text"),this.text.changeContent(this.currentPersent+this.p),this.textWrapper.append(this.text),this.circleWrapper.append(this.svg),this.loaderElement.append(this.circleWrapper),this.loaderElement.append(this.textWrapper)},e.append=function(){this.progressState!==d&&s.prototype.append.call(this)},e.progress=function(){var t,e;this.progressState!==d&&(this.progressState=c,this.currentValue+=1,this.currentPersent=(t=this.options.max,e=this.currentValue,Math.round(100/(t/e))),this.currentLineSize=(t=this.lineSize,e=this.currentPersent,t-t/100*e),this.circles[1].node.style.strokeDashoffset=this.currentLineSize,this.text.node.innerHTML=this.currentPersent+this.p,this.currentValue===this.options.max&&(this.progressState=d,this.hide()))},e.setMaxOpacity=function(t){!this.maxOpacityFlag&&this.loaderElement&&(this.maxOpacity=t,this.maxOpacityFlag=!0,this.loaderElement.setCssProp("opacity",t))},e.isEnded=function(){return this.currentValue===this.options.max},e.isStarted=function(){return 0<this.currentValue},e.finishOff=function(){this.currentValue=this.options.max},e.isShow=function(){return this.state===n.APPEARANCE.SHOWN},e.show=function(){this.state!==n.APPEARANCE.SHOWN&&(this.state=n.APPEARANCE.SHOWN,this.append(),this.loaderElement.getSize(),this.loaderElement.removeEvent("transitionend"),this.loaderElement.addEvent("transitionend",function(t){t.stop()}),this.loaderElement.setCss({display:"block",opacity:this.maxOpacity,transform:"scale(1)"}))},e.hide=function(t){var e,i=this;(this.state!==n.APPEARANCE.HIDDEN||t)&&this.inDoc&&(e=0,this.state=n.APPEARANCE.HIDDEN,clearTimeout(this.timer),this.timer=setTimeout(function(){i.loaderElement.removeEvent("transitionend"),i.loaderElement.addEvent("transitionend",function(t){t.stop(),(e+=1)<2||(i.loaderElement.removeEvent("transitionend"),i.loaderElement.setCssProp("display","none"))}),i.loaderElement.setCss({opacity:0,transform:"scale(0)"})},t?0:400))},e.getProgressState=function(){return this.progressState},e.destroy=function(){this.hide(!0),clearTimeout(this.timer),this.currentPersent=0,this.currentValue=0,this.progressState=l,this.state=n.APPEARANCE.HIDDEN,this.loaderElement.removeEvent("transitionend"),this.loaderElement.node.innerHTML="",this.loaderElement=null,this.circleWrapper=null,this.textWrapper=null,this.circles=[],this.svg=null,this.text=null,this.inDoc=!1,s.prototype.destroy.call(this)},t}(o)}),Sirv.define("ComponentLoader",["bHelpers","magicJS","globalVariables","globalFunctions","helper","RoundLoader"],function(i,t,e,s,n,o){var r=t;r.$;return function(s){"use strict";function t(t,e){var i;return(i=(i=e)||{}).width||(i.width="100%"),i.height||(i.height="100%"),e=i,(e=s.call(this,t,e)||this).type="component",e.loaderElement.addClass("smv-bounce-wrapper").append(r.$new("div").addClass("smv-bounce1")).append(r.$new("div").addClass("smv-bounce2")),e}i.inheritsLoose(t,s);var e=t.prototype;return e.addClass=function(){this.node.addClass("smv-component-loader")},e.destroy=function(){this.loaderElement.removeClass("smv-bounce-wrapper"),this.loaderElement.node.innerHTML="",s.prototype.destroy.call(this)},t}(o)}),Sirv.define("ImageZoom",["bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter"],function(n,t,c,e,d,i){var u=t,h=u.$,l={canZoom:"smv-cursor-zoom",zoomIn:"smv-cursor-zoom-in",zoomOut:"smv-cursor-zoom-out",drag:"smv-cursor-dragging"},p="mousedrag touchdrag",s=d.isIe()?"pointerup":"touchend",o="mousemove";d.isIe()&&(o="pointermove");function m(t,e){return t/100*e}function f(t,e,i,s){return e<t&&(t=e),t+i<s&&(t=s-i),t}function g(t,e){return t/e*100}function v(t,e,i){return t<e&&(t=e),i<t&&(t=i),t}function r(t,e){return e/t}var a,S,y,w,b,E,I,C,x,z,P,N,O=(a=function(){"use strict";function r(t){this.isInner=t.inner,this.rows=t.lengthOfRow,this.cols=t.lengthOfColumn,this.size={width:t.cameraWidth,height:t.cameraHeight},this.bMapS={width:t.mapWidth,height:t.mapHeight},this.bTileS={width:t.tileWidth,height:t.tileHeight},this.bScale={x:t.scaleX,y:t.scaleY},this.mapS={width:this.bMapS.width,height:this.bMapS.height},this.tileS={width:this.bTileS.width,height:this.bTileS.height},this.baseLastTileSize={width:this.bMapS.width-(this.cols-1)*this.bTileS.width,height:this.bMapS.height-(this.rows-1)*this.bTileS.height},this.lastTileSize={width:this.baseLastTileSize.width,height:this.baseLastTileSize.height},this.position={x:0,y:0},this.lastCorrectionPosition={x:0,y:0},this.scale={x:0,y:0},this.lastScale=0,this.lastGlobaslScale=0,this.count={x:0,y:0},this.calcCount(),this.shownTiles={startX:0,countX:this.count.x,startY:0,countY:this.count.y}}r.getTileIndex=function(t,e){return Math.floor(t/e)},r.getTileSize=function(t,e){return t*e};var t=r.prototype;return t.checkTile=function(t,e){var i=this.shownTiles;return i.startX<=t&&i.startY<=e&&i.startX+i.countX>t&&i.startY+i.countY>e},t.calcCount=function(){this.count={x:Math.ceil(this.size.width/this.tileS.width)+1,y:Math.ceil(this.size.height/this.tileS.height)+1}},t.findShownTiles=function(){var t=this.position,e=this.tileS,i=0,s=0,n=this.count.x,o=this.count.y;t.x<0&&(i=r.getTileIndex(Math.abs(t.x),e.width)),t.y<0&&(s=r.getTileIndex(Math.abs(t.y),e.height)),i+n>this.cols&&(n=this.cols-i),s+o>this.rows&&(o=this.rows-s),this.shownTiles={startX:i,countX:n,startY:s,countY:o}},t.calcTileSize=function(){this.tileS.width=r.getTileSize(this.bTileS.width,this.scale.x),this.tileS.height=r.getTileSize(this.bTileS.height,this.scale.y),this.lastTileSize.width=r.getTileSize(this.baseLastTileSize.width,this.scale.x),this.lastTileSize.height=r.getTileSize(this.baseLastTileSize.height,this.scale.y)},t.calcData=function(t){this.lastScale!==this.scale.x&&(this.calcTileSize(),this.calcCount(),this.mapS.width=this.tileS.width*(this.cols-1)+this.lastTileSize.width,this.mapS.height=this.tileS.height*(this.rows-1)+this.lastTileSize.height,this.lastCorrectionPosition.x=(this.bMapS.width*this.bScale.x-this.mapS.width)/2,this.lastCorrectionPosition.y=(this.bMapS.height*this.bScale.y-this.mapS.height)/2,this.lastScale=this.scale.x),this.position.x=t.x+this.lastCorrectionPosition.x,this.position.y=t.y+this.lastCorrectionPosition.y},t.setScale=function(t){this.lastScale=this.scale.x,this.scale.x=t.x*this.bScale.x,this.scale.y=t.y*this.bScale.y},t.action=function(t,e){this.lastGlobaslScale!==e.x&&(this.setScale(e),this.lastGlobaslScale=e.x),this.calcData(t),this.findShownTiles()},t.resize=function(t){this.size.width=t.width,this.size.height=t.height,this.calcCount(),this.findShownTiles()},t.setMapS=function(t,e){null!=t&&(this.mapS.width=t),null!=e&&(this.mapS.height=e)},t.getShownTiles=function(){return this.shownTiles},t.getMapS=function(){return this.mapS},t.destroy=function(){this.shownTiles=h([])},r}(),S=0,y=1,w=2,b=function(i){"use strict";function t(t){var e=i.call(this)||this;return e.id=t.id,e.index={x:t.indexX,y:t.indexY},e.position={x:t.x,y:t.y},e.size={width:t.width,height:t.height},e.storage=t.storage,e.state=S,e.node=null,e.storage.has(e.id)&&(e.node=e.storage.get(e.id),e.state=w),e}n.inheritsLoose(t,i);var e=t.prototype;return e.isLoaded=function(){return this.state===w},e.addImageToStorage=function(){this.storage.has(this.id)||this.storage.set(this.id,this.node)},e.load=function(){this.state===S&&(this.state=y,this.emit("getTile",{data:{indexX:this.index.x,indexY:this.index.y,number:this.id}}))},e.cancelLoading=function(){this.state===y&&(this.state=S,this.emit("zoomCancelLoadingOfTiles",{data:{indexX:this.index.x,indexY:this.index.y,number:this.id}}))},e.setImage=function(t){this.state!==w&&(this.state=w,this.node=h(t),this.addImageToStorage())},e.destroy=function(){this.cancelLoading(),this.storage=null,i.prototype.destroy.call(this)},t}(i),E=function(){"use strict";function t(t,e){this.p=h(t),this.dppx=e,this.w=u.$new("div"),this.cvs=u.$new("canvas"),this.ctx=this.cvs.node.getContext("2d"),this.w.append(this.cvs)}var e=t.prototype;return e.setIndex=function(t){this.w.addClass("deepzoom-level-"+t),this.w.attr("z-index"+(t+1))},e.append=function(){this.p.append(this.w)},e.show=function(){this.w.setCssProp("display","")},e.hide=function(){this.w.setCssProp("display","none")},e.clear=function(){this.ctx.clearRect(0,0,this.cvs.node.width,this.cvs.node.height)},e.draw=function(t,e,i){this.ctx.setTransform(1,0,0,1,0,0),this.clear(),this.ctx.setTransform(t.x,0,0,t.y,e,i)},e.drawTile=function(t,e,i){"edge"!==u.browser.uaName&&"ie"!==u.browser.uaName||1<this.dppx?this.ctx.drawImage(t.node,0,0,e.width,e.height,i.x,i.y,e.width,e.height):this.ctx.drawImage(t.node,i.x,i.y,e.width,e.height)},e.setCanvasSize=function(t,e){this.cvs.setCss({width:t,height:e}),this.cvs.attr("width",t*this.dppx),this.cvs.attr("height",e*this.dppx)},e.destroy=function(){this.cvs.remove(),this.w.remove()},t}(),I=new Map,C=function(s){"use strict";function t(t,e){var i=s.call(this)||this;return i.view=t,i.id=e.id,i.dppx=e.dppx,i.size={width:e.width,height:e.height},i.mSize={width:e.maxWidth,height:e.maxHeight},i.tSize={width:e.tileWidth,height:e.tileHeight},i.tileImageSize={width:e.tileImageWidth,height:e.tileImageHeight},i.layerSize={width:e.layerWidth,height:e.layerHeight},i.hash=e.hash+"-"+i.size.width+"x"+i.size.height,I.has(i.hash)||I.set(i.hash,new Map),i.scaleFactor={x:(i.mSize.width-i.size.width)/i.size.width+1,y:(i.mSize.height-i.size.height)/i.size.height+1},i.maxDisplayedSize={width:e.maxDisplayedWidth,height:e.maxDisplayedHeight},i.minDisplayedSize={width:e.minDisplayedWidth,height:e.minDisplayedHeight},i.globalScale={x:1,y:1},i.globalPosition={x:0,y:0},i.view.setIndex(i.id),i.setLensSize(e.viewPortWidth,e.viewPortHeight),i.isAdded=!1,i.isShown=!1,i.tiles=i.calcTiles(),i.countOfTiles=i.tiles.length*i.tiles[0].length,i.loadedTiles=0,i.camera=new a({inner:e.inner,scaleX:i.scaleFactor.x,scaleY:i.scaleFactor.y,cameraWidth:e.viewPortWidth,cameraHeight:e.viewPortHeight,mapWidth:i.size.width,mapHeight:i.size.height,tileWidth:i.tileImageSize.width/i.dppx,tileHeight:i.tileImageSize.height/i.dppx,lengthOfRow:i.tiles.length,lengthOfColumn:i.tiles[0].length}),i}n.inheritsLoose(t,s);var e=t.prototype;return e.setEvents=function(){var e=this,i=this.tileImageSize;this.on("getTile",function(t){t.data.width=e.size.width,t.data.height=e.size.height,t.data.level=e.id,t.data.imageSettings={tile:{width:i.width,height:i.height,number:t.data.number}},1<e.dppx&&(t.data.dppx=e.dppx)}),this.on("zoomCancelLoadingOfTiles",function(t){t.data.width=e.size.width,t.data.height=e.size.height,t.data.imageSettings={tile:{width:i.width,height:i.height,number:t.data.number}}})},e.cancelLoadingOfTiles=function(){this.tiles.forEach(function(t){t.forEach(function(t){t.cancelLoading()})})},e.setImage=function(t){var e=this.tiles[t.indexY][t.indexX];e.isLoaded()||(this.loadedTiles+=1),e.setImage(t.node),this.isShown&&this.camera.checkTile(t.indexX,t.indexY)&&this.drawTile(e)},e.append=function(){!this.isAdded&&this.isShown&&(this.isAdded=!0,this.setEvents(),this.view.append())},e.calcTiles=function(){for(var t=[],e=this.tileImageSize,i=Math.ceil(this.layerSize.width/e.width),s=Math.ceil(this.layerSize.height/e.height),n=0;n<s;n++){for(var o=h([]),r=0;r<i;r++){var a=new b({y:n*e.height,x:r*e.width,indexX:r,indexY:n,id:n*i+r,width:r!==i-1?e.width:this.layerSize.width-r*e.width,height:n!==s-1?e.height:this.layerSize.height-n*e.height,storage:I.get(this.hash)});a.setParent(this),o.push(a)}t.push(o)}return t},e.correctDPPXPosition=function(t,e,i){var s=t;return 1<this.dppx&&(e=e/2,s=Math.abs(t-e)/(i/100),s=e*this.dppx-i*this.dppx/100*s),s},e.draw=function(){var e=this,t=this.camera;this.isShown&&(this.view.draw(t.scale,this.correctDPPXPosition(t.position.x,t.size.width,t.mapS.width),this.correctDPPXPosition(t.position.y,t.size.height,t.mapS.height)),this.eachTile(function(t){e.drawTile(t)}))},e.drawTile=function(t){t&&t.isLoaded()&&this.view.drawTile(t.node,t.size,t.position)},e.eachTile=function(t){for(var e=this.camera.getShownTiles(),i=0,s=e.countY;i<s;i++)for(var n=0,o=e.countX;n<o;n++)t(this.tiles[e.startY+i][e.startX+n])},e.checkSize=function(){var t=this.isShown,e=this.camera.getMapS(),i=e.width<=this.maxDisplayedSize.width,s=e.height<=this.maxDisplayedSize.height,n=e.width>this.minDisplayedSize.width,e=e.height>this.minDisplayedSize.height;this.isShown=i&&s&&n&&e,t!==this.isShown&&(this.isShown?this.view.show():this.view.hide(),this.isShown||this.cancelLoadingOfTiles())},e.action=function(t,e){this.globalPosition.x=t.x,this.globalPosition.y=t.y,this.globalScale.x=e.x,this.globalScale.y=e.y,this.camera.action(this.globalPosition,this.globalScale),(this.camera.getMapS().width>this.mSize.width||this.camera.getMapS().height>this.mSize.height)&&this.camera.setMapS(this.mSize.width,this.mSize.height),this.checkSize(),this.append(),this.draw()},e.loadImages=function(){this.isShown&&this.loadedTiles!==this.countOfTiles&&this.eachTile(function(t){t.load()})},e.setLensSize=function(t,e){this.view.setCanvasSize(t,e)},e.resize=function(t){this.setLensSize(t.width,t.height),this.camera.resize(t),this.action(this.globalPosition,this.globalScale)},e.destroy=function(){this.off("getTile"),this.off("zoomCancelLoadingOfTiles"),this.isShown=!1,this.camera.destroy(),this.tiles.forEach(function(t){t.forEach(function(t){t.destroy()})}),s.prototype.destroy.call(this)},t}(i),x=function(){"use strict";function t(t,e){this.p=h(t),this.c=u.$new("div"),this.c.addClass(e+"-deepzoom")}var e=t.prototype;return e.getContainer=function(){return this.c},e.show=function(){this.p.append(this.c)},e.hide=function(){this.c.remove()},e.destroy=function(){this.c.remove(),this.c=null},t}(),z=function(s){"use strict";function t(t,e){var i=s.call(this)||this;return i.view=t,i.options=u.extend({tiles:!0,inner:!0,tileSize:{width:256,height:256},minZoomFactor:100,upscale:!1},e),i.hash=null,i.setDefaultVars(),i}n.inheritsLoose(t,s),t.convertScaleToSize=function(t,e){return{width:d.round(t.width*e.x,2),height:d.round(t.height*e.y,2)}};var e=t.prototype;return e.setHash=function(t){this.hash=""+u.getHashCode(t)},e.setDefaultVars=function(){var e=this;this.isShown=!1,this.originSize={width:0,height:0},this.maxSize={width:0,height:0},this.minSize={width:0,height:0},this.lensSize={width:0,height:0},this.currentSize={width:0,height:0},this.levels=h([]),this.on("getTile",function(t){e.options.tiles||(delete t.data.imageSettings.tile,delete t.data.number)})},e.createLevels=function(){function t(t,e){return e<1.5?t:t*u.DPPX}var e=this.maxSize,i=this.minSize;if(!this.levels.length&&e.width-i.width>this.options.minZoomFactor){var s=[];this.options.inner?s=function(t,e){for(var i=Math.max(1,Math.round(Math.log(Math.max(e.width/t.width,e.height/t.height))/Math.LN2)),s=e.width,n=e.height,o=[];0<i;)--i,o.push({width:s,height:n}),s=parseInt(s/2,10),n=parseInt(n/2,10);return o}(i,e,this.options.inner):s.push({width:e.width,height:e.height});for(var n=this.options.tileSize,o=0,r=s.length;o<r;o++){this.options.tiles||(n=s[o]);var a=o+1<r-1?s[o+1]:i,h=0<=o-1?s[o-1]:e,l=d.getDPPX(s[o].width,this.originSize.width,this.options.upscale),c=new E(this.view.getContainer(),l),l=new C(c,{id:r-o,hash:this.hash,dppx:l,inner:this.options.inner,width:s[o].width,height:s[o].height,maxWidth:this.maxSize.width,maxHeight:this.maxSize.height,layerWidth:Math.round(s[o].width*l),layerHeight:Math.round(s[o].height*l),maxDisplayedWidth:s[o].width+m(h.width-s[o].width,50),maxDisplayedHeight:s[o].height+m(h.height-s[o].height,50),minDisplayedWidth:a.width+m(s[o].width-a.width,50),minDisplayedHeight:a.height+m(s[o].height-a.height,50),tileWidth:n.width,tileHeight:n.height,tileImageWidth:t(n.width,l),tileImageHeight:t(n.height,l),viewPortWidth:this.lensSize.width,viewPortHeight:this.lensSize.height});l.setParent(this),this.levels.push({view:c,controller:l})}this.levels.reverse()}},e.getCurrentShownLevel=function(){var t=null,e=this.levels.length;if(this.isShown)for(var i=e-1;0<=i;i--)if(this.levels[i].controller.isShown){t=this.levels[i].controller;break}return t},e.getScale=function(t){var e,i=this.getCurrentShownLevel(),s=this.levels.length;switch(t){case"zoomin":e=i?this.currentSize.width<i.size.width?r(this.maxSize.width,i.size.width):i.id!==s?r(this.maxSize.width,this.levels[i.id].controller.size.width):r(this.maxSize.width,this.levels[s-1].controller.size.width):r(this.maxSize.width,this.levels[0].controller.size.width);break;case"zoomout":e=i?this.currentSize.width>i.size.width?r(this.maxSize.width,i.size.width):1<i.id?r(this.maxSize.width,this.levels[i.id-2].controller.size.width):r(this.maxSize.width,this.minSize.width):r(this.maxSize.width,this.minSize.width)}return e},e.show=function(){return this.isShown||(this.isShown=!0,this.view.show()),this},e.hide=function(){return this.isShown&&(this.isShown=!1,this.view.hide(),this.levels.forEach(function(t){t.view.destroy(),t.controller.destroy()}),this.setDefaultVars()),this},e.action=function(e,i){return this.isShown&&(this.currentSize=t.convertScaleToSize(this.maxSize,i),this.levels.forEach(function(t){t.controller.action(e,i)})),this},e.setLensSize=function(t,e){return this.lensSize.width=t,this.lensSize.height=e,this},e.setMinSize=function(t,e){return this.minSize.width=t,this.minSize.height=e,this},e.setMaxSize=function(t,e,i,s){return this.maxSize.width=t,this.maxSize.height=e,this.originSize.width=i,this.originSize.height=s,this.createLevels(),this},e.loadImages=function(){return this.isShown&&this.levels.forEach(function(t){t.controller.loadImages()}),this},e.setImage=function(t){return this.isShown&&this.levels[t.level-1].controller.setImage(t),this},e.resize=function(){var e=this;return this.isShown&&this.levels.forEach(function(t){t.controller.resize(e.lensSize)}),this},e.destroy=function(){this.hide(),this.off("getTile"),this.off("zoomCancelLoadingOfTiles"),s.prototype.destroy.call(this)},t}(i),function(s){"use strict";function t(t,e){var i=s.call(this)||this;return i.view=new x(t,"sirv"),i.controller=new z(i.view,e),i.controller.setParent(n.assertThisInitialized(i)),i}n.inheritsLoose(t,s);var e=t.prototype;return e.setLensSize=function(t,e){return this.controller.setLensSize(t,e),this},e.loadImages=function(){return this.controller.loadImages(),this},e.getScale=function(t){return this.controller.getScale(t)},e.setImage=function(t){return this.controller.setImage(t),this},e.setHash=function(t){return this.controller.setHash(t),this},e.setMinSize=function(t,e){return this.controller.setMinSize(t,e),this},e.setMaxSize=function(t,e,i,s){return this.controller.setMaxSize(t,e,i,s),this},e.show=function(){return this.controller.show(),this},e.hide=function(){return this.controller.hide(),this},e.action=function(t,e){return this.controller.action(t,e),this},e.resize=function(){return this.controller.resize(),this},e.destroy=function(){this.controller.destroy(),this.controller=null,this.view.destroy(),this.view=null,s.prototype.destroy.call(this)},t}(i)),A=(P=function(){"use strict";function t(t,e){this.pn=h(t);t="sirv-zoom-lens";this.c=u.$new("div"),this.c.addClass(t+"-wrapper"),this.ic=u.$new("div"),this.ic.addClass(t),this.ic.appendTo(this.c),this.img=null,this.bwImg=null,e&&this.c.addEvent("mousedown",function(t){t.stop()})}var e=t.prototype;return e.setContainerPosition=function(){var t,e;u.contains(["img","canvas"],this.pn.getTagName())&&(t=this.pn.getPosition(),e=h(this.pn.node.parentNode).getPosition(),this.c.setCss({top:t.top-e.top,left:t.left-e.left}))},e.setImageSize=function(e){this.img&&[this.img,this.bwImg].forEach(function(t){t&&t.setCss({top:0,left:0,width:e.width,height:e.height,position:"absolute"})})},e.getContainerSize=function(){return this.pn.getSize()},e.setContainerSize=function(t){this.c.setCss({width:t.width,height:t.height})},e.setInsideContainerSize=function(t){this.ic.setCss({width:t.width,height:t.height})},e.setInsideContainerFontSize=function(t){this.ic.setCssProp("font-size",Math.max(t.width,t.height)+"px")},e.setTransform=function(t,e){this.ic.setCssProp("transform","translate3d("+t+"px,"+e+"px, 0px)"),this.img&&this.img.setCssProp("transform","translate3d("+-1*t+"px, "+-1*e+"px, 0px)")},e.show=function(t,e){t&&(this.img=h(t)),this.setContainerPosition(),this.setImageSize(e),this.img&&this.ic.append(this.img);e=this.pn;u.contains(["img","canvas"],e.getTagName())&&(e=h(e.node.parentNode)),e.append(this.c)},e.hide=function(){this.c.remove(),this.img&&(this.img.remove(),this.img=null,this.bwImg&&(this.bwImg.remove(),this.bwImg=null))},e.destroy=function(){this.c.removeEvent("mousedown"),this.c.remove()},t}(),N=function(){"use strict";function t(t){this.view=t,this.pSize={width:0,height:0},this.inDoc=!1,this.timer=null,this.isPlaying=!1,this.pos={x:null,y:null},this.dPos={x:null,y:null},this.size={width:0,height:0},this.dSize={width:0,height:0}}var e=t.prototype;return e.doAnimation=function(){var t=!1;return(.001<T(this.pos.x,this.dPos.x)||.001<T(this.pos.y,this.dPos.y)||.001<T(this.size.width,this.dSize.width)||.001<T(this.size.height,this.dSize.height))&&(t=!0),t},e.animate=function(){var t=this;this.isPlaying=!0;var e=.4*(this.pos.x-this.dPos.x),i=.4*(this.pos.y-this.dPos.y),s=.4*(this.size.width-this.dSize.width),n=.4*(this.size.height-this.dSize.height);this.dPos.x+=e,this.dPos.y+=i,this.dSize.width+=s,this.dSize.height+=n,this.setCss(),this.doAnimation()?this.timer=setTimeout(function(){t.animate()},16):this.stopAnimation()},e.setCss=function(){var t=this.size,e=this.dSize;(0<T(t.width,e.width)||0<T(t.height,e.height))&&(this.view.setInsideContainerSize(e),this.view.setInsideContainerFontSize(this.pSize)),this.view.setTransform(Math.round(this.dPos.x),Math.round(this.dPos.y))},e.stopAnimation=function(){this.isPlaying&&(this.isPlaying=!1,clearTimeout(this.timer),this.dPos.x=this.pos.x,this.dPos.y=this.pos.y,this.dSize.width=this.size.width,this.dSize.height=this.size.height,this.setCss())},e.setSize=function(t){this.size.width=t.width,this.size.height=t.height,this.inDoc&&null!==this.dPos.x&&(this.isPlaying||this.animate())},e.setPosition=function(t,e){var i=this.size,s=this.pSize,t=t-i.width/2,e=e-i.height/2;t<0&&(t=0),e<0&&(e=0),t>s.width-i.width&&(t=s.width-i.width),e>s.height-i.height&&(e=s.height-i.height),this.pos.x=t,this.pos.y=e,null===this.dPos.x&&(this.dPos.x=t,this.dPos.y=e),this.inDoc&&(this.isPlaying||this.animate())},e.setContainerSize=function(){var t=this.view.getContainerSize();this.pSize=t,this.view.setContainerSize(t),this.view.setInsideContainerFontSize(t)},e.show=function(t){this.inDoc||(this.inDoc=!0,this.setContainerSize(),this.view.show(t,this.pSize))},e.hide=function(){this.inDoc&&(this.inDoc=!1,this.view.hide(),this.pos={x:null,y:null},this.dPos={x:null,y:null},this.size={width:0,height:0},this.dSize={width:0,height:0})},e.resize=function(){this.inDoc&&(this.setContainerSize(),this.view.setContainerPosition())},e.destroy=function(){this.stopAnimation(),this.inDoc=!1},t}(),function(){"use strict";function t(t,e){this.view=new P(t,e),this.controller=new N(this.view)}var e=t.prototype;return e.setEventToMainContainer=function(t,e){this.view.c.addEvent(t,e)},e.removeEventToMainContainer=function(t,e){e?this.view.c.removeEvent(t,e):this.view.c.removeEvent(t)},e.clearEvents=function(){this.view.c.clearEvents()},e.getBoundaries=function(){return this.view.c.node.getBoundingClientRect()},e.show=function(t){this.controller.show(t)},e.hide=function(){this.controller.hide()},e.setSize=function(t){this.controller.setSize(t)},e.setPosition=function(t,e){this.controller.setPosition(t,e)},e.destroy=function(){this.controller.destroy(),this.view.destroy()},t}());function T(t,e){return Math.abs(t-e)}var D,L,R=(D=function(){"use strict";function t(t){this.p=h(t);t="sirv-zoom-map";this.c=u.$new("div"),this.c.addClass(t),this.lens=u.$new("div"),this.lens.addClass(t+"-lens"),this.img=null,this.b=h(u.D.node.body),this.c.append(this.lens)}var e=t.prototype;return e.getRightPosition=function(t,e){var i=this.c.getRect();return{x:t-i.left,y:e-i.top}},e.addDomEventToDocBody=function(t,e){this.b.addEvent(t,e)},e.removeDomEventToDocBody=function(t,e){this.b.removeEvent(t,e)},e.addDomEventToLens=function(t,e){this.lens.addEvent(t,e)},e.addDomEvent=function(t,e){this.c.addEvent(t,e)},e.changeCursor=function(t){this.c.setCssProp("cursor",t)},e.removeEvents=function(){this.c.removeEvent("btnclick tap"),this.c.removeEvent("mousedown touchstart"),this.lens.removeEvent("mousedown touchstart"),this.c.removeEvent("mousemove touchmove")},e.setContainerCss=function(t){this.c.setCss({width:t.width+"px",height:t.height+"px"})},e.setLensCss=function(t,e,i){this.lens.setCss({top:t.top-1+"px",left:t.left-1+"px",width:e.width+"px",height:e.height+"px","font-size":i+"px"})},e.setImg=function(t,e){this.img=u.$new("img",{src:t}),e&&this.img.attr("srcset",e+" 2x"),this.c.append(this.img)},e.removeEventTransitionEvent=function(){this.c.removeEvent("transitionend")},e.show=function(e){var i=this;this.c.setCss({opacity:0,transition:"opacity .3s linear"}),this.p.append(this.c),this.c.getSize(),this.removeEventTransitionEvent(),this.c.addEvent("transitionend",function(t){t.stop(),i.removeEventTransitionEvent(),i.c.setCssProp("transition",""),i.addDomEvent("mousedown touchstart",function(t){t.stop()}),e()}),this.c.setCssProp("opacity",1)},e.hide=function(t,e){var i=this;this.removeEventTransitionEvent(),t?(this.c.remove(),this.removeEvents(),e()):this.c.addEvent("transitionend",function(t){t.stop(),i._removeEventTransitionEvent(),i.c.setCssProp("transition",""),i.c.remove(),i.removeEvents(),e()}),this.c.setCssProp("opacity",0)},e.destroy=function(){this.c=null,this.lens=null},t}(),L=function(s){"use strict";function t(t,e){var i=s.call(this)||this;return i.view=t,i.o=e,i.state=c.APPEARANCE.HIDDEN,i.scale={x:1,y:1},i.viewPortSize={width:0,height:0},i.bISize={width:0,height:0},i.cBISize={width:0,height:0},i.cBIPosition={top:0,left:0},i.mapSize={width:0,height:0},i.ls={width:0,height:0},i.lp={top:0,left:0},i.clp={x:0,y:0},i.isDragMoved=!1,i}n.inheritsLoose(t,s),t.setInTheCenter=function(t){return t<50?t=Math.max(t-(50-t),0):50<t&&(t=Math.min(t+(t-50),100)),t};var e=t.prototype;return e.getPercentPosition=function(t,e){var i=this.mapSize,s=this.view.getRightPosition(t,e);return{x:t=M(d.round(s.x/i.width*100,1)),y:e=M(d.round(s.y/i.height*100,1))}},e.isInside=function(t,e){var i=!1,s=this.lp,n=this.ls,e=this.view.getRightPosition(t,e);return s.left<e.x&&s.left+n.width>e.x&&s.top<e.y&&s.top+n.height>e.y&&(i=!0),i},e.setEvents=function(){var s=this,n=1,o=!1;this.dragEndHandler=function(t){o&&(t.stop(),o=!1,s.clp={x:0,y:0},s.view.changeCursor(""),s.view.removeDomEventToDocBody(t.type,s.dragEndHandler),s.view.removeDomEventToDocBody("mouseout",s.mouseOutHandler))},this.mouseOutHandler=function(t){t.stop(),t.oe.relatedTarget&&"HTML"!==t.oe.relatedTarget.tagName||!o||(s.dragEndHandler(t),s.view.removeDomEventToDocBody("mouseup touchend",s.dragEndHandler))},this.view.addDomEvent("btnclick tap",function(t){t.stop(),s.emit("zoomMapNewPosition",{data:s.getPercentPosition(t.x,t.y)})}),this.view.addDomEventToLens("mousedown touchstart",function(t){var e,i=t.getPageXY();s.isInside(i.x,i.y)&&(t.stop(),n=1,e={x:0,y:0},t=(i=t).getOriginEvent(),u.defined(t.offsetX)?(e.x=t.offsetX,e.y=t.offsetY):(i=h(i.getTarget()).getPosition(),e.x=t.targetTouches[0].pageX-i.left,e.y=t.targetTouches[0].pageY-i.top),e=e,s.clp.y=e.y,s.clp.x=e.x,o=!0,s.view.addDomEventToDocBody("mouseup touchend",s.dragEndHandler),s.view.addDomEventToDocBody("mouseout",s.mouseOutHandler))}),this.view.addDomEvent("mousemove touchmove",function(t){o&&(n<=0&&(t.stop(),t=t.getPageXY(),s.view.changeCursor("move"),s.emit("zoomMapNewPosition",{data:s.getPercentPosition(t.x,t.y)})),n--)})},e.calcMap=function(t,e,i,s){var n=this.o.maxwidth,o=this.o.maxheight;i<=n&&(o=(n=i/2)*(e/t)),s<=o&&(n=(o=s/2)*(t/e)),t/e<n/o?n=o*(t/e):o=n*(e/t),n=parseInt(n,10),o=parseInt(o,10),this.mapSize.width=n,this.mapSize.height=o,this.viewPortSize.width=i,this.viewPortSize.height=s,this.bISize.width=t,this.bISize.height=e},e.prepare=function(t,e,i,s){this.calcMap(t,e,i,s),this.view.setContainerCss(this.mapSize),this.emit("zoomGetImage",{data:{width:this.mapSize.width,height:this.mapSize.height}})},e.setLensPosition=function(t,e){var i=this.cBISize,s=this.mapSize,n=s.height/i.height*t,i=s.width/i.width*e;this.cBIPosition.top=t,this.cBIPosition.left=e,n<0&&(n=0),i<0&&(i=0);e=this.ls;n+e.height>s.height&&(n=s.height-e.height),i+e.width>s.width&&(i=s.width-e.width),this.lp.top=n,this.lp.left=i},e.setLensSize=function(t,e){this.cBISize.width=t,this.cBISize.height=e;var i=this.mapSize,s=this.viewPortSize;this.ls.width=s.width>=t?i.width:s.width/t*i.width,this.ls.height=s.height>=e?i.height:s.height/e*i.height},e.move=function(t,e){var i=this.bISize,s=i.width*e.x,n=i.height*e.y,o=Math.abs(t.y+(i.height-n)/2),i=Math.abs(t.x+(i.width-s)/2);this.scale.x=e.x,this.scale.y=e.y,this.setLensSize(s,n),this.setLensPosition(o,i),this.view.setLensCss(this.lp,this.ls,Math.max(this.mapSize.width,this.mapSize.height))},e.show=function(){var t=this;u.contains([c.APPEARANCE.SHOWING,c.APPEARANCE.SHOWN],this.state)||(this.state=c.APPEARANCE.SHOWING,this.view.show(function(){t.setEvents(),t.state=c.APPEARANCE.SHOWN}))},e.hide=function(t){var e=this;u.contains([c.APPEARANCE.HIDDEN,c.APPEARANCE.HIDING],this.state)&&!t||(this.state=c.APPEARANCE.HIDING,this.view.hide(t,function(){e.view.removeDomEventToDocBody("mouseup touchend",e.dragEndHandler),e.state=c.APPEARANCE.HIDDEN}))},e.resize=function(t,e,i,s,n,o){this.o.maxwidth=t,this.o.maxheight=e,this.calcMap(i,s,n,o),this.view.setContainerCss(this.mapSize)},e.destroy=function(){this.hide(!0),s.prototype.destroy.call(this)},t}(i),function(s){"use strict";function t(t,e){var i=s.call(this)||this;return i.options=u.extend({maxwidth:200,maxheight:200},e||{}),i.view=new D(t),i.controller=new L(i.view,i.options),i.controller.setParent(n.assertThisInitialized(i)),i}n.inheritsLoose(t,s);var e=t.prototype;return e.prepare=function(t,e,i,s){this.controller.prepare(t,e,i,s)},e.move=function(t,e){this.controller.move(t,e)},e.setImg=function(t,e){this.view.setImg(t,e)},e.show=function(){this.controller.show()},e.hide=function(t){this.controller.hide(t)},e.resize=function(t,e,i,s,n,o){this.controller.resize(t,e,i,s,n,o)},e.destroy=function(){this.controller.destroy(),this.view.destroy(),s.prototype.destroy.call(this)},t}(i));function M(t,e,i){return u.defined(e)||(e=0),u.defined(i)||(i=100),Math.min(Math.max(t,e),i)}var F,k,t=function(){"use strict";function t(t){this.pn=h(t);t="sirv-zoom";this.cnv=u.$new("div"),this.cnv.addClass(t),this.node=u.$new("div").setCss({opacity:0}),this.node.addClass(t+"-wrapper"),this.zoomWrapper=u.$new("div").addClass("sirv-zoom-image-wrapper"),this.zoom=(t=this.pn,h(h(t).node.getElementsByTagName("img")[0]||h(t).node.getElementsByTagName("canvas")[0]||t)),this.lens=u.D.node.body,this.isBody=!0,this.image=null,this.perspective="",u.browser.mobile&&"ios"===u.browser.platform&&(this.perspective="perspective(1000px) ")}var e=t.prototype;return e.getHash=function(){return this.image?this.image.$J_UUID+""||this.image.attr("src"):null},e.getParentSize=function(){return this.pn.getSize()},e.getParentPostion=function(){return this.pn.getPosition()},e.getZoomSize=function(){return this.zoom.getSize()},e.getParentBoundaries=function(){return this.cnv.node.parentNode?this.cnv.node.getBoundingClientRect():null},e.addScrollEvent=function(t){u.W.addEvent("scroll",t)},e.removeScrollEvent=function(t){t?u.W.removeEvent("scroll",t):u.W.removeEvent("scroll")},e.addClassToWrapper=function(t){this.node.addClass("sirv-"+t+"-zoom")},e.setEventToMainContainer=function(t,e){this.cnv.addEvent(t,e)},e.removeEventFromMainContainer=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.cnv.removeEvent(e)},e.setEventToWrapper=function(t,e){this.node.addEvent(t,e)},e.removeEventFromWrapper=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.node.removeEvent(e)},e.addMouseoutEvent=function(i){var s=this;this.setEventToWrapper("mouseout",function(t){var e=t.getRelated();if(e){for(;e&&e!==s.node.node&&e!==s.lens.node;)e=e.parentNode;s.node.node!==e&&i(t)}})},e.setLensContainer=function(t){t=t||h(u.D.node.body),this.isBody=h(t)===h(u.D.node.body),this.lens=h(t)},e.toggleCursorClass=function(t,e){this.cnv.removeClass(t).addClass(e)},e.setImagePosition=function(t,e){this.image&&this.zoomWrapper.setCssProp("transform",this.perspective+"translate3d("+t.x+"px, "+t.y+"px, 0) scale("+e.x+", "+e.y+")")},e.addStartCss=function(){this.setLensStyle({opacity:0,transform:"scale(0)"})},e.appendNodes=function(t,e){this.cnv.addEvent("contextmenu",function(t){t.stopDefaults()}),this.image=h(t),this.image.setCss({width:e.width+"px",height:e.height+"px"}),u.browser.mobile||this.image.addEvent("mousedown",function(t){t.stopDefaults()}),this.zoomWrapper.append(this.image),this.node.append(this.zoomWrapper),this.node.appendTo(this.cnv),this.cnv.appendTo(this.lens,!1)},e.setEventNodePositionSize=function(t,e){var i=t.top,s=t.left;this.isBody||(i-=(t=this.lens.getPosition()).top,s-=t.left),this.cnv.setCss({top:i,left:s,width:e.width,height:e.height})},e.setLensStyle=function(t){this.node.setCss(t)},e.setLensPosition=function(t){this.setLensStyle({top:t.top,left:t.left})},e.setLensSize=function(t){this.setLensStyle({width:t.width,height:t.height})},e.setLensCss=function(t,e,i){this.setLensPosition(t),this.setLensSize(e),this.node.setCss({opacity:1,transform:"scale(1)",transition:i||"none"})},e.setImageSize=function(t,e,i){this.zoomWrapper.setCss({top:0,left:0,width:e.width+"px",height:e.height+"px","transform-origin":"50% 50%",transform:this.perspective+"translate3d("+t.x+"px, "+t.y+"px, 0) scale("+i.x+", "+i.y+")"}).getSize(),this.image.setCss({width:"100%",height:"100%"}).getSize()},e.clearCss=function(){this.node.setCss({transition:"",opacity:"",transform:""}),this.node.removeAttr("style"),this.image&&this.image.setCss({width:"",height:""}),this.zoomWrapper.setCss({top:"",left:"",width:"",height:"",transition:"",transform:""})},e.clearDOM=function(){this.image&&(this.image.remove(),this.image=null),this.zoomWrapper.remove(),this.node.remove(),this.cnv.remove()},e.removeEvents=function(){this.cnv.clearEvents(),this.image&&this.image.clearEvents(),this.node.clearEvents()},e.getBoundaries=function(){return this.cnv.node.getBoundingClientRect()},e.destroy=function(){this.image&&(this.image.remove(),this.image=null),this.zoomWrapper.remove(),this.node.remove(),this.cnv.remove()},t}(),_=function(e){"use strict";function t(t){t=e.call(this,t)||this;return t.mouseMoveHandler=null,t}n.inheritsLoose(t,e);var i=t.prototype;return i.getContainerForMap=function(){return this.node},i.addStartCss=function(){e.prototype.addStartCss.call(this),this.node.addEvent("mousescroll",function(t){t.stop()}),this.setLensStyle({opacity:0,transform:"scale(1)"})},i.removeDragstart=function(){this.node.del("event:mousedrag:dragstart")},i.addEventsCanvasClass=function(t){this.cnv.addClass(t)},i.removeEventsCanvasClass=function(t){this.cnv.removeClass(t)},i.getContainerSize=function(){return this.node.getSize()},i.getContainerPosition=function(){return this.node.getPosition()},i.addGlobalEvent=function(t){this.mouseMoveHandler||(this.mouseMoveHandler=t,u.D.addEvent("mousemove",t))},i.removeGlobalEvent=function(){this.mouseMoveHandler&&(u.D.removeEvent("mousemove",this.mouseMoveHandler),this.mouseMoveHandler=null)},i.removeEvents=function(){e.prototype.removeEvents.call(this),this.removeGlobalEvent()},t}(t),B=function(t){"use strict";function e(){return t.apply(this,arguments)||this}n.inheritsLoose(e,t);var i=e.prototype;return i.getParentSize=function(){return this.zoom.getSize()},i.getParentPostion=function(){return this.zoom.getPosition()},e}(t),U=function(s){"use strict";function t(){return s.apply(this,arguments)||this}n.inheritsLoose(t,s);var e=t.prototype;return e.getImageForEye=function(){return this.image.node.cloneNode()},e.getNodeForEye=function(){return this.zoom},e.setLensPosition=function(t){this.cnv.setCss({top:t.top,left:t.left})},e.setCanvasNodeSize=function(t){this.cnv.setCss({width:t.width,height:t.height})},e.addStartCss=function(t){this.setLensStyle({opacity:0,transform:"translate3d("+t.start.x+"%, "+t.start.y+"%, 0px)"})},e.getParentSize=function(){return this.zoom.getSize()},e.getParentPostion=function(){return this.zoom.getPosition()},e.setLensCss=function(t,e,i){this.cnv.setCss({top:t.top,left:t.left}),s.prototype.setLensCss.call(this,t,e,i)},e.addMouseMoveEvent=function(t){u.W.addEvent("mousemove",t)},e.removeMouseMoveEvent=function(t){u.W.removeEvent("mousemove",t)},e.clearCss=function(){this.cnv.removeAttr("style")},t}(t),H=(F=0,k=1,function(){"use strict";function t(t,e){this.state=F,this.id=null,this.cb=t||function(){},this.stopCb=e||function(){}}var e=t.prototype;return e.start=function(){var e,i=this;this.state!==k&&(this.state=k,e=function(t){i.cb(t),i.state!==F&&(i.id=requestAnimationFrame(e))},this.id=requestAnimationFrame(e))},e.stop=function(){this.state!==F&&(this.state=F,cancelAnimationFrame(this.id),this.stopCb())},t}()),t=function(s){"use strict";function t(t,e){var i=s.call(this)||this;return i.o=u.extend({test:!1,pan:!1,smoothing:!0,tiles:!0,customZooming:!0,clickBehavior:"both",upscale:!1,trigger:"hover"},e),i.view=t,i.state=c.APPEARANCE.HIDDEN,i.x=0,i.y=0,i.baseScale={x:1,y:1},i.scale={x:1,y:1},i.dScale={x:1,y:1},i.iSize={width:0,height:0},i.iPos={x:0,y:0},i.iDPos={x:0,y:0},i.pPos={top:0,left:0},i.pSize={width:0,height:0},i.anim=null,i.animCb=null,i.animStep=0,i.lastAnimTimer=0,i.deepZoom=null,i.deepZoomTimer=null,i.lensSize={width:0,height:0},i.lensHalfSize={width:0,height:0},i.lensPosition={top:0,left:0},i.currentLensSize={width:100,height:100},i.dppx=1,i.zoomNodeSize={width:0,height:0},i.boundaries=null,i.ANIM_STEP=.1,i.nonDeepZoomImageLevels=[],i.scrollHandler=function(){u.contains([c.APPEARANCE.SHOWING,c.APPEARANCE.SHOWN],i.state)&&i.hide(i.state===c.APPEARANCE.SHOWING)},i}n.inheritsLoose(t,s);var e=t.prototype;return e.init=function(){this.getSizes(),this.view.setLensCss(this.lensPosition,this.lensSize),this.createDeepZoom(),this.createAnimation(this.ANIM_STEP),this.view.addScrollEvent(this.scrollHandler)},e.createDeepZoom=function(){var e=this;this.deepZoom=new O(this.view.node,{tiles:this.o.tiles,inner:u.contains(["inner","outside"],this.o.type),upscale:this.o.upscale}),this.deepZoom.setParent(this),this.on("getTile",function(t){t.stopAll(),e.emit("zoomGetImage",{data:t.data})}),this.on("zoomCancelLoadingOfTiles",function(t){t.stopEmptyEvent()})},e.setLensContainer=function(t){this.view.setLensContainer(t)},e.getBoundaries=function(){this.boundaries=this.view.getParentBoundaries()},e.getSizes=function(){this.pSize=this.view.getParentSize(),this.pPos=this.view.getParentPostion(),this.zoomNodeSize=this.view.getZoomSize(),this.getBoundaries()},e.isShown=function(){return this.state===c.APPEARANCE.SHOWN},e.isShowing=function(){return this.state===c.APPEARANCE.SHOWING},e.deepZoomAction=function(t,e){var i=this;clearTimeout(this.deepZoomTimer),this.deepZoomTimer=setTimeout(function(){i.deepZoom.loadImages(),e&&(i.deepZoom.setLensSize(e.width,e.height),i.deepZoom.resize()),i.deepZoom.action(i.iDPos,i.dScale),t||i.deepZoomAction(i.dScale.x===i.scale.x)},this.lastAnimTimer+10),e&&(this.deepZoom.setLensSize(e.width,e.height),this.deepZoom.resize()),this.deepZoom.action(this.iDPos,this.dScale)},e.stopMovingAndZooming=function(){this.scale.x=this.dScale.x,this.scale.y=this.dScale.y,this.iPos.x=this.iDPos.x,this.iPos.y=this.iDPos.y},e.createAnimation=function(h){var l=this;this.animStep=h;var c=0;this.anim=new H(function(t){var e,i,s,n,o,r,a;c?(s=!1,l.lastAnimTimer=t-c,c=t,o=n=!1,l.scale.x!==l.dScale.x&&(s=!0,l.sendZoomingAction(),e=(i=l.scale.x-l.dScale.x)*l.animStep,l.dScale.x+=e,l.dScale.y+=e,a=!(r="x"),l.dScale[r]<l.baseScale[r]&&(a=!0,l.dScale[r]=l.baseScale[r]),1<l.dScale[r]&&(a=!0,l.dScale[r]=1),o=n=a,Math.abs(i)<1e-4&&(l.dScale.x=l.scale.x,l.dScale.y=l.scale.x)),l.iPos.x===l.iDPos.x&&l.iPos.y===l.iDPos.y||(s=!0,i=l.iPos.x-l.iDPos.x,r=l.iPos.y-l.iDPos.y,e=i*l.animStep,a=r*l.animStep,l.iDPos.x+=e,l.iDPos.y+=a,l.iDPos.x=d.round(l.iDPos.x,4),l.iDPos.y=d.round(l.iDPos.y,4),(Math.max(Math.abs(i),Math.abs(r))<1||n||o)&&(l.iDPos.x=l.iPos.x,l.iDPos.y=l.iPos.y)),s?l.render(l.iDPos,l.dScale):l.animCb&&(l.animCb(),l.animStep=h,l.animCb=null)):c=t},function(){c=0})},e.render=function(t,e){this.deepZoomAction(),this.view.setImagePosition(t||this.iDPos,e||this.dScale)},e.correctX=function(t){return t-this.pPos.left},e.correctY=function(t){return t-this.pPos.top},e.setXY=function(t,e){this.x=this.correctX(t),this.y=this.correctY(e)},e.getZoomData=function(t){var e=0;return t=t||this.scale.x,(this.isShown()||this.isShowing())&&(e=d.round((t-this.baseScale.x)/(1-this.baseScale.x),2)),e},e.getNextMinZoom=function(){var t=this.deepZoom.getScale("zoomout");return t<this.baseScale.x&&(t=this.baseScale.x),this.getZoomData(t)},e.getNextMaxZoom=function(){var t=this.deepZoom.getScale("zoomin");return 1<t&&(t=1),this.getZoomData(t)},e.zoom=function(t,e,i){var s=this.scale.x,n=this.iSize,o=n.width*this.scale.x,r=n.height*this.scale.y,a=(n.width-o)/2,n=(n.height-r)/2;e=e||this.pPos.left+this.lensHalfSize.width,i=i||this.pPos.top+this.lensHalfSize.height,this.basePercentOfScale={x:g(Math.abs(this.iPos.x)+this.correctX(e)-a,o),y:g(Math.abs(this.iPos.y)+this.correctY(i)-n,r)};t=this.deepZoom.getScale(t);this.scale.x=t,this.scale.y=t,this.setXY(e,i),this.afterZoom(s)},e.afterZoom=function(t){t!==this.scale.x&&(this.sendZoomingAction(),this.setCursorState(),this.o.smoothing?this.animStep=.25:(this.dScale.x=this.scale.x,this.dScale.y=this.scale.y,this.iDPos.x=this.iPos.x,this.iDPos.y=this.iPos.y,this.render(this.iPos,this.scale)))},e.zoomUp=function(t,e){return!(!this.isShown()&&!this.isShowing()||1===this.scale.x)&&(this.zoom("zoomin",t,e),!0)},e.zoomDown=function(t,e){return!(!this.isShown()&&!this.isShowing()||this.scale.x===this.baseScale.x)&&(this.zoom("zoomout",t,e),!0)},e.sendZoomingAction=function(){var e=this;clearTimeout(this.zoomingTimer),this.zoomingTimer=setTimeout(h(function(t){e.emit("zooming",{data:{zoom:e.getZoomData(),from:t,to:e.scale.x}})}).bind(this,this.dScale.x),24)},e.setCursorState=function(t){var e;u.defined(t)||(0===(e=this.getZoomData())?t="zoomIn":1===e?t="zoomOut":0<e&&e<1&&(t="up"===this.o.clickBehavior?"zoomIn":"zoomOut")),this.currentCursorState!==t&&(this.view.toggleCursorClass(l[this.currentCursorState],l[t]),this.currentCursorState=t)},e.setImage=function(t){var e=t.node;(this.isShown()||this.isShowing())&&((t=u.extend({},t.callbackData)).node=e,this.deepZoom.setImage(t))},e.setSizeOfLens=function(t,e){this.lensSize={width:t,height:e},this.lensHalfSize={width:this.lensSize.width/2,height:this.lensSize.height/2}},e.calcSizeOfLens=function(){var t=this.pSize,e=this.currentLensSize;this.setSizeOfLens(t.width/100*e.width,t.height/100*e.height)},e.getBaseScale=function(){this.baseScale={x:this.zoomNodeSize.width/this.iSize.width,y:this.zoomNodeSize.height/this.iSize.height}},e.calcPositionOfLens=function(){},e.getImagePosition=function(){},e.showDeepZoom=function(t,e){var i;this.deepZoom&&((i=this.view.getHash())&&this.deepZoom.setHash(i),this.deepZoom.setLensSize(this.lensSize.width,this.lensSize.height).setMinSize(this.zoomNodeSize.width,this.zoomNodeSize.height).setMaxSize(this.iSize.width,this.iSize.height,t,e).show())},e.endOfShowing=function(t){var e=!1;return this.state===c.APPEARANCE.SHOWING&&(e=!0,this.state=c.APPEARANCE.SHOWN,t||this.setEvents(),this.setCursorState(),this.o.smoothing||this.deepZoomAction()),e},e.sendZoomShownEvent=function(){this.emit("zoomShown",{data:{clientPosition:{x:this.x,y:this.y},pagePosition:{x:this.pPos.left,y:this.pPos.top}}})},e.showCenter=function(t,e,i){this.getSizes();var s=this.pPos.left+this.pSize.width/2,n=this.pPos.top+this.pSize.height/2;return this.show(t,e,s,n,!1,i)},e.show=function(){return this.state===c.APPEARANCE.HIDDEN&&(this.state=c.APPEARANCE.SHOWING,!0)},e.endOfHiding=function(){this.stopMovingAndZooming(),clearTimeout(this.hideTimer),this.anim.stop(),this.setCursorState("zoomIn"),this.view.clearCss(),this.baseScale={x:1,y:1},this.scale={x:1,y:1},this.dScale={x:1,y:1},this.setUpEvent=!1,this.basePercentOfScale={x:0,y:0},clearTimeout(this.deepZoomTimer),this.deepZoom.hide(),this.view.clearDOM(),this.state=c.APPEARANCE.HIDDEN,this.emit("zoomHidden",{data:{clientPosition:{x:this.x,y:this.y},pagePosition:{x:this.pPos.left,y:this.pPos.top}}})},e.hide=function(t){return!!u.contains([c.APPEARANCE.SHOWN,c.APPEARANCE.SHOWING],this.state)&&(this.state=c.APPEARANCE.HIDING,this.view.removeEvents(),t?(clearTimeout(this.deepZoomTimer),this.deepZoom.hide(),this.endOfHiding()):this.stopMovingAndZooming(),!0)},e.addClickEvent=function(){var e=this,t="btnclick tap";"dblclick"===this.o.trigger&&(t="dblbtnclick dbltap"),this.view.setEventToWrapper(t,function(t){t.stop(),e.setXY(t.x,t.y),"up"===e.o.clickBehavior?e.zoomUp(t.x,t.y)||e.hide():e.o.smoothing&&e.scale.x!==e.baseScale.x?e.hide():e.hide(!0)})},e.customMove=function(t,e){u.contains([c.APPEARANCE.HIDDEN,c.APPEARANCE.HIDING],this.state)||this.move(t,e)},e.move=function(t,e){this.setXY(t,e),this.afterMove()},e.afterMove=function(){this.o.smoothing||this.render(this.iPos,this.scale)},e.setEvents=function(){},e.setLensStyleOnResize=function(){this.view.setLensStyle({top:this.lensPosition.top,left:this.lensPosition.left,width:this.lensSize.width,height:this.lensSize.height})},e.onResize=function(){this.state!==c.APPEARANCE.HIDDEN&&(this.state===c.APPEARANCE.HIDING?this.hide(!0):(this.state===c.APPEARANCE.SHOWING&&this.o.smoothing&&(this.state=c.APPEARANCE.SHOWN,this.setEvents(),this.view.removeEventFromWrapper("transitionend"),this.view.setLensStyle({transition:""}),this.stopMovingAndZooming(),this.view.setImagePosition(this.iPos,this.scale)),this.getSizes(),this.zoomNodeSize.width>this.iSize.width||this.zoomNodeSize.height>this.iSize.height?this.hide(!0):(this.getBaseScale(),this.scale.x=v(this.scale.x,this.baseScale.x,1),this.scale.y=v(this.scale.y,this.baseScale.y,1),this.calcSizeOfLens(),this.calcPositionOfLens(),this.setLensStyleOnResize(),this.deepZoom.setLensSize(this.pSize.width,this.pSize.height).setMinSize(this.zoomNodeSize.width,this.zoomNodeSize.height).resize(),this.view.setEventNodePositionSize(this.pPos,this.pSize),this.o.smoothing||(this.sendZoomingAction(),this.setCursorState(),this.deepZoomAction(),this.view.setImagePosition(this.iPos,this.scale)))))},e.destroy=function(){this.hide(!0),clearTimeout(this.zoomingTimer),this.view.removeScrollEvent(this.scrollHandler),this.setCursorState("canZoom"),clearTimeout(this.deepZoomTimer),this.deepZoom.destroy(),this.deepZoom=null,this.off("getTile"),this.off("zoomCancelLoadingOfTiles"),this.zoomingTimer=null,s.prototype.destroy.call(this)},t}(i),V=function(a){"use strict";function t(t,e){e=a.call(this,t,u.extend({map:!1,mapSize:50},e))||this;return e.basePercentOfScale={x:0,y:0},e.clonedImage=null,e.hideTimer=null,e.showTimer=null,e.map=null,e.zoomingTimer=null,e.currentCursorState=0,e.innerImagePosition={x:0,y:0},e.setUpEvent=!1,u.browser.mobile&&(e.o.pan=!0,"hover"===e.o.trigger&&(e.o.trigger="click")),e.view.setLensCss(e.lensPosition,e.lensSize),e.ANIM_STEP=.3,e}n.inheritsLoose(t,a);var e=t.prototype;return e.init=function(){a.prototype.init.call(this),this.createZoomMap()},e.createZoomMap=function(){var t,e,i=this;this.o.map&&(t=parseInt(this.pSize.width/2/100*this.o.mapSize,10),e=parseInt(this.pSize.height/2/100*this.o.mapSize,10),this.map=new R(this.view.getContainerForMap(),{maxwidth:t,maxheight:e}),this.map.setParent(this),this.on("zoomGetImage",function(t){t.stopEmptyEvent(),t.data.map=!0,t.data.exactSize=!0}),this.on("zoomMapNewPosition",function(t){t.stopAll(),i.setXY(i.pPos.left+i.lensSize.width/100*t.data.x,i.pPos.top+i.lensSize.height/100*t.data.y),i.calcPositionOfImageInCenter(i.scale),i.o.smoothing||(i.deepZoomAction(),i.view.setImagePosition(i.iPos,i.scale),i.map&&i.map.move(i.iPos,i.scale))}))},e.move=function(t,e){this.setXY(t,e),this.calcPositionOfImage(this.scale),this.afterMove()},e.render=function(t,e){a.prototype.render.call(this,t,e),this.map&&this.map.move(t||this.iDPos,e||this.dScale)},e.calcPositionOfImageForPinch=function(t){t=t||this.dScale;var e=this.iSize.width*t.x,i=this.iSize.height*t.y,s=(this.iSize.width-e)/2,t=(this.iSize.height-i)/2,n=e>this.lensSize.width?(n=this.x-(e/100*this.basePercentOfScale.x+s),f(n,0-s,s+e,this.lensSize.width)):this.lensSize.width/2-(e/2+s),o=i>this.lensSize.height?(o=this.y-(i/100*this.basePercentOfScale.y+t),f(o,0-t,t+i,this.lensSize.height)):this.lensSize.height/2-(i/2+t);this.iPos={x:n,y:o}},e.setScale=function(t,e,i){this.state===c.APPEARANCE.SHOWN&&(u.defined(e)&&this.setXY(e,i),this.scale.x=t,this.scale.y=t,this.scale.x=v(this.scale.x,this.baseScale.x,1),this.scale.y=v(this.scale.y,this.baseScale.y,1),this.calcPositionOfImageForPinch(this.scale),this.sendZoomingAction(),this.setCursorState(),this.o.smoothing||(this.dScale.x=this.scale.x,this.dScale.y=this.scale.y,this.imageDPosition.x=this.imagePosition.x,this.imageDPosition.y=this.imagePosition.y,this.deepZoomAction(),this.view.setImagePosition(this.imagePosition,this.scale),this.map&&this.map.move(this.imagePosition,this.scale)))},e.afterZoom=function(t){this.calcPositionOfImageForPinch(this.scale),a.prototype.afterZoom.call(this,t)},e.calcPositionOfImage=function(t,e,i,s){var n=i||this.x,o=s||this.y;t=t||this.dScale;var r=this.iSize.width*t.x,i=this.iSize.height*t.y,s=(this.iSize.width-r)/2,t=(this.iSize.height-i)/2,a=r>this.lensSize.width?(a=n-m(r,n/this.pSize.width*100)-s,f(a,0-s,s+r,this.lensSize.width)):this.lensSize.width/2-(r/2+s),h=i>this.lensSize.height?(h=o-m(i,o/this.pSize.height*100)-t,f(h,0-t,t+i,this.lensSize.height)):this.lensSize.height/2-(i/2+t);this.iPos={x:a,y:h}},e.calcPositionOfImageInCenter=function(t){t=t||this.dScale;var e=this.iSize.width*t.x,i=this.iSize.height*t.y,s=(this.iSize.width-e)/2,n=(this.iSize.height-i)/2,o=this.x/(this.lensSize.width/e),t=this.y/(this.lensSize.height/i),o=this.lensSize.width/2-o-s,t=this.lensSize.height/2-t-n;o=f(o,0-s,s+e,this.lensSize.width),t=f(t,0-n,n+i,this.lensSize.height),this.iPos={x:o,y:t}},e.setBasePercent=function(t){var e,i,s,n;u.contains([c.APPEARANCE.SHOWN,c.APPEARANCE.SHOWING],this.state)&&(e=(n=this.iSize).width*this.scale.x,i=n.height*this.scale.y,s=(n.width-e)/2,n=(n.height-i)/2,this.basePercentOfScale={x:g(Math.abs(this.iPos.x)+this.correctX(t.x)-s,e),y:g(Math.abs(this.iPos.y)+this.correctY(t.y)-n,i)})},e.setImage=function(t){(this.isShown()||this.isShowing())&&(t.callbackData.map?this.map&&this.map.setImg(t.src,t.srcset):a.prototype.setImage.call(this,t))},e.endOfShowing=function(t){a.prototype.endOfShowing.call(this,t)&&this.map&&this.map.show()},e.getImagePosition=function(){this.innerImagePosition={x:(this.lensSize.width-this.zoomNodeSize.width)/2,y:(this.lensSize.height-this.zoomNodeSize.height)/2}},e.show=function(t,e,i,s,n,o){var r=this;return!!a.prototype.show.call(this)&&(this.setUpEvent=n,this.iSize={width:e.width,height:e.height},this.view.addStartCss(),this.view.appendNodes(t,this.iSize),this.getSizes(),this.setXY(i,s),this.calcSizeOfLens(),this.getImagePosition(),this.getBaseScale(),this.showDeepZoom(e.originWidth,e.originHeight),this.showTimer=setTimeout(function(){var t;r.showTimer=null,r.emit("zoomBeforeShow",{data:{}}),o&&"max"!==o&&("zero"===o?(r.scale.x=r.baseScale.x,r.scale.y=r.baseScale.y):(t=r.deepZoom.getScale("zoomin"),r.scale.x=t,r.scale.y=t)),r.calcPositionOfImage(r.scale,!0),r.view.setEventNodePositionSize(r.pPos,r.pSize),r.dScale.x=r.baseScale.x,r.dScale.y=r.baseScale.y,r.iDPos={x:(r.iSize.width-r.iSize.width*r.dScale.x)/2*-1+r.innerImagePosition.x,y:(r.iSize.height-r.iSize.height*r.dScale.y)/2*-1+r.innerImagePosition.y},r.view.setLensCss(r.lensPosition,r.lensSize),r.view.setImageSize(r.iDPos,r.iSize,r.dScale),r.boundaries=r.view.getBoundaries(),r.map&&r.map.prepare(r.iSize.width,r.iSize.height,r.pSize.width,r.pSize.height),r.o.smoothing&&"zero"!==o?(r.setEvents(),r.animStep=.3,r.animCb=function(){r.deepZoomAction(),r.endOfShowing(!0)}):r.endOfShowing(),r.o.smoothing&&r.anim.start(),r.sendZoomShownEvent()},0),!0)},e.hide=function(t){var e=this,i=a.prototype.hide.call(this,t);return i&&(clearTimeout(this.showTimer),t||(this.scale.x!==this.baseScale.x||this.scale.y!==this.baseScale.y?(this.animStep=.4,this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y,this.iPos={x:(this.iSize.width-this.iSize.width*this.scale.x)/2*-1+this.innerImagePosition.x,y:(this.iSize.height-this.iSize.height*this.scale.y)/2*-1+this.innerImagePosition.y},this.animCb=function(){e.endOfHiding()}):this.endOfHiding())),i},e.addMouseScrollEvent=function(){var r=this;this.view.setEventToWrapper("mousescroll",function(t){var e,i,s;t.stop(),r.o.pan&&(e=(s=r.iSize).width*r.scale.x,o=s.height*r.scale.y,i=(s.width-e)/2,s=(s.height-o)/2,r.basePercentOfScale={x:g(Math.abs(r.iPos.x)+r.correctX(t.x)-i,e),y:g(Math.abs(r.iPos.y)+r.correctY(t.y)-s,o)});var n,o=r.scale.x;t.isMouse?(n=t.delta/(t.deltaFactor/100*37),r.scale.x+=n,r.scale.y+=n):(n=t.delta,15<Math.abs(n)&&(n=15,t.delta<0&&(n*=-1)),n/=350,r.scale.x+=n,r.scale.y+=n),r.scale.x=v(r.scale.x,r.baseScale.x,1),r.scale.y=v(r.scale.y,r.baseScale.y,1),r.o.pan?(r.setXY(t.x,t.y),r.calcPositionOfImageForPinch(r.scale)):r.calcPositionOfImage(r.scale),o!==r.scale.x&&(r.sendZoomingAction(),r.setCursorState(),r.o.smoothing||(r.dScale.x=r.scale.x,r.dScale.y=r.scale.y,r.iDPos.x=r.iPos.x,r.iDPos.y=r.iPos.y,r.deepZoomAction(),r.view.setImagePosition(r.iPos,r.scale),r.map&&r.map.move(r.iPos,r.scale))),r.hideByTimer()})},e.hideByTimer=function(){var t=this;clearTimeout(this.hideTimer),this.scale.x<=this.baseScale.x+1e-8&&"outside"!==this.o.type&&(this.hideTimer=setTimeout(function(){t.hide(!0)},1e3))},e.addInnerTouchDrag=function(){var e,i,s,n,o,r,a=this,h=!1;this.view.setEventToWrapper(p,function(t){t.stop(),"dragstart"===t.state?(h=!0,a.view.addEventsCanvasClass(l.drag),a.stopMovingAndZooming(),a.setXY(t.x,t.y),s=a.iSize.width*a.scale.x,n=a.iSize.height*a.scale.y,o=(a.iSize.width-s)/2,r=(a.iSize.height-n)/2,e=t.x,i=t.y):"dragend"===t.state?(h=!1,a.view.removeEventsCanvasClass(l.drag)):h&&(a.setXY(t.x,t.y),s>a.lensSize.width?(a.iPos.x+=t.x-e,a.iPos.x=f(a.iPos.x,0-o,o+s,a.lensSize.width)):a.iPos.x=a.lensSize.width/2-(s/2+o),n>a.lensSize.height?(a.iPos.y+=t.y-i,a.iPos.y=f(a.iPos.y,0-r,r+n,a.lensSize.height)):a.iPos.y=a.lensSize.height/2-(n/2+r),a.o.smoothing&&a.o.pan?a.animStep=.3:(a.iDPos.x=a.iPos.x,a.iDPos.y=a.iPos.y,a.deepZoomAction(),a.view.setImagePosition(a.iPos,a.scale),a.map&&a.map.move(a.iPos,a.scale)),e=t.x,i=t.y)})},e.addInnerPinch=function(){var e,i,s,n,o,r,a,h=this,l=1-this.baseScale.x;this.o.customZooming&&this.view.setEventToWrapper("pinch",function(t){t.stop(),"pinchstart"===t.state?(clearTimeout(e),h.stopMovingAndZooming(),h.view.node.removeEvent(p),h.scale.x=h.dScale.x,h.scale.y=h.dScale.y,i=h.scale.x,r=o=n=1,a=h.baseScale.x,h.setBasePercent(t.centerPoint)):"pinchresize"===t.state?h.setBasePercent(t.centerPoint):"pinchmove"===t.state?(h.setXY(t.centerPoint.x,t.centerPoint.y),s=t.scale,r<(s*=i)&&(r=s,a=h.baseScale.x,o=1,n=l/(r-h.baseScale.x)),s<a&&(a=s,n=r=1,o=h.baseScale.x/a),s=(h.baseScale.x+(s-h.baseScale.x)*n)*o,h.scale.x=s,h.scale.y=s,h.scale.x=v(h.scale.x,h.baseScale.x,1),h.scale.y=v(h.scale.y,h.baseScale.y,1),h.calcPositionOfImageForPinch(h.scale),h.sendZoomingAction(),h.setCursorState(),h.o.smoothing||(h.dScale.x=h.scale.x,h.dScale.y=h.scale.y,h.iDPos.x=h.iPos.x,h.iDPos.y=h.iPos.y,h.deepZoomAction(),h.view.setImagePosition(h.iPos,h.scale),h.map&&h.map.move(h.iPos,h.scale))):"pinchend"===t.state&&(clearTimeout(e),e=setTimeout(function(){h.addInnerTouchDrag()},42),h.scale.x<=h.baseScale.x+1e-8&&"outside"!==h.o.type&&h.state!==c.APPEARANCE.HIDING&&(clearTimeout(e),h.hide(!0)))})},e.hideZoomByMouseOut=function(){var r=this;this.view.addGlobalEvent(function(t){var e,i,s,n,o;e=t.getClientXY(),i=r.view.getContainerPosition(),s=r.view.getContainerSize(),n=u.D.getScroll(),o=!1,t=i.left-n.x,n=i.top-n.y,(e.x<=t||e.y<=n||e.x>=t+s.width||e.y>=n+s.height)&&(o=!0),o&&(r.view.removeGlobalEvent(),r.hide())})},e.setEvents=function(){var e=this;this.setUpEvent&&u.browser.mobile&&this.view.setEventToWrapper(s,function(t){t.stop(),e.hide(!0)}),this.o.customZooming&&this.addMouseScrollEvent(),this.addInnerTouchDrag(),this.view.removeDragstart(),this.setUpEvent||this.addInnerPinch(),"hover"!==this.o.trigger?this.addClickEvent():this.hideZoomByMouseOut(),this.o.pan||u.browser.mobile||this.view.setEventToMainContainer(o,function(t){t.pointerType&&"touch"===t.pointerType||(t.stop(),t=t.getPageXY(),e.move(t.x,t.y))})},e.keepOldPosition=function(t){var e=this.iPos.x,i=this.iPos.y,s=this.iSize.width*this.scale.x,n=this.iSize.height*this.scale.y,o=(this.iSize.width-s)/2,r=(this.iSize.height-n)/2;e-=(t.width-this.lensSize.width)/2,i-=(t.height-this.lensSize.height)/2,e=s>this.lensSize.width?f(e,0-o,o+s,this.lensSize.width):this.lensSize.width/2-(s/2+o),i=n>this.lensSize.height?f(i,0-r,r+n,this.lensSize.height):this.lensSize.height/2-(n/2+r),this.iPos={x:e,y:i}},e.onResize=function(){var t,e=this.lensSize;a.prototype.onResize.call(this),this.state!==c.APPEARANCE.HIDDEN&&this.state!==c.APPEARANCE.HIDING&&(this.keepOldPosition(e),this.getImagePosition(),this.map&&(t=parseInt(this.pSize.width/2/100*this.o.mapSize,10),e=parseInt(this.pSize.height/2/100*this.o.mapSize,10),this.map.resize(t,e,this.iSize.width,this.iSize.height,this.pSize.width,this.pSize.height),this.o.smoothing||this.map.move(this.iPos,this.scale)))},e.destroy=function(){clearTimeout(this.showTimer),this.map&&(this.map.destroy(),this.map=null,this.off("zoomGetImage"),this.off("zoomMapNewPosition")),a.prototype.destroy.call(this)},t}(t),W=function(r){"use strict";function t(t,e){return u.browser.mobile&&9===e.margin&&delete e.margin,(e=r.call(this,t,u.extend({width:70,height:70,margin:65},e))||this).setUpEvent=!1,e.isSquare=!0,e.ANIM_STEP=.4,e}n.inheritsLoose(t,r);var e=t.prototype;return e.init=function(){r.prototype.init.call(this),this.setLensSize()},e.setLensSize=function(){var t={width:this.o.width,height:this.o.height};t.width===t.height&&(this.isSquare=!0),u.contains([t.width,t.height],"auto")?(this.isSquare=!0,"auto"===t.width?("auto"!==t.height?t.height=this.getPercentSize(t.height,"height"):t.height=70,t.width=t.height):"auto"!==t.width?(t.width=this.getPercentSize(t.width,"width"),t.height=t.width):(t.height=70,t.width=t.height)):(t.width=this.getPercentSize(t.width,"width"),t.height=this.getPercentSize(t.height,"height")),this.currentLensSize=(t={width:t.width,height:t.height},9<(t.width>=t.height?t.width/t.height:t.height/t.width)?{width:50,height:50}:(t.width<10&&(t.height=t.height/t.width*10,t.width=10),t.height<10&&(t.width=t.width/t.height*10,t.height=10),90<t.width&&(t.height=t.height/t.width*90,t.width=90),90<t.height&&(t.width=t.width/t.height*90,t.height=90),t)),this.ANIM_STEP=.6},e.calcSizeOfLens=function(){var t,e;this.isSquare?(t=this.pSize,e=this.currentLensSize,e=Math.min(t.width,t.height)/100*e.width,this.setSizeOfLens(e,e)):r.prototype.calcSizeOfLens.call(this)},e.calcPositionOfLens=function(){var t,e,i,s=this.pSize,n=this.o.margin;n<0&&(n=0),this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x>s.width&&(this.x=s.width),this.y>s.height&&(this.y=s.height),t=this.y-this.lensHalfSize.height,e=this.x-this.lensHalfSize.width;var o=this.pPos;u.browser.mobile&&(t-=n,i=h(u.W).getScroll(),s=h(u.W).getSize(),o.top+t<i.y&&(o.left+this.x-this.lensSize.width-n>i.x?(t=this.y-this.lensHalfSize.height,e=this.x-this.lensSize.width-n):o.left+this.x+this.lensSize.width+n<i.x+s.width?(t=this.y-this.lensHalfSize.height,e=this.x+n):i.y+s.height>o.top+this.y+n+this.lensSize.height&&(t=this.y+n))),this.lensPosition={top:t,left:e}},e.calcPositionOfImage=function(t,e,i,s){i=i||this.x,s=s||this.y,i=this.lensHalfSize.width-m(this.iSize.width,i/this.pSize.width*100),s=this.lensHalfSize.height-m(this.iSize.height,s/this.pSize.height*100);this.iPos={x:i,y:s}},e.getPercentSize=function(t,e){return/%$/.test(t)?t=parseInt(t,10):(t=parseInt(t,10),t/=this.pSize[e]/100),t},e.setEvents=function(){var e=this;this.setUpEvent&&!this.o.pan&&this.view.setEventToMainContainer(s,function(t){t.stop(),e.hide(!0)}),this.o.customZooming&&this.addMouseScroollEvent(),this.addMouseOverEvent(),"hover"===this.o.trigger&&this.addMouseOutEvent(),this.o.pan&&this.addDragEvent(),u.browser.mobile&&this.addTapEvent(),"hover"!==this.o.trigger&&this.addClickEvent(),this.o.pan||u.browser.mobile||this.view.setEventToMainContainer(o,function(t){t.pointerType&&"touch"===t.pointerType||(t.stop(),t=t.getPageXY(),e.move(t.x,t.y),(e.x<=0||e.y<=0||e.x>=e.pSize.width||e.y>=e.pSize.height)&&e.hide())})},e.afterMove=function(){this.calcPositionOfLens(),this.calcPositionOfImage(this.scale),this.view.setLensPosition(this.lensPosition),r.prototype.afterMove.call(this)},e.changeLensSize=function(t){t.width=v(t.width,10,90),t.height=v(t.height,10,90),t.width!==this.currentLensSize.width&&(this.currentLensSize.width=t.width,this.currentLensSize.height=t.height,this.calcSizeOfLens(),this.calcPositionOfLens(),this.calcPositionOfImage(),this.iDPos.x=this.iPos.x,this.iDPos.y=this.iPos.y,this.deepZoomAction(!1,this.lensSize),this.view.setImagePosition(this.iPos,this.scale),this.view.setLensPosition(this.lensPosition),this.view.setLensSize(this.lensSize))},e.addMouseScroollEvent=function(){var n=this;this.view.setEventToWrapper("mousescroll",function(t){t.stop();var e=t.delta,i={width:0,height:0};if(n.isSquare)for(var s in i)!{}.hasOwnProperty.call(i,s)||(i[s]=n.currentLensSize[s]+e);else s=n.currentLensSize.height/n.currentLensSize.width,i.width=n.currentLensSize.width+e,i.height=n.currentLensSize.height+e*s;n.changeLensSize(i)})},e.addMouseOverEvent=function(){var e=this;this.view.setEventToMainContainer("mouseover",function(t){t.stop();t=t.getPageXY();e.setXY(t.x,t.y),e.calcPositionOfLens(),e.calcPositionOfImage(),e.view.setLensPosition({top:e.lensPosition.top,left:e.lensPosition.left}),e.view.setImagePosition(e.iPos,e.scale)})},e.addMouseOutEvent=function(){var s=this;this.view.setEventToWrapper("mouseout",function(t){for(var e,i=t.getRelated();i&&i!==s.node&&i!==s.lensContainer&&i!==s.eventsCanvasNode;)i=i.parentNode;s.node===i||s.eventsCanvasNode===i||((e=t.getClientXY()).x<s.boundaries.left||e.x>s.boundaries.right||e.y<s.boundaries.top||e.y>s.boundaries.bottom)&&(t.stop(),s.o.smoothing?s.hide():s.hide(!0))})},e.addDragEvent=function(){var e=this,i=!1;this.view.setEventToMainContainer(p,function(t){t.stop(),"dragstart"===t.state?i=!0:"dragend"===t.state?i=!1:i&&e.move(t.x,t.y)})},e.addTapEvent=function(){var e=this;this.view.setEventToMainContainer("dblclick"===this.o.trigger?"dbltap":"tap",function(t){t.stop(),e.o.smoothing?e.hide():e.hide(!0)})},e.hide=function(t){var e=this,i=r.prototype.hide.call(this,t);return i&&(t||(this.view.setEventToWrapper("transitionend",function(t){t.stop(),e.view.removeEventFromWrapper("transitionend"),e.endOfHiding()}),this.view.setLensStyle({transition:"opacity .2s linear, transform .2s linear",opacity:0,transform:"scale(0)"}))),i},e.show=function(t,e,i,s,n){var o=this;return!!r.prototype.show.call(this)&&(this.emit("zoomBeforeShow",{data:{}}),this.setUpEvent=n,this.iSize={width:e.width,height:e.height},this.view.addStartCss(),this.view.appendNodes(t,this.iSize),this.getSizes(),this.setXY(i,s),this.calcSizeOfLens(),this.calcPositionOfLens(),this.getBaseScale(),this.showDeepZoom(e.originWidth,e.originHeight),this.calcPositionOfImage(this.scale,!0),this.view.setEventNodePositionSize(this.pPos,this.pSize),this.dScale.x=this.baseScale.x,this.dScale.y=this.baseScale.y,this.iDPos={x:(this.iSize.width-this.iSize.width*this.dScale.x)/2*-1-this.lensPosition.left,y:(this.iSize.height-this.iSize.height*this.dScale.y)/2*-1-this.lensPosition.top},this.view.setLensCss(this.lensPosition,this.lensSize,"opacity .15s linear, transform .15s linear"),this.view.setImageSize(this.iDPos,this.iSize,this.dScale),this.boundaries=this.view.getBoundaries(),this.o.smoothing?(this.view.setEventToWrapper("transitionend",function(t){t.stop(),o.view.removeEventFromWrapper("transitionend"),o.view.setLensStyle({transition:""}),o.sendZoomShownEvent()}),this.endOfShowing(),this.anim.start()):(this.endOfShowing(),this.sendZoomShownEvent()),!0)},t}(t),q=function(r){"use strict";function t(t,e){e=r.call(this,t,u.extend({margin:9,outsidePosition:"right",width:100,height:100},e))||this;return e.showingParams=null,e.eye=new A(e.view.getNodeForEye(),"hover"===e.o.trigger),e.ANIM_STEP=.18,e.mouseOutHandler=e.mouseOut.bind(n.assertThisInitialized(e)),e}n.inheritsLoose(t,r);var e=t.prototype;return e.getBoundaries=function(){this.boundaries=this.eye.getBoundaries()},e.init=function(){r.prototype.init.call(this),this.setLensSize()},e.setEyesParams=function(){var t=this.currentLensSize.width/(this.iSize.width*this.scale.x),e=this.currentLensSize.height/(this.iSize.height*this.scale.y);this.eye.setSize({width:t*this.zoomNodeSize.width,height:e*this.zoomNodeSize.height}),this.eye.setPosition(this.x,this.y)},e.calcPositionOfLens=function(){var t=this.o.margin,e=this.pSize,i=this.pPos;t<0&&(t=0);var s=i.top,i=i.left;switch(this.o.outsidePosition){case"top":s+=-1*(this.lensSize.height+t);break;case"left":i+=-1*(this.lensSize.width+t);break;case"right":i+=e.width+t;break;case"bottom":s+=e.height+t}this.lensPosition={top:s,left:i}},e.calcPositionOfImage=function(t){t=t||this.dScale;var e=this.iSize.width*t.x,i=this.iSize.height*t.y,s=(this.iSize.width-e)/2,n=(this.iSize.height-i)/2,o=this.x/(this.zoomNodeSize.width/e),t=this.y/(this.zoomNodeSize.height/i),o=this.lensSize.width/2-o-s,t=this.lensSize.height/2-t-n;o=f(o,0-s,s+e,this.lensSize.width),t=f(t,0-n,n+i,this.lensSize.height),this.iPos={x:o,y:t}},e.afterMove=function(){this.calcPositionOfLens(),this.calcPositionOfImage(this.scale),this.setEyesParams(),this.view.setLensPosition(this.lensPosition),r.prototype.afterMove.call(this)},e.hide=function(t){var e=r.prototype.hide.call(this,t);return e&&(u.browser.mobile||this.view.removeMouseMoveEvent(this.mouseOutHandler),this.eye.clearEvents(),this.eye.hide(),t||(this.view.removeEvents(),this.endOfHiding())),e},e.getShowingPropertiesToOutsideMode=function(){var t={start:{x:0,y:0},end:{x:0,y:0}};switch(this.o.outsidePosition){case"top":t.start.y=10,t.end.y=0;break;case"left":t.start.x=10,t.end.x=0;break;case"right":t.start.x=-10,t.end.x=0;break;case"bottom":t.start.y=-10,t.end.y=0}return t},e.endOfShowing=function(){r.prototype.endOfShowing.call(this),this.getBoundaries()},e.show=function(t,e,i,s,n,o){return!!r.prototype.show.call(this)&&(this.emit("zoomBeforeShow",{data:{}}),this.iSize={width:e.width,height:e.height},this.showingParams=this.getShowingPropertiesToOutsideMode(),this.view.addStartCss(this.showingParams),this.view.appendNodes(t,this.iSize),this.getSizes(),this.setXY(i,s),this.calcSizeOfLens(),this.calcPositionOfLens(),this.getBaseScale(),this.showDeepZoom(e.originWidth,e.originHeight),this.calcPositionOfImage(this.scale,!0),this.view.setEventNodePositionSize(this.pPos,this.pSize),this.dScale.x=this.baseScale.x,this.dScale.y=this.baseScale.y,this.iDPos={x:(this.iSize.width-this.iSize.width*this.dScale.x)/2*-1,y:(this.iSize.height-this.iSize.height*this.dScale.y)/2*-1},this.view.setLensCss(this.lensPosition,this.lensSize,this.o.smoothing?"opacity .4s linear, transform .15s ease-in":"none"),this.view.setImageSize(this.iDPos,this.iSize,this.dScale),!this.o.smoothing&&"zero"!==o||this.endOfShowing(),this.eye.show(this.view.getImageForEye()),this.getBoundaries(),this.setEyesParams(),this.animStep=.3,this.o.smoothing?this.anim.start():this.endOfShowing(),this.sendZoomShownEvent(),!0)},e.setLensSize=function(){var t={width:this.o.width,height:this.o.height};"auto"===t.width?t.width=this.pSize.width:/%$/.test(this.o.width)?t.width=this.pSize.width/100*parseInt(this.o.width,10):t.width=parseInt(t.width,10),"auto"===t.height?t.height=this.pSize.height:/%$/.test(this.o.height)?t.height=this.pSize.height/100*parseInt(this.o.height,10):t.height=parseInt(t.height,10),this.currentLensSize={width:t.width,height:t.height}},e.calcSizeOfLens=function(){var t=this.currentLensSize;this.lensSize={width:t.width,height:t.height},this.lensHalfSize={width:this.lensSize.width/2,height:this.lensSize.height/2}},e.setEvents=function(){var t,e=this;u.browser.mobile&&this.o.pan&&this.addOutsideTouchDrag(),!u.browser.mobile&&u.browser.touchScreen&&d.isIe()&&(this.o.pan||this.eye.setEventToMainContainer("pointerup",function(t){e.hide()})),this.eye.setEventToMainContainer("mousemove",function(t){t.stop();t=t.getPageXY();e.move(t.x,t.y)}),"hover"===this.o.trigger?(u.browser.mobile||this.view.addMouseMoveEvent(this.mouseOutHandler),this.eye.setEventToMainContainer("mouseout",this.mouseOutHandler)):(t="btnclick tap","dblclick"===this.o.trigger&&(t="dblbtnclick dbltap"),this.eye.setEventToMainContainer(t,function(t){e.hide()})),this.o.customZooming&&this.setMouseScrollEvent()},e.mouseOut=function(t){t=t.getClientXY();(t.x<this.boundaries.left||t.x>this.boundaries.right||t.y<this.boundaries.top||t.y>this.boundaries.bottom)&&this.hide(!this.getZoomData())},e.addOutsideTouchDrag=function(){var e=this,i=!1;this.eye.setEventToMainContainer(p,function(t){t.stop(),"dragstart"===t.state?i=!0:"dragend"===t.state?i=!1:i&&e.move(t.x,t.y)})},e.setMouseScrollEvent=function(){var s=this;this.eye.setEventToMainContainer("mousescroll",function(t){var e,i=s.scale.x;t.stop(),t.isMouse?(e=t.delta/(t.deltaFactor/100*37),s.scale.x+=e,s.scale.y+=e):(e=t.delta,15<Math.abs(e)&&(e=15,t.delta<0&&(e*=-1)),e/=350,s.scale.x+=e,s.scale.y+=e),s.scale.x=v(s.scale.x,s.baseScale.x,1),s.scale.y=v(s.scale.y,s.baseScale.y,1),s.calcPositionOfImage(s.scale),i!==s.scale.x&&(s.sendZoomingAction(),s.setCursorState(),s.o.smoothing||(s.dScale.x=s.scale.x,s.dScale.y=s.scale.y,s.iDPos.x=s.iPos.x,s.iDPos.y=s.iPos.y,s.deepZoomAction(),s.setImagePosition(s.iPos,s.scale)),s.setEyesParams())})},e.setLensStyleOnResize=function(){this.view.setLensPosition(this.lensPosition),this.view.setCanvasNodeSize(this.lensSize)},e.onResize=function(){r.prototype.onResize.call(this),this.state!==c.APPEARANCE.HIDDEN&&this.state!==c.APPEARANCE.HIDING&&this.eye.resize()},e.destroy=function(){this.eye.destroy(),this.view.removeMouseMoveEvent(this.mouseOutHandler),r.prototype.destroy.call(this)},t}(t);return function(s){"use strict";function t(t,e){var i=s.call(this)||this;return i.zoomType=e.type,"inner"===e.type?(i.view=new _(t),i.view.addClassToWrapper("inner"),i.controller=new V(i.view,e)):u.contains(["circle","square"],e.type)?(i.view=new B(t),i.view.addClassToWrapper(e.type),i.controller=new W(i.view,e)):(i.view=new U(t),i.view.addClassToWrapper("outside"),i.controller=new q(i.view,e)),i.controller.setParent(n.assertThisInitialized(i)),i.controller.init(),i}n.inheritsLoose(t,s);var e=t.prototype;return e.setLensContainer=function(t){this.controller.setLensContainer(t)},e.isShown=function(){return this.controller.isShown()},e.getZoomData=function(t){return this.controller.getZoomData(t)},e.getNextMinZoom=function(){return this.controller.getNextMinZoom()},e.getNextMaxZoom=function(){return this.controller.getNextMaxZoom()},e.zoomUp=function(t,e){return this.controller.zoomUp(t,e)},e.zoomDown=function(t,e){return this.controller.zoomDown(t,e)},e.showCenter=function(t,e,i){return this.controller.showCenter(t,e,i)},e.isShowing=function(){return this.controller.isShowing()},e.setImage=function(t){this.controller.setImage(t)},e.show=function(t,e,i,s,n,o){return this.controller.show(t,e,i,s,n,o)},e.hide=function(t){return this.controller.hide(t)},e.customMove=function(t,e){this.controller.customMove(t,e)},e.getBaseScale=function(){return this.controller.baseScale},e.setBasePercent=function(t){"inner"===this.zoomType&&this.controller.setBasePercent(t)},e.setScale=function(t,e,i){"inner"===this.zoomType&&this.controller.setScale(t,e,i)},e.onResize=function(){this.controller.onResize()},e.destroy=function(){this.view.destroy(),this.controller.destroy()},t}(i)}),Sirv.define("Hotspots",["bHelpers","magicJS","globalFunctions","EventEmitter","Hotspot","helper","Promise!"],function(s,t,e,i,n,o,r){var a=t,h=a.$;return function(e){"use strict";function t(){var t=e.call(this)||this;return t.container=a.$new("div").addClass("sirv-hotspot-container"),t.hotspots=[],t.activeHotspots=[],t.hoveredHotspots=[],t.originImageSize={width:0,height:0},t.instanceComponentNode=null,t.api={add:t.addHotspot.bind(s.assertThisInitialized(t)),remove:t.removeHotspot.bind(s.assertThisInitialized(t)),removeAll:t.removeAllHotspots.bind(s.assertThisInitialized(t)),list:t.getPointerNodeHotspots.bind(s.assertThisInitialized(t)),setVisibility:t.setStateById.bind(s.assertThisInitialized(t)),enable:t.enable.bind(s.assertThisInitialized(t)),disable:t.disable.bind(s.assertThisInitialized(t))},t.setEvents(),t}s.inheritsLoose(t,e);var i=t.prototype;return i.setOriginImageSize=function(t,e){this.originImageSize={width:t,height:e}},i.appendTo=function(t){this.container.appendTo(t)},i.setInstanceComponentNode=function(t){this.instanceComponentNode=t},i.setContainerSize=function(t){var e,i,s;this.hotspots.length&&t&&(e=this.getRightBoundengClientRect(),this.container.setCss({top:t.top-e.top,left:t.left-e.left,width:100*t.width/e.width+"%",height:100*t.height/e.height+"%"}),e=this.container.getSize(),i=e.width/this.originImageSize.width,s=e.height/this.originImageSize.height,this.hotspots.forEach(function(t){return t.setAspectRatio(i,s)}))},i.getActiveHotspot=function(e){return this.activeHotspots.filter(function(t){return t.id===e})[0]||null},i.getHoveredHotspots=function(e){return this.hoveredHotspots.filter(function(t){return t.id===e})[0]||null},i.setEvents=function(){var i=this;this.on("hotspotActivate",function(t){i.getActiveHotspot(t.data.hotspot.id)||(t.stopEmptyEvent(),i.activeHotspots.forEach(function(t){t.isBoxAlwaysVisible()||t.hideBox(!0)}),i.activeHotspots.push(t.data.hotspot),i.activeHotspots[i.activeHotspots.length-1].overridePointerEvent(),t.data.id=t.data.hotspot.id,delete t.data.hotspot)}),this.on("hotspotDeactivate",function(t){t.stopEmptyEvent();var e=i.getActiveHotspot(t.data.hotspot.id);e&&(e.removeOverridePointerEvent(),i.activeHotspots=i.activeHotspots.filter(function(t){return t.id!==e.id})),t.data.id=t.data.hotspot.id,delete t.data.hotspot}),this.on("hotspotHovered",function(t){i.getHoveredHotspots(t.data.hotspot.id)||(t.stopAll(),i.hoveredHotspots.push(t.data.hotspot))}),this.on("hotspotLeft",function(t){t.stopAll();var e=i.getHoveredHotspots(t.data.hotspot.id);e&&(i.hoveredHotspots=i.hoveredHotspots.filter(function(t){return t.id!==e.id}))}),this.clickFn=function(t){i.activeHotspots.forEach(function(t){t.isBoxAlwaysVisible()||t.hideBox(!0)}),i.hoveredHotspots.forEach(function(t){t.isTooltipAlwaysVisible()||t.hideTooltip(!0)})},h(a.D).addEvent("click",this.clickFn)},i.isHotspotActivated=function(){return 0<this.activeHotspots.length},i.createHotspots=function(t){var e=this;t&&t.length&&t.forEach(function(t){e.createHotspot(t,e.hotspots.length)})},i.createHotspot=function(t,e){e=new n(this.container,t,e);e.setParent(this),this.hotspots.push(e)},i.addHotspot=function(t){Array.isArray(t)||(t=[t]),this.createHotspots(t,this.hotspots.length)},i.getRightBoundengClientRect=function(t){return(this.hotspots.length?this.container.node.parentNode:(this.instanceComponentNode||t).node).getBoundingClientRect()},i.changeBoxContainerParent=function(t){var e=t?this.container:null;this.hotspots.forEach(function(t){t.changeBoxContainer(e)})},i.hideActiveHotspotBox=function(e){var t=this.activeHotspots.length||this.hoveredHotspots.length;return this.activeHotspots.forEach(function(t){t.hideBox(e)}),this.hoveredHotspots.forEach(function(t){t.hideTooltip()}),t},i.show=function(t){t=this.hotspots[t];t&&t.show()},i.showAll=function(){this.hotspots.forEach(function(t){t.show()})},i.hide=function(t){t=this.hotspots[t];t&&t.hide()},i.hideAll=function(){this.hotspots.forEach(function(t){t.hide()})},i.enable=function(t){t=this.hotspots[t];t&&(t.enable(),t.show())},i.disable=function(t){this.hotspots[t]&&this.hotspots[t].disable()},i.enableAll=function(){this.hotspots.forEach(function(t){t.enable(),t.show()})},i.disableAll=function(){this.hotspots.forEach(function(t){t.disable()})},i.showNeededElements=function(){this.hotspots.forEach(function(t){t.isEnabled()&&t.isHotspotShown()&&(t.isBoxAlwaysVisible()&&(t.isBoxActivated()&&t.setBoxPosition(),t.showBox()),t.isTooltipAlwaysVisible()&&(t.isTooltipHovered()&&t.setTooltipPosition(),t.showTooltip()))})},i.getHotspots=function(){return this.hotspots},i.getPointerNodeHotspots=function(){var e=[];return this.hotspots.forEach(function(t){e.push(t.getHotspotPointer())}),e},i.removeHotspot=function(t){var e=this.hotspots[t];e&&(e.disable(),e.destroy(),this.removeByIndex(t),this.hotspots.length||this.container.remove())},i.removeAllHotspots=function(){for(var t=this.hotspots.length-1;0<=t;t--)this.removeHotspot(t)},i.removeByIndex=function(t){this.hotspots.splice(t,1),(0<this.hotspots.length&&0===t||0<t&&t<=this.hotspots.length-1)&&this.rewriteHotspotIndex(t)},i.rewriteHotspotIndex=function(t){for(var e=t,i=this.hotspots.length;e<i;e++)this.hotspots[e].setId(e),this.hotspots[e].rewriteAttrPointer()},i.setStateById=function(t,e){this.hotspots[t]&&this.hotspots[t].setState(e)},i.destroy=function(){h(a.D).removeEvent("click",this.clickFn),this.hotspots.forEach(function(t){t.destroy()}),this.container=null,this.activeHotspots=[],this.hoveredHotspots=[],this.instanceComponentNode=null,this.off("hotspotActivate"),this.off("hotspotDeactivate"),this.off("hotspotHovered"),this.off("hotspotLeft"),this.hotspots=null,e.prototype.destroy.call(this)},t}(i)}),Sirv.define("SpinHotspots",["bHelpers","magicJS","globalFunctions","EventEmitter","Hotspots","helper","Promise!"],function(s,t,e,i,n,r,o){var a=t;a.$;return function(i){"use strict";function t(){var t=i.call(this)||this;return t.options={rows:1,columns:36,rowsRevers:!1,columnsRevers:!1,originImageSize:{}},t.row=null,t.col=null,t.hotspotsSettings=[],t}s.inheritsLoose(t,i);var e=t.prototype;return e.setOptions=function(t){this.options=a.extend(this.options,t||{})},e.getFrameIndex=function(){var t=this.options.rowsRevers&&this.options.columnsRevers?(this.options.rows-this.row-1)*this.options.columns+(this.options.columns-this.col):this.options.rowsRevers?(this.options.rows-this.row-1)*this.options.columns+this.col+1:this.options.columnsRevers?this.row*this.options.columns+(this.options.columns-this.col):this.row*this.options.columns+this.col+1;return t},e.createHotspotsSettings=function(n){for(var t=this,o=!0,e=0,i=n.length;e<i;e++)!function(e){var i=new Map,s={};r.objEach(n[e].frames,function(t){(s=n[e].frames[t]).pointerPositionPercentage={top:r.isPercentage(""+n[e].frames[t].pointer.y),left:r.isPercentage(""+n[e].frames[t].pointer.x)},r.objEach(n[e],function(t){"frames"!==t&&("data"===t&&!o||(s[t]=n[e][t],o=!1))}),i.set(parseInt(t,10),s)}),t.hotspotsSettings.push(i),o=!0}(e)},e.createHotspots=function(t){Array.isArray(t)||(t=[t]),this.createHotspotsSettings(t);t=this.getStartHotspotSettings();i.prototype.createHotspots.call(this,t)},e.addHotspot=function(t){Array.isArray(t)||(t=[t]),this.createHotspotsSettings(t);var e=this.getStartHotspotSettings();i.prototype.createHotspots.call(this,e.slice(e.length-t.length)),this.updateAndShow()},e.getStartHotspotSettings=function(){var i=[];return this.hotspotsSettings.forEach(function(t){var e=null;"ie"===a.browser.uaName?t.forEach(function(t){e=e||t}):t.entries().next().value&&(e=t.entries().next().value[1]),e&&i.push(e)}),i},e.setFramePosition=function(t,e){this.row=t,this.col=e},e.updateAndShow=function(){var s=this,n=this.getFrameIndex();this.hotspotsSettings.forEach(function(t,e){var i=t.get(n),t=s.hotspots[e];i&&t.isEnabled()?(t.setHotspotSettings(i),t.isHotspotShown()?(t.setPointerPosition(),s.showNeededElements(),t.isBoxAlwaysVisible()&&(t.setBaseBoxSize(t.box.getSize()),t.setBoxPosition()),t.isTooltipAlwaysVisible()&&t.setTooltipPosition()):s.show(e)):s.hide(e)})},e.hideNeededElements=function(e){this.activeHotspots.forEach(function(t){t.isBoxAlwaysVisible()||t.hideBox(e)}),this.hoveredHotspots.forEach(function(t){t.isTooltipAlwaysVisible()&&t.hideTooltip(e)})},e.changeHotspotsPosition=function(t,e){this.row===t&&this.col===e||(this.setFramePosition(t,e),this.updateAndShow())},e.showAll=function(){var i=this,s=this.getFrameIndex();this.hotspotsSettings.forEach(function(t,e){t.get(s)&&i.show(e)})},e.enable=function(t){var e;this.hotspotsSettings[t]&&((e=this.hotspots[t]).enable(),this.hotspotsSettings[t].get(this.getFrameIndex())&&e.show())},e.setStateById=function(t,e){this.hotspots[t]&&this.hotspots[t].setState(e,!this.hotspotsSettings[t].get(this.getFrameIndex()))},e.removeHotspot=function(t){this.hotspots[t]&&(this.hotspotsSettings.splice(t,1),i.prototype.removeHotspot.call(this,t))},e.destroy=function(){i.prototype.destroy.call(this),this.options=null,this.row=null,this.col=null,this.hotspotsSettings=null},t}(n)}),Sirv.define("SliderBuilder",["bHelpers","magicJS","EventEmitter","helper","globalVariables","globalFunctions","Promise!"],function(t,e,i,o,r,a,s){var h=e,n=h.$;return function(){"use strict";function t(t,e){this.mainNode=n(e),this.sirvOptions=o.deepExtend({},t||{}),this.nodes=[],this.configURL=null,this.dataJSON=null,this.configHash=null,this.attrbMainNode=null,this.cfCallbackName=null,this.urlParams=null,this.componentsList=[],this.referrerPolicy=this.mainNode.attr("data-referrerpolicy")||this.mainNode.attr("referrerpolicy")||"no-referrer-when-downgrade"}var e=t.prototype;return e.getOptions=function(){var n=this;return new s(function(i,e){var t,s;n.checkNode()?(n.buildCallBackName(),o.getRemoteData((t=n.configURL,s=n.cfCallbackName,t+(h.stringHas(t,"?")?"&":"?")+"nometa&info="+s),n.cfCallbackName,n.referrerPolicy).then(function(t){var e;t&&t.assets?(n.dataJSON=t,n.buildOptions(),i({dataOptions:n.sirvOptions})):(e=r.SLIDE.TYPES.IMAGE,t.layers&&(e=r.SLIDE.TYPES.SPIN),i({content:e,dataOptions:n.sirvOptions}))}).catch(function(t){n.configURL,e({error:n.configURL,dataOptions:n.sirvOptions})})):i({dataOptions:n.sirvOptions})})},e.buildViewer=function(){var n=this;return new s(function(t,e){var i,s;n.dataJSON&&(i=/(^https?:\/\/[^/]*)([^#?]*)\/.*$/.exec(n.configURL),s=n.dataJSON.dirname||i[2],n.prepareListComponents(n.dataJSON.assets,i[1],s),n.generateComponents(),n.addAllComponents()),t({mainNode:n.mainNode})})},e.prepareListComponents=function(t,s,n){var o=this;t.forEach(function(t){var e=/^(https?:)?\/\/[^/]/.test(t.name),i=e?t.name:/^\//.test(t.name)?s+t.name:s+n+"/"+t.name;o.componentsList.push({path:e?i:a.normalizeURL(i),type:r.SLIDE.NAMES.indexOf(t.type),is3rd:e})})},e.checkNode=function(){var t=!1;return this.mainNode&&(this.attrbMainNode=this.mainNode.attr("data-src"),this.attrbMainNode&&/([^#?]+)\/?([^#?]+\.view)(\?([^#]*))?(#(.*))?$/.test(this.attrbMainNode)&&(t=!0)),t},e.buildOptions=function(){this.sirvOptions.common=o.deepExtend(this.sirvOptions.common,this.dataJSON.settings||{}),this.sirvOptions.mobile=o.deepExtend(this.sirvOptions.mobile,this.dataJSON.settings||{})},e.buildCallBackName=function(){this.configURL=a.normalizeURL(this.attrbMainNode.replace(r.REG_URL_QUERY_STRING,"$1")),this.urlParams=this.attrbMainNode.replace(r.REG_URL_QUERY_STRING,"$2"),this.urlParams&&(this.configURL+="?"+this.urlParams),this.configHash=h.getHashCode(this.configURL.replace(/^http(s)?:\/\//,"")),this.cfCallbackName="view-1_"+this.configHash},e.generateComponents=function(){var i=this;this.componentsList.forEach(function(t){var e=h.$new("div");t.type===r.SLIDE.TYPES.IMAGE&&(t.is3rd?(e=h.$new("img")).attr("data-type","static"):e.attr("data-type","zoom"));t=t.path;i.urlParams&&(t+="?"+i.urlParams),e.attr("data-src",t),i.nodes.push(e)})},e.addAllComponents=function(){var e=this;this.mainNode.node.innerHTML="",this.nodes.forEach(function(t){e.mainNode.node.appendChild(t.node)})},e.destroy=function(){this.mainNode=null,this.sirvOptions=null,this.nodes=[],this.configURL=null,this.dataJSON=null,this.configHash=null,this.cfCallbackName=null,this.componentsList=[]},t}()}),Sirv.define("getDPPX",["bHelpers","magicJS","helper","ResponsiveImage"],function(t,e,h,l){var c=e;c.$;return function(t,e,i,s,n,o){var r,a=1;return 1<c.DPPX&&(a=t<e?(r=e,n&&(r=l.roundImageSize({height:e}).height),h.getDPPX(r,s,o)):(r=t,n&&(r=l.roundImageSize({width:t}).width),h.getDPPX(r,i,o))),a}}),Sirv.define("LazyImage",["bHelpers","magicJS","globalVariables","globalFunctions","helper","Promise!","ResponsiveImage","BaseInstance","getDPPX"],function(i,t,o,s,r,a,h,e,l){function c(t){return!(0===(t=t.getBoundingClientRect()).top&&0===t.right&&0===t.bottom&&0===t.left&&0===t.width&&0===t.height)}var d=t,u=d.$,p={resize:{type:"boolean",defaults:!0},threshold:{type:"number",minimum:0,defaults:0},fit:{type:"string",enum:["contain","cover","crop","none"],defaults:"contain"},quality:{type:"number",minimum:0,maximum:100,defaults:80},hdQuality:{type:"number",minimum:0,maximum:100,defaults:60},autostart:{oneOf:[{type:"string",enum:["created","visible","off"]},{type:"boolean",enum:[!1]}],defaults:"visible"},onReady:{type:"function",defaults:function(){}}},m=function(){"use strict";function t(t){this.node=u(t),this.state=0,this.states=u(["sirv-image-loading","sirv-image-loaded"])}var e=t.prototype;return e.setState=function(t){this.state!==t&&(0<=this.state-1&&this.node.removeClass(this.states[this.state-1]),this.state=t,this.node.addClass(this.states[t-1]))},e.destroy=function(){var e=this;this.state=0,this.states.forEach(function(t){e.node.removeClass(t)}),this.node=null},t}(),f=o.smv;return function(n){"use strict";function t(t,e,i){var s;e.options={common:{common:e.options.common,mobile:{}},local:{common:"",mobile:""}},(s=n.call(this,t,e,p)||this).node=s.instanceNode,s.type=o.SLIDE.TYPES.IMAGE,s.isLazy="visible"===s.option("autostart"),s.image=null,s.isInfoLoaded=!1,s.infoSize={width:0,height:0},s.isNotSirv=!1,s.isInView=!1,s.isStaticImage=!1,s.dppx=1,s.getImageInfoPromise=null,s.loadStaticImagePromise=null,s.upscale=!1,s.size={width:0,height:0},s.maxSize={},s.lastImageSize={width:0,height:0},s.srcWasSetted=!1,s.originAlt=null,s.infoAlt=null,s.originTitle=null,s.src=null,s.srcset=null,s.startedSrc=null,s.dataSrc=null,s.imageUrl=null,s.dontLoad=!0,s.appearanceState=null,s.dataBgSrc=null,s.inViewModule=null,s.rootMargin=0,s.fitSize=null,s.backgroundNodeSize=null,s.isMaxWidthSet=!1,s.cropPosition={x:null,y:null},s.cssBackgroundSize=null,s.isPlaceholder=!1,s.isRun=!1,s.inited=!1,s.resizeDebounce=r.debounce(function(){s._setRootMargin(),s.onResize()},50),s.resizeHandler=function(t){s.resizeDebounce()};e=s.instanceOptions.get("autostart");return(e&&"off"!==e||i)&&s.preInit(),s}i.inheritsLoose(t,n);var e=t.prototype;return e.preInit=function(){var e=this;this.isRun=!0,this.inViewModule=new r.InViewModule(function(t){t.forEach(function(t){t=t.isIntersecting||0<t.intersectionRatio;e.isInView!==t&&(e.inited?e.inViewCallback(t):((e.isInView=t)||c(e.instanceNode.node))&&e.init())})},{rootMargin:this.rootMargin+"px 0px"}),this.inViewModule.observe(this.instanceNode),c(this.instanceNode.node)&&this.init()},e.init=function(){this.inited=!0;try{this.maxWidth=this.instanceNode.node.style.maxWidth}catch(t){}this._getBaseData(),this.imageUrl&&(d.browser.ready||"loading"!==d.D.node.readyState)&&this.startFullInit(),this.createSirvImage()},e.stop=function(){return this.destroy(),!0},e.getOptionsForStartFullInit=function(t){t=t&&{common:{common:t.common.lazyImage,mobile:t.mobile.lazyImage},local:{common:"",mobile:""}},n.prototype.getOptionsForStartFullInit.call(this,t)},e.checkReadiness=function(t){return"onLoad"===t&&this._isReady},e._setRootMargin=function(){var t=parseInt(this.option("threshold"),10);"string"===d.typeOf(this.option("threshold"))&&(t=(d.W.node.innerHeight||d.D.node.documentElement.clientHeight)/100*t),this.rootMargin=t},e._getQueryParams=function(){var t;this.imageUrl&&(this.queryParams=r.paramsFromQueryString(this.imageUrl.replace(o.REG_URL_QUERY_STRING,"$2")),this.queryParams&&(t=parseInt(this.queryParams.quality,10),isNaN(t)?delete this.queryParams.quality:this.queryParams.quality=t),this.queryParamsQuality=this.queryParams.quality||null)},e._getBaseData=function(){this.originAlt=this.instanceNode.attr("alt"),this.originTitle=this.instanceNode.attr("title"),this.src=this.instanceNode.attr("src"),this.srcset=this.instanceNode.attr("srcset"),this.startedSrc=this.src,this.dataSrc=this.instanceNode.attr("data-src"),this.isStaticImage=this.src&&!this.dataSrc,this.imageUrl=this.dataSrc||this.src,!r.isSVG(this.imageUrl)&&"static"!==this.instanceNode.attr("data-type")||(this.isNotSirv=!0),this.dataBgSrc=this.instanceNode.attr("data-bg-src"),this.isStaticImage=this.isStaticImage&&!this.dataBgSrc,this.imageUrl=this.dataBgSrc||this.imageUrl,"img"===this.instanceNode.getTagName()&&(this.instanceNode.attr("referrerpolicy",this.referrerPolicy),this.dataBgSrc&&(this.dataSrc||(this.dataSrc=this.dataBgSrc),this.dataBgSrc=null)),this.dataBgSrc&&(this.dontLoad=!1),this.imageUrl&&(this.src=s.normalizeURL(this.imageUrl.replace(o.REG_URL_QUERY_STRING,"$1"))),this._getQueryParams(),this.startedSrc&&this.dataSrc&&this.startedSrc!==this.dataSrc&&(this.isPlaceholder=this.instanceNode.attr("src"))},e.createSirvImage=function(){var i=this;this.imageUrl&&!this.isNotSirv&&(this.on("imageOnload",function(t){var e;t.stopAll(),i.replaceSrc(),i._isReady||(i.isStaticImage?i.done():(e=function(){i.appearanceState&&(i.appearanceState.setState(2),i.done())},t.data.node?e():r.loadImage(i.instanceNode).finally(function(){e()})))}),this.on("imageOnerror",function(t){t.stopAll(),console.log("image error")}),this.image=new h(this.imageUrl,{imageSettings:this.queryParams,round:!0,dontLoad:this.dontLoad,convertSmallerSideToZero:"crop"!==this.option("fit"),referrerPolicy:this.referrerPolicy}),this.image.setParent(this),this.getInfoSize().catch(function(t){t._isplaceholder&&(i.infoSize=t,i.isNotSirv=!0)}).finally(function(){"loading"!==d.D.node.readyState&&i.isStartedFullInit&&i.run()}))},e.getInfoSize=function(){var s=this;return this.getImageInfoPromise||(this.getImageInfoPromise=new a(function(e,i){s.image?s.image.getImageInfo().then(function(t){s.isInfoLoaded=!0,s.infoAlt=s.image.getDescription(),s.infoSize=s.image.getOriginSize(),s.cropPosition=s.image.getCropPosition(),e(t)}).catch(function(t){s.isInfoLoaded=!0,t.status&&404===t.status||(s.isNotSirv=!0),i(t)}):i()})),this.getImageInfoPromise},e.getId=function(t,e){this.id=this.instanceNode.attr("id"),this.id||this.isStaticImage||n.prototype.getId.call(this,t,e)},e.startFullInit=function(t,e){var i;!this.isStartedFullInit&&this.inited&&(this.getOptionsForStartFullInit(t),i=this.option("autostart"),(this.inited||i&&"off"!==i||e)&&(n.prototype.startFullInit.call(this,t),t&&(this.isLazy="visible"===this.option("autostart")),this.getId("responsive-image-"," "),this.dataBgSrc&&(this.cssBackgroundSize=r.imageLib.getBackgroundSize(this.instanceNode),this.cssBackgroundSize&&this.option("fit","none"),this.instanceNode.addClass(f+"-bg-image"),"none"!==this.option("fit")&&("contain"===this.option("fit")?this.instanceNode.addClass(f+"-bg-contain"):this.instanceNode.addClass(f+"-bg-cover"))),this._setRootMargin(),this.isStaticImage?this.isLazy=!1:(this.appearanceState=new m(this.instanceNode),this.isPlaceholder||this.appearanceState.setState(1)),this.isLazy||(this.isInView=!0,this.inViewModule.disconnect(),this.inViewModule=null),(this.isInfoLoaded||this.isNotSirv)&&"loading"!==d.D.node.readyState&&this.run(),d.W.addEvent("resize",this.resizeHandler)))},e.fixHeight=function(t){return 0!==t&&(t===parseInt(this.instanceNode.getCss("block-size"),10)||t<=16)&&(t=0),t},e.run=function(){var e,i=this,t=n.prototype.run.call(this);return t&&(this.instanceNode.removeAttr("alt"),this.instanceNode.removeAttr("title"),this.instanceNode.setCss({display:"inline-flex"}).getSize(),this.instanceNode.setCss({display:""}).getSize(),e=null,r.imageLib.getSize(this.instanceNode).then(function(t){e=t}).finally(function(){var t;i.destroyed||(0===(e=r.fixSize(i.instanceNode,e)).width&&0===e.height&&(i.instanceNode.setCss({width:"100%"}),e.width=i.instanceNode.getSize().width),0===e.width&&0===e.height&&(e.width=d.W.node.innerWidth),"contain"===i.option("fit")?i.fitSize={width:"contain",height:"contain"}:i.fitSize={width:"cover",height:"cover"},"none"===i.option("fit")?i.cssBackgroundSize?i.size=r.imageLib.calcProportionalBackgroundSize(i.cssBackgroundSize,i.infoSize):i.size=i.infoSize:i.size=r.imageLib.calcProportionSize(e,i.infoSize,i.fitSize),i.dataBgSrc||(t=i.instanceNode.getCss("objectFit"),i.maxWidth||!(0<i.infoSize.width)||t&&"fill"!==t||i.instanceNode.attr("width")||(i.isMaxWidthSet=!0,i.instanceNode.setCss({maxWidth:i.infoSize.width}))),(i.originAlt||i.infoAlt)&&i.instanceNode.attr("alt",i.originAlt||i.infoAlt),i.originTitle&&i.instanceNode.attr("title",i.originTitle),i.isStaticImage?i.loadStaticImage().finally(function(){i.isInfoLoaded&&i.done()}):i.isLazy&&!i.isInView||i.getImage())})),t},e._setSrc=function(t,e){this.dataBgSrc?this.instanceNode.setCss({backgroundImage:'url("'+(e||t)+'")'}):(this.instanceNode.attr("src",t),e?!this.isNotSirv&&1<this.dppx&&this.instanceNode.attr("srcset",e+" "+this.dppx+"x"):this.instanceNode.removeAttr("srcset"))},e._setHDQuality=function(t){var e;return 1<t.dppx&&t.dppx<1.5&&(e=this.instanceOptions.isset("quality")?this.option("quality"):null,null===this.queryParamsQuality&&null!==e?t.srcset.quality=e:t.srcset&&delete t.srcset.quality),t},e.replaceSrc=function(){var t;if(this.isNotSirv){if(this.srcWasSetted)return;this.srcWasSetted=!0,t={src:this.imageUrl}}else{var e=this._getImageCreateSettings();1<e.dppx&&e.dppx<1.5&&delete e.srcset.quality,e=this._setHDQuality(e),t=this.image.getImage(e),this.lastImageSize.width=t.width||t.serverWidth,this.lastImageSize.height=t.height||t.serverHeight}this._setSrc(t.src,t.srcset)},e.loadStaticImage=function(){var t=this;return this.loadStaticImagePromise||(this.loadStaticImagePromise=new a(function(e,i){!t.isStaticImage||t.instanceNode.node.complete?e():(t.instanceNode.addEvent("load",function(t){e()}),t.instanceNode.addEvent("error",function(t){i()}))})),this.loadStaticImagePromise},e._getImageCreateSettings=function(){var t={src:{},srcset:{}},e=this.instanceOptions.isset("quality")?this.option("quality"):null;null!==e&&null===this.queryParamsQuality&&(t.src.quality=e);e=this.option("hdQuality");return(null===this.queryParamsQuality||this.instanceOptions.isset("hdQuality")&&e<this.queryParamsQuality)&&(t.srcset={quality:e}),t.width=this.size.width,this.size.height&&(t.height=this.size.height),t=r.imageLib.checkMaxSize(t,this.infoSize),this.infoSize.width!==t.width&&this.infoSize.height!==t.height||(t.round=!1),1<d.DPPX&&(t.dppx=this.dppx),"crop"===this.option("fit")&&(t.round=!1),t=this.setCrop(t)},e.setCrop=function(t){var e;return"crop"===this.option("fit")&&(e=u(this.instanceNode.node).getInnerSize(!!this.dataBgSrc),t.imageSettings||(t.imageSettings={}),t.imageSettings.crop||(t.imageSettings.crop={}),t.imageSettings.crop={x:this.cropPosition.x||"center",y:this.cropPosition.y||"center",width:e.width,height:e.height}),t},e.getImage=function(){this.isStaticImage||(this.isNotSirv?this.getNonSirvImg():this.getSirvImg())},e.getNonSirvImg=function(){var t=this;this.isPlaceholder?r.loadImage(this.dataSrc).finally(function(){t.replaceSrc(),t.appearanceState.setState(2),t.done()}):(this.replaceSrc(),this.appearanceState.setState(2),this.done())},e.getImageClassContainer=function(){return this.image},e.getSirvImg=function(){var t,e=this._getImageCreateSettings();e.width&&(this.maxSize.width=e.width),e.height&&(this.maxSize.height=e.height),1<d.DPPX&&(t=this.image.getOriginSize(),this.dppx=l(e.width,e.height,t.width,t.height,!d.defined(e.round)||e.round,this.upscale),e.dppx=this.dppx),e=this._setHDQuality(e),this.checkImage(e)?this.replaceSrc():this.image.getImage(e)},e.checkSize=function(t){var e=this.infoSize.width,i=this.infoSize.height;return(t.width>e||t.height>i)&&(t.width=e,t.height&&(t.height=i),t.round=!1),t},e.done=function(){n.prototype.done.call(this),this.option("onReady")(this.id),this.sendEvent("ready")},e.inViewCallback=function(t){t&&!this.isStaticImage&&(this._isReady||this.isInView||this.isStarted&&(this.isInView=!0,this.isNotSirv?this.srcWasSetted||this.getImage():this.isInfoLoaded&&this.getImage())),this.isInView=t},e.sendEvent=function(t,e){(e=e||{}).image||(e.image={}),e.image.event||(e.image.event={}),"ready"===t&&(t="onLoad"),e.type=t,e.image.id=this.id,e.image.url=this.instanceUrl,d.extend(e.image,this.api),e.node=this.instanceNode,e.image.node=this.instanceNode.node,e.image.event.timestamp=+new Date,e.image.event.type="lazyimage:"+t,this.emit("imagePublicEvent",{data:e})},e.getOriginImageUrl=function(){return this.src},e.onResize=function(){return!(!this.isStarted||this.isStaticImage||!this.option("resize")||this.isNotSirv)&&(d.contains(["crop","cover"],this.option("fit"))?t=u(this.instanceNode.node.parentNode).getSize():(t=this.instanceNode.getSize()).height=this.fixHeight(t.height),t=r.imageLib.calcProportionSize(t,this.infoSize,this.fitSize),this.size.width=t.width,this.size.height&&(this.size.height=t.height),this._isReady&&!this.isNotSirv&&("crop"===this.option("fit")?(50<Math.abs(this.size.width-this.lastImageSize.width)||50<Math.abs(this.size.height-this.lastImageSize.height))&&this.getImage():(50<this.size.width-this.lastImageSize.width||50<this.size.height-this.lastImageSize.height)&&this.getImage()),!0);var t},e.destroy=function(){if(this.dataBgSrc&&(this.instanceNode.removeClass(f+"-bg-image"),this.instanceNode.setCssProp("background-image","")),this.isMaxWidthSet&&(this.isMaxWidthSet=!1,this.instanceNode.setCss({maxWidth:""})),this.appearanceState&&this.appearanceState.destroy(),this.inViewModule&&(this.inViewModule.disconnect(),this.inViewModule=null),d.W.removeEvent("resize",this.resizeHandler),this.resizeDebounce.cancel(),this.resizeDebounce=null,this.image&&(this.off("imageOnload"),this.off("imageOnerror"),this.image.destroy(),this.image=null),this.instanceNode.node.hasAttribute("src"))try{this.instanceNode.removeAttr("src"),this.isStaticImage&&this.instanceNode.attr("src",this.imageUrl)}catch(t){}if(this.isStaticImage?this.instanceNode.attr("src",this.src):this.instanceNode.removeAttr("src"),this.srcset)this.instanceNode.attr("srcset",this.srcset);else try{this.instanceNode.removeAttr("srcset")}catch(t){}this.srcset=null,!this.originAlt&&this.infoAlt&&this.instanceNode.removeAttr("alt"),this.instanceNode.removeEvent("load"),this.isPlaceholder&&(this.instanceNode.attr("src",this.isPlaceholder),this.isPlaceholder=!1),n.prototype.destroy.call(this)},t}(e)}),Sirv.define("ViewerImage",["bHelpers","magicJS","globalVariables","globalFunctions","helper","Promise!","ResponsiveImage","HotspotInstance","Hotspots","getDPPX"],function(i,t,s,n,a,o,h,e,l,c){var d=t,u=d.$;return function(r){"use strict";function t(t,e){var i=r.call(this,t,e,{})||this;return i.type=s.SLIDE.TYPES.IMAGE,i.instanceNode.attr("referrerpolicy",i.referrerPolicy),i.image=null,i.isInfoLoaded=!1,i.getImageInfoPromise=null,i.loadStaticImagePromise=null,i.imageShowPromise=null,i.srcWasSetted=!1,i.lastImageSize={width:0,height:0},i.imageIndex=e.imageIndex,i.dppx=1,i.upscale=!1,i.size={width:0,height:0},i.dontLoad=!0,i.accountInfo={},i.countOfTries=1,i.isFullscreen=e.isFullscreen,i.nativeFullscreen=e.nativeFullscreen,i.infoAlt=null,i.originAlt=i.instanceNode.attr("alt"),i.originTitle=i.instanceNode.attr("title"),i.src=i.instanceNode.attr("src"),i.srcset=i.instanceNode.attr("srcset"),i.startedSrc=i.src,i.dataSrc=i.instanceNode.attr("data-src"),i.isStaticImage=i.src&&!i.dataSrc,i.imageUrl=i.dataSrc||i.src,i.getImageTimer=a.debounce(function(){i.getImage()},32),i.firstSlideAhead=!1,i.src=n.normalizeURL(i.imageUrl.replace(s.REG_URL_QUERY_STRING,"$1")),i.queryParamsQuality=null,i.queryParams=a.paramsFromQueryString(i.imageUrl.replace(s.REG_URL_QUERY_STRING,"$2")),i.getQueryParams(),i.isNotSirv=!1,a.isSVG(i.imageUrl)&&(i.isNotSirv=!0),i.createHotspotsClass(l),i.createSirvImage(),i}i.inheritsLoose(t,r);var e=t.prototype;return e.sendEvent=function(t,e){(e=e||{}).imageIndex=this.imageIndex,r.prototype.sendEvent.call(this,t,e)},e.getInfo=function(){var s=this;return this.gettingInfoPromise||(this.gettingInfoPromise=new o(function(e,i){s.waitGettingInfo.wait(function(){s.image.getImageInfo().then(function(t){s.destroyed||(s.isInfoLoaded=!0,s.infoAlt=s.image.getDescription(),s.infoSize=s.image.getOriginSize(),s.accountInfo=s.image.getAccountInfo(),s.hotspotsData=t.hotspots,s.hotspots&&s.hotspots.setOriginImageSize(s.infoSize.width,s.infoSize.height),e())}).catch(function(t){s.destroyed||(s.isInfoLoaded=!0,t.status&&404===t.status||(s.isNotSirv=!0),i(t))})})})),this.gettingInfoPromise},e.getQueryParams=function(){var t;this.imageUrl&&(this.queryParams&&(t=parseInt(this.queryParams.quality,10),isNaN(t)?delete this.queryParams.quality:this.queryParams.quality=t),this.queryParamsQuality=this.queryParams.quality||null)},e.getImageCreateSettings=function(){var t={src:{},srcset:{}};null!==this.quality&&null===this.queryParamsQuality&&(t.src.quality=this.quality);var e=this.hdQuality;return(null===this.queryParamsQuality||this.isHDQualitySet&&e<this.queryParamsQuality)&&(t.srcset={quality:e}),t.width=this.size.width,this.size.height&&(t.height=this.size.height),t=a.imageLib.checkMaxSize(t,this.infoSize),this.infoSize.width!==t.width&&this.infoSize.height!==t.height||(t.round=!1),1<d.DPPX&&(t.dppx=this.dppx),t},e.setHDQuality=function(t){return 1<t.dppx&&t.dppx<1.5&&(null===this.queryParamsQuality&&null!==this.quality?t.srcset.quality=this.quality:t.srcset&&delete t.srcset.quality),t},e.replaceSrc=function(){var t;if(this.isNotSirv){if(this.srcWasSetted)return;this.srcWasSetted=!0,t={src:this.imageUrl}}else{var e=this.getImageCreateSettings();1<e.dppx&&e.dppx<1.5&&delete e.srcset.quality,e=this.setHDQuality(e),t=this.image.getImage(e),this.lastImageSize.width=t.width||t.serverWidth,this.lastImageSize.height=t.height||t.serverHeight}this.instanceNode.attr("src",t.src),t.srcset?!this.isNotSirv&&1<this.dppx&&this.instanceNode.attr("srcset",t.srcset+" "+this.dppx+"x"):this.instanceNode.removeAttr("srcset")},e.showImage=function(){var i=this;return this.imageShowPromise||(this.imageShowPromise=new o(function(e,t){!i.isStaticImage&&i.isInView&&i.isSlideShown?(i.instanceNode.addEvent("transitionend",function(t){"opacity"===t.propertyName&&(t.stop(),i.instanceNode.removeEvent("transitionend"),i.instanceNode.setCss({opacity:"",transition:""}),e())}),i.instanceNode.getSize(),i.instanceNode.setCss({opacity:1,transition:"opacity 0.3s linear"})):(i.instanceNode.setCssProp("opacity",""),e())})),this.imageShowPromise},e.createSirvImage=function(){var e=this;this.imageUrl&&!this.isNotSirv&&(this.on("imageOnload",function(t){t.stopAll(),e.replaceSrc(),e._isReady||(t.data.node?e.showImage().finally(function(){e.done()}):a.loadImage(e.instanceNode).finally(function(){e.showImage().finally(function(){e.done(),e.sendContentLoadedEvent()})}))}),this.on("imageOnerror",function(t){t.stopAll(),console.log("image error")}),this.image=new h(this.imageUrl,{imageSettings:this.queryParams,round:!0,dontLoad:this.dontLoad,referrerPolicy:this.referrerPolicy}),this.image.setParent(this),this.getInfo())},e.getInfoSize=function(){var i=this;return this.getImageInfoPromise||(this.getImageInfoPromise=new o(function(t,e){i.image?i.getInfo().then(function(){t({size:i.infoSize,imageIndex:i.imageIndex})}).catch(function(t){e({error:t,isPlaceholder:t._isplaceholder,imageIndex:i.imageIndex})}):e({error:"nonsirv",isPlaceholder:!1,imageIndex:i.imageIndex})})),this.getImageInfoPromise},e.startFullInit=function(t){this.isStartedFullInit||(r.prototype.startFullInit.call(this,t),this.getId("responsive-image-"),this.isStaticImage||this.instanceNode.setCssProp("opacity",0))},e.run=function(t,e,i,s){var n=this;this.firstSlideAhead=i;var o,i=r.prototype.run.call(this,t,e,i);return i&&(this.destroyed?i=!1:(this.instanceNode.removeAttr("alt"),this.instanceNode.removeAttr("title"),this.instanceNode.setCss({display:"inline-flex"}).getSize(),this.instanceNode.setCss({display:""}).getSize(),o=null,a.imageLib.getSize(this.instanceNode.node.parentNode).then(function(t){o=t}).finally(function(){n.destroyed||(o.width&&o.height<=20&&(o.height=0),n.size=a.imageLib.calcProportionSize(o,n.infoSize),(n.originAlt||n.infoAlt)&&u(n.instanceNode).attr("alt",n.originAlt||n.infoAlt),n.originTitle&&u(n.instanceNode).attr("title",n.originTitle),n.isStaticImage?n.loadStaticImage().finally(function(){n.isInfoLoaded&&n.done()}):(n.originAlt&&u(n.instanceNode).attr("alt",n.originAlt),n.isInView&&(n.isSlideShown||n.preload||s)&&n.getImage()),n.dataAlt&&u(n.instanceNode).attr("alt",n.dataAlt))}),this.startGettingInfo())),i},e.loadContent=function(){this.getImage(!0)},e.loadStaticImage=function(){var s=this;return this.loadStaticImagePromise||(this.loadStaticImagePromise=new o(function(e,i){!s.isStaticImage||s.instanceNode.node.complete?e():(s.instanceNode.addEvent("load",function(t){s.sendContentLoadedEvent(),e()}),s.instanceNode.addEvent("error",function(t){i()}))})),this.loadStaticImagePromise},e.getImage=function(t){var e=this;this.isStaticImage||(this.isNotSirv||this._isReady||this.size.width||this.size.height?(this.waitToStart.start(),this.isNotSirv?this.replaceSrc():this.getSirvImg()):this.countOfTries<100&&setTimeout(function(){e.countOfTries+=1,e.isStarted=!1,e.run(e.isSlideShown,e.preload,e.firstSlideAhead,t)},16*this.countOfTries))},e.getImageClassContainer=function(){return this.image},e.getSirvImg=function(){var t,e=this.getImageCreateSettings();1<d.DPPX&&(t=this.image.getOriginSize(),this.dppx=c(e.width,e.height,t.width,t.height,!d.defined(e.round)||e.round,this.upscale),e.dppx=this.dppx),e=this.setHDQuality(e),this.checkImage(e,this.dontLoad)?this.replaceSrc():this.image.getImage(e)},e.getOriginImageUrl=function(){return this.src},e.done=function(){var t,e;this._isReady||(this.accountInfo.branded&&("img"===(t=this.instanceNode).getTagName()&&(t=t.node.parentNode),e=n.getNodeWithSirvClassName(this.instanceNode)||d.D.node.head||d.D.node.body,n.rootDOM.showSirvAd(e,t,"https://sirv.com/about-image/?utm_source=client&utm_medium=sirvembed&utm_content=typeofembed(image)&utm_campaign=branding","Image viewer by Sirv")),r.prototype.done.call(this),this.hotspots&&this.hotspots.setContainerSize(this.instanceNode.node.getBoundingClientRect()),this.isFullscreenEnabled||(this.pinchCloud.removeEvent(),this.pinchCloud=null))},e.getSelectorImgUrl=function(s){var n=this;return new o(function(t,e){var i=n.getImageCreateSettings();i.src&&(s.src=i.src),s.srcset=i.srcset,n.isInfoLoaded?n.waitToStart.wait(function(){t(d.extend(n.image.getThumbnail(s),{imageIndex:n.imageIndex,alt:n.dataAlt||n.originAlt||n.infoAlt,referrerpolicy:n.instanceNode.attr("referrerpolicy")}))}):n.getInfo().then(function(){n.waitToStart.wait(function(){t(d.extend(n.image.getThumbnail(s),{imageIndex:n.imageIndex,alt:n.dataAlt||n.originAlt||n.infoAlt,referrerpolicy:n.instanceNode.attr("referrerpolicy")}))})}).catch(e)})},e.getThumbnailData=function(t){return this.image.getThumbnail(t)},e.createPinchEvent=function(){var e=this;r.prototype.createPinchEvent.call(this,this.instanceNode),this.pinchCloud.onPinchStart=function(t){d.contains([s.FULLSCREEN.OPENING,s.FULLSCREEN.CLOSING],e.fullscreenState)||(e.pinchCloud.pinch=!0,e.pinchCloud.scale=t.scale,e.sendEvent("pinchStart"))},this.pinchCloud.onPinchMove=function(t){e.pinchCloud.pinch&&!e.pinchCloud.block&&(e.fullscreenState===s.FULLSCREEN.OPENED?t.scale<.2&&(e.pinchCloud.block=!0,e.sendEvent("fullscreenOut")):2<=t.scale&&(e.pinchCloud.block=!0,e.sendEvent("fullscreenIn")))}},e.onStartActions=function(){this._isReady||this.isInView&&this.isStarted&&(this.fullscreenState===s.FULLSCREEN.OPENED&&this.onResize(),this.always?this.getImageTimer():this.getImage()),r.prototype.onStartActions.call(this)},e.onStopActions=function(){r.prototype.onStopActions.call(this)},e.onInView=function(t){t&&!this.isStaticImage&&(this._isReady||this.isInView||this.isStarted&&(this.isInView=!0,this.isInfoLoaded&&(this.preload||this.isSlideShown)&&this.getImage()))},e.onBeforeFullscreenIn=function(t){this.getImageTimer.cancel(),this._isReady&&!this.isStaticImage&&this.instanceNode.setCssProp("visibility","hidden"),r.prototype.onBeforeFullscreenIn.call(this,t),this.hotspots&&this.hotspots.disableAll()},e.onAfterFullscreenIn=function(){var t=this;this.always&&!this._isReady&&this.isInView&&this.isStarted&&(this.onResize(),this.getImage()),this.hotspots&&setTimeout(function(){t.fullscreenState===s.FULLSCREEN.OPENED&&(t.hotspots.enableAll(),t.isInView&&t.isSlideShown&&t.hotspots.showNeededElements())},100)},e.onBeforeFullscreenOut=function(t){this.instanceNode.setCss({width:"",height:"",visibility:""}),r.prototype.onBeforeFullscreenOut.call(this,t)},e.onAfterFullscreenOut=function(t){r.prototype.onAfterFullscreenOut.call(this,t)},e.onResize=function(){if(!this.isStarted||this.isStaticImage||this.isNotSirv)return!1;if(this.isFullscreenActionEnded()){var t=u(this.instanceNode.node.parentNode).getSize(),t=a.imageLib.calcProportionSize(t,this.infoSize);return this.fullscreenState===s.FULLSCREEN.OPENED&&(this.instanceNode.setCss({width:t.width+"px",height:t.height+"px"}),this.instanceNode.setCssProp("visibility","")),this.size.width=t.width,this.size.height&&(this.size.height=t.height),this._isReady&&((50<this.size.width-this.lastImageSize.width||50<this.size.height-this.lastImageSize.height)&&this.getImage(),this.hotspots&&(this.hotspots.setContainerSize(this.instanceNode.node.getBoundingClientRect()),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements())),!0}return!1},e.getType=function(){return this.type},e.destroy=function(){if(this.image&&(this.off("imageOnload"),this.off("imageOnerror"),this.image.destroy(),this.image=null),this.getImageTimer.cancel(),this.getImageTimer=null,this.instanceNode.setCssProp("opacity",""),this.hotspot&&u(this.instanceNode.node.parentNode).removeEvent("tap"),this.instanceNode.node.hasAttribute("src"))try{this.instanceNode.removeAttr("src"),this.isStaticImage&&this.instanceNode.attr("src",this.imageUrl)}catch(t){}if(this.isStaticImage?this.instanceNode.attr("src",this.src):this.instanceNode.removeAttr("src"),this.srcset)this.instanceNode.attr("srcset",this.srcset);else try{this.instanceNode.removeAttr("srcset")}catch(t){}return this.srcset=null,this.originAlt||!this.infoAlt&&!this.dataAlt||this.instanceNode.removeAttr("alt"),this.instanceNode.removeEvent("load"),this.hotspotsData=null,r.prototype.destroy.call(this),!0},t}(e)}),Sirv.define("Spin",["bHelpers","magicJS","globalVariables","globalFunctions","helper","Promise!","EventEmitter","Zoominstance","ResponsiveImage","Hint","ProgressLoader","SpinHotspots"],function(o,t,P,a,N,r,e,i,n,h,s,l){var c,d,O=t,p=O.$,m={swapSides:{type:"boolean",defaults:!1},wheel:{type:"boolean",defaults:!0},initialize:{type:"string",enum:["load","hover","click","tap"],defaults:"load"},freeDrag:{type:"boolean",defaults:!1},tappingFirst:{type:"boolean",defaults:!1},thumbnail:{type:{type:"string",enum:["image","gif"],defaults:"image"},gifParams:{type:"string",defaults:""}},zoom:{enable:{type:"boolean",defaults:!0},ratio:{oneOf:[{type:"number",minimum:0},{type:"string",enum:["max"]}],defaults:2.5},tiles:{type:"boolean",defaults:!0},pan:{type:"boolean",defaults:!0}},inactivity:{type:"number",minimum:1e3,defaults:3e3},autospin:{enable:{type:"boolean",defaults:!1},type:{type:"string",enum:["row","sphere","full","helix"],defaults:"sphere"},resume:{type:"number",minimum:0,defaults:3e3},duration:{type:"number",minimum:0,defaults:3600}},hint:{message:{enable:{type:"boolean",defaults:!0},text:{type:"string",defaults:"Drag to spin"}},onStart:{enable:{type:"boolean",defaults:!0},effect:{oneOf:[{type:"string",enum:["intro","twitch","spin","momentum","sphere","none"]},{type:"boolean",enum:[!1]}],defaults:"intro"}},onVisible:{enable:{type:"boolean",defaults:!0},effect:{oneOf:[{type:"string",enum:["intro","twitch","spin","momentum","sphere","none"]},{type:"boolean",enum:[!1]}],defaults:"twitch"}},onInactive:{enable:{type:"boolean",defaults:!0},effect:{oneOf:[{type:"string",enum:["intro","twitch","spin","momentum","sphere","none"]},{type:"boolean",enum:[!1]}],defaults:"twitch"}}},row:{start:{type:"number",minimum:1,defaults:1},loop:{type:"boolean",defaults:!1},increment:{type:"number",minimum:1,defaults:1},reverse:{type:"boolean",defaults:!1},sensitivity:{type:"number",minimum:1,maximum:100,defaults:50}},column:{start:{type:"number",minimum:1,defaults:1},loop:{type:"boolean",defaults:!0},increment:{type:"number",minimum:1,defaults:1},reverse:{type:"boolean",defaults:!1},sensitivity:{type:"number",minimum:1,maximum:100,defaults:50}}},u=function(n){"use strict";function t(t,e,i,s){e=n.call(this,t,e)||this;return e.col=i,e.row=s,e}o.inheritsLoose(t,n);var e=t.prototype;return e._createImageData=function(t,e){e=n.prototype._createImageData.call(this,t,e);return e.col=this.col,e.row=this.row,e},e.getThumbnail=function(t){t=n.prototype.getThumbnail.call(this,t);return t.col=this.col,t.row=this.row,t},t}(n),f=(c=p([.45,.19,.56,.86]),d={lib:{getRightIndex:function(t,e,i){t=i?N.getArrayIndex(t,e):(e<=t?t=e-1:t<0&&(t=0),t);return t}},twitch:function(t){var i,s=E(t),n={column:0,row:0},o=[];return[s.firstSide,s.secondSide].forEach(function(t){var e=t===s.firstSide?s.secondSide:s.firstSide;1<s[t].length&&(n[t]=Math.floor(s[t].length/360*s.degree)||1),n[t]&&((i={})[t]=null,i[e]=s[e].current,o=o.concat(S(y(s[t].current,n[t],s[t].length,s[t].loop),i)))}),o},sphere:function(t){var s=E(t),n=[];return(s.justFirstLine?[s.firstSide]:[s.firstSide,s.secondSide]).forEach(function(t){var e=t===s.firstSide?s.secondSide:s.firstSide,i={};1!==s[t].length&&(i[t]=null,i[e]=s[e].current,i=S(w(s[t].current,s[t].length,s[t].loop),i),s.isBackward&&i.reverse(),n=n.concat(i))}),s.axelerate&&(n=b(n)),n},intro:function(t){t=E(t),t={swapSides:t.swapSides,justFirstLine:!0,isBackward:t.isBackward,row:N.deepExtend({},t.row),column:N.deepExtend({},t.column)};return d.sphere(t).concat(d.twitch(t))},full:function(t){var i=E(t),t=i[i.secondSide].length,t=1<t?w(i[i.secondSide].current,t,i[i.secondSide].loop):[i[i.secondSide].current],s=N.deepExtend({},i[i.firstSide]),n=N.deepExtend({},i[i.secondSide]),o=[];return t.forEach(function(t){var e={swapSides:i.swapSides,justFirstLine:!0};n.current=t,e[i.firstSide]=s,e[i.secondSide]=n,o=o.concat(d.sphere(e))}),i.isBackward&&o.reverse(),o},custom:function(t){var e=E(t),n={x:e.column.current,y:e.row.current},i={x:e.column.current+e.column.jumpCount,y:e.row.current+e.row.jumpCount},t=[];return t=function(t){var e=[];t.x[0]!==n.x&&t.x.reverse(),t.y[0]!==n.y&&t.y.reverse();for(var i=0,s=t.x.length;i<s;i++)e.push({col:t.x[i],row:t.y[i]});return e}(t=g(n,i)),t=p(t).map(function(t){return{col:d.lib.getRightIndex(t.col,e.column.length,e.column.loop),row:d.lib.getRightIndex(t.row,e.row.length,e.row.loop)}})}});function g(t,e){function i(t,e,i,s){var n,o,r=i-t,a=s-e,h=1,l=e;for(a<0&&(h=-1,a=-a),o=2*a-r,n=t;n<=i;n++)c.x.push(n),c.y.push(l),0<o&&(l+=h,o-=2*r),o+=2*a}function s(t,e,i,s){var n,o,r=i-t,a=s-e,h=1,l=t;for(r<0&&(h=-1,r=-r),o=2*r-a,l=t,n=e;n<=s;n++)c.x.push(l),c.y.push(n),0<o&&(l+=h,o-=2*a),o+=2*r}var c={x:[],y:[]};return Math.abs(e.y-t.y)<Math.abs(e.x-t.x)?t.x>e.x?i(e.x,e.y,t.x,t.y):i(t.x,t.y,e.x,e.y):t.y>e.y?s(e.x,e.y,t.x,t.y):s(t.x,t.y,e.x,e.y),c}function v(t,e,i,s,n){for(var o=[],r=!1,a=t;a!==e||!r&&n;)r=!0,i?a+=1:--a,a=N.getArrayIndex(a,s),o.push(a);return o}function S(t,i){var s="col";null===i.row&&(s="row");var n=[];return t.forEach(function(t){var e={col:i.column,row:i.row};e[s]=t,n.push(e)}),n}function y(t,e,i,s){var n=[t],o=!0;return[t+e,t-e,t].forEach(function(t){var e;t=t,s?e=N.getArrayIndex(t,i):((e=t)<0&&(e=0),i-1<e&&(e=i-1)),n=n.concat(v(n[n.length-1],e,o,i,s)),o=!o}),n}function w(t,e,i){return i?v(t,N.getArrayIndex(t+e,e),!0,e,i):y(t,e,e,!1)}function b(t){var s=t.length,n=[];return t.forEach(function(t,e){for(var i=(e=e,Math.round(5*O.FX.cubicBezierAtTime(e/s,600,c))+1);0<i;)--i,n.push(t)}),n}function E(t){var e=N.deepExtend({degree:30,swapSides:!1,axelerate:!1,isBackward:!1,justFirstLine:!1,row:{length:1,loop:!1,current:1,jumpCount:0},column:{length:36,loop:!0,current:1,jumpCount:0},firstSide:"column",secondSide:"row"},t||{});return["row","column"].forEach(function(t){e[t].current>e[t].length-1&&(e[t].current=0)}),e.swapSides&&(e.secondSide=e.firstSide,e.firstSide="row"),e}var I,C={_:I={getStep:function(t){var e=1;return 24<t&&3<(e=Math.floor(t/24))&&(e=3),e},getIndexes:function(t){var e,i,s=[],n=[],o=!0,r=I.getStep(t);do{for(i=[],e=0;e<t;e+=r)n[e]||(i.push(e),n[e]=1)}while(1===r&&(o=!1),s.push(i),1<=(r=Math.ceil(r/2))&&o);return s},createArray:function(t){var i=[];return t.forEach(function(t){var e=[];t.forEach(function(){e.push(0)}),i.push(e)}),i},getRightIdexes:function(t,i,s,n){t.forEach(function(t){var e=t+i,t=N.getArrayIndex(e,s);(e<s||t<i)&&n(t)})},getOptions:function(t){t=N.deepExtend({},t);return t.schemaOfImages=I.createArray(t.images),t.rowLength=t.images.length,t.colLength=t.images[t.startRow].length,t},all:function(t,e,i){for(var s=[],n=0,o=t.length;n<o;n++)for(var r=0,a=t[n].length;r<a;r++)e[n][r]||(s.push([n,r]),e[n][r]=i+1);return s},getSideOpt:function(t){var e={length:t.colLength,start:t.startCol,otherLength:t.rowLength,otherStart:t.startRow};return t.swapSides&&(t=e.length,e.length=e.otherLength,e.otherLength=t,t=e.start,e.start=e.otherStart,e.otherStart=t),e}},all:function(t){var e=[],s=I.getOptions(t),n=I.getIndexes(s.colLength),o=[];return s.images.forEach(function(t,i){t=t.length;I.getRightIdexes(n[0],s.startCol,t,function(t){var e=N.getArrayIndex(i+s.startRow,s.rowLength);o.push([e,t]),s.schemaOfImages[e][t]=1})}),e.push(o),o=[],e.push(o.concat(I.all(s.images,s.schemaOfImages,1))),e},fastLine:function(t){for(var e=[],i=I.getOptions(t),s=I.getSideOpt(i),n=[],o=0,r=s.length;o<r;o++){var a=N.getArrayIndex(o+s.start,s.length);i.swapSides?(n.push([a,i.startCol]),i.schemaOfImages[a][i.startCol]=1):(n.push([i.startRow,a]),i.schemaOfImages[i.startRow][a]=1)}return e.push(n),n=[],e.push(n.concat(I.all(i.images,i.schemaOfImages,1))),e},line:function(t){var e=[],i=I.getOptions(t),s=I.getSideOpt(i),n=I.getIndexes(s.length),o=[],r=1;for(I.getRightIdexes(n[0],s.start,s.length,function(t){i.swapSides?(o.push([t,i.startCol]),i.schemaOfImages[t][i.startCol]=1):(o.push([i.startRow,t]),i.schemaOfImages[i.startRow][t]=1)}),e.push(o),o=[];r<n.length;)n[r]&&I.getRightIdexes(n[r],s.start,s.length,function(t){i.swapSides?(o.push([t,i.startCol]),i.schemaOfImages[t][i.startCol]=r+1):(o.push([i.startRow,t]),i.schemaOfImages[i.startRow][t]=r+1)}),r+=1;return e.push(o.concat(I.all(i.images,i.schemaOfImages,r))),e},sphere:function(t){var e=[],i=I.getOptions(t),s=I.getSideOpt(i),n=I.getIndexes(s.length),o=I.getIndexes(s.otherLength),r=Math.max(n.length,o.length),a=[],h=1;for(I.getRightIdexes(n[0],s.start,s.length,function(t){i.swapSides?(a.push([t,i.startCol]),i.schemaOfImages[t][i.startCol]=1):(a.push([i.startRow,t]),i.schemaOfImages[i.startRow][t]=1)}),I.getRightIdexes(o[0],s.otherStart,s.otherLength,function(t){i.swapSides?i.schemaOfImages[i.startRow][t]||(a.push([i.startRow,t]),i.schemaOfImages[i.startRow][t]=1):i.schemaOfImages[t][i.startCol]||(a.push([t,i.startCol]),i.schemaOfImages[t][i.startCol]=1)}),e.push(a),a=[];h<r;)n[h]&&I.getRightIdexes(n[h],s.start,s.length,function(t){i.swapSides?(a.push([t,i.startCol]),i.schemaOfImages[t][i.startCol]=h+1):(a.push([i.startRow,t]),i.schemaOfImages[i.startRow][t]=h+1)}),o[h]&&I.getRightIdexes(o[h],s.otherStart,s.otherLength,function(t){i.swapSides?(a.push([i.startRow,t]),i.schemaOfImages[i.startRow][t]=h+1):(a.push([t,i.startCol]),i.schemaOfImages[t][i.startCol]=h+1)}),h+=1;return e.push(a.concat(I.all(i.images,i.schemaOfImages,h))),e}},x=function(s){"use strict";function t(t){var e,i=s.call(this)||this;return i.o=t,i.startColumn=0,i.startRow=0,i.currentColumn=0,i.currentRow=0,i.nextColumn=0,i.nextRow=0,i.futureColumn=0,i.futureRow=0,i.imgMap=[],i.isAvailableOfLoading=!0,i.images=[],i.isStartedFullInit=!1,i.imageInfoPromise=null,i.loadingMap={queue:[]},i.url=N.spinLib.getUrl(i.o.url),i.absoluteURL=(e=i.url,t=[],e=(t=p(e.split("//")))[1],t=(t=[t=t[0],e=e.split("/")[0]]).join("//")),i.infoImg=null,i.imageInfoId="img-"+N.generateUUID(),i.setEvents(),i}o.inheritsLoose(t,s);var e=t.prototype;return e.createImageInfo=function(){var t,e,i=this;return this.infoImg||(this.infoImg=new u(a.normalizeURL(z(this.absoluteURL,this.url,(t=O.hashKeys(i.o.layers)[0],e=O.hashKeys(i.o.layers[t])[0],i.o.layers[t][e]))),{imageSettings:this.o.imageSettings,infoId:this.imageInfoId,round:!0,referrerPolicy:this.o.referrerPolicy},null,null),this.infoImg.setParent(this)),this.infoImg},e.loadImageInfo=function(){var s=this;return this.imageInfoPromise||(this.imageInfoPromise=new r(function(e,i){s.createImageInfo(),s.infoImg.getImageInfo().then(function(t){s.isStartedFullInit&&s.createQueue(),e({size:s.infoImg.getOriginSize()})}).catch(function(t){i({error:t})})})),this.imageInfoPromise},e.startFullInit=function(t){var n=this;this.isStartedFullInit||(this.isStartedFullInit=!0,this.o=O.extend(this.o,t),this.o.layers=N.spinLib.checkLayers(this.o.layers),this.o.layers=N.spinLib.swapLayers(this.o.layers,this.o.swapSides),N.objEach(this.o.layers,function(t,e,i){var s;i%n.o.rowIncrement==0&&(s=[],N.objEach(e,function(t,e,i){i%n.o.columnIncrement==0&&s.push(a.normalizeURL(z(n.absoluteURL,n.url,e)))}),n.imgMap.push(s))}),N.spinLib.reverse(this.o.reverseColumn,this.o.reverseRow,this.imgMap),this.createImages(this.imgMap),this.setFirstImage(),this.imageInfoPromise&&this.infoImg.getImageInfo().then(function(t){n.loadingMap.queue.length||n.createQueue()}).catch(function(t){}))},e.setImageSettings=function(t){return(t=t||{}).imageSettings||(t.imageSettings={}),t.imageSettings.scale||(t.imageSettings.scale={}),t.callbackData||(t.callbackData={}),t.imageSettings.scale.option="fill",t.srcset||(t.srcset={}),null!==this.o.quality&&(t.src||(t.src={}),t.src=this.o.quality),1.5<=t.dppx?t.srcset.quality=this.o.hdQuality:null!==this.o.quality&&(t.srcset.quality=this.o.quality),t},e.getImage=function(t,e){var i,e=O.defined(t)?(i=t,e):(i=this.currentRow,this.currentColumn);return this.images[i][e]},e.getThumbnail=function(t){return this.getImage(this.startRow,this.startColumn).getThumbnail(t)},e.getMap=function(){var i=[];return this.imgMap.forEach(function(t){var e=[];t.forEach(function(t){e.push(!1)}),i.push(e)}),i},e.setEvents=function(){function e(t){s&&n&&o||t.lens||(s||t.col!==i.currentColumn||t.row!==i.currentRow||(s=!0,i.emit("mapFirstImageLoaded",{data:t})),!n&&i.loadingMap.checkOfFirstPartImagesLoading(t.row,t.col)&&(n=!0,i.emit("mapImagesReady")),!o&&i.loadingMap.checkOtherImagesLoading(t.row,t.col)&&(o=!0),s&&n&&o&&i.emit("mapAllImagesLoaded"))}var i=this,s=!1,n=!1,o=!1;this.on("imageOnload",function(t){t.stopAll();t=O.extend({isCurrent:t.data.col===i.currentColumn&&t.data.row===i.currentRow},t.data);i.emit("mapImageLoaded",{data:t}),e(t)}),this.on("imageOnerror",function(t){t.stopAll(),t.data.error=!0,i.emit("mapImageLoaded",{data:t.data}),e(t.data),console.log("image error")})},e.getHintType=function(){var t=this.getCountOfRows(),e=this.getCountOfFrames(),t=1<t&&1<e?"multi-row":1<t?"col":"row";return t},e.isLoaded=function(t){var e=this.getImage();return t=this.setImageSettings(t),e.isLoaded(t)},e.isExist=function(t){var e=this.getImage();return t=this.setImageSettings(t),e.isExist(t)},e.isCurrent=function(t){return t.row===this.currentRow&&t.col===this.currentColumn},e.getCountOfImages=function(){return this.getCountOfFrames()*this.getCountOfRows()},e.getCountOfFrames=function(){return this.images[0].length||0},e.getCountOfRows=function(){return this.images.length},e.pixelPerFrame=function(t){var e=t,t=this.getCountOfFrames();return 1<t?(this.o.loopColumn||(e/=2),e/=t):e/=this.getCountOfRows(),e/=Math.pow(this.o.columnSpeed/50,2)},e.pixelPerRow=function(t){var e=t,t=this.getCountOfRows();return 1<t?(this.o.loopRow||(e/=2),e/=t):e/=this.getCountOfFrames(),e/=Math.pow(this.o.rowSpeed/50,2)},e.createImages=function(t){for(var e=0,i=t.length;e<i;e++){for(var s=[],n=0,o=t[e].length;n<o;n++){var r=new u(a.adjustURL(t[e][n]),{imageSettings:this.o.imageSettings,infoId:this.imageInfoId,round:!0,referrerPolicy:this.o.referrerPolicy},n,e);r.setParent(this),s.push(r)}this.images.push(s)}},e.setFirstImage=function(){var t=this.o.startRow,e=this.o.startColumn;this.o.reverseRow&&(t=this.images.length+1-t),this.o.reverseColumn&&(e=this.images[0].length+1-e),this.currentRow=t-1,this.currentColumn=e-1,this.currentRow>this.images.length-1&&(this.currentRow=0),this.currentColumn>this.images[0].length-1&&(this.currentColumn=0),this.startColumn=this.futureColumn=this.nextColumn=this.currentColumn,this.startRow=this.futureRow=this.nextRow=this.currentRow},e.loadImage=function(t,e,i){i=this.getImage(e,i);t=this.setImageSettings(t),i.getImage(t)},e.loadFirstImage=function(t){var e;this.loadingMap.queue.length&&(e=this.loadingMap.queue[0].shift(),this.loadImage(t,e[0],e[1]))},e.loadFirstPartOfImages=function(e){var i=this;this.loadingMap.queue.length&&this.loadingMap.queue[0].forEach(function(t){i.loadImage(e,t[0],t[1])})},e.loadOtherImages=function(e){var i=this;this.isAvailableOfLoading&&this.loadingMap.queue.length&&(e=this.setImageSettings(e),this.loadingMap.queue[1].forEach(function(t){i.loadImage(e,t[0],t[1])}))},e.loadImages=function(e){var i=this.currentColumn;this.isAvailableOfLoading&&(e=this.setImageSettings(e),this.o.swapSides?this.images.forEach(function(t){t=t[i];t.isExist(e)?t.sendLoad(e):t.getImage(e)}):this.images.forEach(function(t){t.forEach(function(t){t.isExist(e)?t.sendLoad(e):t.getImage(e)})}))},e.isImagesExist=function(t){var e;t=this.setImageSettings(t);for(var i=0,s=this.images.length;i<s;i++)for(e=0;e<this.images[i].length;e++)if(!this.images[i][e].isExist(t))return!1;return!0},e.createQueue=function(){var t,e=this;switch(this.o.loadingSchema){case"momentum":t="fastLine";break;case"full":t="all";break;case"row":case"spin":t="line";break;case"sphere":case"intro":case"twitch":t="sphere";break;default:t="all"}this.loadingMap.queue=C[t]({swapSides:this.o.swapSides,images:this.images,startRow:this.currentRow,startCol:this.currentColumn}),this.loadingMap.checkOfFirstPartImagesLoading=function(){var i=[];e.loadingMap.queue[0].forEach(function(t){i.push(t[0]+"."+t[1])}),i.shift();var s=i.length,n=s?!1:!0;return function(t,e){return n||0<=i.indexOf(t+"."+e)&&0===--s&&(i=[],n=!0),n}}(),this.loadingMap.checkOtherImagesLoading=function(){var i=[];e.loadingMap.queue[1].forEach(function(t){i.push(t[0]+"."+t[1])});var s,n=!1;return(s=i.length)||(n=!0),function(t,e){return n||0<=i.indexOf(t+"."+e)&&0===--s&&(i=[],n=!0),n}}()},e.prepareFutureImage=function(t,e){var i,s,n;e=e||1,O.contains(["next","prev"],t)?(n=this.o.loopColumn,i=this.futureColumn,s=this.getCountOfFrames(),"next"===t?i+=e:i-=e,this.futureColumn=f.lib.getRightIndex(i,s,n)):(n=this.o.loopRow,i=this.futureRow,s=this.getCountOfRows(),"down"===t?i+=e:i-=e,this.futureRow=f.lib.getRightIndex(i,s,n))},e.setPreparedNextImage=function(){this.futureColumn=this.currentColumn=this.nextColumn,this.futureRow=this.currentRow=this.nextRow,this.emit("frameChange",{data:{column:this.currentColumn,row:this.currentRow}})},e.setPreparedFutureImage=function(){var t=this.getImage(this.futureRow,this.futureColumn);t&&t.isReady()&&(this.currentColumn=this.futureColumn,this.currentRow=this.futureRow,this.emit("frameChange",{data:{column:this.currentColumn,row:this.currentRow}}))},e.resetPreparedImage=function(){this.futureColumn=this.nextColumn=this.currentColumn,this.futureRow=this.nextRow=this.currentRow},e.getCurrentImage=function(t){t=this.setImageSettings(t);var e=this.currentColumn,i=this.currentRow;return this.getImage(i,e).getImage(t)},e.getOriginImageUrl=function(){var t=this.currentColumn,e=this.currentRow;return this.getImage(e,t).getOriginImageUrl()},e.jump=function(t,e,i){function s(t,e){var i=!1;return o.getImage(t,e).isReady()&&(o.nextRow=t,o.nextColumn=n,o.setPreparedNextImage(),i=!0),i}var n,o=this,r=!1;switch(t){case"row":r=s(N.spinLib.getNextIndex(this.currentRow,e,i,this.getCountOfRows(),this.o.loopRow),n=this.currentColumn);break;case"col":n=N.spinLib.getNextIndex(this.currentColumn,e,i,this.getCountOfFrames(),this.o.loopColumn),r=s(this.currentRow,n)}return r},e.setNextAnimationFrame=function(t){var e=this.imagesBuffer[t],t=this.getImage(e.row,e.col);t&&t.isReady()&&(this.nextColumn=e.col,this.nextRow=e.row)},e.getNextBufferIndex=function(t){for(var e,i,s,n=this,o=0,r=this.imagesBuffer.length;o+=1,r<=(t+=1)?o=0:e=this.imagesBuffer[t],0<o&&(!e||(i=e,s=void 0,s=n.getImage(i.row,i.col),i=!1,s&&s.isReady()&&(i=!0),!i)););return o},e.createAnimation=function(t,e){var i=!1,s=!1,n=0,o=0;switch(t){case"as-row":t="sphere",i=!0;break;case"as-sphere":t="sphere";break;case"as-full":t="full";break;case"as-helix":t="sphere";break;case"intro":t="intro",i=!0;break;case"twitch":t="twitch";break;case"spin":t="sphere",i=!0;break;case"momentum":t="sphere",s=i=!0;break;case"sphere":t="sphere";break;default:n=t.cols,o=t.rows,t="custom"}return this.imagesBuffer=f[t]({justFirstLine:i,swapSides:this.o.swapSides,axelerate:s,isBackward:e,count:t,row:{length:this.getCountOfRows(),loop:this.o.loopRow,current:this.currentRow,jumpCount:o},column:{length:this.getCountOfFrames(),loop:this.o.loopColumn,current:this.currentColumn,jumpCount:n}}),this.imagesBuffer.length},e.clearFramesQueue=function(){this.imagesBuffer=[]},e.cancelLoadingImage=function(t){var e=this.getImage();e&&(t=this.setImageSettings(t),e.cancelLoadingImage(t))},e.getStartRow=function(){return this.startRow},e.getStartColumn=function(){return this.startColumn},e.getCurrentRow=function(){return this.currentRow},e.getCurrentColumn=function(){return this.currentColumn},e.getImagesBuffer=function(){return this.imagesBuffer},e.destroy=function(){this.isAvailableOfLoading=!1,this.resetPreparedImage(),this.clearFramesQueue(),this.images.forEach(function(t){t.forEach(function(t){t.destroy()})}),this.off("imageOnload"),this.off("imageOnerror"),this.loadingMap={queue:[]},this.imgMap=[],this.images=p([]),this.currentColumn=0,this.currentRow=0,s.prototype.destroy.call(this)},t}(e);function z(t,e,i){return i=/^\//.test(i)?t+i:e+"/"+i}function A(t){t.stopDefaults()}var T=P.smv,D=T+"-spin",L=function(){"use strict";function t(t,e){this.parentNode=t,this.activeNode=e,this.activatedCurtain=O.$new("div").addClass("spin-activated-curtain").setCss({top:0,left:0,width:"100%",height:"100%",position:"absolute","z-index":999999999}),this.state=0}var e=t.prototype;return e.show=function(){this.state&&(this.activatedCurtain.setCssProp("display","block"),this.activeNode.addClass(T+"-activated"))},e.hide=function(){this.state&&(this.activatedCurtain.setCssProp("display","none"),this.activeNode.removeClass(T+"-activated"))},e.activateCurtain=function(){this.state||(this.state=1,this.activeNode.addClass(T+"-sleeping"),this.parentNode.append(this.activatedCurtain))},e.deactivateCurtain=function(){this.state&&(this.state=0,this.activeNode.removeClass(T+"-sleeping"),this.activatedCurtain.remove())},e.addTapEvents=function(e){var i=this;this.activatedCurtain.addEvent("tap",function(t){i.state&&(t.action="activate",e(t))}),this.activeNode.addEvent("tap",function(t){i.state&&(t.action="deactivate",e(t))})},e.addPinchEvent=function(t){this.activeNode.addEvent("pinch",t)},e.removePinchEvent=function(t){this.activeNode.removeEvent("pinch",t)},e.destroy=function(){this.state=1,this.hide(),this.deactivateCurtain(),this.removePinchEvent(),this.activeNode.removeEvent("tap"),this.activatedCurtain.remove(),this.activatedCurtain.removeEvent("tap"),this.activatedCurtain=null},t}();return function(u){"use strict";function t(t,e){var i=u.call(this,t,e,m)||this;return i.type=P.SLIDE.TYPES.SPIN,i.canvas=null,i.canvasContainer=O.$new("div").addClass("spin-canvas-container"),i.coreNode=O.$new("div").addClass("sirv-spin"),i.instanceNode.append(i.coreNode),i.ctx=null,i.isSmoothing=!1,i.smooseTimeout=null,i.minSizeOfFrame=0,i.minSizeOfRow=0,i.size={width:0,height:0},i.isDragMove=!1,i.longTapTimer=!1,i.imagesMap=null,i.isInited=!1,i.loader=null,i.hint=null,i.openedImg=null,i.scale=1,i.cssId=-1,i.boxBoundaries=null,i.hotspots=null,i.animationFX=null,i.loadedImages=[],i.currentSize={width:0,height:0},i.currentImageSize={width:0,height:0},i.standardSize={width:0,height:0},i.lastImg=null,i.startLoadingTime=null,i.isOver=!1,i.isSpinActivated=!O.browser.mobile,i.canvasPromise=null,i.firstImageLoaded=!1,i.firstPartOfImagesLoaded=!1,i.isInfoLoaded=!1,i.customActionWas=!1,i.isAutoplayPaused=!1,i.reflectDirection=!1,i.configURL=i.instanceNode.attr("data-src")||i.instanceNode.attr("data-config")||"",i.imageBaseURL=a.normalizeURL(i.configURL.replace(/([^#?]+)\/.*$/,"$1/")),i.absoluteURL=i.imageBaseURL.replace(/(^https?:\/\/[^/]*).*/,"$1/"),i.configHash=O.getHashCode(i.configURL.replace(/^http(s)?:\/\//,"")),i.configPath="/"+i.configURL.replace(i.absoluteURL,""),i.imageInfoCallbackName="sirv_spin_image_info_",i.sessionId=O.getHashCode(i.configURL.replace(/^http(s)?:\/\//,"")+O.D.node.location.href.replace(/^http(s)?:\/\//,"")+O.now()),i.layers={},i.imageSettings={},i.hotspotsData=[],i.fullscreenStartTime=0,i.meta={},i.isFullscreen=e.isFullscreen,i.nativeFullscreen=e.nativeFullscreen,i.infoSettings={},i.autospinResumeTimer=null,i.isHidden=!1,i.sessionStartTime=0,i.animationCloud=null,i.touchDragCloud=null,i.slideDragEventStart=!1,i.dppx=null,i.startTimeForZommEvent=null,i.resizeAnimationTimer=N.debounce(function(){i.animate("inactive")},1e3),i.keyPressHandlerForShiftButton=null,i.firstUserInteraction=!1,i.userColumn=0,i.userRow=0,i.placeholder=i.instanceNode.node.querySelector("img"),i.placeholder&&(i.placeholder=p(i.placeholder)),i.replaceTextParamURLFromMetadata(),i.trackUnload=function(){i.sendStats("Page Unload",O.now()-i.sessionStartTime,{message:"Stopped"},!0)},i.disableScrollOnMobile=function(){var t=O.D.getFullSize(),e=i.instanceNode.getSize();Math.abs(e.height-t.height)<=50?i.instanceNode.addEvent("touchmove",A):i.instanceNode.removeEvent("touchmove",A)},i.resizeWindowTimer=null,i.windowResizeCallback=function(){clearTimeout(i.resizeWindowTimer),i.resizeWindowTimer=setTimeout(function(){i.disableScrollOnMobile()},10)},i.api=O.extend(i.api,{isInitialized:i.isInitialized.bind(o.assertThisInitialized(i)),play:i.play.bind(o.assertThisInitialized(i)),pause:i.pause.bind(o.assertThisInitialized(i)),rotate:i.rotateXY.bind(o.assertThisInitialized(i)),rotateX:i.rotateX.bind(o.assertThisInitialized(i)),rotateY:i.rotateY.bind(o.assertThisInitialized(i)),jump:i.jump.bind(o.assertThisInitialized(i)),jumpRows:i.jumpRows.bind(o.assertThisInitialized(i)),jumpCols:i.jumpCols.bind(o.assertThisInitialized(i)),currentFrame:i.currentFrame.bind(o.assertThisInitialized(i))}),i.createHotspotsClass(l),i.getInfo().then(function(){O.browser.mobile&&i.option("tappingFirst")?i.activatedCurtain=new L(i.instanceNode,i.coreNode):i.isSpinActivated=!0,i.createMap(i.quality,i.hdQuality,i.isHDQualitySet)}).catch(function(t){}),i}o.inheritsLoose(t,u);var e=t.prototype;return e.isInitialized=function(){return this.isInited},e.rotateXY=function(t,e){return!(!this._isReady||this.isZoomed())&&this.rotate(t,e)},e.rotateX=function(t){return!(!this._isReady||this.isZoomed())&&this.rotate(t,null)},e.rotateY=function(t){return!(!this._isReady||this.isZoomed())&&this.rotate(null,t)},e.jump=function(t){return this.jumpRows(t)},e.jumpRows=function(t){return!(!this._isReady||this.isZoomed())&&this.jumpTo(t,"row")},e.jumpCols=function(t){return!(!this._isReady||this.isZoomed())&&this.jumpTo(t,"col")},e.currentFrame=function(){return this._isReady?this.getCurrentFrame():null},e.isActive=function(){return this.isSpinActivated},e.makeGlobalOptions=function(i){var t=this.options.options;return i.fromJSON(t.common.common),N.objEach(this.infoSettings,function(t,e){O.contains(["images","hotspots"],t)||i.set(t,e)}),i.fromString(t.local.common),i.fromString(this.instanceNode.attr("data-options")||""),i},e.makeOptions=function(){var t;return this.options.options=((t=this.options.options).common||(t.common={}),t.common.common||(t.common.common={}),t.common.mobile||(t.common.mobile={}),t.local||(t.local={}),t.local.common||(t.local.common=""),t.local.mobile||(t.local.mobile=""),t),u.prototype.makeOptions.call(this)},e.sendStats=function(t,e,i,s){e={account:this.config.account,useBeacon:!!s,event:t,eventTime:e,sessionId:this.sessionId,origin:this.configPath};i&&(e.data=i),this.emit("stats",{data:e})},e.getInfo=function(){var n=this;return this.gettingInfoPromise||(this.gettingInfoPromise=new r(function(i,s){n.waitGettingInfo.wait(function(){var t="sirv_spin_info_v1_"+n.configHash,e=n.configURL+(O.stringHas(n.configURL,"?")?"&":"?")+"info="+t;N.getRemoteData(e,t,n.referrerPolicy).then(function(t){n.destroyed||(t.layers?(n.config=t,n.layers=n.config.layers,n.meta=n.config._file.meta||null,n.infoSettings=n.config.settings,n.hotspotsData=n.config.settings.hotspots||[],n.imageSettings=n.config.settings.images.main,n.accountInfo={account:n.config.account,branded:n.config.branded},n.sessionStartTime=O.now(),n.sendStats("sessionStart",n.sessionStartTime),O.W.addEvent("beforeunload",n.trackUnload),i()):t.contentType&&/image/.test(t.contentType)||t._isplaceholder?s({error:"changeSpinToImage",isPlaceholder:t._isplaceholder,account:t.account}):s({error:{status:404}}))}).catch(function(t){n.destroyed||s({error:t})})})})),this.gettingInfoPromise},e.replaceTextParamURLFromMetadata=function(){var s=this;this.imageSettings.text&&this.imageSettings.text.text&&(this.imageSettings.text.text=this.imageSettings.text.text.replace(/\$\{spin\.(title|description)\}/g,function(t,e){var i=s.meta[e]||"";return"string"==typeof i?i:e}),""===this.imageSettings.text.text&&delete this.imageSettings.text)},e.getDPPX=function(t){var e=t.height>t.width?"height":"width",i={};i[e]=t[e],this.dppx=N.getDPPX(n.roundImageSize(i)[e],this.infoSize[e],this.upscale)},e.showHint=function(){var t=!1;return this.hint&&(this.always&&!O.contains([P.FULLSCREEN.OPENING,P.FULLSCREEN.OPENED],this.fullscreenState)||this.option("autospin.enable")&&this.firstUserInteraction||(t=!0,this.hint.show())),t},e.onStartActions=function(){this._isReady?this.animate("slideIn"):this.isStarted&&(this.isInited&&!this.initNameEvent?this.loadFirstPartOfImages():this.isInView&&this.loadFirstImage())},e.onStopActions=function(){this.zoomOut(),this.stopSmoothing(),this.stopAnimation(),this.deactivateSpin(),this.setUserFrame(),this.customActionWas=!1,this.hint&&this.hint.hide(),u.prototype.onStopActions.call(this)},e.onInView=function(t){t?this.isInView||(this._isReady?(this.isInView=!0,this.animate("inView")):(this.preload||this.isSlideShown)&&(this.isInView=!0,this.isInited?this.isSlideShown&&!this.initNameEvent&&this.loadFirstPartOfImages():this.loadFirstImage())):this.isInView&&this._isReady&&(this.option("autospin.enable")?this.animationCloud.pause():(this.stopAnimation(),this.setUserFrame()),this.deactivateSpin())},e.startFullInit=function(t){var e=this;this.isStartedFullInit||(u.prototype.startFullInit.call(this,t),this.getInfo().then(function(){e.normalizeOptions(),e.getId("spin-");var t=e.option;e.imagesMap.startFullInit({swapSides:t("swapSides"),startColumn:t("column.start"),startRow:t("row.start"),reverseColumn:t("column.reverse"),reverseRow:t("row.reverse"),loopColumn:t("column.loop"),loopRow:t("row.loop"),rowSpeed:t("row.sensitivity"),columnSpeed:t("column.sensitivity"),columnIncrement:t("column.increment"),rowIncrement:t("row.increment")}),e.loadedImages=e.imagesMap.getMap(),e.loader=new s(e.coreNode,{max:e.imagesMap.getCountOfImages(),class:"spin-loader"}),e.loader.setParent(e),e.coreNode.addEvent("btnclick tap",function(t){t.stop()}),e.on("isSingleSlide",function(t){t.stop(),e.activatedCurtain&&(t.data.isSingle?e.activatedCurtain.deactivateCurtain():e.activatedCurtain.activateCurtain())}),e.hotspots&&e.hotspots.setOptions({columnsRevers:e.option("column.reverse"),rowsRevers:e.option("row.reverse"),rows:e.imagesMap.getCountOfRows(),columns:e.imagesMap.getCountOfFrames()}),e.initAnimation()}).catch(function(){}),O.browser.touchScreen&&this.on("dragEvent",function(t){"dragstart"===t.data.type?(e.slideDragEventStart=!0,e.touchDragCloud&&e.touchDragCloud.removeEvent()):"dragend"===t.data.type&&(e.slideDragEventStart=!1,e.touchDragCloud&&e.touchDragCloud.addEvent())}))},e.getThumbnailData=function(t){return this.imagesMap.getThumbnail(t)},e.setUserFrame=function(){this.jumpTo(this.userRow,"row"),this.jumpTo(this.userColumn,"col")},e.getSocialButtonData=function(t,e){return e?this.instanceNode.attr("data-src"):u.prototype.getSocialButtonData.call(this,t)},e.turnOnOff=function(){var e=this;O.browser.mobile&&this.activatedCurtain&&this.activatedCurtain.addTapEvents(function(t){"activate"===t.action?(e.isSpinActivated||(t.stop(),e.activateSpin()),e.hotspots&&e.hotspots.hideActiveHotspotBox(!0)):e.isSpinActivated&&(t.stop(),e.stopSmoothing(),e.stopAnimation(),e.hotspots&&e.hotspots.isHotspotActivated()?e.hotspots.hideActiveHotspotBox(!0):e.deactivateSpin())})},e.activateSpin=function(){this.isSpinActivated||(this.isSpinActivated=!0,O.browser.mobile&&(this.stopAnimation(),this.customActionWas=!0,this.hint&&this.hint.hide(),this.activatedCurtain&&this.activatedCurtain.hide()))},e.deactivateSpin=function(){this.isSpinActivated&&(this.isSpinActivated=!1,O.browser.mobile&&(this.customActionWas||this.showHint(),this.activatedCurtain&&this.activatedCurtain.show()))},e.createPinchEvent=function(){function e(){a=r=1,n=d.zoom.getBaseScale().x,i=(h=1)-(l=n)}var i,s,n,o,r,a,h,l,c,d=this;u.prototype.createPinchEvent.call(this,this.coreNode),this.pinchCloud.onPinchStart=function(t){O.contains([P.FULLSCREEN.OPENING,P.FULLSCREEN.CLOSING],d.fullscreenState)||(d.pinchCloud.pinch=!0,clearTimeout(d.longTapTimer),d.stopSmoothing(),d.stopAnimation(),d.touchDragCloud&&d.touchDragCloud.removeEvent(),d.hotspots&&d.hotspots.hideActiveHotspotBox(!0),d.customActionWas=!0,c=!1,d.pinchCloud.scale=t.scale,o=1,d.openedImg&&(o=d.zoom.scale.x,n===O.U&&e(),o/=n),d.sendEvent("pinchStart"))},this.pinchCloud.onPinchResize=function(t){d.pinchCloud.pinch&&!d.pinchCloud.block&&d.zoom&&d.fullscreenState===P.FULLSCREEN.OPENED&&d.openedImg&&(d.pinchCloud.scale=t.scale,d.zoom.setBasePercent(t.centerPoint))},this.pinchCloud.onPinchMove=function(t){d.pinchCloud.pinch&&!d.pinchCloud.block&&(d.fullscreenState!==P.FULLSCREEN.OPENED&&d.isFullscreenEnabled?2<=t.scale&&(d.pinchCloud.block=!0,d.sendEvent("fullscreenIn")):d.openedImg?d.zoom&&(c?(s=t.scale,h<(s*=n)&&(a=1,r=i/((h=s)-(l=n))),s<l&&(r=h=1,a=n/(l=s)),s=(n+((s*=o)-n)*r)*a,d.zoom.setScale(s,t.centerPoint.x,t.centerPoint.y)):(c=!0,d.zoom.setBasePercent(t.centerPoint)),d.pinchCloud.scale=t.scale):1.1<t.scale?(d.firstUserInteraction=!0,d.openLens(t.centerPoint.x,t.centerPoint.y,!1,"zero"),e(),o=1):t.scale<.2&&(d.pinchCloud.block=!0,d.sendEvent("fullscreenOut")))},this.pinchCloud.onPinchEnd=function(t){d.pinchCloud.pinch&&(d.pinchCloud.pinch=!1,d.openedImg&&d.activateSpin(),setTimeout(function(){d.touchDragCloud&&d.touchDragCloud.addEvent()},16),d.sendEvent("pinchEnd")),d.openedImg&&d.pinchCloud.removeEvent(),d.pinchCloud.block=!1,d.pinchCloud.scale=0}},e.onStopContext=function(){this.stopSmoothing(),this.stopAnimation(),this.hint&&this.hint.hide()},e.onSecondSelectorClick=function(){this.zoomOut()},e.setGlobalEvents=function(){var i=this;this.on("zoomUp",function(t){var e=t.data;t.stop(),i._isReady&&i.zoom&&!i.isDragMove&&i.isFullscreenActionEnded()&&(i.firstUserInteraction=!0,i.openLens(e.x,e.y))}),this.on("zoomDown",function(t){t.stop(),i._isReady&&i.zoom&&i.isZoomed()&&i.zoom.hide()})},e.normalizeOptions=function(){var i=this;this.option("autospin.enable")||this.option("autospin.duration",0),this.option("swapSides")&&["start","loop","increment","reverse","sensitivity"].forEach(function(t){var e=i.option("row."+t);i.option("row."+t,i.option("column."+t)),i.option("column."+t,e)}),["onStart","onVisible","onInactive"].forEach(function(t){t="hint."+t+".effect";"none"===i.option(t)&&i.option(t,!1)}),O.browser.mobile&&"load"!==this.option("initialize")&&this.option("initialize","tap"),this.setDefaultZoomOptions(),this.option("zoom.enable")&&"max"!==this.option("zoom.ratio")&&this.option("zoom.ratio")<P.MIN_RATIO&&this.option("zoom.enable",!1)},e.setDefaultZoomOptions=function(){u.prototype.setDefaultZoomOptions.call(this),this.defaultZoomOptions=O.extend(this.defaultZoomOptions,{tiles:this.option("zoom.tiles"),pan:this.option("zoom.pan"),trigger:O.browser.mobile?"dblclick":"click",type:"inner",height:"auto"})},e.loadFirstPartOfImages=function(){this.firstPartOfImagesLoaded||(this.firstPartOfImagesLoaded=!0,this.startLoadingTime=O.now(),this.imagesMap.loadFirstPartOfImages({width:this.currentImageSize.width,height:this.currentImageSize.height,dppx:this.dppx}),this.loader&&this.loader.show())},e.isThumbnailGif=function(){return"gif"===this.option("thumbnail.type")},e.init=function(){var e=this;if(this.infoSize&&!this.isInited){switch(this.isInited=!0,this.initNameEvent=null,this.initFnEvent=function(t){t.stop(),e.coreNode.removeEvent(t.type,e.initFnEvent),e.activatedCurtain&&e.activatedCurtain.activatedCurtain.removeEvent(e.initNameEvent,e.initFnEvent),e.loadFirstPartOfImages()},this.option("initialize")){case"hover":this.initNameEvent="mouseover";break;case"click":this.initNameEvent="btnclick";break;case"tap":this.initNameEvent="tap"}this.initNameEvent?(this.coreNode.addEvent(this.initNameEvent,this.initFnEvent),this.activatedCurtain&&this.activatedCurtain.activatedCurtain.addEvent(this.initNameEvent,this.initFnEvent),this.loadFirstImage()):this.isInView&&this.isSlideShown&&this.loadFirstPartOfImages(),this.sendEvent("init")}},e.run=function(t,e,i){i=u.prototype.run.call(this,t,e,i);return i&&(O.W.addEvent("resize",this.windowResizeCallback),this.initCanvas(),this.startGettingInfo()),i},e.initCanvas=function(){this.canvas=O.$new("canvas"),this.canvas.node.getContext&&(this.ctx=this.canvas.node.getContext("2d"));var t=this.getRightAlt();t&&(this.canvas.attr("role","img"),this.canvas.attr("aria-label",t),this.canvas.attr("alt",t));var e=this.infoSize.width,i=this.infoSize.height,t=this.coreNode.getSize();e<t.width&&t.width,i<t.height&&t.height,0===t.height&&(this.cssId=O.addCSS("#"+this.id+" ."+D+":before",{"padding-top":this.infoSize.height/this.infoSize.width*100+"%"},this.id+"-css"),t.height=t.width*(this.infoSize.height/this.infoSize.width)),this.currentSize=N.spinLib.calcProportionSize(t,this.infoSize),this.getDPPX(this.currentSize),this.standardSize.width=this.currentSize.width,this.standardSize.height=this.currentSize.height,this.setImageSize(),this.canvas.setCss({top:"0",left:"0",zIndex:10,position:"absolute"}),this.setCanvasSize(),this.canvasContainer.append(this.canvas),this.coreNode.append(this.canvasContainer),this.isInView&&(this.preload||this.isSlideShown)&&this.loadFirstImage()},e.loadContent=function(){this.loadFirstImage()},e.loadFirstImage=function(){!this.firstImageLoaded&&this.isInfoLoaded&&(this.currentImageSize.width&&this.currentImageSize.height||(this.currentSize=N.spinLib.calcProportionSize(this.coreNode.getSize(),this.infoSize),this.getDPPX(this.currentSize),this.currentSize.width&&this.currentSize.height&&(this.setImageSize(),this.isStarted&&this.currentImageSize.width&&this.currentImageSize.height&&(this.setCanvasSize(),this.draw()))),this.currentImageSize.width&&this.currentImageSize.height&&(this.waitToStart.start(),this.firstImageLoaded=!0,this.imagesMap.loadFirstImage({width:this.currentImageSize.width,height:this.currentImageSize.height,dppx:this.dppx})))},e.getRightAlt=function(){return!this.dataAlt&&this.meta&&this.meta.description?this.meta.description:this.dataAlt},e.createMap=function(t,e,i){var s=this,n=this.option,o=null;n("autospin.enable")?o=n("autospin.type"):n("hint.onStart.enable")&&n("hint.onStart.effect")&&(o=n("hint.onStart.effect")),this.imagesMap=new x({url:this.configURL,imageSettings:this.imageSettings,layers:this.layers,swapSides:n("swapSides"),startColumn:n("column.start"),startRow:n("row.start"),reverseColumn:n("column.reverse"),reverseRow:n("row.reverse"),loopColumn:n("column.loop"),loopRow:n("row.loop"),rowSpeed:n("row.sensitivity"),columnSpeed:n("column.sensitivity"),columnIncrement:n("column.increment"),rowIncrement:n("row.increment"),loadingSchema:o,quality:t,hdQuality:e,isHDQualitySet:i,referrerPolicy:this.referrerPolicy}),this.imagesMap.setParent(this),this.userColumn=this.imagesMap.getStartColumn(),this.userRow=this.imagesMap.getStartRow(),this.on("mapFirstImageLoaded",function(t){t.stopAll(),s.placeholder&&s.placeholder.setCssProp("display","none"),s.isInited||(s.firstImageLoaded&&(s.draw(),s.canvas.setCssProp("transition","none"),s.canvas.getSize(),s.canvas.setCssProp("transition","")),s.loader&&s.loader.progress(),s.setCanvas().finally(function(){s.init()})),s.hotspots&&(t=s.imagesMap.getCurrentImage({width:s.currentSize.width,height:s.currentSize.height}),s.hotspots.setFramePosition(t.row,t.col),s.hotspots.updateAndShow(),s.isInView&&s.isSlideShown&&s.hotspots.showNeededElements())}),this.on("mapImagesReady",function(t){t.stopAll(),s.imagesMap.loadOtherImages({width:s.currentImageSize.width,height:s.currentImageSize.height,dppx:s.dppx}),s.calcMinSizeForDrag();t=O.now();s.sendStats("framesPreloaded",t-s.sessionStartTime,{duration:t-s.startLoadingTime}),s.done(),s.sendContentLoadedEvent()}),this.on("mapImageLoaded",function(t){t.stopAll(),s.loader&&(s.loadedImages[t.data.row][t.data.col]||(s.loadedImages[t.data.row][t.data.col]=!0,s.loader.progress())),t.data.error||t.data.isCurrent&&(t.data.callbackData.lens?s.zoom&&(s.zoom.isShown()||s.zoom.isShowing())&&s.openedImg&&s.openedImg.col===t.data.col&&s.openedImg.row===t.data.row&&s.zoom.setImage(t.data):s.lastImg&&(s.lastImg.width!==t.data.width||s.lastImg.height!==t.data.height)&&s.firstImageLoaded&&s.draw())}),this.on("mapAllImagesLoaded",function(t){t.stopAll();t=O.now();s.sendStats("framesLoaded",t-s.sessionStartTime,{duration:t-s.startLoadingTime}),s.loader&&2!==s.loader.getProgressState()&&s.loader.hide()}),this.on("frameChange",function(t){t.stop(),s._isReady&&s.sendEvent("frameChange",{row:t.data.row,column:t.data.column})}),this.imagesMap.loadImageInfo().then(function(t){s.isInfoLoaded=!0;t=O.extend({},t.size);s.infoSize=t,s.hotspots&&s.hotspots.setOriginImageSize(s.infoSize.width,s.infoSize.height)}).catch(function(t){s.isInfoLoaded=!0})},e.getSelectorImgUrl=function(i){var s=this;return new r(function(e,t){s.getInfo().then(function(){s.imagesMap.loadImageInfo().then(function(t){s.waitToStart.wait(function(){var t=s.imagesMap.setImageSettings({dppx:s.dppx});t.src&&(i.src=t.src),i.srcset=t.srcset,"gif"===s.option("thumbnail.type")&&(i.originUrl=s.configURL.split("?")[0],i.imageSettings={image:24},s.option("thumbnail.gifParams")&&(i.imageSettings=N.paramsFromQueryString(s.option("thumbnail.gifParams")))),e(O.extend(s.imagesMap.getThumbnail(i),{alt:s.getRightAlt()}))})}).catch(t)}).catch(t)})},e.getInfoSize=function(){var i=this;return new r(function(t,e){i.getInfo().then(function(){i.imagesMap.loadImageInfo().then(t).catch(e)}).catch(e)})},e.onHotspotActivate=function(t){this.customActionWas=!0,this.stopAnimation(),u.prototype.onHotspotActivate.call(this,t)},e.onHotspotDeactivate=function(t){u.prototype.onHotspotDeactivate.call(this,t),this.animateWithDelay()},e.createHint=function(){if(this.option("hint.message.enable")){var t='<div class="spin-hint-animation"></div>',e="spin-hint-horizontal-animation",i="spin-hint-vertical-animation";switch(t+="<span>",t+=this.option("hint.message.text"),t+="</span>",this.imagesMap.getHintType()){case"multi-row":s=e+" "+i;break;case"row":s=e;break;case"col":s=i}var s={html:t,additionalClass:s};(O.browser.mobile||this.option("autospin.enable"))&&(s.autohide=0),this.hint=new h(this.coreNode,s),this.isSlideShown&&this.isInView&&"infinite"===this.option("autospin.type")&&this.showHint()}},e.getImageClassContainer=function(){return this.imagesMap},e.createZoom=function(){var e=this,t=null;return!this.destroyed&&this.option("zoom.enable")&&(t=u.prototype.createZoom.call(this,this.coreNode,{}),this.zoomContainer&&this.zoom.setLensContainer(this.zoomContainer),this.coreNode.addEvent("btnclick dbltap",function(t){e.isFullscreenActionEnded()&&(e.firstUserInteraction=!0,e.openLens(t.x,t.y))}),O.browser.mobile),t},e.onZoomGetImage=function(t){u.prototype.onZoomGetImage.call(this,t),this.checkImage(t.data,t.data.dontLoad)?this.zoom.setImage(this.imagesMap.getCurrentImage(t.data)):this.imagesMap.loadImage(t.data)},e.onZoomCancelLoadingOfTiles=function(t){u.prototype.onZoomGetImage.call(this,t),t.data.round=!1,this.imagesMap.cancelLoadingImage(t.data)},e.onZoomBeforeShow=function(){this.canvas.addClass(this.zoomClassName),this.hotspots&&this.hotspots.hideAll()},e.onZoomShown=function(t){this.isSlideShown?(this.startTimeForZommEvent=O.now(),this.openedImg&&this.sendStats("zoomIn",O.now()-this.sessionStartTime,{frame:{row:this.openedImg.row,column:this.openedImg.col},clientX:t.data.clientPosition.x,clientY:t.data.clientPosition.y,pageX:t.data.pagePosition.x,pageY:t.data.pagePosition.y}),this.sendEvent("zoomIn")):this.zoom.hide(!0)},e.onZoomHidden=function(t){var e;this.openedImg&&(this.canvas.removeClass(this.zoomClassName),e=O.now(),this.sendStats("zoomOut",e-this.sessionStartTime,{duration:e-this.startTimeForZommEvent,frame:{row:this.openedImg.row,column:this.openedImg.col},clientX:t.data.clientPosition.x,clientY:t.data.clientPosition.y,pageX:t.data.pagePosition.x,pageY:t.data.pagePosition.y}),this.hotspots&&(this.hotspots.showAll(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements())),this.sendEvent("zoomOut"),this.isSlideShown&&this.animateWithDelay(),this.startTimeForZommEvent=null,this.openedImg=null,this.pinchCloud&&this.pinchCloud.addEvent()},e.setLongTapEvents=function(){var i=this,t=O.W.node.navigator.pointerEnabled,s=!1,n=!1;this.coreNode.addEvent("touchstart "+(t?"pointerdown":"MSPointerDown"),function(e){i.isDragMove||i.pinchCloud.pinch||!i.isFullscreenActionEnded()||(clearTimeout(i.longTapTimer),i.longTapTimer=setTimeout(function(){e.stop(),s=!0,i.customActionWas=!0;var t=e.getPageXY();i.touchDragCloud&&i.touchDragCloud.removeEvent(),i.firstUserInteraction=!0,i.openLens(t.x,t.y,!0)},500),n=!0)}),this.coreNode.addEvent("touchmove "+(t?"pointermove":"MSPointerMove"),function(t){s&&i.isFullscreenActionEnded()&&(t.stop(),t=t.getPageXY(),i.zoom.customMove(t.x,t.y))},1),this.coreNode.addEvent("touchend "+(t?"pointerup":"MSPointerUp"),function(t){n&&(t.stop(),n=!1,clearTimeout(i.longTapTimer)),s&&i.isFullscreenActionEnded()&&(t.stop(),s=!1,i.zoom.hide(!0),i.touchDragCloud&&i.touchDragCloud.addEvent())})},e.getZoomSize=function(){var t=this.option("zoom.ratio"),e=this.infoSize.width,i=this.infoSize.height,s={width:e,height:i};return"max"!==t&&(s.width=this.currentImageSize.width*t,s.height=this.currentImageSize.height*t,s=n.roundImageSize(s)),s.width=Math.min(e,s.width),s.height=Math.min(i,s.height),{width:s.width,height:s.height,originWidth:e,originHeight:i}},e.openLens=function(t,e,i,s){var n,o,r,a,h=!1;return this.isZoomSizeExist()&&(n=this.getZoomSize(),h=!0,this.stopSmoothing(),this.stopAnimation(),this.hint&&this.hint.hide(),this.hotspots&&this.hotspots.hideActiveHotspotBox(!0),a=!1,this.isFullscreenActionEnded()&&this.imagesMap.isLoaded({width:this.currentImageSize.width,height:this.currentImageSize.height})?(o=this.currentImageSize.width,r=this.currentImageSize.height,a=!0):(o=this.lastImg.serverWidth,r=this.lastImg.serverHeight),a=this.imagesMap.getCurrentImage({width:o,height:r,round:a}),this.openedImg=a,h=void 0===t?this.zoom.showCenter(a.node,n):this.zoom.show(a.node,n,t,e,i,s)),h},e.done=function(){var t=this.imagesMap.getCountOfRows(),e=this.imagesMap.getCountOfFrames();this.loader&&this.loader.setMaxOpacity(.5),this.setBrowserEvents(),this.createHint(),this.createZoom(),this.setZoomEvents(),1<t&&1<e?this.coreNode.setCssProp("touch-action","none"):1<t?this.coreNode.setCssProp("touch-action","pan-x"):this.coreNode.setCssProp("touch-action","pan-y"),this.boxBoundaries=this.coreNode.getRect(),this.animate("start"),this.accountInfo.branded&&(t=a.getNodeWithSirvClassName(this.instanceNode)||O.D.node.head||O.D.node.body,a.rootDOM.showSirvAd(t,this.instanceNode,"https://sirv.com/about-spin/?utm_source=client&utm_medium=sirvembed&utm_content=typeofembed(spin)&utm_campaign=branding","360-degree viewer by Sirv")),this.sendStats("viewerReady",O.now()-this.sessionStartTime,{rows:this.imagesMap.getCountOfRows(),columns:this.imagesMap.getCountOfFrames(),viewerSize:{width:this.currentSize.width,height:this.currentSize.height}}),this.isZoomSizeExist()&&this.coreNode.addClass(P.CSS_CURSOR_ZOOM_IN),this.setGlobalEvents(),this.turnOnOff(),u.prototype.done.call(this),this.hotspots&&(this.hotspots.getHotspots().length||this.hotspots.setInstanceComponentNode(this.canvasContainer),this.hotspots.setContainerSize(this.canvasContainer.node.getBoundingClientRect()))},e.setBrowserEvents=function(){this.setDrag(this.coreNode),this.setMouseWheel(this.coreNode)},e.setCanvas=function(){var i,s,n,o=this;return this.canvasPromise||(n=null,this.canvasPromise=N.makeQueryblePromise(new r(function(e,t){i=e,o.firstImageLoaded&&o.draw(),o.isInView&&o.isSlideShown?(n=setTimeout(function(){o.canvas&&o.canvas.removeEvent("transitionend",s),e()},1100),s=function(t){"opacity"===t.propertyName&&(t.stop(),clearTimeout(n),o.canvas.removeEvent(t.type,s),e())},o.canvas.addEvent("transitionend",s),o.canvas.getSize(),o.canvas.addClass(T+"-shown")):(o.canvas.addClass(T+"-shown"),e())})),this.canvasPromise.resolve=function(){o.canvas.removeEvent("transitionend",s),i()}),this.canvasPromise},e.clearCanvas=function(){this.ctx&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},e.draw=function(t){this.ctx&&(t={width:(t=t||this.currentImageSize).width,height:t.height,maxSize:!0,dppx:this.dppx},t=this.imagesMap.getCurrentImage(t),(this.lastImg=t)&&(this.ctx.imageSmoothingQuality="high",this.hotspots&&this.hotspots.changeHotspotsPosition(t.row,t.col),this.clearCanvas(),this.canvas.node.width=t.node.node.width,this.canvas.node.height=t.node.node.height,this.ctx.drawImage(t.node.node,0,0,this.canvas.node.width,this.canvas.node.height)))},e.setCanvasSize=function(){var t=this.currentSize;this.canvas.setCss({width:t.width,height:t.height}),this.canvasContainer.setCss({width:t.width,height:t.height}),this.canvas.width=t.width,this.canvas.height=t.height},e.calcMinSizeForDrag=function(){var t=this.currentSize;this.minSizeOfFrame=this.imagesMap.pixelPerFrame(t.width),this.minSizeOfRow=this.imagesMap.pixelPerRow(t.height)},e.smoothing=function(t,e,i){var s,n,o=this;e&&(s=t/e,n=function(){s*=.97,o.smooseTimeout=setTimeout(function(){o.imagesMap.prepareFutureImage(i),o.imagesMap.setPreparedFutureImage(),o.draw(),.3<s&&n()},o.minSizeOfFrame/s)},this.isSmoothing||(this.isSmoothing=!0,n()))},e.stopSmoothing=function(){this.isSmoothing&&(this.isSmoothing=!1,clearTimeout(this.smooseTimeout),this.smooseTimeout=null,this.imagesMap.resetPreparedImage())},e.animateWithDelay=function(t){var e=this,i=t?t:"inactive";this.option("autospin.enable")?(clearTimeout(this.autospinResumeTimer),this.autospinResumeTimer=setTimeout(function(){e.animate(i)},this.option("autospin.resume"))):this.animate(i)},e.setDrag=function(t){var r=this,n=this.imagesMap.getCountOfRows(),a=this.imagesMap.getCountOfFrames(),h=1<n&&1<a,l={x:{minSize:this.minSizeOfFrame,count:a},y:{minSize:this.minSizeOfRow,count:n}},c=this.option("freeDrag"),d={x:0,y:0},u={x:0,y:0},p=null;h||(p=1<a?"x":"y");var m,f,g,e={},v={x:{next:0,prev:0},y:{up:0,down:0}},S=!1,y=N.debounce(function(){S=!1},50),w={x:65e-5*a*9.8,y:65e-5*n*9.8},i={x:["prev","next"],y:["down","up"]};!h&&c&&(1<a?i.y=i.x:i.x=i.y);function s(t){clearTimeout(r.longTapTimer),e[t.state](t)}function o(t,e,i,s){v[t][s]+=i}function b(t){var e=v[t];return t=e[(t="x"===t?["next","prev"]:["up","down"])[0]]>e[t[1]]?{distance:e[t[0]],direction:t[0]}:{distance:e[t[1]],direction:t[1]}}function E(t,e,i,s,n){return t=e*Math.pow(i/s,2)/(2*t),t=Math.floor(t/n)}function I(t,e,i,s){return e*(i/s)/t}function C(t,e){return i[e][0<=t?0:1]}e.dragstart=function(t){r.firstUserInteraction=!0,r.isDragMove=!0,r.stopSmoothing(),r.stopAnimation(),r.hint&&r.hint.hide(),r.hotspots&&r.hotspots.hideNeededElements(!0),r.userColumn=r.imagesMap.getStartColumn(),r.userRow=r.imagesMap.getStartRow(),r.fullscreenState===P.FULLSCREEN.OPENED&&t.stop(),d.x=t.x,d.y=t.y,t.timeStamp,g=O.now();var e=O.now()-r.sessionStartTime;r.sendStats("dragStart",e,{clientX:t.x-r.boxBoundaries.left,clientY:t.y-r.boxBoundaries.top,pageX:t.x,pageY:t.y}),r.sendEvent("spinStart"),r.sendEvent("rotate"),r.sendStats("rotate",e,{}),r.pinchCloud.removeEvent()},e.dragend=function(t){var e,i,s,n,o=[];r.isDragMove&&(t.stop(),r.isDragMove=!1,y.cancel(),S&&p===m||S&&(h||c)?(n=+new Date-g,e=b(m),i=E(w[m],a,e.distance,n,l[m].minSize),s=I(w[m],a,e.distance,n),o.push({items:i,direction:e.direction}),h&&(e=b(f),i=E(w[f],a,e.distance,n,l[f].minSize),s<(n=I(w[f],a,e.distance,n))&&(s=n),o.push({items:i,direction:e.direction})),r.animateTo(s,o),r.pinchCloud.addEvent()):(r.hotspots&&r.isInView&&r.isSlideShown&&r.hotspots.showNeededElements(),r.animateWithDelay()),r.sendEvent("spinEnd"),o=O.now(),r.sendStats("dragEnd",o-r.sessionStartTime,{duration:o-g,clientX:t.x-r.boxBoundaries.left,clientY:t.y-r.boxBoundaries.top,pageX:t.x,pageY:t.y}),d={x:0,y:0},u={x:0,y:0},S=!(v={x:{next:0,prev:0},y:{up:0,down:0}}))};function x(t,e){var i,s=!1;return u[t]>l[t].minSize&&(s=!0,i=Math.floor(u[t]/l[t].minSize),u[t]=u[t]%l[t].minSize,r.imagesMap.prepareFutureImage(e,i),r.imagesMap.setPreparedFutureImage()),s}var z={eventAdded:!(e.dragmove=function(t){var e={},i={x:0,y:0},s={x:0,y:0};r.isDragMove&&(S=!0,r.customActionWas=!0,i.x=t.x-d.x,i.y=t.y-d.y,s.x=Math.abs(i.x),s.y=Math.abs(i.y),t.timeStamp,t.timeStamp,m=s.x>=s.y?"x":"y",f="x"===m?"y":"x",(r.fullscreenState===P.FULLSCREEN.OPENED||h||c||"x"===m&&1<a||"y"===m&&1<n)&&t.stop(),e[m]=C(i[m],m),e[f]=C(i[f],f),o(m,0,s[m],e[m]),o(f,0,s[f],e[f]),h||c?(u.x+=s.x,u.y+=s.y):p&&(p===m&&"x"===p?u.x+=s.x:p===m&&"y"===p&&(u.y+=s.y)),x(m,e[m])&&c&&(u[f]=0),h&&x(f,e[f]),r.userColumn=r.imagesMap.getCurrentColumn(),r.userRow=r.imagesMap.getCurrentRow(),d.x=t.x,d.y=t.y,r.draw(),y())}),addEvent:function(){z.eventAdded||(z.eventAdded=!0,t.addEvent("mousedrag touchdrag",s))},removeEvent:function(){z.eventAdded&&(z.eventAdded=!1,t.removeEvent("mousedrag touchdrag",s))}};this.touchDragCloud=z,this.slideDragEventStart||this.touchDragCloud.addEvent()},e.animateTo=function(t,e){var n=this,o=[],i=[],s={};clearTimeout(this.autospinResumeTimer),this.animationFX&&this.animationFX.stop();for(var r=0,a=e.length;r<a;r++)i.push(e[r].direction),o.push(0),s[e[r].direction]=[0,e[r].items];this.animationFX=new O.FX(O.$new("div"),{duration:Math.abs(t),transition:O.FX.getTransition().inCubic,onBeforeRender:p(function(t,e){for(var i,s=0;s<t.length;s++)i=Math.round(e[t[s]]),o[s]!==i&&(n.imagesMap.prepareFutureImage(t[s],i-o[s]),n.imagesMap.setPreparedFutureImage(),n.userColumn=n.imagesMap.getCurrentColumn(),n.userRow=n.imagesMap.getCurrentRow(),o[s]=i);n.draw()}).bind(this,i),onComplete:function(){n.stopAnimation(),n.animateWithDelay(),n.hotspots&&n.isInView&&n.isSlideShown&&n.hotspots.showNeededElements()}}).start(s)},e.setMouseWheel=function(t){var s,n,o,r=this,a=0,h=!1,l=N.debounce(function(t){h=!1,r.sendEvent("spinEnd"),t?a=0:r.animateWithDelay()},200),c=this.imagesMap.getCountOfRows(),e=this.imagesMap.getCountOfFrames(),d=1<c&&1<e,u=this.option("freeDrag");this.option("wheel")&&(o=!1,this.keyPressHandlerForShiftButton=function(t){16===t.oe.keyCode&&(o="keydown"===t.type)},O.W.addEvent("keydown keyup",this.keyPressHandlerForShiftButton),t.addEvent("mousescroll",function(t){r.firstUserInteraction=!0;var e=!!t.isMouse&&o,i=Math.abs(t.deltaY)<Math.abs(t.deltaX);(i||d||u)&&(r.customActionWas=!0,t.stop(),r.animationFX&&(r.animationFX.stop(),r.animationFX=null),r.stopSmoothing(),r.stopAnimation(),r.hotspots&&r.hotspots.hideActiveHotspotBox(),h||(h=!0,r.sendEvent("spinStart"),r.sendEvent("rotate"),r.sendStats("rotate",O.now()-r.sessionStartTime,{})),n=i?0<=(s=t.deltaX)?"next":"prev":(s=t.deltaY,1<c&&!e?0<=s?"down":"up":0<=s?"next":"prev"),t.isMouse?(s=s/Math.abs(s)*3,a+=Math.abs(s),r.animateTo(200,[{direction:n,items:a}])):(a+=s*=8/54,1<Math.abs(a)&&(s=parseInt(a,10),a-=s,r.imagesMap.prepareFutureImage(n,Math.abs(s)),r.imagesMap.setPreparedFutureImage(),r.draw())),l(t.isMouse))}))},e.animate=function(t,e,i,s){var n=this,o="autoplay"===t||this.option("autospin.enable");if(this.isInView&&this.isSlideShown&&!this.animationCloud.isMoving()&&!this.isDragMove&&(!this.customActionWas||o||s))if(this.animationCloud.isPaused())this.animationCloud.resume();else{clearTimeout(this.animationCloud.hintTimer),clearTimeout(this.autospinResumeTimer);var r,a=!1,h=null;if(o){if(this.isAutoplayPaused)return;h="as-"+(i||this.option("autospin.type")),"start"!==t&&(a=!0)}else{switch(t){case"start":r="onStart";break;case"inView":case"slideIn":r="onVisible";break;case"inactive":a=!0,r="onInactive";break;default:h=t}r&&this.option("hint."+r+".enable")&&((r=this.option("hint."+r+".effect"))&&(h=r))}this.animationCloud.start({speed:e||this.option("autospin.duration"),type:h,infinite:o,delay:a,isBackward:this.reflectDirection,userInteraction:s},function(){var t=n.showHint();n.hotspots&&n.isInView&&n.isSlideShown&&n.hotspots.showNeededElements(),n.option("hint.onInactive.enable")&&(t?n.animationCloud.hintTimer=setTimeout(function(){n.animationCloud.hintTimer=null,n.animate("inactive")},n.hint.getMovingTime()):n.animate("inactive"))})}},e.initAnimation=function(){var s,n,o=this,r=!1,t=!1,a=!1,e=null,h=null,i=0,l=null,c=this.imagesMap.getCountOfFrames();this.option("swapSides")&&(c=this.imagesMap.getCountOfRows());function d(){r=!1,i=0,l&&l()}var u=function(){var t=o.imagesMap.getNextBufferIndex(i);t||n.infinite?(!t&&n.infinite&&(t=1,i=n.infinite?-1:0),i+=t,o.imagesMap.setNextAnimationFrame(i),e=setTimeout(function(){o.imagesMap.setPreparedNextImage(),o.draw(),u()},t*s)):d()},p={hintTimer:null,isMoving:function(){return r},isPaused:function(){return t},start:function(t,e){var i;r||(a=!(r=!0),i=function(){var t;h=null,n.type?o.imagesMap&&(o.imagesMap.createAnimation(n.type,n.isBackward),n.userInteraction&&o.imagesMap.getImagesBuffer()&&o.imagesMap.getImagesBuffer().length&&(t=o.imagesMap.getImagesBuffer()[o.imagesMap.getImagesBuffer().length-1],o.userColumn=t.col,o.userRow=t.row),s=n.speed/c,n.infinite&&o.showHint(),u()):d()},l=e,(n=O.extend({speed:3600,type:"row",delay:!1,infinite:!1,isBackward:!1,userInteraction:!1},t)).speed=function(t,e){if(!t)switch(e){case"intro":t=3600;break;case"twitch":t=2200;break;case"spin":t=3600;break;case"momentum":t=10;break;default:t=3600}return t}(n.speed,n.type),n.delay&&!n.infinite?h=setTimeout(i,o.option("inactivity")):i())},resume:function(){t&&(t=!(r=!0),u())},pause:function(){t||a||(t=!(r=!1),clearTimeout(p.hintTimer),clearTimeout(h),clearTimeout(e))},stop:function(){p.pause(),t=!(a=!0),i=0,l=null,o.imagesMap.clearFramesQueue(),o.imagesMap.resetPreparedImage()}};this.animationCloud=p},e.stopAnimation=function(){this.animationFX&&(this.animationFX.stop(),this.animationFX=null),clearTimeout(this.autospinResumeTimer),this.animationCloud&&this.animationCloud.stop()},e.onBeforeFullscreenIn=function(t){this.stopSmoothing(),this.stopAnimation(),this.zoom&&this.zoom.hide(!0),this.deactivateSpin(),this.boxBoundaries=this.coreNode.getRect(),u.prototype.onBeforeFullscreenIn.call(this,t),this.hotspots&&this.hotspots.hideAll(),this.isInited&&this.isInView&&this.isSlideShown&&(this.isHidden=!0,this.canvas.setCss({opacity:0,visibility:"hidden"}))},e.onAfterFullscreenIn=function(){var t,e=this;this.infoSize&&(this.canvasPromise&&this.canvasPromise.isPending()&&this.canvasPromise.resolve(),t=this.coreNode.getSize(),this.currentSize=N.spinLib.calcProportionSize(t,this.infoSize,!0,this.standardSize),this.getDPPX(this.currentSize),this.setImageSize(),this.setCanvasSize(),this._isReady&&(this.imagesMap.isImagesExist({width:this.currentImageSize.width,height:this.currentImageSize.height})||this.imagesMap.loadImages({width:this.currentImageSize.width,height:this.currentImageSize.height,dppx:this.dppx})),this.firstImageLoaded&&this.draw(),this.isHidden&&(this.isHidden=!1,setTimeout(function(){e.canvas.setCss({opacity:"",visibility:""})},0)),this.hotspots&&this.fullscreenState===P.FULLSCREEN.OPENED&&(this.hotspots.showAll(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements()),this._isReady&&(this.animate("inactive"),O.browser.mobile||this.showHint(),this.fullscreenStartTime=+new Date,this.sendStats("fullscreenOpen",O.now()-this.sessionStartTime)))},e.onBeforeFullscreenOut=function(t){this.stopSmoothing(),this.stopAnimation(),this.zoom&&this.zoom.hide(!0),this.deactivateSpin(),this.hint&&this.always&&this.hint.hide(),u.prototype.onBeforeFullscreenOut.call(this,t),this.isInited&&this.isInView&&this.isSlideShown&&(this.isHidden=!0,this.canvas.setCss({opacity:0,visibility:"hidden"}))},e.onAfterFullscreenOut=function(t){var e=this;this.infoSize&&(this.canvasPromise&&this.canvasPromise.isPending()&&this.canvasPromise.resolve(),this.currentSize=N.spinLib.calcProportionSize(this.coreNode.getSize(),this.infoSize),this.getDPPX(this.currentSize),this.standardSize.width=this.currentSize.width,this.standardSize.height=this.currentSize.height,this.currentImageSize.width=this.currentSize.width,this.currentImageSize.height=this.currentSize.height,this.setCanvasSize(),this._isReady&&(this.imagesMap.isImagesExist({width:this.currentSize.width,height:this.currentSize.height})||this.imagesMap.loadImages({width:this.currentSize.width,height:this.currentSize.height,dppx:this.dppx})),this.firstImageLoaded&&this.draw(),this.isHidden&&(this.isHidden=!1,setTimeout(function(){e.destroyed||e.canvas.setCss({opacity:"",visibility:""})},0)),u.prototype.onAfterFullscreenOut.call(this,t),this._isReady&&(this.animate("inactive"),O.browser.mobile||this.showHint(),t=O.now(),this.sendStats("fullscreenClose",t-this.sessionStartTime,{duration:t-this.fullscreenStartTime})))},e.play=function(t,e){var i=!1;return this._isReady&&!this.isZoomed()&&(this.isAutoplayPaused=!1,this.stopSmoothing(),this.stopAnimation(),this.instanceOptions.checkValue("autospin.duration",t)||(t=null),this.instanceOptions.checkValue("autospin.type",e)||(e=null),this.animate("autoplay",t,e),i=!0),i},e.pause=function(){var t=!1;return this._isReady&&!this.isZoomed()&&(this.isAutoplayPaused=!0,this.stopSmoothing(),this.stopAnimation(),this.animateWithDelay(),t=!0),t},e.rotate=function(t,e){function i(t){return t?"string"===O.typeOf(t)&&(t=parseInt(t,10),isNaN(t)&&(t=0)):t=0,t}var s=!1;return this._isReady&&(t=i(t),e=i(e),0===t&&0===e||(this.stopAnimation(),this.stopSmoothing(),this.isDragMove||(this.sendEvent("rotate"),this.sendStats("rotate",O.now()-this.sessionStartTime,{}),this.animate({cols:t,rows:e},O.U,O.U,!0),s=!0))),s},e.jumpTo=function(t,e){var i=!1,s=null;return this._isReady&&("string"===O.typeOf(t)&&(t=t.trim(),s=/^-/.test(t)?"prev":"next"),t=parseInt(t,10),isNaN(t)||(i=this.imagesMap.jump(e,t,s))&&this.firstImageLoaded&&(this.sendEvent("rotate"),this.sendStats("rotate",O.now()-this.sessionStartTime,{}),this.draw())),i},e.zoomIn=function(){return!(!this._isReady||!this.zoom||this.isDragMove||!this.isFullscreenActionEnded())&&this.openLens()},e.zoomOut=function(){return!(!this._isReady||!this.zoom)&&this.zoom.hide()},e.getCurrentFrame=function(){if(this._isReady){var t=this.imagesMap.getCurrentImage({width:this.currentSize.width,height:this.currentSize.height});return{row:t.row+1,column:t.col+1}}return!1},e.getOriginImageUrl=function(){return this._isReady?this.imagesMap.getOriginImageUrl():null},e.setCallback=function(t,e){return!!this._isReady&&(this.option(t,e),!0)},e.setImageSize=function(){this.currentImageSize.width=this.currentSize.width,this.currentImageSize.height=this.currentSize.height},e.isZoomSizeExist=function(){var t,e=!1;return this.option("zoom.enable")&&(t=this.currentImageSize,100<=this.getZoomSize().originWidth-t.width&&(e=!0)),e},e.getOrientation=function(){return this.imagesMap.getHintType()},e.getType=function(){return this.type},e.onResize=function(){if(this.fullscreenState===P.FULLSCREEN.OPENING||!this.isStarted)return!1;var t=this.fullscreenState===P.FULLSCREEN.OPENED;return this.stopSmoothing(),this.option("autospin.enable")?this.animationCloud.pause():this.stopAnimation(),this.boxBoundaries=this.coreNode.getRect(),this.currentSize=N.spinLib.calcProportionSize(p(this.coreNode.node.parentNode).getSize(),this.infoSize,t,this.standardSize),this.getDPPX(this.currentSize),this.standardSize.width=this.currentSize.width,this.standardSize.height=this.currentSize.height,this.setImageSize(),this.setCanvasSize(),this.calcMinSizeForDrag(),this.isZoomSizeExist()?this.coreNode.addClass(P.CSS_CURSOR_ZOOM_IN):this.coreNode.removeClass(P.CSS_CURSOR_ZOOM_IN),this.zoom&&this.zoom.onResize(),this.imagesMap.isImagesExist({width:this.currentSize.width,height:this.currentSize.height})||this.imagesMap.loadImages({width:this.currentSize.width,height:this.currentSize.height,dppx:this.dppx}),this.firstImageLoaded&&this.draw(),this._isReady&&this.hotspots&&(this.hotspots.setContainerSize(this.canvasContainer.node.getBoundingClientRect()),this.hotspots.updateAndShow()),this.resizeAnimationTimer(),!0},e.getContainerForBoundengClientRect=function(){return this.canvasContainer},e.destroy=function(){return this.instanceNode.removeEvent("touchmove",A),O.W.removeEvent("resize",this.windowResizeCallback),clearTimeout(this.resizeWindowTimer),this.isInited&&this.sendStats("sessionEnd",O.now()-this.sessionStartTime,{message:"Stopped"}),this.coreNode.removeEvent("btnclick tap"),this.coreNode.del("instance"),this.resizeAnimationTimer.cancel(),this.resizeAnimationTimer=null,this.touchDragCloud&&(this.touchDragCloud.removeEvent(),this.touchDragCloud=null),this.placeholder&&this.placeholder.setCssProp("display",""),this.keyPressHandlerForShiftButton&&(O.W.removeEvent("keydown keyup",this.keyPressHandlerForShiftButton),this.keyPressHandlerForShiftButton=null),-1<this.cssId&&(O.removeCSS(this.id+"-css",this.cssId),O.$(this.id+"-css").remove()),this.cssId=-1,this.initNameEvent&&this.coreNode.removeEvent(this.initNameEvent,this.initFnEvent),this.activatedCurtain&&this.activatedCurtain.destroy(),this.stopSmoothing(),this.stopAnimation(),this.hint&&(this.hint.destroy(),this.hint=null),this.coreNode.removeEvent("mousedrag touchdrag pinch"),this.loader&&(this.loader.destroy(),this.loader=null),this.imagesMap&&(this.imagesMap.destroy(),this.imagesMap=null,this.off("mapFirstImageLoaded"),this.off("mapImagesReady"),this.off("mapImageLoaded"),this.off("mapAllImagesLoaded")),this.clearCanvas(),this.canvas&&(this.canvas.removeEvent("transform"),this.canvas.removeClass(this.zoomClassName),this.canvas.remove()),this.canvasContainer.removeEvent("transform"),this.canvasContainer.removeEvent("mouseover"),this.canvasContainer.removeEvent("mouseout"),this.canvasContainer.remove(),this.canvasContainer=null,this.ctx=null,this.canvas=null,this.loadedImages=[],this.off("isSingleSlide"),this.off("zoomUp"),this.off("zoomDown"),this.off("frameChange"),this.coreNode.remove(),this.infoSize=null,this.startLoadingTime=null,this.isInited=!1,this.openedImg=null,this.coreNode=null,this.firstUserInteraction=!1,this.animationCloud&&(clearTimeout(this.animationCloud.hintTimer),this.animationCloud=null),this.lastImg=null,this.hotspotsData=null,u.prototype.destroy.call(this),!0},t}(i)}),Sirv.define("Zoom",["bHelpers","magicJS","globalVariables","globalFunctions","helper","Promise!","EventEmitter","Zoominstance","Hint","ResponsiveImage","RoundLoader","Hotspots"],function(s,t,p,n,d,r,e,i,o,a,h,l){var m=t,f=m.$,c={mode:{type:"string",enum:["top","left","right","bottom","inner","magnifier","deep"],defaults:"inner"},margin:{type:"number",defaults:9},width:{oneOf:[{type:"number"},{type:"string",enum:["auto"]}],defaults:"auto"},height:{oneOf:[{type:"number"},{type:"string",enum:["auto"]}],defaults:"auto"},pan:{type:"boolean",defaults:!1},ratio:{oneOf:[{type:"number",minimum:0},{type:"string",enum:["max"]}],defaults:2.5},wheel:{type:"boolean",defaults:!0},tiles:{type:"boolean",defaults:!0},trigger:{oneOf:[{type:"string",enum:["hover","click","dblclick"]},{type:"boolean",enum:[!1]}],defaults:"click"},hint:{enable:{type:"boolean",defaults:!0},text:{hover:{type:"string",defaults:"Hover to zoom"},click:{type:"string",defaults:"Click to zoom"},dblclick:{type:"string",defaults:"Double click to zoom"}}},map:{enable:{type:"boolean",defaults:!1},size:{type:"number",minimum:0,maximum:50,defaults:25}}};m.browser.touchScreen&&(c=d.deepExtend(c,{hint:{text:{hover:{defaults:"Tap and hold to zoom"}}}}));var g,v,S={hint:{text:{hover:{type:"string",defaults:"Tap and hold to zoom"},click:{type:"string",defaults:"Tap to zoom"},dblclick:{type:"string",defaults:"Double tap to zoom"}}}},y={trigger:{oneOf:[{type:"string",enum:["hover","click","dblclick"]},{type:"boolean",enum:[!1]}],defaults:"hover"}},w={trigger:{oneOf:[{type:"string",enum:["hover","click","dblclick"]},{type:"boolean",enum:[!1]}],defaults:"dblclick"}},b={ratio:{oneOf:[{type:"number",minimum:0},{type:"string",enum:["max"]}],defaults:"max"}},u=function(n){"use strict";function t(t,e,i){var s=n.call(this)||this;return s.parentNode=f(t),s.options=m.extend({class:null,disabledClass:"disable"},e),s.events=i||{},s.isDisabled=!1,s.isDisabledClassAdded=!1,s.instanceNode=m.$new("button"),s.options.class&&s.instanceNode.addClass(s.options.class),d.objEach(s.events,function(t,e){s.instanceNode.addEvent(t,e)}),s}s.inheritsLoose(t,n);var e=t.prototype;return e.append=function(){this.parentNode.append(this.instanceNode)},e.changeState=function(t){t?(this.disable(!0),this.isDisabledClassAdded||(this.isDisabledClassAdded=!0,this.instanceNode.addClass(this.options.disabledClass))):(this.isDisabledClassAdded&&(this.isDisabledClassAdded=!1,this.instanceNode.removeClass(this.options.disabledClass)),this.disable())},e.disable=function(t){t?this.isDisabled||(this.isDisabled=!0,this.instanceNode.attr("disabled","disabled")):this.isDisabled&&(this.isDisabled=!1,this.instanceNode.removeAttr("disabled"))},e.destroy=function(){var i=this;d.objEach(this.events,function(t,e){i.instanceNode.removeEvent(t,e)}),this.events={},this.changeState(),this.instanceNode.remove(),this.instanceNode=null,n.prototype.destroy.call(this)},t}(e),E=function(i){"use strict";function t(t){var e=i.call(this)||this;return e.parentNode=f(t),e.instanceNode=m.$new("div").addClass("zoom-controls"),e.zoomInButton=new u(e.instanceNode,{class:"zoom-in"},{"btnclick tap":function(t){t.stop(),e.emit("zoomControlsAction",{data:{type:"zoomin"}})}}),e.zoomInButton.setParent(s.assertThisInitialized(e)),e.zoomOutButton=new u(e.instanceNode,{class:"zoom-out"},{"btnclick tap":function(t){t.stop(),e.emit("zoomControlsAction",{data:{type:"zoomout"}})}}),e.zoomOutButton.setParent(s.assertThisInitialized(e)),e.zoomCloseButton=new u(e.instanceNode,{class:"zoom-close"},{"btnclick tap":function(t){t.stop(),e.emit("zoomControlsAction",{data:{type:"zoomclose"}})}}),e.zoomCloseButton.setParent(s.assertThisInitialized(e)),e.zoomInButton.append(),e.zoomOutButton.append(),e.zoomCloseButton.append(),e}s.inheritsLoose(t,i);var e=t.prototype;return e.show=function(){this.parentNode.append(this.instanceNode)},e.hide=function(){this.instanceNode.remove()},e.invisibleDisable=function(t){this.zoomInButton.disable(t),this.zoomOutButton.disable(t),this.zoomCloseButton.disable(t)},e.disable=function(t){t?"in"===t?(this.zoomInButton.changeState(!0),this.zoomOutButton.changeState(),this.zoomCloseButton.changeState()):(this.zoomOutButton.changeState(!0),this.zoomCloseButton.changeState(!0),this.zoomInButton.changeState()):(this.zoomInButton.changeState(),this.zoomOutButton.changeState(),this.zoomCloseButton.changeState())},e.destroy=function(){this.zoomInButton.destroy(),this.zoomOutButton.destroy(),this.zoomCloseButton.destroy(),this.hide(),i.prototype.destroy.call(this)},t}(e);function I(t){t.stop()}function C(t){for(var e=null;t.node!==m.D.node.body&&!e;)(t=f(t.node.parentNode)).hasClass(g+"-slides-box")&&(e=t);return e}return g=p.smv,v=function(s,n){return new r(function(t,e){var i=f(s).getSize();n=n||100,--n,i.width||i.height?t(i):0<n?setTimeout(function(){v(s,n).then(t).catch(e)},16):e(null)})},function(u){"use strict";function t(t,e){var i=u.call(this,t,e,c)||this;return i.type=p.SLIDE.TYPES.ZOOM,i.insideOptions={type:"outside",position:"right",hideZoomForClickTrigger:!0,zooming:!0,map:!1,mapSize:50,controls:!1,trigger:"click",outsideModeWasChanged:!1},i.imageUrl=i.instanceNode.attr("data-src"),i.src=n.normalizeURL(i.imageUrl.replace(p.REG_URL_QUERY_STRING,"$1")),i.queryParams=d.paramsFromQueryString(i.imageUrl.replace(p.REG_URL_QUERY_STRING,"$2")),i.queryParams&&(t=parseInt(i.queryParams.quality,10),isNaN(t)?delete i.queryParams.quality:i.queryParams.quality=t),i.isFullscreen=e.isFullscreen,i.nativeFullscreen=e.nativeFullscreen,i.queryParamsQuality=i.queryParams.quality||null,i.imageNode=null,i.loader=null,i.image=null,i.controls=null,i.differenceBetweenSizes=100,i.currentSize={width:0,height:0},i.currentImageSize={width:0,height:0},i.isInfoLoaded=!1,i.zoomIsOpened=!1,i.imageShowPromise=null,i.hint=null,i.longTapTimer=null,i.setImageCss=!1,i.lastTriggerAction=null,i.isNotMouse=!1,i.accountInfo={},i.postInitState=0,i.clonedImage=null,i.isHidden=!1,i.destroyed=!1,i.waitingCallbacks=[],i.lastImageSize={width:0,height:0},i.hotspotsTurnedOn=!0,i.scrollDebounce=d.debounce(function(){i.replaceZoom()},16),i.zoomDebounce=d.debounce(function(){i.controls&&(i.controls.invisibleDisable(),i.changeControlsState(i.zoom.getZoomData()))},42),i.onScrollHandler=i.onScroll.bind(s.assertThisInitialized(i)),i.instanceNode.addEvent("selectstart",function(t){t.stop()}),i.createHotspotsClass(),i.createSirvImage(),i}s.inheritsLoose(t,u);var e=t.prototype;return e.makeOptions=function(){var t=new m.Options(this.defaultSchema),t=this.makeGlobalOptions(t);return m.contains(["top","left","right","bottom","inner","magnifier"],t.get("mode"))&&t.parseSchema(y,!0),m.browser.touchScreen&&m.browser.mobile&&(t.parseSchema(S,!0),t=this.makeMobileOptions(t),m.contains(["inner","deep"],t.get("mode"))&&t.parseSchema(w,!0)),"deep"===t.get("mode")&&t.parseSchema(b,!0),t},e.getInfo=function(){var s=this;return this.gettingInfoPromise||(this.gettingInfoPromise=new r(function(e,i){s.waitGettingInfo.wait(function(){s.image.getImageInfo().then(function(t){s.destroyed||(s.isInfoLoaded=!0,s.accountInfo=s.image.getAccountInfo(),s.dataAlt||(s.dataAlt=s.image.getDescription()),s.hotspotsData=t.hotspots,s.infoSize=s.image.getOriginSize(),s.hotspots&&s.hotspots.setOriginImageSize(s.infoSize.width,s.infoSize.height),e())}).catch(function(t){s.destroyed||i(t)})})})),this.gettingInfoPromise},e.showHint=function(){this.hint&&(this.always&&!m.contains([p.FULLSCREEN.OPENING,p.FULLSCREEN.OPENED],this.fullscreenState)||this.hint.show())},e.onStartActions=function(){this._isReady?this.isInView&&this.isZoomSizeExist()&&this.showHint():this.isStarted&&this.isInView&&this.isSlideShown&&!this.preload&&this.postInit(),u.prototype.onStartActions.call(this)},e.onStopActions=function(){this.zoomOut(!0),this.hint&&this.hint.hide(),u.prototype.onStopActions.call(this)},e.onInView=function(t){t&&(this._isReady?this.isSlideShown&&this.isZoomSizeExist()&&this.showHint():this.isStarted&&(this.isInView||!this.preload&&!this.isSlideShown||(this.isInView=!0,this.postInit())))},e.startFullInit=function(t){this.isStartedFullInit||(u.prototype.startFullInit.call(this,t),this.normalizeOptions(),this.getId("zoom-"),this.instanceNode.addClass(g+"-zoom-view"),this.instanceNode.addEvent("mousedown",I),this.createLoader())},e.imageSettings=function(t){(t=t||{}).imageSettings||(t.imageSettings={}),t.imageSettings.scale||(t.imageSettings.scale={}),t.callbackData||(t.callbackData={}),t.imageSettings.scale.option="fill",null!==this.quality&&null===this.queryParamsQuality&&(t.src||(t.src={}),t.src.quality=this.quality);var e=this.hdQuality;return(null===this.queryParamsQuality||this.isHDQualitySet&&e<this.queryParamsQuality)&&(t.srcset={quality:e}),t},e.setHDQuality=function(t){return 1<t.dppx&&t.dppx<1.5&&(null===this.queryParamsQuality&&null!==this.quality?t.srcset.quality=this.quality:t.srcset&&delete t.srcset.quality),t},e.isOutsideZoom=function(){return m.contains(["top","left","right","bottom"],this.option("mode"))},e.createHint=function(t){this.option("hint.enable")&&(this.hint=new o(this.instanceNode,{html:"<span>"+t+"<span>"}),this.hint.append())},e.clearZoom=function(){this.zoom&&(this.off("zooming"),this.off("zoomUp"),this.off("zoomDown"),this.imageNode&&this.imageNode.removeClass(this.zoomClassName)),u.prototype.clearZoom.call(this)},e.replaceZoom=function(){var t,e,i,s=!1,n=this.option("trigger"),o={clickBehavior:"both"};this._isReady&&("hover"===n&&"magnifier"!==this.option("mode")&&(m.contains([p.FULLSCREEN.OPENING,p.FULLSCREEN.OPENED],this.fullscreenState)?(s="click",o.trigger=s):s=n),t=!1,s&&this.insideOptions.trigger!==s&&(t=!0),"outside"===this.insideOptions.type&&(((e=this.canIUseOutsideZoom())&&this.insideOptions.outsideModeWasChanged||!e&&!this.insideOptions.outsideModeWasChanged)&&(this.insideOptions.outsideModeWasChanged=!this.insideOptions.outsideModeWasChanged,t=!0),i=this.imageNode.getSize(),!t&&e&&this.lastImageSize.width!==i.width&&(this.lastImageSize=i,t=!0)),t&&(this.clearZoom(),"outside"===this.insideOptions.type&&(e?o.type="outside":(o.type="inner",m.browser.mobile&&(o.pan=!0,"hover"===n&&(s="dblclick",o.trigger=s)))),s&&(this.insideOptions.trigger=s),this.setTriggerAction(s),this.createZoom(o),this.setZoomEvents()))},e.canIUseOutsideZoom=function(){var t=!1;if("outside"===this.insideOptions.type){if(m.contains([p.FULLSCREEN.OPENING,p.FULLSCREEN.OPENED],this.fullscreenState))return t;var e,i=this.option("margin"),s=this.imageNode.getSize(),n=m.W.getScroll(),o=this.imageNode.getPosition(),r=this.option("width"),a=this.option("height"),h=s.width,l=s.height;switch("auto"!==r&&(/%$/.test(r)?s.width=s.width/100*parseInt(r,10):s.width=parseInt(r,10)),"auto"!==a&&(/%$/.test(a)?s.height=s.height/100*parseInt(a,10):s.height=parseInt(a,10)),this.insideOptions.position){case"top":(e=o.top-n.y-i)>s.height&&(t=!0);break;case"left":(e=o.left-n.x-i)>=s.width&&(t=!0);break;case"right":e=o.left-n.x,e+=h+i,m.W.node.innerWidth-e>=s.width&&(t=!0);break;case"bottom":e=o.top-n.y,e+=l+i,m.W.node.innerHeight-e>=s.height&&(t=!0)}}return t},e.createHotspotsClass=function(){"magnifier"!==this.option("mode")&&(m.browser.mobile||"hover"!==this.option("trigger")||(this.hotspotsTurnedOn=!1),u.prototype.createHotspotsClass.call(this,l))},e.run=function(t,e,i){var s=this,i=u.prototype.run.call(this,t,e,i);return i&&(this.getInfo().finally(function(){s.calcContainerSize(),s.isInView&&(s.preload||s.isSlideShown)&&s.postInit()}),this.startGettingInfo()),i},e.done=function(){var t;this._isReady||this.destroyed||(u.prototype.done.call(this),this.hotspots&&(this.hotspots.getHotspots().length||this.hotspots.setInstanceComponentNode(this.imageNode),this.hotspots.setContainerSize(this.imageNode.node.getBoundingClientRect())),this.createZoom(),this.replaceZoom(),this.createControls(),t=this.isZoomSizeExist(),this.controls&&(this.controls.disable("out"),t&&this.controls.show()),this.imageNode&&t&&this.imageNode.addClass(p.CSS_CURSOR_ZOOM_IN),this.setZoomEvents(),this.isSlideShown&&this.isInView&&t&&this.showHint(),this.accountInfo.branded&&(t=n.getNodeWithSirvClassName(this.instanceNode)||m.D.node.head||m.D.node.body,n.rootDOM.showSirvAd(t,this.instanceNode,"https://sirv.com/about-zoom/?utm_source=client&utm_medium=sirvembed&utm_content=typeofembed(zoom)&utm_campaign=branding","Deep zoom image viewer by Sirv")))},e.normalizeOptions=function(){switch("deep"!==this.option("mode")&&this.option("map.enable",!1),"deep"!==this.option("mode")&&!m.browser.mobile||this.option("pan",!0),"magnifier"!==this.option("mode")||m.browser.mobile||this.option("pan",!1),this.isOutsideZoom()||"auto"===this.option("width")&&"auto"===this.option("height")&&this.option("width","70%"),this.option("trigger")){case"hover":"deep"===this.option("mode")&&this.option("trigger","click");break;case"click":case"dblclick":break;default:this.option("trigger",!1)}switch(this.option("mode")){case"top":case"left":case"right":case"bottom":this.insideOptions.type="outside",this.insideOptions.position=this.option("mode");break;case"magnifier":this.insideOptions.type="circle";break;case"inner":this.insideOptions.type="inner";break;case"deep":this.insideOptions.type="deep",this.insideOptions.controls=!0}"deep"===this.insideOptions.type&&this.option("map.enable")&&(this.insideOptions.map=0!==this.option("map.size"),this.insideOptions.map&&(this.insideOptions.mapSize=2*this.option("map.size"))),this.insideOptions.trigger=this.option("trigger"),m.browser.mobile&&(this.insideOptions.hideZoomForClickTrigger=!1),"max"!==this.option("ratio")&&this.option("ratio")<p.MIN_RATIO&&this.option("ratio",0),this.setDefaultZoomOptions()},e.setDefaultZoomOptions=function(){var t="deep"===this.insideOptions.type;u.prototype.setDefaultZoomOptions.call(this),this.defaultZoomOptions=m.extend(this.defaultZoomOptions,{trigger:this.option("trigger"),tiles:this.option("tiles"),width:this.option("width"),height:this.option("height"),map:this.insideOptions.map,clickBehavior:t?"up":"both",outsidePosition:this.insideOptions.position,margin:this.option("margin"),type:t?"inner":this.insideOptions.type,pan:this.option("pan"),customZooming:this.option("wheel"),mapSize:this.insideOptions.mapSize})},e.onZoomGetImage=function(t){u.prototype.onZoomGetImage.call(this,t),t.data=this.imageSettings(t.data),t.data=this.setHDQuality(t.data);var e=this.image.getImage(t.data);this.checkImage(t.data,t.data.dontLoad)&&this.zoom.setImage(e)},e.onZoomCancelLoadingOfTiles=function(t){u.prototype.onZoomCancelLoadingOfTiles.call(this,t),t.data=this.imageSettings(t.data),this.image.cancelLoadingImage(t.data)},e.onZoomBeforeShow=function(){"magnifier"!==this.option("mode")&&("outside"!==this.insideOptions.type||this.insideOptions.outsideModeWasChanged?this.imageNode.addClass(this.zoomClassName):this.imageNode.addClass("sirv-filter-bw"),this.hotspots&&this.hotspots.disableAll())},e.onZoomShown=function(){this.isSlideShown&&this.sendEvent("zoomIn",{trigger:this.option("trigger"),isOutsideZoom:this.isOutsideZoom()})},e.onZoomHidden=function(){this.imageNode.removeClass(this.zoomClassName),this.imageNode.removeClass("sirv-filter-bw"),this.sendEvent("zoomOut"),this.isNotMouse=!1,this.zoomIsOpened=!1,this.pinchCloud&&this.pinchCloud.addEvent(),this.hotspots&&(this.hotspotsTurnedOn&&m.contains([p.FULLSCREEN.CLOSED,p.FULLSCREEN.OPENING],this.fullscreenState)||"hover"!==this.insideOptions.trigger&&m.contains([p.FULLSCREEN.OPENED,p.FULLSCREEN.CLOSING],this.fullscreenState))&&(this.hotspots.enableAll(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements())},e.setZoomEvents=function(){var i=this;u.prototype.setZoomEvents.call(this),this.on("zooming",function(t){var e=t.data.zoom;t.stopAll(),i.controls&&(i.controls.invisibleDisable(!0),i.changeControlsState(e),i.zoomDebounce())}),this.on("zoomUp",function(t){t.stop(),i.makeZoom("zoomin",t.data.x,t.data.y)}),this.on("zoomDown",function(t){t.stop(),i.makeZoom("zoomout",t.data.x,t.data.y)})},e.onBeforeFullscreenIn=function(t){this.zoomIsOpened&&(this.zoom.hide(!0),this.controls&&this.controls.disable("out")),this._isReady&&this.isSlideShown&&this.isInView&&this.imageNode&&(this.isHidden=!0,this.imageNode.setCss({opacity:0,visibility:"hidden"})),u.prototype.onBeforeFullscreenIn.call(this,t),this.hotspots&&this.hotspots.disableAll()},e.onAfterFullscreenIn=function(){var t=this;this.calcContainerSize(),this.replaceZoom(),this.isHidden&&(this.isHidden=!1,setTimeout(function(){t.setImageWidthHeight(),t.imageNode.setCss({opacity:"",visibility:""})},0)),this.hotspots&&setTimeout(function(){t.hotspotsTurnedOn&&t.fullscreenState===p.FULLSCREEN.OPENED&&(t.hotspots.enableAll(),t.isInView&&t.isSlideShown&&t.hotspots.showNeededElements())},100)},e.onBeforeFullscreenOut=function(t){this.zoomIsOpened&&(this.zoom.hide(!0),this.controls&&this.controls.disable("out")),u.prototype.onBeforeFullscreenOut.call(this,t),this.hotspots&&(this.hotspotsTurnedOn||this.hotspots.disableAll()),this.replaceZoom(),this._isReady&&this.isSlideShown&&this.isInView&&this.imageNode&&(this.isHidden=!0,this.imageNode.setCss({opacity:0,visibility:"hidden"}))},e.onAfterFullscreenOut=function(t){var e=this;this.isHidden&&(this.isHidden=!1,setTimeout(function(){e.destroyed||(e.setImageWidthHeight(),e.imageNode.setCss({opacity:"",visibility:""}))},0)),u.prototype.onAfterFullscreenOut.call(this,t)},e.onSecondSelectorClick=function(){this.zoomOut(!0)},e.onMouseAction=function(t){"mouseout"===t&&(m.contains(["deep","magnifier"],this.option("mode"))||!("outside"===this.insideOptions.type&&this.insideOptions.outsideModeWasChanged||"inner"===this.insideOptions.type)||"hover"!==this.insideOptions.trigger&&!this.insideOptions.hideZoomForClickTrigger||this.isNotMouse||this.zoomOut(!0))},e.makeZoom=function(t,e,i){var s=!1;if(this._isReady&&this.zoom)switch(t){case"zoomin":s=this.zoomIsOpened?(1===this.zoom.getNextMinZoom()&&this.controls.disable("in"),this.zoom.zoomUp(e,i)):this.openZoom(e,i,"deep"===this.insideOptions.type&&"first");break;case"zoomout":this.zoomIsOpened&&(0===this.zoom.getZoomData()||0===this.zoom.getNextMinZoom()?(s=this.zoom.hide(),this.controls&&this.controls.disable("out")):s=this.zoom.zoomDown(e,i));break;default:this.zoomIsOpened&&(s=this.zoom.hide(),this.controls&&this.controls.disable("out"))}return s},e.calcContainerSize=function(){var t,e=this.instanceNode.getSize();e.height&&e.width?this.currentSize=e:(t=this.image.getOriginSize(),e.height?(this.currentSize.height=e.height,this.currentSize.width=t.width/t.height*e.height):(this.currentSize.width=e.width,this.currentSize.height=t.height/t.width*e.width))},e.getImageSize=function(){var t,e,i=this.currentSize,s=this.image.getOriginSize();return i.width>=i.height?(e=Math.min(i.height,s.height),(t=s.width/s.height*e)>i.width&&(t=Math.min(i.width,s.width),e=s.height/s.width*t)):(t=Math.min(i.width,s.width),(e=s.height/s.width*t)>i.height&&(e=Math.min(i.height,s.height),t=s.width/s.height*e)),m.extend({realWidth:t,realHeight:e},this.image.getClearSizeWithoutProcessingSettings({width:t,height:e}))},e.setTriggerAction=function(t){var i=this,e=this.option("trigger");if(this.isNotMouse=!1,!("max"!==this.option("ratio")&&this.option("ratio")<p.MIN_RATIO)&&e){var s,n=!1;switch(this.lastTriggerAction&&(this.lastTriggerAction(),this.lastTriggerAction=null,this.hint&&(this.hint.destroy(),n=!(this.hint=null))),t&&(e=t),e){case"click":s="btnclick tap",o=this.option("hint.text.click");break;case"dblclick":s="dblbtnclick dbltap",o=this.option("hint.text.dblclick");break;case"hover":s="mouseover",o=this.option("hint.text.hover"),m.browser.mobile&&this.outsideModeWasChanged&&(o=this.option("hint.text.dblclick"),e=s="dbltap")}this.createHint(o),n&&this.isSlideShown&&this.isInView&&this.isZoomSizeExist()&&this.showHint();var o=[];"hover"===e?(m.browser.touchScreen&&o.push(this.setLongTapEvents()),m.browser.mobile||o.push(this.setHoverEvents())):(n=function(t){i.fullscreenState!==p.FULLSCREEN.OPENED&&i.always||(t.stop(),i.isFullscreenActionEnded()&&(t=t.getPageXY(),i.openZoom(t.x,t.y,!1)))},m.browser.touchScreen&&(e=function(t){i.isNotMouse=t.isTouchEvent()},this.imageNode.addEvent("pointerup",e),o.push(f(function(t){i.isNotMouse=!1,i.imageNode.removeEvent("pointerup",t)}).bind(this,e))),this.imageNode.addEvent(s,n),o.push(f(function(t,e){i.imageNode.removeEvent(t,e)}).bind(this,s,n))),this.lastTriggerAction=f(function(t){f(t).forEach(function(t){t()})}).bind(this,o)}},e.setImageSrc=function(t,e,i){this.imageNode&&(this.imageNode.attr("src",t),e?this.imageNode.attr("srcset",e+" "+i+"x"):this.imageNode.removeAttr("srcset"),this.clonedImage=f(this.imageNode.node.cloneNode(!0)),this.clonedImage.node.className="")},e.setImageWidthHeight=function(){this.destroyed||(this.currentImageSize.realWidth/this.currentImageSize.realHeight>=this.currentSize.width/this.currentSize.height?this.imageNode.setCss({width:"100%",height:""}):this.imageNode.setCss({width:"",height:"100%"}))},e.createImage=function(t,e,i,s){var n=this;this.imageNode||(this.imageNode=t?f(t):m.$new("img"),this.imageNode.attr("referrerpolicy",this.referrerPolicy),t=this.image.getOriginSize(),this.imageNode.setCss({maxWidth:t.width,maxHeight:t.height}),this.setImageWidthHeight(),this.setTriggerAction(),this.option("wheel")&&"deep"===this.option("mode")&&this.imageNode.addEvent("mousescroll",function(t){!n.zoomIsOpened&&0<t.delta&&(t.stop(),n.openZoom(t.x,t.y,"first"))}),m.W.addEvent("scroll",this.onScrollHandler),this.dataAlt&&this.imageNode.attr("alt",this.dataAlt),this.setImageSrc(e,i,s))},e.setLongTapEvents=function(){function t(e){clearTimeout(s.longTapTimer),s.zoomIsOpened||e.isTouchEvent()&&!e.isPrimaryTouch()||s.isFullscreenActionEnded()&&(s.longTapTimer=setTimeout(function(){var t;e.isTouchEvent()&&!e.isPrimaryTouch()||(e.stop(),n=!0,t=e.getPageXY(),s.openZoom(t.x,t.y,!1,!0))},201),o=!0)}function e(t){t.isTouchEvent()&&!t.isPrimaryTouch(t)||(n?(t.stop(),t=t.getPageXY(),s.zoom.customMove(t.x,t.y)):clearTimeout(s.longTapTimer))}function i(t){t.isTouchEvent()&&!t.isPrimaryTouch(t)||(o&&(o=!1,clearTimeout(s.longTapTimer)),n&&(t.stop(),n=!1,s.zoom.hide(!0)))}var s=this,n=!1,o=!1;return this.fullscreenState!==p.FULLSCREEN.OPENED&&this.always||(this.instanceNode.addEvent("touchstart pointerdown",t),this.instanceNode.addEvent("touchmove pointermove",e),this.instanceNode.addEvent("touchend pointerup",i)),function(){s.instanceNode.removeEvent("touchstart pointerdown",t),s.instanceNode.removeEvent("touchmove pointermove",e),s.instanceNode.removeEvent("touchend pointerup",i)}},e.setHoverEvents=function(){function i(){return m.browser.touchScreen&&!m.browser.mobile}function t(t){var e=t.getPageXY();s=e.x,n=e.y,i()&&t.isTouchEvent()||a||!r.isSlideShown||r.fullscreenState!==p.FULLSCREEN.OPENED&&r.always||(a=!0,o=setTimeout(function(){r.openZoom(s,n,!1)},84))}function e(t){var e=f(t.getRelated());if((!i()||!t.isTouchEvent())&&a&&(r.fullscreenState===p.FULLSCREEN.OPENED||!r.always)&&(a=!1,r.isFullscreenActionEnded())){for(;e&&e!==r.imageNode.node&&e!==m.D.node.body;)e=f(e.parentNode);e!==r.imageNode.node&&(n=s=null,clearTimeout(o))}}var s,n,o,r=this,a=!1,h=function(){},l="mousemove",c="mouseout";return i()&&d.isIe()&&(h=this.on("zoomHidden",function(t){t.stop(),a=!1}),l="pointermove",c="pointerup"),this.imageNode.addEvent(l,t),this.imageNode.addEvent(c,e),function(){h(),r.imageNode.removeEvent(l,t),r.imageNode.removeEvent(c,e)}},e.getZoomImageSize=function(){var t=this.image.getOriginSize(),e=t.width,i=t.height,s=this.option("ratio"),t={width:e,height:i};return"max"!==s&&(t.width=this.currentImageSize.realWidth*s,t.height=this.currentImageSize.realHeight*s,t=a.roundImageSize(t)),t.width=Math.min(e,t.width),t.height=Math.min(i,t.height),{width:t.width,height:t.height,originWidth:e,originHeight:i}},e.openZoom=function(t,e,i,s){"deep"===this.insideOptions.type&&"zero"!==i&&(i="first");var n=!1;if(!this.zoom||!this.isZoomSizeExist())return n;this.zoomIsOpened=!0,this.hint&&this.hint.hide(),this.hotspots&&this.hotspots.hideActiveHotspotBox(!0);var o=this.clonedImage,r=this.getZoomImageSize();return n=void 0===t?this.zoom.showCenter(o,r,i):this.zoom.show(o,r,t,e,s,i)},e.createPinchEvent=function(){function e(){a=r=1,s=d.zoom.getBaseScale().x,n=(h=1)-(l=s)}var i,s,n,o,r,a,h,l,c,d=this;u.prototype.createPinchEvent.call(this,this.instanceNode),this.pinchCloud.onPinchStart=function(t){m.contains([p.FULLSCREEN.OPENING,p.FULLSCREEN.CLOSING],d.fullscreenState)||"outside"===d.insideOptions.type&&!d.insideOptions.outsideModeWasChanged||(d.pinchCloud.pinch=!0,clearTimeout(d.longTapTimer),c=!1,d.pinchCloud.scale=t.scale,o=1,d.hotspots&&d.hotspots.hideActiveHotspotBox(!0),d.zoomIsOpened&&(o=d.zoom.scale.x,s===m.U&&e(),o/=s),d.sendEvent("pinchStart"))},this.pinchCloud.onPinchResize=function(t){d.pinchCloud.pinch&&!d.pinchCloud.block&&d.zoom&&d.fullscreenState===p.FULLSCREEN.OPENED&&d.zoomIsOpened&&(d.pinchCloud.scale=t.scale,d.zoom.setBasePercent(t.centerPoint))},this.pinchCloud.onPinchMove=function(t){d.pinchCloud.pinch&&!d.pinchCloud.block&&(d.fullscreenState!==p.FULLSCREEN.OPENED&&d.isFullscreenEnabled?2<=t.scale&&(d.pinchCloud.block=!0,d.sendEvent("fullscreenIn")):d.zoomIsOpened?d.zoom&&(c?(i=t.scale,h<(i*=s)&&(a=1,r=n/((h=i)-(l=s))),i<l&&(r=h=1,a=s/(l=i)),i=(s+((i*=o)-s)*r)*a,d.zoom.setScale(i,t.centerPoint.x,t.centerPoint.y)):(c=!0,d.zoom.setBasePercent(t.centerPoint)),d.pinchCloud.scale=t.scale):1.1<t.scale?"magnifier"!==d.option("mode")&&d.option("wheel")&&(d.openZoom(t.centerPoint.x,t.centerPoint.y,"zero"),e(),o=1):t.scale<.2&&d.isFullscreenEnabled&&(d.pinchCloud.block=!0,d.sendEvent("fullscreenOut")))},this.pinchCloud.onPinchEnd=function(t){d.pinchCloud.pinch&&(d.pinchCloud.pinch=!1,d.sendEvent("pinchEnd")),d.zoomIsOpened&&d.pinchCloud.removeEvent(),d.pinchCloud.block=!1}},e.loadContent=function(){this.postInit()},e.postInit=function(){var e=this;this.postInitState||(this.postInitState=1,this.waitToStart.start(),v(this.instanceNode.node).then(function(t){e.currentSize=t}).catch(function(t){e.destroyed||e.calcContainerSize()}).finally(function(){e.destroyed||(e.postInitState=2,e.getImage())}))},e.getImageClassContainer=function(){return this.image},e.getImage=function(){var t,e,i,s,n=this,o=this.getImageSize(),e=(t=a.roundImageSize({width:this.currentImageSize.width}).width,e=a.roundImageSize({width:o.width}).width,Math.abs(t-e));this.setImageCss=!1,!this._isReady||e>=this.differenceBetweenSizes||this.fullscreenState===p.FULLSCREEN.OPENED?this._isReady||o.width||o.height?((e>=this.differenceBetweenSizes||this.fullscreenState===p.FULLSCREEN.OPENED||!this.currentImageSize.width)&&(this.currentImageSize=o),o=this.imageSettings({width:this.currentImageSize.realWidth,height:this.currentImageSize.realHeight,round:!0,dontLoad:!0}),1<m.DPPX&&(s=this.image.getOriginSize(),i=o.height>o.width?d.getDPPX((o.round?a.roundImageSize({height:o.height}):o).height,s.height,this.upscale):d.getDPPX((o.round?a.roundImageSize({width:o.width}):o).width,s.width,this.upscale),o.dppx=i),o=this.setHDQuality(o),this.checkImage(o,!0)&&this._isReady?(s=this.image.getImage(o),this.setImageSrc(s.src,s.srcset,i)):this.image.getImage(o)):setTimeout(function(){n.calcContainerSize(),n.getImage()},16):e<this.differenceBetweenSizes&&(this.setImageCss=!0)},e.imageRequest=function(){this.image.getImage(this.imageSettings({width:this.currentImageSize.width,height:this.currentImageSize.height}))},e.showImage=function(){var o=this;return this.imageShowPromise||(this.imageShowPromise=new r(function(e,i){var s=null,n=null;o.isInView&&o.isSlideShown?(o.imageNode.setCss({opacity:0,transition:"opacity .3s linear"}),o.instanceNode.append(o.imageNode),d.loadImage(o.imageNode.node).then(function(t){s=t}).catch(function(t){n=t}).finally(function(){o.destroyed||(o.imageNode.addEvent("transitionend",function(t){t.stop(),o.imageNode.removeEvent("transitionend"),o.imageNode.setCss({opacity:"",transition:""}),s?(o.sendContentLoadedEvent(),e(s)):i(n)}),o.imageNode.getSize(),o.imageNode.setCssProp("opacity",1))})):(o.instanceNode.append(o.imageNode),d.loadImage(o.imageNode.node).then(function(t){s=t}).catch(function(t){n=t}).finally(function(){s?(o.sendContentLoadedEvent(),e(s)):i(n)}))})),this.imageShowPromise},e.createLoader=function(){this.loader=new h(this.instanceNode,{class:"zoom-loader"})},e.createSirvImage=function(){var e=this;this.imageUrl&&(this.on("imageOnload",function(t){t.stopAll(),t.data.callbackData.lens?(e.zoom.isShown()||e.zoom.isShowing())&&e.zoomIsOpened&&e.zoom.setImage(t.data):e._isReady?e.imageShowPromise&&e.setImageSrc(t.data.src,t.data.srcset,t.data.dppx):(e.createImage(t.data.node,t.data.src,t.data.srcset,t.data.dppx),e.showImage().finally(function(){e.loader&&e.loader.hide(),e.done(),e.sendContentLoadedEvent()}))}),this.on("imageOnerror",function(t){t.stopAll(),e.loader&&e.loader.hide(),console.log("image error")}),this.image=new a(this.imageUrl,{imageSettings:this.queryParams,referrerPolicy:this.referrerPolicy}),this.image.setParent(this),this.getInfo())},e.getInfoSize=function(){var i=this;return new r(function(t,e){i.getInfo().then(function(){t({size:i.infoSize})}).catch(function(t){e({error:t,isPlaceholder:t._isplaceholder})})})},e.getSelectorImgUrl=function(s){var n=this;return new r(function(t,e){var i=n.imageSettings();i.src&&(s.src=i.src),s.srcset=i.srcset,n.isInfoLoaded?n.waitToStart.wait(function(){t(m.extend(n.image.getThumbnail(s),{alt:n.dataAlt}))}):n.getInfo().then(function(){n.waitToStart.wait(function(){t(m.extend(n.image.getThumbnail(s),{alt:n.dataAlt}))})}).catch(e)})},e.getThumbnailData=function(t){return this.image.getThumbnail(t)},e.createControls=function(){var e=this;this.insideOptions.controls&&(this.controls=new E(this.instanceNode),this.controls.setParent(this),this.on("zoomControlsAction",function(t){t.stopAll(),e.zoom&&e.makeZoom(t.data.type)}))},e.changeControlsState=function(t){this.controls&&(1===t||0===t?1===t?this.controls.disable("in"):this.controls.disable("out"):this.controls.disable())},e.createZoom=function(t){var e,i=null;return this.destroyed||(e=this.zoomContainer,i=u.prototype.createZoom.call(this,this.instanceNode,t),"magnifier"===this.option("mode")?e=C(this.instanceNode):m.contains([p.FULLSCREEN.OPENING,p.FULLSCREEN.OPENED],this.fullscreenState)||"outside"===i.type&&(e=C(this.instanceNode),e=m.D.node.body),e&&this.zoom.setLensContainer(e)),i},e.zoomIn=function(){var t=!1;return this._isReady&&this.zoom&&(this.option("fullscreenOnly")&&this.fullscreenState===p.FULLSCREEN.CLOSED?this.sendEvent("fullscreenIn"):t=this.makeZoom("zoomin")),t},e.zoomOut=function(t){var e=!1;return this._isReady&&this.zoom&&(t?this.zoomIsOpened&&(e=this.zoom.hide(!this.zoom.getZoomData())):e=this.makeZoom("zoomout")),e},e.getOriginImageUrl=function(){return this._isReady?this.image.getOriginImageUrl():null},e.isZoomSizeExist=function(){var t,e=!1;return this._isReady&&(t=this.currentImageSize,100<=this.getZoomImageSize().originWidth-t.realWidth&&("max"===this.option("ratio")||this.option("ratio")>=p.MIN_RATIO)&&(e=!0)),e},e.onResize=function(){var t=!1;if(!this.destroyed)return this.isStarted&&2===this.postInitState&&(this.calcContainerSize(),this.getImage(),this.hotspots&&(this.hotspotsTurnedOn&&m.contains([p.FULLSCREEN.CLOSED,p.FULLSCREEN.OPENING],this.fullscreenState)||"hover"!==this.insideOptions.trigger&&m.contains([p.FULLSCREEN.OPENED,p.FULLSCREEN.CLOSING],this.fullscreenState))&&(this.hotspots.setContainerSize(this.imageNode.node.getBoundingClientRect()),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements()),this.imageNode&&(this.setImageWidthHeight(),this.isZoomSizeExist()?this.imageNode.addClass(p.CSS_CURSOR_ZOOM_IN):(this.hint&&this.hint.hide(),this.imageNode.removeClass(p.CSS_CURSOR_ZOOM_IN))),t=!0),this.controls&&(this.isZoomSizeExist()?this.controls.show():this.controls.hide()),this.replaceZoom(),this.zoom&&this.zoom.onResize(),t},e.onScroll=function(t){this.zoomIsOpened&&t.stop(),clearTimeout(this.longTapTimer),this.scrollDebounce()},e.getType=function(){return this.type},e.destroy=function(){return this.destroyed=!0,this.loader&&(this.loader.destroy(),this.loader=null),f(m.W).removeEvent("scroll",this.onScrollHandler),this.onScrollHandler=null,this.lastTriggerAction&&(this.lastTriggerAction(),this.lastTriggerAction=null),this.hint&&(this.hint.destroy(),this.hint=null),this.image&&(this.off("imageOnload"),this.off("imageOnerror"),this.image.destroy(),this.image=null),this.controls&&(this.controls.destroy(),this.controls=null,this.off("zoomControlsAction")),this.hotspots&&(this.hotspotsTurnedOn=!1,this.instanceNode.removeEvent("tap")),this.zoom&&(this.off("zooming"),this.off("zoomUp"),this.off("zoomDown")),this.instanceNode.clearEvents(),this.instanceNode.removeClass(g+"-zoom-view"),this.imageNode&&(this.imageNode.remove(),this.imageNode=null),this.clonedImage&&(this.clonedImage=null),this.zoomDebounce.cancel(),this.zoomDebounce=null,this.scrollDebounce.cancel(),this.scrollDebounce=null,clearTimeout(this.longTapTimer),this.longTapTimer=null,this.hotspotsData=null,u.prototype.destroy.call(this),!0},t}(i)}),Sirv.define("defaultsVideoOptions",{autoplay:{type:"boolean",defaults:!1},loop:{type:"boolean",defaults:!1},volume:{type:"number",minimum:0,maximum:100,defaults:100},preload:{type:"boolean",defaults:!0},thumbnail:{oneOf:[{type:"url"},{type:"boolean",enum:[!1]},{type:"number",minimum:0}],defaults:!1},motionFactor:{type:"number",minimum:1,maximum:4,defaults:3},dynamicAdaptiveStreaming:{type:"boolean",defaults:!0},quality:{min:{type:"number",enum:[360,480,720,1080],defaults:360},max:{type:"number",enum:[360,480,720,1080],defaults:1080}},controls:{enable:{type:"boolean",defaults:!0},volume:{type:"boolean",defaults:!0},speed:{type:"boolean",defaults:!1},quality:{type:"boolean",defaults:!1},fullscreen:{type:"boolean",defaults:!0}}}),Sirv.define("Video",["require","module","bHelpers","magicJS","globalVariables","globalFunctions","helper","Promise!","EventEmitter","Instance","defaultsVideoOptions"],function(i,s,n,t,c,o,d,a,e,r,h){var u,p,m,f,g,v,S,y,w,b,E,I,C,x=t;x.$;function z(t){return o.rootDOM.addStyle(t,s.config().libcss,"sirv-stylesheet-vjs")}return u=c.smv,p=[.5,1,1.5,2],m=u+"-disabled-action",f="https://video.sirv.com",g=u+"-q-last",v=u+"-s-last",S=50*x.DPPX,y=0,w=1,b=2,E=4,I=5,C=6,function(l){"use strict";function t(t,e){var i=l.call(this,t,e,h)||this;i.type=c.SLIDE.TYPES.VIDEO,i.url=i.instanceNode.attr("data-src"),i.info=null,i.HLS=[],i.currentSize={width:0,height:0},i.videoNode=null,i.areSourcesAdded=!1,i.indexOfCurrentHls=0,i.player=null,i.thumbnail=i.option("thumbnail"),i.currentTime=0,i.isVideoPaused=!1,i.fps=30,i.pluginResizeDebounce=null,i.playPromise=null,i.posterSize=null,i.lastAction=y,i.isPlayed=!1,i.isEnded=!1,i.playingState=c.VIDEO.NONE,i.nativeFullscreen=e.nativeFullscreen;t=o.normalizeURL(i.url.replace(c.REG_URL_QUERY_STRING,"$1")),e=i.url.replace(c.REG_URL_QUERY_STRING,"$2");return i.url=t,e&&(i.url+="?"+e),i.disableAction(),i.isLoadeddata=!1,i.controlsFullscreen=i.option("controls.fullscreen"),i.getInfo(),i}n.inheritsLoose(t,l);var e=t.prototype;return e.normalizeOptions=function(){var t=this.option("quality.min");this.option("quality.max")<t&&this.option("quality.max",t)},e.getOriginImageUrl=function(){return null},e.getSelectorImgUrl=function(o){var r=this;return new a(function(t,e){var i=o.width||o.height,s=r.url.split("?")[0]+"?thumbnail="+i;1<x.DPPX&&(s=r.url.split("?")[0]+"?thumbnail="+i*x.DPPX+"&quality=60"),isNaN(parseFloat(r.thumbnail))||(s=r.getThumbnailPoster(s));var n={src:s,callbackData:o.callbackData};1<x.DPPX&&(n.srcset=s),r.getInfo().then(function(){t(n)}).catch(e)})},e.disableAction=function(){this.always&&x.contains([c.FULLSCREEN.CLOSED,c.FULLSCREEN.CLOSING],this.fullscreenState)&&this.instanceNode.addClass(m)},e.enableAction=function(){this.always&&this.instanceNode.removeClass(m)},e.getInfo=function(){var n=this;return this.gettingInfoPromise||(this.gettingInfoPromise=new a(function(i,s){n.waitGettingInfo.wait(function(){var t=n.url,e=x.getHashCode(n.url.split("?")[0].replace(/^http(s)?:\/\//,""));/\?/.test(t)?t+="&":t+="?",t+="info=sirv_video_info_"+e+"_main",d.getRemoteData(t,"video_info_"+d.generateUUID(),n.referrerPolicy).then(function(t){n.destroyed||(n.info=t,n.info.QuickTime&&n.info.QuickTime.VideoFrameRate&&(n.fps=n.info.QuickTime.VideoFrameRate),n.HLS=n.info.original.HLS||[],1<n.HLS.length&&n.HLS.sort(function(t,e){var i=0;return t.width<e.width?i=-1:t.width>e.width?i=1:t.height<e.height?i=-1:t.height>e.height&&(i=1),i}),n.infoSize={width:n.info.original.width,height:n.info.original.height},i(n.infoSize))}).catch(function(t){n.destroyed||s(t)})})})),this.gettingInfoPromise},e.getInfoSize=function(){var i=this;return new a(function(t,e){i.getInfo().then(function(){t({size:i.infoSize})}).catch(function(t){e({error:t})})})},e.addSources=function(){var t=this,e=o.getNodeWithSirvClassName(this.instanceNode)||x.D.node.head||x.D.node.body;a.all([z(x.D.node.head||x.D.node.body),z(e),new a(function(t){i([s.config().libjs],t)}),(e=e,o.rootDOM.addStyle(e,s.config().qualitySelectorcss,"sirv-stylesheet-vjs-quality-selector","#"+o.rootDOM.mainCSSID)),new a(function(t){i([s.config().qualitySelectorjs],t)})]).finally(function(){t.areSourcesAdded=!0,t.isStarted&&t.isInView&&(t.preload||t.isSlideShown)&&t.createVideoNode()})},e.onStartActions=function(t){this._isReady?this.player&&this.isInView&&(this.fullscreenState===c.FULLSCREEN.OPENED&&this.always&&this.option("controls.enable")&&(this.player.controlBar.show(),this.player.bigPlayButton.show()),!this.option("autoplay")||!this.player.paused()||this.fullscreenState!==c.FULLSCREEN.OPENED&&this.always||(this.player.muted(!0),this.isPlayed?this.lastAction=E:t===c.SLIDE_SHOWN_BY.USER&&(this.lastAction=w),this.play())):this.isStarted&&this.isInView&&this.isSlideShown&&!this.preload&&this.areSourcesAdded&&this.createVideoNode()},e.onStopActions=function(){this.player&&(this.player.paused()||this.playingState!==c.VIDEO.PLAYING||(this.lastAction=C,this.pause()))},e.onInView=function(t){t?this._isReady?this.player&&this.isSlideShown&&t&&(this.option("autoplay")||this.playingState!==c.VIDEO.NONE&&!this.isVideoPaused)&&(this.lastAction=b,this.play()):this.isStarted&&!this.isInView&&(this.preload||this.isSlideShown)&&this.areSourcesAdded&&(this.isInView=!0,this.createVideoNode()):this.player&&(this.isVideoPaused=this.playingState===c.VIDEO.PAUSE,this.player.paused()||this.playingState!==c.VIDEO.PLAYING||(this.lastAction=I,this.pause()))},e.startFullInit=function(t){this.isStartedFullInit||(l.prototype.startFullInit.call(this,t),this.normalizeOptions(),this.thumbnail=this.option("thumbnail"),this.getId("video-"),this.instanceNode.addClass("sirv-video"),this.instanceNode.addEvent("mousedown",function(t){t.stop()}))},e.onBeforeFullscreenIn=function(){this.controlsFullscreen=!1,this.player&&(this.isVideoPaused=this.playingState===c.VIDEO.PAUSE,this.toggleFullscreenButton())},e.onAfterFullscreenIn=function(){this.enableAction(),this.isSlideShown&&this.isInView&&this.player&&this.player.paused()&&(this.always&&this.option("controls.enable")&&(this.player.controlBar.show(),this.player.bigPlayButton.show()),this.option("autoplay")&&!this.isVideoPaused&&(this.player.currentTime(this.currentTime),this.playingState=c.VIDEO.PLAY,this.player.play_()))},e.onBeforeFullscreenOut=function(){this.disableAction(),this.option("controls.fullscreen")&&(this.controlsFullscreen=!0),this.player&&(this.isVideoPaused=this.playingState===c.VIDEO.PAUSE,this.toggleFullscreenButton())},e.onAfterFullscreenOut=function(){this.isSlideShown&&this.isInView&&this.player&&(this.always&&this.option("controls.enable")&&(this.player.controlBar.hide(),this.player.bigPlayButton.hide()),this.option("autoplay")&&!this.isVideoPaused&&(this.lastAction=w,this.play()))},e.onSecondSelectorClick=function(){this.player&&this.isSlideShown&&this.isInView&&(this.fullscreenState!==c.FULLSCREEN.OPENED&&this.always||(this.player.paused()?(this.lastAction=w,this.play()):this.playingState===c.VIDEO.PLAYING&&this.isLoadeddata&&this.pause()))},e.createVideoNode=function(){this.videoNode||(this.videoNode=x.$new("video",{class:u+"-sirv-video",preload:"none"}),this.videoNode.addClass("video-js"),this.instanceNode.append(this.videoNode),this.waitToStart.start(),this.done())},e.play=function(){this.player&&!this.playPromise&&(this.playingState=c.VIDEO.PLAY,this.playPromise=this.player.play())},e.pause=function(){var t=this;this.player&&(this.playPromise||new a(function(t){return t(null)})).then(function(){t.player.pause(),t.playPromise=null}).catch(function(){t.player.pause(),t.playPromise=null})},e.loadContent=function(){this.createVideoNode()},e.run=function(t,e,i){i=l.prototype.run.call(this,t,e,i);return i&&(this.calcContainerSize(),this.isInView&&(this.preload||this.isSlideShown)&&this.areSourcesAdded&&this.createVideoNode(),this.startGettingInfo()),i},e.createMasterManifest=function(){var o=this,r=["#EXTM3U"],a=this.option("motionFactor"),h=this.option("dynamicAdaptiveStreaming");return this.HLS.forEach(function(t){var e,i,s,n="#EXT-X-STREAM-INF:PROGRAM-ID=1,";h&&(n+="BANDWIDTH="+(e=t,i=o.fps,s=a,parseInt(e.width*e.height*i*s*.07,10))+","),n+="RESOLUTION="+t.width+"x"+t.height,r.push(n),r.push(f+t.index)}),r.join("\n")},e.toggleFullscreenButton=function(){var t=this.player.controlBar.getChild("FullscreenToggle"),e=this.player.options_.userActions;this.controlsFullscreen?(e.doubleClick=!0,t.show()):(e.doubleClick=!1,t.hide())},e.isHLS=function(){return 0<this.HLS.length&&"ie"!==x.browser.uaName},e.getThumbnailSize=function(){var t=this.isHLS()?this.HLS[this.HLS.length-1].height:this.info.height||this.info.original.height||140,e=t;return this.currentSize.height<e&&(e=this.currentSize.height),t<(e*=x.DPPX)&&(e=t),e},e.getPosterUrl=function(){return this.getThumbnailPoster(this.url.split("?")[0]+"?thumbnail="+this.posterSize)},e.done=function(){var t,e,i,s,n,o,r,a,h=this;this._isReady||(this.posterSize=this.getThumbnailSize(),t=this.getPosterUrl(),!(e={inline:!1})===this.option("controls.volume")&&(e=!1),s={nativeTextTracks:!1,nativeAudioTracks:!1,nativeVideoTracks:!1},i={overrideNative:(n=this.isHLS())&&"safari"!==x.browser.uaName},s.smoothQualityChange=!0,s.vhs=i,s={controls:this.option("controls.enable"),fluid:!1,muted:0===this.option("volume")||this.option("autoplay"),loop:this.option("loop"),autoplay:this.option("autoplay")&&this.isSlideShown,preload:this.option("autoplay")||this.option("preload")?"auto":"none",textTrackSettings:!1,controlBar:{fullscreenToggle:!0,volumePanel:e,muteToggle:!1,children:["playToggle","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","volumePanel","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},poster:t,playsinline:!0,html5:s,userActions:{doubleClick:!0},qualityLevels:{}},this.option("controls.quality")?this.instanceNode.addClass(g):this.option("controls.speed")&&this.instanceNode.addClass(v),this.option("controls.speed")&&(s.playbackRates=p),n?(this.player=x.W.node.videojs(this.videoNode.node,s),"safari"!==x.browser.uaName&&this.player.src({src:"data:application/x-mpegURL;base64,"+window.btoa(this.createMasterManifest()),type:"application/x-mpegURL"}),this.player.hlsQualitySelectorAutoMode({visibility:this.option("controls.quality"),hls:this.HLS,host:f,max:this.option("quality.max"),min:this.option("quality.min")}),this.pluginResizeDebounce=d.debounce(function(){h.player.hlsQualitySelectorAutoMode.recalc()},600)):(s.src=this.url,n=function(t){switch(t=(t=(t=(t=(t=t||"").split("?")[0]).split("."))[t.length-1]).toLowerCase()){case"3gp":t="video/3gpp";break;case"flv":t="video/flv";break;case"mp4":t="video/mp4";break;case"ogv":t="video/ogg";break;case"webm":t="video/webm";break;default:t=""}return t}(this.url),this.videoNode.append(x.$new("source",{src:this.url,type:n})),this.player=videojs(this.videoNode.node,s)),this.player.volume(parseInt(this.option("volume"),10)/100),this.toggleFullscreenButton(),this.player.on("loadeddata",function(){h.isLoadeddata=!0}),this.player.on("play",function(){var t;h.isVideoPaused=!1,h.playingState=c.VIDEO.PLAYING,h.isSlideShown&&h.isInView?(t="user",h.lastAction===b?t="viewport":h.lastAction===w?t="autoplay":h.lastAction===E&&(t="itemchange"),h.lastAction=y,h.isPlayed?h.sendEvent("resume",{event:{reason:t,playbackTime:h.player.currentTime()}}):(h.isPlayed=!0,h.sendEvent("play",{event:{reason:t}}))):(h.lastAction=I,h.pause())}),this.player.on("pause",function(){var t;h.player.currentTime()!==h.player.duration()&&(h.playingState=c.VIDEO.PAUSE,t="user",h.lastAction===I?t="viewport":h.lastAction===C&&(t="itemchange"),h.lastAction=y,h.sendEvent("pause",{event:{reason:t,playbackTime:h.player.currentTime()}}))}),this.player.on("ended",function(){h.isPlayed=!1,h.isEnded=!0,h.playingState=c.VIDEO.PAUSE,h.sendEvent("end")}),this.player.on("fullscreenchange",function(){var t="fullscreenOut";h.player.isFullscreen()&&(t="fullscreenIn"),h.sendEvent(t,{event:{playbackTime:h.player.currentTime()}})}),o=null,a=r=0,this.player.on("timeupdate",function(){r=a,a=h.player.currentTime()}),this.player.on("seeking",function(){null===o&&(o=r)}),this.player.on("seeked",function(){h.isEnded?h.isEnded=!1:h.sendEvent("seek",{event:{seekStart:o,seekEnd:h.player.currentTime()}}),o=null}),this.player.on("error",function(t){console.log("error",t)}),x.browser.touchScreen&&x.browser.mobile&&this.player.on("touchstart",function(t){"video"===x.$(t.target).getTagName()&&h.player.hasClass("vjs-user-active")&&(h.player.paused()?(h.lastAction=w,h.play()):h.pause())}),this.player.on("ready",function(){h.option("controls.fullscreen")||h.player.off(h.player.tech_,"dblclick",h.player.handleTechDoubleClick_),h.option("controls.enable")&&h.fullscreenState!==c.FULLSCREEN.OPENED&&h.always&&(h.player.controlBar.hide(),h.player.bigPlayButton.hide()),h.isSlideShown&&h.isInView&&h.option("autoplay")&&(h.fullscreenState!==c.FULLSCREEN.OPENED&&h.always||(h.player.muted(!0),h.lastAction=w,h.play(),h.player.muted(!0))),l.prototype.done.call(h),h.sendContentLoadedEvent()}))},e.getThumbnailPoster=function(t){var e=(e=t)||"";return!this.thumbnail&&0!==this.thumbnail||(t=parseFloat(this.thumbnail),!isNaN(t)&&t<this.info.original.duration?e+="&video.thumbPos="+this.thumbnail:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/i.test(this.thumbnail)&&(e=this.thumbnail)),e},e.calcContainerSize=function(){var t,e=this.instanceNode.getSize();e.height&&e.width?this.currentSize=e:((t={width:0,height:0}).width=this.info.original.width,t.height=this.info.original.height,e.height?(this.currentSize.height=e.height,this.currentSize.width=t.width/t.height*e.height):(this.currentSize.width=e.width,this.currentSize.height=t.height/t.width*e.width))},e.createPinchEvent=function(){var i=this;l.prototype.createPinchEvent.call(this,this.instanceNode),this.pinchCloud.onPinchStart=function(t){x.contains([c.FULLSCREEN.OPENING,c.FULLSCREEN.CLOSING],i.fullscreenState)||(i.pinchCloud.pinch=!0,i.pinchCloud.scale=t.scale,i.sendEvent("pinchStart"))},this.pinchCloud.onPinchMove=function(t){var e;i.pinchCloud.pinch&&!i.pinchCloud.block&&(e=t.scale-i.pinchCloud.scale,i.fullscreenState===c.FULLSCREEN.OPENED?e<-.08&&(i.pinchCloud.block=!0,i.sendEvent("fullscreenOut")):.11<=t.scale&&(i.pinchCloud.block=!0,i.sendEvent("fullscreenIn")))}},e.onResize=function(){var t;return!!this.player&&(this.isSlideShown&&this.isInView||this.player.paused()||this.playingState!==c.VIDEO.PLAYING||this.pause(),this.pluginResizeDebounce&&this.pluginResizeDebounce(),this.playingState===c.VIDEO.NONE&&(this.calcContainerSize(),(t=this.getThumbnailSize())>this.posterSize&&t-this.posterSize>=S&&(this.posterSize=t,this.player.poster(this.getPosterUrl()))),!0)},e.getType=function(){return this.type},e.destroy=function(){return this.player&&(this.player.off(),this.player.dispose(),this.player=null),this.videoNode&&(this.videoNode.remove(),this.videoNode=null),this.pluginResizeDebounce&&(this.pluginResizeDebounce.cancel(),this.pluginResizeDebounce=null),this.instanceNode.clearEvents(),this.instanceNode.removeClass("sirv-video"),this.instanceNode.removeClass(m),this.instanceNode.removeClass(g),this.instanceNode.removeClass(v),this.playPromise=null,this.HLS=[],l.prototype.destroy.call(this),!0},t}(r)}),Sirv.define("Slider",["require","module","bHelpers","magicJS","globalVariables","globalFunctions","ResponsiveImage","helper","Promise!","EventEmitter","ContextMenu","ComponentLoader","defaultsVideoOptions","ViewerImage","SliderBuilder"],function(s,t,l,e,O,h,n,d,A,i,o,r,a,c,u){var p,T=e,g=T.$,m=O.smv,f=m+"-thumbnail",v=m+"-selector",S=(T.W.node.devicePixelRatio,{orientation:{type:"string",enum:["horizontal","vertical"],defaults:"horizontal"},arrows:{type:"boolean",defaults:!0},loop:{type:"boolean",defaults:!0},quality:{type:"number",minimum:0,maximum:100,defaults:80},hdQuality:{type:"number",minimum:0,maximum:100,defaults:60},itemsOrder:{type:"array",defaults:[]},autostart:{oneOf:[{type:"string",enum:["created","visible","off"]},{type:"boolean",enum:[!1]}],defaults:"visible"},threshold:{type:"number",minimum:0,defaults:0},slide:{first:{type:"number",minimum:0,defaults:0},delay:{type:"number",minimum:9,defaults:3e3},preload:{type:"boolean",defaults:!0},autoplay:{type:"boolean",defaults:!1},animation:{type:{oneOf:[{type:"string",enum:["off","slide","fade"]},{type:"boolean",enum:[!1]}],defaults:"fade"},duration:{type:"number",minimum:9,defaults:200}},socialbuttons:{enable:{type:"boolean",defaults:!1},types:{facebook:{type:"boolean",defaults:!0},twitter:{type:"boolean",defaults:!0},linkedin:{type:"boolean",defaults:!0},reddit:{type:"boolean",defaults:!0},tumblr:{type:"boolean",defaults:!0},pinterest:{type:"boolean",defaults:!0},telegram:{type:"boolean",defaults:!0}}}},thumbnails:{enable:{type:"boolean",defaults:!0},size:{type:"number",minimum:5,defaults:70},position:{type:"string",enum:["top","left","right","bottom"],defaults:"bottom"},type:{type:"string",enum:["square","auto","bullets","grid","crop"],defaults:"square"},always:{type:"boolean",defaults:!1},target:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:!1},watermark:{type:"boolean",defaults:!0}},fullscreen:{enable:{type:"boolean",defaults:!0},always:{type:"boolean",defaults:!1},native:{type:"boolean",defaults:!1},thumbnails:{enable:{type:"boolean",defaults:!0},size:{oneOf:[{type:"string",enum:["auto"]},{type:"number",minimum:5}],defaults:"auto"},position:{type:"string",enum:["top","left","right","bottom"],defaults:"bottom"},type:{type:"string",enum:["square","auto","bullets","grid","crop"],defaults:"square"},always:{type:"boolean",defaults:!1},autohide:{type:"boolean",defaults:!1},watermark:{type:"boolean",defaults:!0}}},contextmenu:{enable:{type:"boolean",defaults:!1},text:{zoom:{in:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Zoom In"},out:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Zoom Out"}},fullscreen:{enter:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Enter Full Screen"},exit:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Exit Full Screen"}},download:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Download Image"}}},productdetail:{enable:{type:"boolean",defaults:!1},position:{type:"string",enum:["top","right","bottom","left"],defaults:"top"}}}),y=null,w=null,b=null,E=null,I=null,C=(t=t.config(),p={},d.objEach(t,function(i,t){"description"!==i&&(p[i]=new A(function(e){s([t],function(t){switch(i){case"spin":y=t;break;case"zoom":w=t;break;case"video":b=t;break;case"productDetail":E=t;break;case"socialButtons":I=t}e()})}))}),{load:function(t){var e=[];return(t=t||[]).forEach(function(t){p[t]&&e.push(p[t])}),e.length?A.all(e):A.resolve()}}),x=function(n){"use strict";function t(t,e,i){var s=n.call(this)||this;return s.node=g(t),s.options=e,s.type=O.SLIDE.TYPES.NONE,s.imgSrc=null,s.effect=null,s.additionalEffects=[],s.isStarted=!1,s.isPrepared=!1,s.toolOptions={},s.api={},s.isActive=!1,s.additionalOptions=i,s.parse(),s.setEvents(),s}l.inheritsLoose(t,n),t.isExist=function(t){var e=!1,t=d.getSirvType(t);return t&&{Image:c,Spin:y,Zoom:w,Video:b}[T.camelize("-"+O.SLIDE.NAMES[t.type])]&&(e=!0),e};var e=t.prototype;return e.createAPI=function(){var r=this;if(this.effect){this.api=this.effect.api;var t=[],e=O.SLIDE.TYPES;switch(this.type){case e.SPIN:t=["play","rotate","rotateX","rotateY","zoomIn","zoomOut"];break;case e.ZOOM:this.api.zoomIn&&(t=["zoomIn","zoomOut"])}t.forEach(function(t){var o=r.api[t];r.api[t]=function(){var t=!1,e=o;if(r.isActive){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];t=e.apply(r,s)}return t}})}},e.setEvents=function(){var e=this;this.on("stats",function(t){t.stopEmptyEvent(),t.data.component=O.SLIDE.NAMES[e.type]}),this.on("componentEvent",function(t){t.stopEmptyEvent(),t.data.component=O.SLIDE.NAMES[e.type],"ready"===t.data.type&&(e.type===O.SLIDE.TYPES.IMAGE&&null!==t.data.data.imageIndex&&t.stopAll(),e.toolOptions=e.effect.getOptions())})},e.parse=function(){var t=d.getSirvType(this.node.node);t&&(this.type=t.type,this.imgSrc=t.imgSrc)},e.push=function(t){var e;c&&((e=new c(t,{options:this.options.image,isFullscreen:this.additionalOptions.isFullscreen,imageIndex:this.additionalEffects.length})).setParent(this),this.additionalEffects.push({node:t,src:g(t).attr("src"),datasrc:g(t).attr("data-src"),effect:e}))},e.sendEvent=function(t){this.effect&&this.effect.sendEvent&&this.effect.sendEvent(t)},e.resize=function(){this.broadcast("resize")},e.startFullInit=function(e){var i=this;this.effect&&(this.effect.startFullInit(e?e[this.type]:null),this.additionalEffects.length&&this.additionalEffects.forEach(function(t){t.effect&&t.effect.startFullInit(e?e[i.type]:null)}))},e.getSelectorImgUrl=function(t){return this.effect.getSelectorImgUrl(t)},e.getInfoSize=function(){var i=this;return this.type===O.SLIDE.TYPES.IMAGE?new A(function(e,t){A.all([i.effect.getInfoSize()].concat(i.additionalEffects.map(function(t){return t.effect.getInfoSize()}))).then(function(t){e(t[0])}).catch(t)}):this.effect.getInfoSize()},e.start=function(){if(!this.isPrepared){this.isPrepared=!0;var t={isFullscreen:this.additionalOptions.isFullscreen,quality:this.additionalOptions.quality,hdQuality:this.additionalOptions.hdQuality,isHDQualitySet:this.additionalOptions.isHDQualitySet,always:this.additionalOptions.always,nativeFullscreen:this.additionalOptions.nativeFullscreen},e=O.SLIDE.TYPES;switch(this.type){case e.IMAGE:c&&(this.effect=new c(this.node.node,T.extend(t,{options:this.options.image,imageIndex:null})),this.effect.setParent(this));break;case e.PANZOOM:case e.ZOOM:w&&(this.effect=new w(this.node.node,T.extend(t,{options:this.options.zoom})),this.effect.setParent(this));break;case e.SPIN:y&&(this.node.setCss({width:"100%",height:"100%"}),this.effect=new y(this.node.node,T.extend(t,{options:this.options.spin})),this.effect.setParent(this));break;case e.VIDEO:b&&(this.effect=new b(this.node.node,T.extend(t,{options:this.options.video,nativeFullscreen:this.additionalOptions.nativeFullscreen})),this.effect.setParent(this))}this.createAPI()}},e.isThumbnailGif=function(){return!(!this.effect||this.type!==O.SLIDE.TYPES.SPIN)&&this.effect.isThumbnailGif()},e.isZoomSizeExist=function(){var t=O.SLIDE.TYPES;return!(!this.effect||!T.contains([t.SPIN,t.PANZOOM,t.ZOOM],this.type))&&this.effect.isZoomSizeExist()},e.startGettingInfo=function(){this.effect&&this.effect.startGettingInfo()},e.startTool=function(e,i,s){!this.isStarted&&this.effect&&(this.isStarted=!0,this.effect.run(e,i,s),this.additionalEffects.length&&this.additionalEffects.forEach(function(t){t.effect&&t.effect.run(e,i,s)}))},e.loadContent=function(){this.isStarted&&this.effect.loadContent()},e.loadThumbnail=function(){this.isStarted&&this.effect.loadThumbnail()},e.getType=function(){return this.type},e.getData=function(){var t={};return this.effect&&(delete(t=T.extend(t,this.api)).start,delete t.stop,delete t.refresh),t},e.getOriginImageUrl=function(){return this.effect?this.effect.getOriginImageUrl():null},e.getZoomData=function(){return T.contains([O.SLIDE.TYPES.SPIN,O.SLIDE.TYPES.ZOOM],this.type)?{isZoomed:this.effect.isZoomed(),zoom:this.effect.getZoomData()}:null},e.getSpinOrientation=function(){return this.type===O.SLIDE.TYPES.SPIN?this.effect.getOrientation():null},e.getSocialButtonData=function(t,e){var i=null;return this.isStarted&&(i=this.type===O.SLIDE.TYPES.SPIN?this.effect.getSocialButtonData(t,e):this.effect.getSocialButtonData(t)),i},e.loadVideoSources=function(){this.effect&&this.effect.addSources()},e.isEffectActive=function(){return!(!this.effect||"spin"!==this.type)&&this.effect.isActive()},e.activate=function(){this.isActive||(this.isActive=!0)},e.deactivate=function(){this.isActive=!1},e.getToolOptions=function(){return this.toolOptions},e.destroy=function(){this.effect&&(this.effect.destroy(),this.additionalEffects.length&&this.additionalEffects.forEach(function(t){t.effect?t.effect.destroy():!t.src&&t.datasrc&&t.node.removeAttribute("src")})),this.toolOptions={},this.api={},this.isActive=!1,this.isStarted=!1,this.isPrepared=!1,this.off("stats"),this.off("componentEvent"),n.prototype.destroy.call(this)},t}(i),z={},P=function(i){"use strict";function t(t){var e=i.call(this)||this;return e.options=T.extend({effect:"blank",orientation:"horizontal",time:600,easing:"ease-in-out"},t),e.isMove=!1,e.callbackData=null,e.effectName="blank",e.effect=null,e.setEvents(),e}l.inheritsLoose(t,i);var e=t.prototype;return e.setEvents=function(){var e=this;this.on("effectStart",function(t){t.data={callbackData:e.callbackData},e.isMove=!0}),this.on("effectEnd",function(t){t.data={callbackData:e.callbackData},e.isMove=!1,e.effect.destroy(),e.effect=null})},e.getNamesOfEffects=function(){return T.hashKeys(z)},e.make=function(t,e,i,s){var n=T.extend(this.options,i||{});this.stop();i=n.effect,i=T.camelize("-"+i);Object.prototype.hasOwnProperty.call(z,i)||(i="Blank"),this.effect=new z[i](t,e,{time:n.time,easing:n.easing,direction:function(t,e){t="horizontal"===e?"next"===t?"right":"left":"next"===t?"bottom":"top";return t}(n.direction,n.orientation)}),this.effect.setParent(this),this.callbackData=s,this.effect.make()},e.stop=function(){this.effect&&(this.effect.destroy(),this.effect=null),this.callbackData=null},e.destroy=function(){this.stop(),this.off("effectStart"),this.off("effectEnd"),this.isMove=!1,i.prototype.destroy.call(this)},t}(i),t=function(n){"use strict";function t(t,e,i){var s=n.call(this)||this;return s.name="blank",s.elements=[t,e],s.elements[0].node=g(s.elements[0].node),s.elements[1].node=g(s.elements[1].node),s.options=T.extend({},i||{}),s.states={NOT_STARTED:0,MOVING:1,ENDED:2},s.state=s.states.NOT_STARTED,s.isDestroyed=!1,s}l.inheritsLoose(t,n);var e=t.prototype;return e._show=function(t){this.elements[t].node.setCss({opacity:1,visibility:"visible"})},e._hide=function(t){this.elements[t].node.setCss({opacity:0,visibility:"hidden"})},e._start=function(){this.emit("effectStart",{name:this.name,indexes:[this.elements[0].index,this.elements[1].index]}),this._show(0),this.elements[0].node.setCssProp("z-index",9),this._show(1),this.elements[1].node.setCssProp("z-index",7)},e._move=function(t){t()},e._end=function(){this.state!==this.states.ENDED&&(this.state=this.states.ENDED,this._hide(0),this.emit("effectEnd",{name:this.name,indexes:[this.elements[0].index,this.elements[1].index]}))},e._clear=function(){this.elements.forEach(function(t){t.node.setCss({zIndex:"",opacity:"",visibility:""})})},e.make=function(){var t=this;this.state===this.states.NOT_STARTED&&(this.state=this.states.MOVING,this._start(),this._move(function(){t._end(),t._clear()}))},e.destroy=function(){this.isDestroyed||(this.isDestroyed=!0,this._end(),this._clear(),this.state=this.states.ENDED,n.prototype.destroy.call(this,this))},t}(i);function N(t){return t.map(function(t){return t+"%"})}z.Blank=t,z.Slide=function(n){"use strict";function t(t,e,i){e=n.call(this,t,e,i)||this;return e.options=T.extend(e.options,T.extend({direction:"left",time:600,easing:"ease-in-out"},i||{})),e.name="slide",e.from=g([0,-100]),e.to=g([100,0]),T.contains(["right","bottom"],e.options.direction)&&(e.from[1]*=-1,e.to[0]*=-1),e.from=N(e.from),e.to=N(e.to),e}l.inheritsLoose(t,n);var e=t.prototype;return e._show=function(t){var e=this.elements[t].node;T.contains(["left","right"],this.options.direction)?(this.from[t]=this.from[t]+", 0%",this.to[t]=this.to[t]+", 0%"):(this.from[t]="0%, "+this.from[t],this.to[t]="0%, "+this.to[t]),e.setCssProp("transform","translate3d("+this.from[t]+", 0px)"),n.prototype._show.call(this,t)},e._move=function(e){var i=this,s=this.options;this.elements[1].node.addEvent("transitionend",function(t){i.elements[1].node.node===t.getTarget()&&(t.stop(),n.prototype._move.call(i,e))}),this.elements.forEach(function(t,e){t.node.getSize(),t.node.setCssProp("transition","transform "+s.time+"ms "+s.easing),t.node.setCssProp("transform","translate3d("+i.to[e]+", 0px)")})},e._clear=function(){this.elements.forEach(function(t){t.node.removeEvent("transitionend"),t.node.setCss({transform:"",transition:""})}),n.prototype._clear.call(this,this)},t}(t);t=function(n){"use strict";function t(t,e,i){e=n.call(this,t,e,i)||this;return e.options=T.extend(e.options,T.extend({time:600,easing:"linear"},i||{})),e.name="fade",e.from=g([1,0]),e.to=g([0,1]),e}l.inheritsLoose(t,n);var e=t.prototype;return e._show=function(t){n.prototype._show.call(this,t),this.elements[t].node.setCssProp("opacity",this.from[t])},e._move=function(e){var i=this,s=this.options;this.elements[1].node.addEvent("transitionend",function(t){i.elements[1].node.node===t.getTarget()&&(t.stop(),n.prototype._move.call(i,e))}),this.elements.forEach(function(t,e){t.node.getSize(),t.node.setCssProp("transition","opacity "+s.time+"ms "+s.easing),t.node.setCssProp("opacity",i.to[e])})},e._clear=function(){this.elements.forEach(function(t){t.node.removeEvent("transitionend"),t.node.setCss({opacity:"",transition:""})}),n.prototype._clear.call(this)},t}(t);z.Fade=t;var D,L,R,M,F,k,_,B=function(e){"use strict";function t(t){var i,s=e.call(this)||this;return s.options=T.extend({orientation:"horizontal",customClass:""},t||{}),s.arrows=(s.options.orientation,i=s.options.customClass,g(["prev","next"]).map(function(t){var e=T.$new("div").addClass(m+"-arrow-control "+m+"-arrow-control-"+t),t=T.$new("div").addClass(m+"-button").addClass(m+"-arrow").addClass(m+"-arrow-"+t);return i&&""!==i&&t.addClass(m+"-arrow-"+i),e.append(t),e})),s.arrows.forEach(function(i,t){var e=t?"next":"prev",t=g(i.node.firstChild);i.store("arrowType",e),t.append(T.$new("div").addClass(m+"-icon")),t.addEvent("btnclick tap",g(function(t,e){e.stop(),i.fetch("disabled")||s.emit("arrowAction",{data:{type:t}})}).bind(l.assertThisInitialized(s),e))}),s.isShow=!0,s}l.inheritsLoose(t,e);var i=t.prototype;return i.getNodes=function(){return g([this.arrows[0],this.arrows[1]])},i.show=function(){this.isShow||(this.arrows.forEach(function(t){t.removeClass(m+"-hidden")}),this.isShow=!0)},i.hide=function(){this.isShow&&(this.isShow=!1,this.arrows.forEach(function(t){t.addClass(m+"-hidden")}))},i.disable=function(t){t&&this.isShow?(t="forward"===t?1:0,this.arrows[t].store("disabled",!0),g(this.arrows[t].node.firstChild).attr("disabled","")):this.arrows.forEach(function(t){g(t.node.firstChild).removeAttr("disabled"),t.store("disabled",!1)})},i.destroy=function(){this.arrows.forEach(function(t){g(t.node.firstChild).removeEvent("btnclick tap"),t.del("arrowType"),t.del("disabled"),t.remove()}),this.arrows=g([]),this.isShow=!1,e.prototype.destroy.call(this)},t}(i),U=(D={width:560,height:315},L=0,R=1,M=2,k=function(o){"use strict";function t(t,e,i,s,n){s=o.call(this,t,e,i,s)||this;return s.imageOrientation="horizontal",s.isSirv=!1,s.watermark=n,s.src=null,s.srcset=null,s.imageSize={width:0,height:0},s.getProportionPromise=null,s.getUrlPromise=null,s.loadImagePromise=null,s}l.inheritsLoose(t,o);var e=t.prototype;return e.setCssSize=function(){T.contains(["square","crop"],this.type)?this.customSquare():this.removeCustomSquare(),o.prototype.setCssSize.call(this)},e.getProportion=function(){var s=this;return this.getProportionPromise||(this.getProportionPromise=new A(function(i,t){s.destroyed?i({width:0,height:0}):s.emit("getSelectorProportion",{data:{resultingCallback:function(t){var e=t.size;s.isSirv=t.isSirv,e?(e.width||(e=D),i(e)):i(D)}}})})),this.getProportionPromise},e.setImageUrl=function(t,e,i,s){this.src=t,this.srcset=e,this.node&&((this.src||this.srcset)&&(s&&this.node.attr("referrerpolicy",s),this.srcset&&this.node.attr("srcset",this.srcset+" 2x"),this.node.attr("src",this.src),T.browser.mobile||this.node.addEvent("mousedown",function(t){t.stopDefaults()})),i&&this.node.attr("alt",i))},e.getUrl=function(){var s=this;return this.getUrlPromise||(this.getUrlPromise=new A(function(e,i){var t;s.destroyed?e(s):(t=s.getSelectorSize(),s.emit("getSelectorImgUrl",{data:{crop:"crop"===s.type,type:s.type,watermark:s.watermark,size:t,resultingCallback:function(t){t?(s.setImageUrl(t.src,t.srcset,t.alt,t.referrerpolicy),e(s)):i(s)}}}))})),this.getUrlPromise},e.setImageData=function(t){this.imageSize=t,this.imageOrientation=this.imageSize.width>=this.imageSize.height?"horizontal":"vertical"},e.loadImage=function(){var s=this;return this.loadImagePromise||(this.loadImagePromise=new A(function(e,i){s.node?d.loadImage(s.isSirv?s.node.node:s.node.node.src).then(function(t){s.loaded=!0,s.setImageData(t.size),s.setCssSize(),e(s)}).catch(function(t){(s.destroyed?e:i)(s)}):e(s)})),this.loadImagePromise},e.customSquare=function(){var t;2<Math.abs(this.imageSize.width-this.imageSize.height)&&"div"!==this.node.getTagName()&&(t=T.$new("div").setCss({overflow:"hidden",position:"relative"}),this.node.attr("data-image-orientation",this.imageOrientation),t.append(this.node),this.node.setCss({width:"",height:"","max-width":"none"}),"crop"===this.type?"horizontal"===this.imageOrientation?this.node.setCssProp("height",this.size):this.node.setCssProp("width",this.size):"vertical"===this.imageOrientation?this.node.setCssProp("height",this.size):this.node.setCssProp("width",this.size),this.node=t)},e.removeCustomSquare=function(){this.node&&"div"===this.node.getTagName()&&(this.node.removeEvent("touchstart selectstart contextmenu"),this.node.remove(),this.node=g(this.node.node.firstChild),this.node.setCss({width:"",height:"",maxWidth:""}),this.node.removeAttr("data-image-orientation"))},e.complete=function(){var t=this;return this.getUrl().then(function(){return t.loadImage()})},e.destroy=function(){this.node&&this.node.removeEvent("mousedown"),this.getProportionPromise=null,this.getUrlPromise=null,this.loadImagePromise=null,o.prototype.destroy.call(this)},t}(F=function(o){"use strict";function t(t,e,i,s){var n=o.call(this)||this;return n.node=g(t),n.type=e,n.size=i,n.orientation=s,n.getPlaceholderSizePromise=null,n.destroyed=!1,n.loaded=!1,n.content=null,n.node.getTagName()===f&&(n.content=T.$A(n.node.node.childNodes)),n}l.inheritsLoose(t,o);var e=t.prototype;return e.isLoaded=function(){return this.loaded},e.setCssSize=function(){var t=this.getSelectorSize();this.node.setCss(t)},e.getSelectorSize=function(){var t={};return T.contains(["square","crop"],this.type)?(t.width=this.size,t.height=this.size):"horizontal"===this.orientation?t.height=this.size:t.width=this.size,t},e.getPlaceholderSize=function(){var s=this;return this.getPlaceholderSizePromise||(this.getPlaceholderSizePromise=new A(function(t){var e,i=s.getSelectorSize();i.width&&i.height?t(i):s.destroyed?t({width:0,height:0}):s.getProportion().then(function(t){e=t}).finally(function(){i.width?i.height=e.height/e.width*i.width:i.width=e.width/e.height*i.height,t(i)})})),this.getPlaceholderSizePromise},e.getProportion=function(){return A.resolve(D)},e.complete=function(){return this.node.setCss({width:"",height:""}),this.setCssSize(),A.resolve()},e.getNode=function(){return this.node},e.appendTo=function(e){this.content?this.content.forEach(function(t){e.append(t)}):e.append(this.getNode())},e.destroy=function(){this.destroyed=!0,this.node=null,this.getPlaceholderSizePromise=null,o.prototype.destroy.call(this)},t}(i)),_=function(a){"use strict";function t(t,e,i,s,n,o){var r=a.call(this)||this;return r.UUID=s,r.options=d.deepExtend({standard:{type:"square",size:70,orientation:"horizontal",watermark:!0},fullscreen:{type:"square",size:70,orientation:"horizontal",watermark:!0},activeClass:m+"-active",placeholderClass:m+"-thumbnail-placeholder",selectorContent:null,disabled:!1},n||{}),r.parentContainer=g(t),r.index=e,r.selector=g(i)||T.$new("div"),r.container=T.$new("div").addClass(m+"-item").setCss({display:"inline-block"}),r.placeholder=T.$new("div").addClass(r.options.placeholderClass),r.size={width:0,height:0},r.currentObject=null,r.isActive=!1,r.disabled=!1,r.destroyed=!1,r.container.append(r.selector),r.parentContainer.append(r.container),r.options.disabled&&r.disable(),r.infoPromise=o||A.resolve(!1),r.state=L,r.initPromise=null,r.init(),r}l.inheritsLoose(t,a);var e=t.prototype;return e.init=function(){var n=this;return this.initPromise||(this.initPromise=new A(function(e){n.infoPromise.then(function(){var t,i,s;n.standard=n.createContent(n.options.standard),n.standard&&n.standard instanceof k&&(t=n.options.standard,i=n.options.fullscreen,s=!0,d.objEach(t,function(t,e){s&&e!==i[t]&&(s=!1)}),s)?n.fullscreen=n.standard:n.fullscreen=n.createContent(n.options.fullscreen,!0),n.selector.append(n.placeholder),n.selector.attr("data-type")||n.selector.setCssProp("font-size",0),n.setEvents(),n.setCustomEvent(),e()})})),this.initPromise},e.createContent=function(t){var e;return"bullets"!==t.type&&(e=this.options.selectorContent?new F(this.options.selectorContent,t.type,t.size,t.orientation):(e=g(new Image),new k(e,t.type,t.size,t.orientation,t.watermark))).setParent(this),e},e.getProportion=function(){var i=this,s=A.resolve();return this.disabled||(this.state===M&&this.fullscreen?s=this.fullscreen.getProportion():this.standard&&(s=this.standard.getProportion())),new A(function(t,e){i.init().then(function(){s.then(t).catch(e)})})},e.activatedSelector=function(){return this.options.activated},e.setEvents=function(){var e=this;this.on("getSelectorProportion",function(t){t.data.UUID=e.UUID}),this.on("getSelectorImgUrl",function(t){t.data.UUID=e.UUID})},e.addPlaceholder=function(t,e){this.container.attr("data-selector-type",t),this.selector.append(this.placeholder),this.placeholder.setCss(e)},e.toggle=function(o){var r=this;return new A(function(e,n){r.init().then(function(){var i,s,t=A.resolve(),t=r.state!==o?(r.state=o,r.disabled?t:(i=r.standard,s=r.options.standard.type,2===o&&(i=r.fullscreen,s=r.options.fullscreen.type),"bullets"===s?(r.selector.node.innerHTML="",r.currentObject=s,r.container.attr("data-selector-type",s),r.emit("resize"),t):(i instanceof k||r.container.attr("data-selector-type",s),new A(function(e,t){i?i.getPlaceholderSize().then(function(t){if(r.state!==o||r.destroyed)e();else{if(!i.isLoaded()&&!r.options.selectorContent){for(;r.selector.node.firstChild;)r.selector.node.removeChild(r.selector.node.firstChild);r.addPlaceholder(s,t)}e(),i.complete().then(function(){if(r.state===o&&!r.destroyed){for(r.container.attr("data-selector-type",s),r.placeholder.remove();r.selector.node.firstChild;)r.selector.node.removeChild(r.selector.node.firstChild);i.appendTo(r.selector),r.currentObject=i,r.emit("resize")}}).catch(function(){})}}):e()})))):t;t.then(e).catch(n)})})},e.setEvent=function(){var e=this;this.container.addEvent("btnclick tap",function(t){t.stop(),e.emit("selectorAction",{data:e.UUID})})},e.setCustomEvent=function(){var t;this.options.selectorContent&&T.$(this.options.selectorContent).getTagName()===f&&(t=g(this.options.selectorContent).node.querySelectorAll("a"),T.$A(t).forEach(function(e){T.$(e).addEvent("btnclick tap",function(t){t.stop(),"#"===T.$(e).attr("href")[0]?(T.W.node.location.hash="",T.W.node.location.hash=T.$(e).attr("href")):T.W.node.open(T.$(e).attr("href"))})}))},e.activate=function(){this.isActive||(this.isActive=!0,this.container.addClass(this.options.activeClass))},e.isActivate=function(){return this.isActive},e.deactivate=function(){this.isActive&&(this.isActive=!1,this.container.removeClass(this.options.activeClass))},e.getSize=function(){return this.size=this.container.getSize(),this.size},e.disable=function(){this.disabled||(this.disabled=!0,this.container.attr("disabled","true"),this.container.setCssProp("display","none"),this.deactivate(),this.emit("resize"))},e._toggleForEnable=function(){var t;return this.state!==L&&(t=this.state===R?this.standard||"bullets":this.fullscreen||"bullets"),t!==this.currentObject?(t=this.state,this.state=L,this.toggle(t)):A.resolve()},e.enable=function(){var t=this;this.disabled&&(this.disabled=!1,this._toggleForEnable().then(function(){t.disabled||(t.container.removeAttr("disabled"),t.container.setCssProp("display",""),t.emit("resize"))}))},e.setIndex=function(t){this.index=t},e.getContainer=function(){return this.container},e.getOptions=function(){return this.options},e.isDestroyed=function(){return this.destroyed},e.isDisabled=function(){return this.disabled},e.destroy=function(){this.destroyed=!0,this.placeholder.remove(),this.off("getSelectorProportion"),this.off("getSelectorImgUrl"),this.standard&&(this.standard.destroy(),this.standard=null),this.fullscreen&&(this.fullscreen.destroy(),this.fullscreen=null),this.container.removeEvent("btnclick tap"),this.container.remove(),this.container=null,this.parentContainer=null,this.selector=null,a.prototype.destroy.call(this)},t}(i),function(s){"use strict";function t(t,e){var i=s.call(this)||this;return i.options=T.extend({isStandardGrid:!1,standardStyle:"square",standardSize:70,standardPosition:"bottom",standardWatermark:!0,isFullscreenGrid:!1,fullscreenStyle:"square",fullscreenSize:70,fullscreenPosition:"bottom",fullscreenAutohide:!1,fullscreenWatermark:!0,arrows:!0,activeClass:m+"-active"},e||{}),i.instanceNode=T.$new("div").addClass(m+"-selectors").setCss({opacity:0,visibility:"hidden",transition:""}),i.selectorsContainer=T.$new("div").addClass(m+"-ss"),i.selectorsScroll=T.$new("div").addClass(m+"-scroll").setCss({transform:"translate3d(0, 0, 0)"}),i.controlButton=T.$new("div").addClass(m+"-selectors-toggle-switch"),i.selectorsScrollContainer=T.$new("div").addClass(m+"-selectors-scroll-container"),i.pinnedNodeAtStart=null,i.pinnedNodeAtEnd=null,i.hasPinnedSelector=!1,i.baseSelectorsList=null,i.blocksPinnedInited=!1,i.pinnedStartList=[],i.pinnedEndList=[],i.isMove=!1,i.currentPosition=0,i.containerSize={width:0,height:0},i.halfContainerSize=0,i.scrollSize={width:0,height:0},i.halfScrollSize=0,i.currentActiveItem=null,i.isShown=!1,i.isControlShown=!0,i.isControlInDoc=!1,i.controlDebounce=null,i.isReady=!1,i.resizeTimeout=null,i.isActionsEnabled=!0,i.isDone=!1,i.isInView=!1,i.state=R,i.arrows=null,i.currentStylePosition=i.options.standardPosition,i.longSide=null,i.shortSide=null,i.currentAxis="x",i.isStarted=!1,i.isDestroyed=!1,i.setHasPinnedSelector(t),i.initPinnedBlocks(),i.selectors=[],t.forEach(function(t,e){i.selectors.push(i.createSelector(t,e))}),i.sortByBaseSelectors(i.selectors),i.orderPinnedSelectorByType(i.selectors),i.identifyVariables(),i.setContainerCss(),i}l.inheritsLoose(t,s);var e=t.prototype;return e.getSelectorsIndexByUUID=function(t){for(var e=null,i=0,s=this.selectors.length;i<s;i++)if(this.selectors[i].UUID===t){e=i;break}return e},e.getSelectorByUUID=function(t){t=this.getSelectorsIndexByUUID(t);return null!==t&&(t=this.selectors[t]),t},e.insertSelectorBefore=function(t,e){var i=this.selectors,s=this.selectorsScroll;this.hasPinnedSelector&&(e.getOptions().pinned?"start"===e.getOptions().pinned?(i=this.pinnedStartList,s=T.$(this.getPinnedScrollContainer(this.pinnedNodeAtStart)),t=this.updateIndex(i,e)):"end"===e.getOptions().pinned&&(i=this.pinnedEndList,s=T.$(this.getPinnedScrollContainer(this.pinnedNodeAtEnd)),t=this.updateIndex(i,e)):(i=this.baseSelectorsList,t=this.updateIndex(i,e)));var n=null;t+1<i.length&&(n=i[t+1].container),this.hide(),s.node.insertBefore(e.getContainer().node,n&&n.node)},e.insertSelector=function(t,e){this.blocksPinnedInited||(this.setHasPinnedSelector(e),this.initPinnedBlocks(),this.addPinnedBlocks());e=this.createSelector(e,t);this.isDone&&e.setEvent(),this.hide(),this.selectors.splice(t,0,e),this.selectors.forEach(function(t,e){t.setIndex(e)}),e.getOptions().pinned?(this.orderPinnedSelectorByType(e),this.baseSelectorsList&&this.baseSelectorsList.length||this.sortByBaseSelectors(this.selectors)):this.sortByBaseSelectors(this.selectors),this.insertSelectorBefore(t,e),e.toggle(this.state)},e.getScrollContainer=function(t){return"start"===t.pinned?this.getPinnedScrollContainer(this.pinnedNodeAtStart):"end"===t.pinned?this.getPinnedScrollContainer(this.pinnedNodeAtEnd):this.selectorsScroll},e.disableSelector=function(t){t=this.getSelectorByUUID(t);t&&(this.currentActiveItem&&this.currentActiveItem===t&&(this.currentActiveItem=null),this.hide(),t.disable())},e.enableSelector=function(t){t=this.getSelectorByUUID(t);t&&(this.hide(),t.enable())},e.pickOut=function(t){var e=null,i=this.getSelectorsIndexByUUID(t);null!==i&&(e=this.selectors[i]),e&&(t=e.getOptions().pinned,e.destroy(),this.selectors.splice(i,1),this.selectors.forEach(function(t,e){t.setIndex(e)}),this.reorderDataSelectors(t))},e.reorderDataSelectors=function(t){t&&this.setHasPinnedSelector(this.selectors),this.hasPinnedSelector&&!t?this.sortByBaseSelectors(this.selectors):this.hasPinnedSelector&&t?this.orderPinnedSelectorByType(this.selectors):this.hasPinnedSelector||(this.baseSelectorsList=[],this.pinnedStartList=[],this.pinnedEndList=[])},e.createSelector=function(t,e){t=new _(this.getScrollContainer(t),e,t.node,t.UUID,{standard:{type:this.options.standardStyle,size:this.options.standardSize,orientation:H(this.options.standardPosition),watermark:this.options.standardWatermark},fullscreen:{type:this.options.fullscreenStyle,size:this.options.fullscreenSize,orientation:H(this.options.fullscreenPosition),watermark:this.options.fullscreenWatermark},activeClass:this.options.activeClass,selectorContent:t.selectorContent,disabled:t.disabled,pinned:t.pinned,activated:t.activated},t.infoPromise);return t.setParent(this),t},e.setEventsFromSelectors=function(){var e,i=this;this.on("selectorAction",function(t){t.stopAll(),i.emit("changeSlide",{data:{UUID:t.data}});t=i.getSelectorsIndexByUUID(t.data);null!==t&&i.setActiveItem(t)}),this.on("resize",function(t){t.stopAll(),clearTimeout(e),e=setTimeout(function(){i.onResize()},16)})},e.initPinnedBlocks=function(){var t,e,i=function(){return{containerNode:T.$new("div").addClass(m+"-ss"),scrollNode:T.$new("div").addClass(m+"-scroll").setCss({transform:"translate3d(0, 0, 0)"})}};!this.blocksPinnedInited&&this.hasPinnedSelector&&(this.pinnedNodeAtStart=T.$new("div").addClass(m+"-selectors-pinned-start"),this.pinnedNodeAtEnd=T.$new("div").addClass(m+"-selectors-pinned-end"),(e=(t=i()).containerNode).append(t.scrollNode),this.pinnedNodeAtStart.append(e),(i=(t=i()).containerNode).append(t.scrollNode),this.pinnedNodeAtEnd.append(i),this.blocksPinnedInited=!0)},e.addPinnedBlocks=function(){this.blocksPinnedInited&&this.hasPinnedSelector&&(this.instanceNode.append(this.pinnedNodeAtStart),this.instanceNode.append(this.pinnedNodeAtEnd))},e.setHasPinnedSelector=function(t){var e;Array.isArray(t)?t.length<1?this.hasPinnedSelector=!1:(e=t[0]instanceof _,this.hasPinnedSelector=t.some(function(t){return W((e?t.getOptions():t).pinned)})):W(t.pinned)?this.hasPinnedSelector=!0:this.hasPinnedSelector=!1},e.orderPinnedSelectorByType=function(t){var i=this;this.hasPinnedSelector&&(Array.isArray(t)?(this.pinnedStartList=[],this.pinnedEndList=[],t.forEach(function(t){var e=t.options.pinned;"start"===e?i.pinnedStartList.push(t):"end"===e&&i.pinnedEndList.push(t)})):"start"===t.getOptions().pinned?this.pinnedStartList=this.selectors.filter(function(t){return"start"===t.getOptions().pinned}):"end"===t.getOptions().pinned&&(this.pinnedEndList=this.selectors.filter(function(t){return"end"===t.getOptions().pinned})))},e.updateIndex=function(t,e){return t.indexOf(e)},e.init=function(){var t,e=this;this.createArrows(),this.selectorsScrollContainer.append(this.selectorsContainer).appendTo(this.instanceNode),this.addPinnedBlocks(),this.arrows&&(this.arrows.hide(),t=this.arrows.getNodes(),this.selectorsScrollContainer.append(t[0]),this.selectorsScrollContainer.append(t[1])),this.selectorsContainer.append(this.selectorsScroll),this.isShown=!0,this.hide(),this.identifyVariables(),this.setEventsFromSelectors(),this.currentStylePosition||this.instanceNode.setCssProp("display","none"),A.all(this.selectors.map(function(t){return t.getProportion()})).finally(function(){e.isReady=!0,e.emit("selectorsReady")})},e.identifyVariables=function(){var t;this.currentStylePosition?(t="horizontal"===H(this.currentStylePosition),this.longSide=t?"width":"height",this.shortSide="width"===this.longSide?"height":"width",this.currentAxis=t?"x":"y"):(this.longSide=null,this.shortSide=null)},e.changeSelectors=function(e){return A.all(this.selectors.map(function(t){return t.toggle(e)}))},e.getSelectorsSize=function(){this.selectors.forEach(function(t){t.isDestroyed()||t.getSize()})},e.enableActions=function(){this.isActionsEnabled||(this.isActionsEnabled=!0,this.show(),this.options.fullscreenAutohide&&this.setSelectorsState(!0))},e.disableActions=function(){this.isActionsEnabled&&(this.isActionsEnabled=!1,this.hide(),this.controlDebounce&&this.controlDebounce.cancel())},e.show=function(t){this.isShown||!this.isActionsEnabled||this.isDestroyed||(t=t?"":"opacity 400ms linear",this.isShown=!0,this.selectorsScroll.setCss({display:"inline-flex"}),this.getSizes(),this.jump(this.getActiveItem(),!0),this.instanceNode.setCss({opacity:1,visibility:"visible",transition:t}))},e.getActiveItem=function(){return this.currentActiveItem?this.currentActiveItem.index:0},e.setCurrentActiveItemByUUID=function(t){t=this.getSelectorByUUID(t);t&&!this.currentActiveItem&&(this.currentActiveItem=t)},e.hide=function(){this.isShown&&(this.isShown=!1,this.instanceNode.setCss({opacity:0,visibility:"hidden",transition:""}))},e.start=function(t){var e=this;!this.isStarted&&this.isInView&&(this.isStarted=!0,this.currentStylePosition?this.changeSelectors(1).then(function(){return h.rootDOM.addMainStyle(t)}).then(function(){e.isDestroyed||(e.getSelectorsSize(),e.done(),e.show())}):this.done())},e.addControl=function(){var i=this;this.isControlInDoc||(this.instanceNode.addEvent("mouseover mouseout",function(t){for(var e=(e=t.getRelated())&&g(e);e&&e.node!==i.instanceNode.node&&e.node!==T.D.node.body;)e=(e=e.node.parentNode)&&g(e);e&&e.node===i.instanceNode.node||i.setControlTimeout("mouseover"===t.type)}),this.controlButton.addEvent("btnclick tap",function(t){i.setControlTimeout(!0),i.setSelectorsState(!i.isControlShown)}),g(this.instanceNode.node.parentNode).append(this.controlButton),this.controlDebounce=d.debounce(function(){i.setSelectorsState(!1)},3e3),this.isControlInDoc=!0)},e.removeControl=function(){this.isControlInDoc&&(this.instanceNode.removeEvent("mouseover mouseout"),this.controlDebounce.cancel(),this.isControlShown=!0,this.controlButton.removeEvent("btnclick tap"),this.controlButton.remove(),this.isControlInDoc=!1)},e.setSelectorsState=function(t){this.isControlShown=t,this.setControlTimeout(),this.emit("visibility",{action:this.isControlShown?"show":"hide"})},e.setControlTimeout=function(t){this.isControlInDoc&&(this.controlDebounce.cancel(),this.isControlShown&&!t&&this.controlDebounce())},e.getNode=function(){return this.instanceNode},e.isHorizontal=function(){return"horizontal"===H(this.currentStylePosition)},e.inView=function(t,e){this.isInView=t,this.start(e)},e.done=function(){this.isDone||this.isDestroyed||(this.isDone=!0,this.getSizes(),this.selectors.forEach(function(t){t.setEvent()}),this.onResize(),this.setDrag(),this.emit("selectorsDone"))},e.setActiveItem=function(t){t=this.selectors[t];this.currentActiveItem&&this.currentActiveItem.deactivate(),t&&!t.isDisabled()&&t.activatedSelector()&&(t.activate(),this.currentActiveItem=t),!t.isActivate()&&this.currentActiveItem&&this.currentActiveItem.activate()},e.createArrows=function(){var e=this;!this.options.arrows||"grid"===this.options.standardStyle&&"grid"===this.options.standardStyle||(this.arrows=new B({orientation:H(this.currentPosition||this.options.fullscreenPosition),customClass:"thumbnails"}),this.arrows.setParent(this),this.on("arrowAction",function(t){t.stopAll(),e.jump(t.data.type)}))},e.isGrid=function(){return this.state===M?this.options.isFullscreenGrid:this.options.isStandardGrid},e.calculateContainerScroll=function(){var t;(this.hasPinnedSelector||this.blocksPinnedInited)&&(t=this.instanceNode.getSize(),this.arrows&&this.arrows.hide(),(t=t[this.longSide]-(this.pinnedNodeAtStart.getSize()[this.longSide]+this.pinnedNodeAtEnd.getSize()[this.longSide]))<0&&(t=0),this.scrollSize[this.longSide]<t&&(t=this.scrollSize[this.longSide]),this.selectorsScrollContainer.setCssProp("max-"+this.longSide,t),this.getSizes())},e.sortByBaseSelectors=function(t){this.hasPinnedSelector&&(this.baseSelectorsList=t.filter(function(t){return!t.getOptions().pinned}))},e.getIndexBaseSelectors=function(t){var e=this.baseSelectorsList.indexOf(this.selectors[t]);return e<0&&(e=t),e},e.normalizePositionValue=function(t){var e=this.containerSize[this.longSide]-this.scrollSize[this.longSide];return this.arrows&&(this.arrows.disable(),0<=e||this.isGrid()?(this.arrows.hide(),this.getSizes()):this.arrows.isShow||(this.arrows.show(),this.getSizes())),0==e?0:(this.halfScrollSize<=this.halfContainerSize?t=this.halfContainerSize-this.halfScrollSize:(0<=t&&(t=0,this.arrows&&this.arrows.disable("backward")),t<=e&&(t=e,this.arrows&&this.arrows.disable("forward"))),t)},e.findItemPosition=function(t){if(!this.selectors[t]||this.selectors[t].options.pinned)return null;var e;i=t,e=this.selectors.length,i<0?i=0:e-1<i&&(i=e-1),t=i,this.hasPinnedSelector&&(t=this.getIndexBaseSelectors(t));for(var i=this.selectors[t].size[this.longSide]/2,s=0,n=0;n<t;)this.selectors[n]&&(s+=this.selectors[n].size[this.longSide]),n+=1;i=this.halfContainerSize-(s+i);return this.normalizePositionValue(i)},e.stopMoving=function(){var t;this.isMove&&((t=d.getMatrix(this.selectorsScroll))&&(t=t.transform[this.currentAxis],this.currentPosition=t),this.clearAnimation(),this.selectorsScroll.setCssProp("transform","translate3d("+V(this.currentPosition,this.isHorizontal())+", 0)"))},e.clearAnimation=function(){this.selectorsScroll&&(this.selectorsScroll.removeEvent("transitionend"),this.selectorsScroll.setCssProp("transition","")),this.isMove=!1},e.jump=function(t,e){var i=this.currentPosition;this.stopMoving(),"string"!==T.typeOf(t)&&"number"!==T.typeOf(t)||null!==(i="string"===T.typeOf(t)?("next"===t?i-=this.containerSize[this.longSide]:i+=this.containerSize[this.longSide],this.normalizePositionValue(i)):this.findItemPosition(t))&&this.move(i,null,e)},e.move=function(t,e,i){var s,n,o,r,a=this;e=e||400,this.currentPosition!==t&&(this.selectorsScroll.removeEvent("transitionend"),s={},i||(this.isMove=!0,this.selectorsScroll.addEvent("transitionend",function(t){t.stop(),a.clearAnimation()}),s.transition="transform "+(n=e,o=this.containerSize[this.longSide],r=Math.abs(t)-Math.abs(this.currentPosition),i=n,e=parseInt(n/3,10),(i=parseInt(Math.abs(r)/o*n,10))<e?i=e:n<i&&(i=n),i)+"ms ease"),s.transform="translate3d("+V(t,this.isHorizontal())+", 0)",this.selectorsScroll.setCss(s),this.currentPosition=t)},e.getSizes=function(){this.containerSize=this.selectorsContainer.getSize(),this.halfContainerSize=this.containerSize[this.longSide]/2,this.scrollSize=this.selectorsScroll.getSize(),this.halfScrollSize=this.scrollSize[this.longSide]/2},e.setDrag=function(){function n(t,e){return{x:t-i.left,y:e-i.top}}var i,o,e,r,a,h,s,l,c=this,d={},u={x:null,y:null},p=!1,m=0;d.dragstart=function(t){a=c.currentAxis,h="x"===a?"y":"x",s=c.longSide,u={x:t.x,y:t.y},c.containerSize[s]<c.scrollSize[s]&&(p=!0),i=c.selectorsContainer.getPosition(),c.stopMoving(),o=n(t.x,t.y)[a],e=c.containerSize[s]-c.scrollSize[s],r=0,t.timeStamp},d.dragend=function(t){p&&(p=!1,t.stop(),t.timeStamp,(0<(t=c.currentPosition-((t=r)+t/2))||t<e)&&(t=0<t?0:e),t=c.normalizePositionValue(t),c.move(t),l=null),m=0},d.dragmove=function(t){var e,i,s;m=m||(Math.abs(u[a]-t[a])>Math.abs(u[h]-t[h])?1:2),p&&1===m&&((e=n(t.x,t.y))[a]>e[h]&&(t.stop(),i=o-e[a],c.currentPosition-=i,s=o,s=e[a]<s?"next":"prev",l&&s===l||(r=0),r+=i,o=e[a],l=s),c.selectorsScroll.setCssProp("transform","translate3d("+V(c.currentPosition,c.isHorizontal())+", 0)")),u={x:t.x,y:t.y}},this.selectorsContainer.addEvent("mousedrag touchdrag",function(t){d[t.state](t)})},e.setContainerCss=function(){var t={},e=this.options.standardSize;this.state===M&&(e=this.options.fullscreenSize),t["min-"+this.shortSide]=e+"px",t[this.shortSide]="100%",this.instanceNode.setCss(t)},e.beforeEnterFullscreen=function(){this.hide(),this.state=M,this.currentStylePosition=this.options.fullscreenPosition,this.currentStylePosition||(this.instanceNode.setCssProp("display","none"),g(this.instanceNode.node.parentNode).setCssProp("display","none")),this.identifyVariables()},e.afterEnterFullscreen=function(){var t=this;this.currentStylePosition&&(this.instanceNode.setCssProp("display",""),g(this.instanceNode.node.parentNode).setCssProp("display",""),this.setContainerCss(),this.options.fullscreenAutohide&&(this.addControl(),this.isActionsEnabled&&this.setSelectorsState(!0)),this.removeStyleForIE(),this.changeSelectors(2).then(function(){t.getSelectorsSize(),setTimeout(function(){t.show()},150),t.currentStylePosition&&t.isActionsEnabled&&setTimeout(function(){t.setSelectorsState(!0)},1e3)}))},e.beforeExitFullscreen=function(){this.hide(),this.state=R,this.currentStylePosition=this.options.standardPosition,this.options.fullscreenAutohide&&this.removeControl(),this.currentStylePosition||(this.instanceNode.setCssProp("display","none"),g(this.instanceNode.node.parentNode).setCssProp("display","none")),this.identifyVariables()},e.afterExitFullscreen=function(){var t=this;this.currentStylePosition&&(this.instanceNode.setCssProp("display",""),g(this.instanceNode.node.parentNode).setCssProp("display",""),this.setContainerCss(),this.removeStyleForIE(),this.changeSelectors(1).then(function(){t.getSelectorsSize(),t.show()}))},e.getPinnedScrollContainer=function(t){return t?t.node.firstChild.firstChild:null},e.getCurrentStylePosition=function(){return this.getCurrentStylePosition},e.removeStyleForIE=function(){"ie"===T.browser.uaName&&this.selectorsScroll.setCssProp(this.shortSide,"")},e.isSelectorsActionEnabled=function(){return this.isActionsEnabled},e.getShortSide=function(){return this.shortSide},e.sortSelectorsByUUID=function(t){var s=this,n=[];t.forEach(function(t){for(var e=0,i=s.selectors.length;e<i;e++)if(t===s.selectors[e].UUID){n.push(s.selectors[e]);break}}),this.selectors=n},e.sortNodesSelectors=function(t){for(var e=t-1;0<=e;e--)this.selectorsScroll.node.insertBefore(this.selectors[e].getContainer().node,this.selectorsScroll.node.firstChild)},e.rewriteSelectorsIndexes=function(){this.selectors.forEach(function(t,e){t.setIndex(e)})},e.sortSelectors=function(t,e){this.sortSelectorsByUUID(t),this.rewriteSelectorsIndexes(),this.sortNodesSelectors(e)},e.onResize=function(){var i=this;this.isDone&&this.currentStylePosition&&!this.isDestroyed&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){var t=i.getActiveItem();i.clearAnimation();var e=0;i.selectors.forEach(function(t){t.isDestroyed()||(t=t.getSize(),e+=t[i.longSide])}),"ie"===T.browser.uaName&&(i.isGrid()&&(e=""),i.selectorsScroll.setCssProp(i.longSide,e)),i.getSizes(),i.calculateContainerScroll(),i.setActiveItem(t),i.normalizePositionValue(),i.jump(t,!0),i.show()},100))},e.destroy=function(){this.isDestroyed=!0,clearTimeout(this.resizeTimeout),this.instanceNode.removeEvent("transitionend"),this.removeControl(),this.controlButton=null,this.off("selectorAction"),this.off("resize"),this.clearAnimation(),this.arrows&&(this.arrows.destroy(),this.arrows=null,this.off("arrowAction")),this.selectors.forEach(function(t){t.destroy()}),this.selectorsScroll.remove(),this.selectorsScroll=null,this.selectorsContainer.remove(),this.selectorsContainer=null,this.instanceNode.remove(),this.instanceNode=null,this.currentActiveItem=null,this.blocksPinnedInited&&(this.hasPinnedSelector=null,this.baseSelectorsList=null,this.pinnedStartList=null,this.pinnedEndList=null,this.blocksPinnedInited=!1,this.pinnedNodeAtEnd=null,this.pinnedNodeAtStart=null,this.selectorsScrollContainer=null,this.pinnedStartList=null,this.pinnedEndList=null),s.prototype.destroy.call(this)},t}(i));function H(t){var e="horizontal";return T.contains(["left","right"],t)&&(e="vertical"),e}function V(t,e){return e?t+="px, 0":t="0, "+t+"px",t}function W(t){return"start"===t||"end"===t}var q={HTMLVideo:t=function(n){"use strict";function t(t,e){var i,s=n.call(this)||this;return s.node=g(t),s.instanceOptions=(i=s.node,t=e,(e=new T.Options(a)).fromJSON(t.common.common),e.fromString(t.local.common),e.fromString(i.attr("data-options")||""),T.browser.touchScreen&&T.browser.mobile&&(e.fromJSON(t.common.mobile),e.fromString(t.local.mobile),e.fromString(i.attr("data-mobile-options")||"")),e),s.option=function(){return 1<arguments.length?s.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):s.instanceOptions.get(arguments.length<=0?void 0:arguments[0])},s.type="video",s.player=null,s.state=O.VIDEO.NONE,s.isReady=!1,s.isShown=!1,s.id=null,s.playDebounce=null,s.currentTime=0,s.videoNode=T.$new("div"),s.videoWrapper=T.$new("div").addClass(m+"-video").setCss({transition:"opacity .3 linear"}),s.videoWrapper.attr("data-video-type",s.type),s.fullscreen=s.option("controls.fullscreen"),s.hide(),s}l.inheritsLoose(t,n);var e=t.prototype;return e.isAutoplay=function(){return this.option("autoplay")},e.onBeforeFullscreenIn=function(){this.getCurrentTime(),this.fullscreen=!1},e.onAfterFullscreenIn=function(){},e.onBeforeFullscreenOut=function(){this.getCurrentTime(),this.fullscreen=this.option("controls.fullscreen")},e.onAfterFullscreenOut=function(){},e.getSize=function(){var t=this;return new A(function(e){var i=t.videoWrapper.getSize();i.width&&i.height?e(i):d.videoModule.getAspectRatio(t.node).then(function(t){i.width?i.height=i.width*t:i.width=i.height/t,e(i)}).catch(function(){e(null)})})},e.createPlayer=function(){var t=this;return this.player={ready:!0,play:function(){t.playDebounce()},pause:function(){t.player.player.node.pause()},player:this.node},this.playDebounce=d.debounce(function(){t.player.player.node.play()},100),this.option("loop")?this.player.player.attr("loop","loop"):this.player.player.removeAttr("loop"),this.player.player.attr("playsinline","playsinline"),this.option("controls.enable")?this.player.player.attr("controls","controls"):this.player.player.removeAttr("controls"),this.isAutoplay()?(this.player.player.volume=0,this.player.player.attr("muted","muted")):this.player.player.volume=this.option("volume")/100,this.player.player.attr("preload",this.option("preload")?"auto":"none"),this.setEvents(),this.emit("slideVideoReady",{data:{type:this.type,error:null}}),A.resolve()},e.getVideoNode=function(){return this.videoWrapper},e.init=function(){var e,i=this;"video"===this.type&&((e=this.node.attr("data-src"))&&this.node.attr("src",e),T.$A(this.node.node.children).forEach(function(t){(t=g(t))&&"source"===t.getTagName()&&(e=t.attr("data-src"))&&(t.attr("src",e),"gecko"===T.browser.engine&&t.node.parentNode.load())}),this.videoNode=this.node),this.id=this.type+"-"+d.generateUUID(),this.videoNode.attr("id",this.id),this.videoWrapper.append(this.videoNode);var s={type:this.type,error:null};d.videoModule.getAPI(this.node).then(function(t){i.createPlayer(t).then(function(){s.error=!1}).catch(function(t){s.error=!!t}).finally(function(){i.isReady=!0})}).catch(function(t){s.error=!0,i.emit("slideVideoReady",{data:s})})},e.setEvents=function(){var e=this;this.player.player.addEvent("play",function(t){t.stop(),e.state=O.VIDEO.PLAY,e.emit("slideVideoPlay",{data:{type:e.type}})}),this.player.player.addEvent("pause",function(t){t.stop(),e.state=O.VIDEO.PAUSE,e.emit("slideVideoPause",{data:{type:e.type}})}),this.player.player.addEvent("ended",function(t){t.stop(),e.state=O.VIDEO.PAUSE,e.emit("slideVideoEnd",{data:{type:e.type}})})},e.play=function(){this.player&&this.player.ready&&(this.setCurrentTime(),this.player.play())},e.pause=function(){this.player&&this.player.ready&&this.player.pause()},e.getCurrentTime=function(){this.player&&this.player.player&&(this.currentTime=this.player.player.currentTime)},e.setCurrentTime=function(){this.player&&this.player.ready&&(this.player.player.currentTime=this.currentTime)},e.isPreStart=function(){return this.state===O.VIDEO.NONE},e.isPaused=function(){return this.state===O.VIDEO.PAUSE},e.show=function(){this.isShown=!0,this.videoWrapper.setCssProp("opacity",1)},e.hide=function(){this.isShown=!1,this.videoWrapper.setCssProp("opacity",0)},e.destroy=function(){this.playDebounce&&(this.playDebounce.cancel(),this.playDebounce=null),this.pause(),this.videoWrapper.remove(),this.node=Z(this.node),"video"===this.type&&T.$A(this.node.node.children).forEach(function(t){"source"===g(t).getTagName()&&Z(t)}),n.prototype.destroy.call(this)},t}(i),YouTubeVideo:function(i){"use strict";function t(t,e){e=i.call(this,t,e)||this;return e.type="youtube",e.playerState=-1,e.videoWrapper.attr("data-video-type",e.type),e.apiPlayer=null,e}l.inheritsLoose(t,i);var e=t.prototype;return e.setCurrentTime=function(){this.player&&this.player.ready&&this.player.player.seekTo(this.currentTime)},e.getCurrentTime=function(){this.player&&this.player.player&&(this.player.player.getCurrentTime?this.currentTime=this.player.player.getCurrentTime():this.currentTime=0)},e.destroyVideoPlayer=function(){this.getCurrentTime(),this.player&&this.player.player&&(this.player.ready=!1,this.player.player.destroy()),this.playerState=-1},e.onBeforeFullscreenIn=function(){this.fullscreen=!1,this.destroyVideoPlayer()},e.onAfterFullscreenIn=function(){this.createPlayer(this.apiPlayer)},e.onBeforeFullscreenOut=function(){this.fullscreen=this.option("controls.fullscreen"),this.destroyVideoPlayer()},e.onAfterFullscreenOut=function(){this.createPlayer(this.apiPlayer)},e.createPlayer=function(s){var n=this;return this.apiPlayer=s,new A(function(t,e){var i=d.videoModule.getId(n.node);n.player={ready:!1,play:function(){n.player.player.playVideo()},pause:function(){n.player.player.pauseVideo()},player:new s.Player(n.id,{videoId:i,playerVars:{playlist:i,fs:n.fullscreen?1:0,rel:0,loop:n.option("loop")?1:0,autoplay:0,playsinline:1,controls:n.option("controls.enable")?1:0},events:{onReady:function(){n.playerState=-1,n.player.ready=!0,n.player.player.setVolume(n.option("volume")),n.emit("slideVideoReady",{data:{type:n.type,error:null}}),t()},onError:function(t){100===t.data&&(n.player=null),n.emit("slideVideoReady",{data:{type:n.type,error:!0}}),e(!0)},onStateChange:n.setEvents.bind(n)}})}})},e.setEvents=function(t){t=(t.target||t.getTarget()).getPlayerState();switch(this.playerState=t,this.state===O.VIDEO.PLAY&&(this.state=O.VIDEO.PAUSE),t){case-1:break;case 0:this.option("loop")||this.player.pause(),this.emit("slideVideoEnd",{data:{type:this.type}});break;case 1:this.state=O.VIDEO.PLAY,this.emit("slideVideoPlay",{data:{type:this.type}});break;case 2:this.state=O.VIDEO.PAUSE,this.emit("slideVideoPause",{data:{type:this.type}})}},e.destroy=function(){i.prototype.destroy.call(this),this.player&&this.player.player&&(this.player.player.destroy(),this.player.player=null)},t}(t),VimeoVideo:function(i){"use strict";function t(t,e){e=i.call(this,t,e)||this;return e.type="vimeo",e.apiPlayer=null,e.videoWrapper.attr("data-video-type",e.type),e}l.inheritsLoose(t,i);var e=t.prototype;return e.createPlayer=function(s){var n=this;return this.apiPlayer=s,new A(function(t,e){var i;n.videoNode.attr("data-vimeo-id",d.videoModule.getId(n.node)),s.Player?((i=n.videoNode.attr("data-src"))&&n.videoNode.attr("src",i),i={id:d.videoModule.getId(n.node),loop:n.option("loop"),controls:n.option("controls.enable"),speed:n.option("controls.speed")},n.player={ready:!1,play:function(){n.player.player.setVolume(0),n.player.player.play()},pause:function(){n.player.player.pause()},player:new s.Player(n.videoNode.node,i)},n.setEvents(t)):e(!0)})},e.destroyVideoPlayer=function(){this.player&&this.player.player&&(this.player.ready=!1,this.player.player.destroy())},e.play=function(){this.player&&this.player.ready&&(this.setCurrentTime(),this.player.play())},e.onBeforeFullscreenIn=function(){this.destroyVideoPlayer()},e.onAfterFullscreenIn=function(){this.createPlayer(this.apiPlayer)},e.onBeforeFullscreenOut=function(){this.destroyVideoPlayer()},e.onAfterFullscreenOut=function(){this.createPlayer(this.apiPlayer)},e.getCurrentTime=function(){},e.setCurrentTime=function(){this.player&&this.player.ready&&this.player.player.setCurrentTime(this.currentTime)},e.setEvents=function(t){var e=this;this.player.player.on("play",function(){e.state=O.VIDEO.PLAY,e.emit("slideVideoPlay",{data:{type:e.type}})}),this.player.player.on("pause",function(){e.state=O.VIDEO.PAUSE,e.emit("slideVideoPause",{data:{type:e.type}})}),this.player.player.on("ended",function(){e.state=O.VIDEO.PAUSE,e.emit("slideVideoEnd",{data:{type:e.type}})}),this.player.player.on("loaded",function(){}),this.player.player.on("timeupdate",function(t){e.currentTime=t.seconds}),this.player.player?this.player.player.ready().then(function(){e.player.ready=!0,e.state===O.VIDEO.PLAY&&(e.state=O.VIDEO.PAUSE),e.player.player.setVolume(0),e.emit("slideVideoReady",{data:{type:e.type,error:null}}),t()}):this.emit("slideVideoReady",{data:{type:this.type,error:new Error("Player does not exist.")}})},e.destroy=function(){i.prototype.destroy.call(this),this.videoNode.remove(),this.videoNode=null,this.videoWrapper.remove(),this.videoWrapper=null,this.player&&this.player.player&&(this.player.player.destroy(),this.player.player=null),this.node=null},t}(t)};function Z(t){var e=(t=g(t)).attr("data-src");return e?(t.attr("data-src",e.split("?")[0]),t.removeAttr("src")):t.node.src=t.node.src.split("?")[0],t}var Y,$,G,j,X=(Y=m+"-can-zoom",$={top:0,left:0,width:"100%",height:"100%"},G=function(i,s){return new A(function(t){var e;i=g(i),void 0===s&&(s=10),0<s?(e=i.getSize()).width&&e.height?t(e):setTimeout(function(){G(i,--s).then(t)},32):t(null)})},j=function(t){var e=g(t.node.querySelector(f));return e=e||(t.getTagName()===f?t:null)},function(a){"use strict";function h(t,e,i,s){var n=a.call(this)||this;n.$J_UUID=T.$uuid(l.assertThisInitialized(n)),n.groups=(g(t).attr("data-group")||"").split(/\s*(?:,|$)\s*/);var o=X.parse(t);n.id=o.id,n.enabled=o.enabled,n.type=o.type,n.url=o.url,n.slideContent=g(t),n.index=e,n.isCustomAdded=s||!1,n.options={},n.setOptions(i),n.instanceNode=T.$new("div").addClass(m+"-slide").setCss({position:"absolute"}),n.instanceNode.setCss($),n.contentWrapper=T.$new("div").addClass(m+"-content"),n.contentWrapper.setCss($),n.fullscreenOnlyNode=null,n.selector={UUID:n.$J_UUID,isCustom:!1,node:j(n.slideContent),isSirv:!1,isVideo:!1,selectorContent:null,size:{width:0,height:0},src:null,srcset:null,pinned:null,activated:!0,infoPromise:null,isStatic:!1},n.selector.isStatic=h.checkNonSirv(n.selector.node),n.selector.pinned=h.findPinnedSelectorSide(n.slideContent.node.querySelector(f)||n.slideContent.node),n.selector.isCustom=!!n.selector.node,n.thumbnailReferrerPolicy=n.getSelectorReferrerPolicy(),n.availableSlide=!0,n.isStartedFullInit=!1,n.fullscreenState=O.FULLSCREEN.CLOSED,n.isStarted=!1,n.sirvService=null,n.componentSize=null,n.inView=!1,n.isActive=!1,n.isReady=!1,n.video=null,n.isVideoPaused=!1,n.isVideoReady=!1,n.slideShownBy=O.SLIDE_SHOWN_BY.NONE,n.componentLoader=null,n.infoSize=null,n.sizePromise=null,n.isInDom=0,n.multiImages=[],n.lastOriginNode=null,n.dataThumbnailImage=n.getThumbnailImage(),n.dataThumbnailHtml=n.slideContent.attr("data-thumbnail-html"),n.dataHiddenSelector=n.slideContent.hasAttribute("data-hidden-selector"),n.swipeDisabled=n.slideContent.hasAttribute("data-swipe-disabled"),n.spinWasInited=!1,n.socialbuttons=null,n.getVideoThumbnailPromise=null,n.isPlaceholder=!1,n.customThumbnailImageClassPromise=null;var r=l.assertThisInitialized(n);return n.api={get index(){return r.index},get component(){return r.sirvService?O.SLIDE.NAMES[r.sirvService.getType()]:"unknown"},get groups(){return r.groups},get thumbnail(){return r.selector.node.node},isDisabled:function(){return!r.enabled},isActive:function(){return r.isActive},getSelector:function(){return this.thumbnail}},n.sendEventCloseFullscreenByClick=function(t){t.stop(),n.emit("goToFullscreenOut")},n.beforeParseSlide(),n.parseSlide(),n}l.inheritsLoose(h,a),h.findPinnedSelectorSide=function(t){if(t.hasAttribute("data-pinned")){t=T.$(t).attr("data-pinned");return"start"!==t?"end":t}return null},h.parse=function(t){t=g(t);var e={};e.node=t.node,e.id=t.attr("data-id");var i,s=null,n=O.SLIDE.TYPES.HTML,o=!0;X.isSirvComponent(t)?(n=(i=d.getSirvType(t)).type,s=i.imgSrc):d.videoModule.isVideo(t)?(n=O.SLIDE.TYPES.VIDEO,s=d.videoModule.getSrc(t)):("img"===t.getTagName()||"div"===t.getTagName()&&t.attr("data-src"))&&(n=O.SLIDE.TYPES.IMAGE,s=t.attr("data-src")||t.attr("src")),e.type=n,e.url=s;t=t.node.getAttribute("data-disabled");return(t&&"false"!==t||""===t)&&(o=!1),e.enabled=o,e},h.checkNonSirv=function(t){return!(!t||"static"!==g(t).attr("data-type"))},h.isSirvComponent=function(t){var e=(t=g(t)).attr("data-src"),i=t.attr("src"),s=X.checkNonSirv(t),n=t.getTagName(),t=t.fetch("view-content");return!(s||!(t||"div"===n&&!T.contains(["youtube","vimeo"],d.videoModule.getType(e))&&e||"img"===n&&(e||i)))},h.hasComponent=function(t){return x.isExist(t)};var t=h.prototype;return t.isSwipeDisabled=function(){return this.swipeDisabled},t.getThumbnailImage=function(){var t,e=this.slideContent.attr("data-thumbnail-image");return!e&&this.selector.isCustom&&((e=this.selector.node.attr("data-src"))||1===(t=this.selector.node.node.children).length&&"img"===g(t[0]).getTagName()&&(e=g(t[0]).attr("data-src")||g(t[0]).attr("src"))),e},t.startGettingInfo=function(){this.isSirv()&&this.sirvService.startGettingInfo()},t.loadContent=function(){var e=this;this.isSirv()&&this.getSlideSize().then(function(t){e.isInDom&&e.sirvService.loadContent()}).catch(function(t){})},t.loadThumbnail=function(){var e=this;this.isSirv()&&this.getSlideSize().then(function(t){e.isInDom&&e.sirvService.loadThumbnail()}).catch(function(t){})},t.isVideoSlide=function(){var t=!1;return this.isSirv()?t=this.sirvService.getType()===O.SLIDE.TYPES.VIDEO:this.video&&(t=!0),t},t.belongsTo=function(t){var e=this,i=!1;return t&&("string"===T.typeOf(t)&&(t=[t]),i=t.some(function(t){return T.contains(e.groups,t)})),i},t.addGroup=function(t){var e=!1;return t&&"string"===T.typeOf(t)&&!T.contains(this.groups,t)&&(e=!0,this.groups.push(t)),e},t.removeGroup=function(t){var e=!1;return!t||"string"!==T.typeOf(t)||-1<(t=this.groups.indexOf(t))&&(e=!0,this.groups.splice(t,1)),e},t.isCustomSelector=function(){return this.selector.isCustom},t.single=function(t){this.isSirv()&&this.broadcast("isSingleSlide",{data:{isSingle:t}})},t.setNewIndex=function(t){this.index=t},t.getIndex=function(){return this.index},t.checkReadiness=function(t,e){var i=!1;return this.isSirv()&&O.SLIDE.NAMES[this.sirvService.getType()]===e&&(i="init"===t?this.spinWasInited:this.isReady),i},t.sendReadyEvent=function(t,e){this.isSirv()&&O.SLIDE.NAMES[this.sirvService.getType()]===e&&this.sirvService.sendEvent(t)},t.createFullscreenOnlyScreen=function(){var e=this;this.options.fullscreenOnly&&(this.fullscreenOnlyNode=T.$new("div").addClass(m+"-fullscreen-always"),this.fullscreenOnlyNode.addEvent("btnclick tap",function(t){t.stop(),e.emit("goToFullscreen")}),this.createPinchEvent(this.fullscreenOnlyNode),this.instanceNode.append(this.fullscreenOnlyNode,"top"))},t.createPinchEvent=function(t){var e=this;T.browser.touchScreen&&t.addEvent("pinch",function(t){t.stop(),"pinchend"===t.state&&0===e.fullscreenState&&2<=t.scale&&e.emit("goToFullscreen")})},t.isEnabled=function(){return this.enabled},t.disable=function(){this.enabled=!1,this.video&&this.video.pause(),this.componentLoader&&this.componentLoader.hide(!0)},t.enable=function(){this.enabled=!0},t.isBlokedTouchdrag=function(){var t=!1;return this.isSirv()&&(t=this.sirvService.getType()===O.SLIDE.TYPES.SPIN||this.sirvService.isEffectActive()),t},t.setOptions=function(t){this.options=T.extend({spin:{},zoom:{},image:{},video:{},fullscreenOnly:!1},t||{})},t.dragEvent=function(t){this.sirvService&&this.broadcast("dragEvent",{data:{type:t}})},t.startFullInit=function(t){this.isStartedFullInit||(this.isStartedFullInit=!0,t&&this.setOptions(t),this.sirvService&&this.sirvService.startFullInit(t?this.options:null),this.hide(),this.instanceNode.append(this.contentWrapper),this.isSirv()||this.appendToDOM())},t.createComponentLoader=function(){this.componentLoader||(this.componentLoader=new r(this.instanceNode),this.componentLoader.show())},t.isSlideAvailable=function(){return this.availableSlide},t.isSelectorPinned=function(){return T.contains(["start","end"],this.selector.pinned)},t.getPinnedSelectorSide=function(){return this.selector.pinned},t.setFullscreenEvents=function(){var e=this;this.on("beforeFullscreenIn",function(t){e.fullscreenState===O.FULLSCREEN.OPENING?t.stopPropagation():(e.fullscreenState=O.FULLSCREEN.OPENING,e.video&&(e.isVideoPaused=e.video.isPaused(),e.video.onBeforeFullscreenIn())),e.fullscreenOnlyNode&&e.fullscreenOnlyNode.setCssProp("display","none"),e.addEventCloseFullscreenByClick()}),this.on("afterFullscreenIn",function(t){e.socialbuttons&&e.socialbuttons.closeButtons(),e.fullscreenState===O.FULLSCREEN.OPENED?t.stopPropagation():(e.fullscreenState=O.FULLSCREEN.OPENED,e.isSirv()&&e.componentLoader.isHiding()&&e.componentLoader.hide(!0),e.video&&(e.video.onAfterFullscreenIn(),!e.video.isAutoplay()&&e.video.isPreStart()||e.playVideo()))}),this.on("beforeFullscreenOut",function(t){e.socialbuttons&&e.socialbuttons.closeButtons(),e.fullscreenState===O.FULLSCREEN.CLOSING?t.stopPropagation():(e.fullscreenState=O.FULLSCREEN.CLOSING,e.video&&(e.isVideoPaused=e.video.isPaused(),e.video.onBeforeFullscreenOut())),e.fullscreenOnlyNode&&e.fullscreenOnlyNode.setCssProp("display","")}),this.on("afterFullscreenOut",function(t){e.fullscreenState===O.FULLSCREEN.CLOSED?t.stopPropagation():(e.fullscreenState=O.FULLSCREEN.CLOSED,e.video&&(e.video.onAfterFullscreenOut(),!e.video.isAutoplay()&&e.video.isPreStart()||e.playVideo())),e.removeEventCloseFullscreeByClick()}),this.on("inView",function(t){e.inView=t.data,e.video&&(e.inView?(e.isVideoPaused||e.video.isPreStart())&&!e.video.isAutoplay()||e.playVideo():(e.isVideoPaused=e.video.isPaused(),e.video.getCurrentTime(),e.video.pause()))})},t.addEventCloseFullscreenByClick=function(){this.options.fullscreenOnly&&this.type===O.SLIDE.TYPES.IMAGE&&(this.contentWrapper.addEvent("btnclick tap",this.sendEventCloseFullscreenByClick),this.slideContent.addEvent("btnclick tap",this.sendEventCloseFullscreenByClick))},t.removeEventCloseFullscreeByClick=function(){this.options.fullscreenOnly&&this.type===O.SLIDE.TYPES.IMAGE&&(this.contentWrapper.removeEvent("btnclick tap",this.sendEventCloseFullscreenByClick),this.slideContent.removeEvent("btnclick tap",this.sendEventCloseFullscreenByClick))},t.isSirv=function(){return!!this.sirvService},t.getNode=function(){return this.instanceNode},t.getOriginNode=function(){return this.lastOriginNode||this.slideContent},t.getOriginImageUrl=function(){return this.isSirv()?this.sirvService.getOriginImageUrl():null},t.zoomIn=function(t,e){this.broadcast("zoomUp",{data:{x:t,y:e}})},t.zoomOut=function(t,e){this.broadcast("zoomDown",{data:{x:t,y:e}})},t.mouseAction=function(t,e){this.isSirv()&&this.broadcast("mouseAction",{data:{type:t,originEvent:e}})},t.getZoomData=function(){return this.isSirv()?this.sirvService.getZoomData():null},t.getTypeOfSlide=function(){var t=null;return this.isSirv()&&(t=this.sirvService.getType()),t},t.getOptions=function(){return this.isSirv()?this.sirvService.getToolOptions():{}},t.createSlideApi=function(){this.isSirv()&&!this.isStarted&&(this.isStarted=!0,this.api[O.SLIDE.NAMES[this.sirvService.getType()]]=this.sirvService.getData())},t.beforeShow=function(){this.isActive=!0,this.show(),this.isSirv()&&this.sirvService.activate(),this.createSlideApi()},t.afterShow=function(t){this.slideShownBy=t||O.SLIDE_SHOWN_BY.NONE,this.broadcast("startActions",{who:this.slideShownBy}),this.video&&this.video.isAutoplay()&&this.playVideo()},t.beforeHide=function(){this.video?this.video.pause():this.broadcast("stopActions")},t.afterHide=function(){this.slideShownBy=O.SLIDE_SHOWN_BY.NONE,this.isActive=!1,this.hide(),this.isSirv()&&this.sirvService.deactivate(),this.socialbuttons&&this.socialbuttons.closeButtons()},t.show=function(){this.instanceNode.removeClass(m+"-hidden"),this.instanceNode.addClass(m+"-shown")},t.hide=function(){this.instanceNode.removeClass(m+"-shown"),this.instanceNode.addClass(m+"-hidden")},t.isZoomSizeExist=function(){return!!this.isSirv()&&this.sirvService.isZoomSizeExist()},t.startTool=function(e,i,s){var n=this;this.isSirv()?this.getSlideSize().then(function(t){n.isInDom&&(n.sirvService.startTool(e||n.isActive,i,s),n.addSocialButtons())}).catch(function(t){}):this.getSlideSize().then(function(){n.emit("contentLoaded",{data:{slide:{index:n.index}}})})},t.getSlideSize=function(){var r=this;return this.sizePromise||(this.sizePromise=new A(function(s,n){if(r.isSirv()){var o={UUID:r.$J_UUID};r.sirvService.getInfoSize().then(function(t){!r.infoSize&&t.size&&(r.infoSize=t.size),o.size=r.infoSize,s(o)}).catch(function(t){var e,i;o.error=!0,r.sirvService?(e=r.sirvService.getType(),r.removeSirvService(),t&&t.error&&t.error.status&&404===t.error.status?(o.error=t.error,n(o)):t&&("changeSpinToImage"===t.error||e===O.SLIDE.TYPES.IMAGE||t.isPlaceholder)?(r.isPlaceholder=t.isPlaceholder,e===O.SLIDE.TYPES.IMAGE?(r.isInDom=0,r.appendToDOM(),i=Q(r.slideContent.node),r.selector.isCustom||(r.selector.src=i?i.data:null,r.selector.isSirv=!1)):r.changeSpinToImage(),e=r.sizePromise,r.sizePromise=null,i=r.getSlideSize(),r.sizePromise=e,i.then(s).catch(n)):(o.error={status:404},n(o))):(o.error={status:404},n(o))}).finally(function(){r.isCustomAdded&&r.emit("infoReady",{data:{index:r.index}})})}else{var t,e;if("img"===r.slideContent.getTagName())t=r.slideContent.node;else try{t=r.slideContent.node.getElementsByTagName("img")[0]}catch(t){}t&&(e=(e=d.sliderLib.getSrc(g(t).attr("src")))||d.sliderLib.getSrc(g(t).attr("data-src"))),e?d.loadImage(e).then(function(t){r.infoSize=t.size,s({size:r.infoSize,UUID:r.$J_UUID})}).catch(function(t){s({size:r.infoSize,UUID:r.$J_UUID,error:{status:404}})}):r.video?r.video.getSize().then(function(t){r.infoSize=t||{width:0,height:0},s({size:r.infoSize,UUID:r.$J_UUID})}).catch(function(t){n({size:r.infoSize,UUID:r.$J_UUID,error:t})}):G(r.slideContent.node).then(function(t){r.infoSize=t||{width:0,height:0},s({size:r.infoSize,UUID:r.$J_UUID})}).catch(function(t){n({size:r.infoSize,UUID:r.$J_UUID,error:t})})}})),this.sizePromise},t.getData=function(){return this.api},t.removeSirvService=function(){this.infoSize=null,this.slideContent&&this.slideContent.remove(),this.selector.node&&this.selector.node.removeAttr("data-type"),this.sirvService&&(this.sirvService.destroy(),this.sirvService=null),this.selector.isSirv=!1,this.off("stats"),this.off("componentEvent"),this.off("beforeFullscreenIn"),this.off("afterFullscreenIn"),this.off("beforeFullscreenOut"),this.off("afterFullscreenOut"),this.componentLoader&&(this.componentLoader.hide(!0),this.componentLoader.destroy(),this.componentLoader=null),this.fullscreenOnlyNode&&(this.fullscreenOnlyNode.kill(),this.fullscreenOnlyNode=null)},t.changeSpinToImage=function(){var t;this.slideContent.removeClass(m+"-component"),this.contentWrapper.removeClass(m+"-content-"+O.SLIDE.NAMES[this.getTypeOfSlide()]),this.lastOriginNode=this.slideContent,this.slideContent=T.$new("img",{"data-src":this.slideContent.attr("data-src")}),this.slideContent.addClass(m+"-component"),this.parseSlide(),this.isInDom=0,this.appendToDOM(),this.isPlaceholder&&(t=Q(this.slideContent),this.selector.isCustom||(this.selector.src=t?t.data:null)),this.selector.node&&!this.selector.isCustom&&this.selector.node.attr("data-type",O.SLIDE.NAMES[this.getTypeOfSlide()]),this.isStartedFullInit&&(this.isStartedFullInit=!1,this.startFullInit())},t.setSirvEvents=function(){var i=this;this.on("stats",function(t){t.stopEmptyEvent(),t.data.index=i.index}),this.on("componentEvent",function(t){t.stopEmptyEvent();var e=t.data.data;e.type=t.data.type,e.node=i.slideContent,"ready"===t.data.type&&(i.isReady=!0),t.data.slide=i.getData(),t.data.componentEventData=e,t.data.component===O.SLIDE.NAMES[O.SLIDE.TYPES.SPIN]?"init"===t.data.type&&(i.componentLoader.hide(),i.spinWasInited=!0,i.selector.node&&i.selector.node.addClass({row:"spin-x",col:"spin-y","multi-row":"spin-xy"}[i.sirvService.getSpinOrientation()]||"")):"ready"===t.data.type&&i.componentLoader.hide(),"ready"===t.data.type&&T.contains(["spin","zoom"],t.data.component)&&i.sirvService.isZoomSizeExist()&&i.contentWrapper.addClass(Y)})},t.addSocialButtons=function(){var t,e,i,s,n=this;this.validateComponentSocialButton()&&(e={},(t=["facebook","twitter","linkedin","reddit","tumblr","pinterest","telegram"]).forEach(function(t){e[t]=n.options["sb"+T.camelize("-"+t)]}),i=I.getDataImage(),s={},t.forEach(function(t){s[t]=n.getLinkSocialButton(i[t],e[t])}),this.socialbuttons=new I({text:this.slideContent.attr("alt"),link:s,title:this.slideContent.attr("title")},e,this.instanceNode))},t.validateComponentSocialButton=function(){return!(!this.options.sbEnable||!I||this.socialbuttons||!(this.isSirv()&&this.sirvService.getType()!==O.SLIDE.TYPES.VIDEO||this.video&&"video"!==this.video.type||"img"===this.slideContent.getTagName()))},t.getLinkSocialButton=function(t,e,i){var s=null;return i&&(s=this.isSirv()?this.sirvService.getSocialButtonData(t,this.api.component===O.SLIDE.NAMES[O.SLIDE.TYPES.SPIN]):("iframe"===this.slideContent.getTagName()?this.video.node:this.slideContent).attr("data-src")),s},t.searchImagesInHtmlContent=function(){var s=this,t=!1,e=T.$A(this.slideContent.node.querySelectorAll("img"));return e.length&&(t=!0,(this.multiImages=e).forEach(function(t,e){var i=!X.checkNonSirv(t);i&&(s.sirvService?s.sirvService.push(t):(s.setSirvEvents(),s.selector.isSirv=!0,s.sirvService=new x(t,s.options,{quality:s.options.quality,hdQuality:s.options.hdQuality,isHDQualitySet:s.options.isHDQualitySet,always:s.options.fullscreenOnly,isFullscreen:s.options.isFullscreen,nativeFullscreen:s.options.nativeFullscreen}),s.sirvService.setParent(s),s.sirvService.start(),s.createSlideApi())),s.multiImages.push({isSirv:i,node:t,src:g(t).attr("src"),datasrc:g(t).attr("data-src")})})),t},t.isCustomSlideEmpty=function(){if(this.isCustomSelector()){var t=this.slideContent.node.querySelector(f);if(t){T.$(t).remove();var e=T.$A(this.slideContent.node.children).length;if(this.slideContent.append(t),X.isSirvComponent(this.slideContent)&&X.hasComponent(this.slideContent)&&!this.isPlaceholder||e||d.videoModule.isVideo(this.slideContent))return!1}}return!0},t.beforeParseSlide=function(){this.isCustomSelector()&&(this.isCustomSlideEmpty()&&(this.availableSlide=!1,this.selector.activated=!1),this.selector.node.remove())},t.createImgFromDiv=function(){var t,e;"div"===this.slideContent.getTagName()&&this.type===O.SLIDE.TYPES.IMAGE&&(t=this.slideContent,this.slideContent=T.$new("img"),this.slideContent.attr("data-src",this.url),(e=t.attr("alt"))&&this.slideContent.attr("alt",e),(e=t.attr("title"))&&this.slideContent.attr("title",e),(e=t.attr("data-alt"))&&this.slideContent.attr("data-alt",e),(e=t.attr("data-referrerpolicy"))&&this.slideContent.attr("data-referrerpolicy",e))},t.parseSlide=function(){X.isSirvComponent(this.slideContent)&&X.hasComponent(this.slideContent)&&!this.isPlaceholder?(this.setSirvEvents(),this.createImgFromDiv(),this.sirvService=new x(this.slideContent.node,this.options,{quality:this.options.quality,hdQuality:this.options.hdQuality,isHDQualitySet:this.options.isHDQualitySet,always:this.options.fullscreenOnly,isFullscreen:this.options.isFullscreen,nativeFullscreen:this.options.nativeFullscreen}),this.sirvService.setParent(this),this.selector.isSirv=!0,this.sirvService.start(),this.createSlideApi(),this.selector.isVideo=this.sirvService.getType()===O.SLIDE.TYPES.VIDEO,this.contentWrapper.addClass(m+"-content-"+O.SLIDE.NAMES[this.getTypeOfSlide()])):(this.createImgFromDiv(),this.searchImagesInHtmlContent(),d.videoModule.isVideo(this.slideContent)&&(this.selector.isVideo=!0,this.initVideo(),this.contentWrapper.addClass(m+"-content-video"))),(this.dataThumbnailImage||this.dataThumbnailHtml)&&(this.selector.isSirv=!1)},t.appendToDOM=function(){this.isInDom||(this.isInDom=1,this.createFullscreenOnlyScreen(),this.isSirv()||this.video?(this.createComponentLoader(),this.video?this.contentWrapper.append(this.video.getVideoNode()):this.contentWrapper.append(this.slideContent)):("img"===this.slideContent.getTagName()&&(this.contentWrapper.addClass(m+"-slide-img"),d.sliderLib.getSrc(this.slideContent.attr("src"))||this.slideContent.attr("src",this.slideContent.attr("data-src"))),this.multiImages.length&&this.multiImages.forEach(function(t){!t.src&&t.datasrc&&g(t.node).attr("src",t.datasrc)}),this.contentWrapper.append(this.slideContent)),this.setFullscreenEvents())},t.initVideoPlayer=function(){this.video?this.video.init():this.isSirv()&&this.sirvService.getType()===O.SLIDE.TYPES.VIDEO&&this.sirvService.loadVideoSources()},t.secondSelectorClick=function(){this.isSirv()?this.broadcast("secondSelectorClick",{data:{slideIndex:this.index}}):this.video&&this.video.pause()},t.isSirvSelector=function(){return!this.selector.isCustom&&(this.isSirv()&&this.sirvService.getType()!==O.SLIDE.TYPES.VIDEO)},t.getSelectorProportion=function(){var s=this,t=this.dataThumbnailImage?new A(function(e,i){s.getResponsiveImage().then(function(){return e(T.extend({},s.selector))}).catch(function(t){d.loadImage(s.dataThumbnailImage).then(function(t){s.selector.size=t.size,e(T.extend({},s.selector))}).catch(function(t){i(t)})})}):this.video?this.getNonSirvVideoThumbnail():this.getSlideSize();return t},t.getSelectorReferrerPolicy=function(){var t="no-referrer-when-downgrade";if(this.selector.isCustom){if(this.selector.node.hasAttribute("data-referrerpolicy"))return this.selector.node.attr("data-referrerpolicy");var e=T.$A(this.selector.node.node.children).filter(function(t){return"img"===g(t).getTagName()});if(1===e.length)return g(e[0]).attr("referrerpolicy")||t}return this.slideContent.attr("data-referrerpolicy")||this.slideContent.attr("referrerpolicy")||t},t.getResponsiveImage=function(){var s=this;return this.customThumbnailImageClassPromise||(this.customThumbnailImageClassPromise=new A(function(e,t){var i=new n(s.dataThumbnailImage);i.getImageInfo().then(function(t){s.selector.isSirv=!0,s.selector.size=i.getOriginSize(),e(i)}).catch(t)})),this.customThumbnailImageClassPromise},t.getSirvThumbnailForCustomSelector=function(i){var s=this;return new A(function(e,t){s.getResponsiveImage().then(function(t){t=t.getThumbnail(i);t.referrerpolicy=s.thumbnailReferrerPolicy,e(t)}).catch(t)})},t.getSelectorImgUrl=function(t,e,i,s){var n=this,o={crop:i,watermark:s};e.width&&(o.width=e.width),e.height&&(o.height=e.height);function r(t){return t.src&&(n.selector.src=t.src),t.srcset&&(n.selector.srcset=t.srcset),t=T.extend({},t),t=T.extend(t,n.selector)}return new A(function(e,i){n.isSirv()?n.sirvService.getInfoSize().then(function(t){n.selector.isCustom?n.selector.isStatic?e(T.extend({},n.selector)):n.getSirvThumbnailForCustomSelector(o).then(function(t){return e(r(t))}).catch(function(){return e(T.extend({},n.selector))}):n.sirvService.getSelectorImgUrl(o).then(function(t){t.referrerpolicy=n.thumbnailReferrerPolicy,e(r(t))}).catch(i)}).catch(i):n.selector.isCustom&&n.dataThumbnailImage?n.selector.isStatic?e(T.extend({},n.selector)):n.getSirvThumbnailForCustomSelector(o).then(function(t){return e(r(t))}).catch(function(){return e(T.extend({},n.selector))}):"img"===n.slideContent.getTagName()||n.multiImages.length?e(T.extend({},n.selector)):n.video&&n.getNonSirvVideoThumbnail().then(e).catch(i)})},t.getNonSirvVideoThumbnail=function(){var s=this;return this.getVideoThumbnailPromise||(this.getVideoThumbnailPromise=new A(function(e,i){d.videoModule.getImageSrc(s.slideContent,!0).then(function(t){s.selector.isCustom||(s.selector.src=t.thumbnail.url,s.selector.size={width:t.thumbnail.width,height:t.thumbnail.height}),e(T.extend({},s.selector))}).catch(function(t){t&&!0!==t?t.UUID=s.$J_UUID:t={UUID:s.$J_UUID},i(t)})})),this.getVideoThumbnailPromise},t.isSpinInited=function(){return this.spinWasInited},t.isSlideReady=function(){return this.isReady},t.getSelector=function(){var t,e,i=this;return this.dataHiddenSelector?null:(this.selector.node||(this.selector.node=T.$new(f),this.selector.node.addClass(v)),this.dataThumbnailImage?(null!==(t=this.getTypeOfSlide())&&this.selector.node.attr("data-type",O.SLIDE.NAMES[t]),this.selector.src=this.dataThumbnailImage,this.selector.isStatic||(this.selector.infoPromise=new A(function(t){i.getResponsiveImage().catch(function(t){}).finally(function(){t(i.selector.isSirv,i.selector.size)})}))):this.dataThumbnailHtml?((t=T.$new("div")).node.innerHTML=this.dataThumbnailHtml,this.selector.selectorContent=t.node.firstChild,this.selector.node.attr("data-type","html")):this.selector.isCustom?(this.selector.node.attr("data-type","html"),this.selector.selectorContent=this.selector.node):this.isSirv()?(e=this.getTypeOfSlide(),this.selector.node.attr("data-type",O.SLIDE.NAMES[e]),e===O.SLIDE.TYPES.SPIN&&this.sirvService.isThumbnailGif()&&this.selector.node.addClass("spin-thumbnail-gif")):(e=Q(this.slideContent.node),T.contains(["youtube","vimeo","video"],e.type)?this.selector.node.attr("data-type",e.type):"img"===e.type?this.selector.src=e.data:(this.selector.selectorContent=e.data,this.selector.node.attr("data-type","html"))),this.selector.isCustom&&this.selector.node.addClass(m+"-custom-thumbnail"),this.selector.disabled=!this.enabled,this.selector)},t.getUUID=function(){return this.$J_UUID},t.isSlideActive=function(){return this.isActive},t.playVideo=function(){this.isActive&&this.inView&&this.video&&(this.fullscreenState===O.FULLSCREEN.OPENED||T.contains([O.SLIDE_SHOWN_BY.AUTOPLAY,O.SLIDE_SHOWN_BY.USER,O.SLIDE_SHOWN_BY.INIT],this.slideShownBy))&&this.video.play()},t.initVideo=function(){var e=this;this.on("slideVideoReady",function(t){t.stop(),e.isVideoReady||(e.isVideoReady=!0,e.isReady=!0,e.video.show(),e.componentLoader.hide()),!e.video.isAutoplay()&&e.video.isPreStart()||e.playVideo()}),this.on("slideVideoPlay",function(t){t.data.slide=e.getData(),e.isVideoPaused&&!e.video.isAutoplay()&&e.video.pause(),e.isVideoPaused=!1}),this.on("slideVideoPause",function(t){t.data.slide=e.getData()}),this.on("slideVideoEnd",function(t){t.data.slide=e.getData()});var t=this.options.video;switch(d.videoModule.getType(this.slideContent)){case"youtube":this.video=new q.YouTubeVideo(this.slideContent,t);break;case"vimeo":this.video=new q.VimeoVideo(this.slideContent,t);break;case"video":this.video=new q.HTMLVideo(this.slideContent,t)}this.video.setParent(this)},t.resize=function(){var t;this.enabled&&this.sirvService&&(this.sirvService.resize(),t=O.SLIDE.TYPES,this.isReady&&T.contains([t.SPIN,t.ZOOM],this.getTypeOfSlide())&&(this.sirvService.isZoomSizeExist()?this.contentWrapper.addClass(Y):this.contentWrapper.removeClass(Y)))},t.destroy=function(){this.sirvService?(this.sirvService.destroy(),this.sirvService=null,this.off("stats"),this.off("componentEvent")):this.multiImages.length&&this.multiImages.forEach(function(t){!t.src&&t.datasrc&&t.node.removeAttribute("src")}),this.slideContent.del("view-content"),this.removeEventCloseFullscreeByClick(),this.sendEventCloseFullscreenByClick=null,this.lastOriginNode&&(this.slideContent.remove(),this.slideContent=this.lastOriginNode,this.lastOriginNode=null),this.fullscreenOnlyNode&&(this.fullscreenOnlyNode.kill(),this.fullscreenOnlyNode=null),this.off("beforeFullscreenIn"),this.off("afterFullscreenIn"),this.off("beforeFullscreenOut"),this.off("afterFullscreenOut"),this.off("inView"),this.video&&(this.off("slideVideoReady"),this.off("slideVideoPlay"),this.off("slideVideoPause"),this.off("slideVideoEnd"),this.video.destroy()),this.video=null,this.componentLoader&&(this.componentLoader.destroy(),this.componentLoader=null),this.socialbuttons&&this.socialbuttons.destroy(),this.sizePromise=null,this.componentSize=null,this.contentWrapper.remove(),this.contentWrapper=null,this.instanceNode.remove(),this.instanceNode=null,this.slideContent=null,this.isReady=!1,this.availableSlide=null,a.prototype.destroy.call(this)},h}(i));function Q(t){var e,i,s={type:"node",data:null};if(d.videoModule.isVideo(t))s.type=d.videoModule.getType(t),s.type||(s.data=T.$new("div"));else{if("img"===g(t).getTagName())e=t;else try{e=t.getElementsByTagName("img")[0]}catch(t){}e&&(i=d.sliderLib.getSrc(g(e).attr("src"))||d.sliderLib.getSrc(g(e).attr("data-src"))),i?(s.type="img",s.data=i):(e=t.cloneNode?t.cloneNode(!0):T.$new("div"),s.data=e)}return s}var J,K,tt,et,it,st,nt,ot,rt=null,at=null,ht=(J="fullscreen",K=T.camelize("-"+J),tt=m+"-button-"+J+"-open",et=m+"-button-"+J+"-close",it=m+"-button-hidden",st=m+"-pseudo-"+J,nt={width:"100%",height:"100%"},function(a){"use strict";function t(t,e){var i=a.call(this)||this;i.instanceNode=g(t),i.instanceOptions=e.options,i.viewerFileContent=e.viewerFileContent,i.option=function(){return 1<arguments.length?i.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):i.instanceOptions.get(arguments.length<=0?void 0:arguments[0])},i.slideOptions=T.extend(e.slideOptions,{quality:i.instanceOptions.isset("quality")?i.option("quality"):null,hdQuality:i.option("hdQuality"),isHDQualitySet:i.instanceOptions.isset("hdQuality"),fullscreenOnly:i.option(J+".always"),isFullscreen:i.option(J+".enable"),nativeFullscreen:i.option(J+".native"),sbEnable:i.option("slide.socialbuttons.enable"),sbFacebook:i.option("slide.socialbuttons.types.facebook"),sbTwitter:i.option("slide.socialbuttons.types.twitter"),sbLinkedin:i.option("slide.socialbuttons.types.linkedin"),sbReddit:i.option("slide.socialbuttons.types.reddit"),sbTumblr:i.option("slide.socialbuttons.types.tumblr"),sbPinterest:i.option("slide.socialbuttons.types.pinterest"),sbTelegram:i.option("slide.socialbuttons.types.telegram")}),i.id=i.instanceNode.attr("id"),i.id||(i.id=m+"-"+d.generateUUID(),i.instanceNode.attr("id",i.id)),i.lazyInit=e.lazyInit,i.movingContainer=T.$new("div").addClass(m),i.slideWrapper=T.$new("div").addClass(m+"-slides-box"),i.slidesContainer=T.$new("div").addClass(m+"-slides"),i.selectorsWrapper=T.$new("div").addClass(m+"-selectors-box"),i.fullScreenBox=T.$new("div").addClass(m+"-"+J+"-box"),i.controlsWrapper=T.$new("div").addClass(m+"-controls"),i.producDetailsText=i.instanceNode.attr("data-product-detail"),i.productDetail=null,i.fullScreenBox.addEvent("mousescroll touchstart",function(t){t.stopDistribution()}),i.isReady=!1,i.isMoving=!1,i.isSelectorsReady=!1,i.isToolStarted=!1,i.isInitialized=!1,i.isStartedFullInit=!1,i.inViewModule=null,i.isInView=!1,i.firstSlideAhead=!1,i.rootMargin=0,i.fullscreenButton=null,i.doSetSize=!1,i.heightProportion=null,i.slides=[],i.enabledIndexesOfSlides=[],i.selectors=null,i.arrows=null,i.contextMenu=null,i.countOfSizes=g([]),i.isFullscreen=O.FULLSCREEN.CLOSED,i.fullscreenStartTime=null,i.index=0,i.movingContainerId=m+"-"+d.generateUUID(),i.cssRulesId="sirv_css_rules-"+d.generateUUID(),i.isComponentPinching=!1,i.isZoomIn=!1,i.hasSize=!1,i.isPseudo=!1,i.doHistory=!0,i.isAutoplay=i.option("slide.autoplay"),i.autoplayDelay=i.option("slide.delay"),i.residualAutoplayTime=i.autoplayDelay,i.sliderNodes=[],i.destroyed=!1,i.autoplayTimer=null,i.timerRemove=null,i.onResizeDebounce=d.debounce(function(){i.onResizeWithoutSelectors()},16),i.selectorsDebounce=null,i.doHistory&&(i.fullscreenViewId=Math.floor(Math.random()*T.now()),O.FULLSCREEN_VIEWERS_IDs_ARRAY.push(i.fullscreenViewId)),i.controlsWrapperWasAppended=!1,i.isStandardGrid=!1,i.isFullscreenGrid=!1,i.clearingTouchdragFunction=null,i.classes={standard:{movingContainerClasses:g([]),selectorsWrapperClasses:g([])},fullscreen:{movingContainerClasses:g([]),selectorsWrapperClasses:g([])}},i.externalContainer=null,T.browser.mobile&&i.movingContainer.addClass(m+"-mobile"),i.onResizeHandler=i.onResize.bind(l.assertThisInitialized(i)),i.pseudoFSEvent=function(t){27===t.oe.keyCode&&(g(T.D).removeEvent("keydown",i.pseudoFSEvent),i.exitFullScreen())},i.keyBoardArrowsCallback=function(t){var e=t.oe.keyCode;i.isReady&&T.contains([37,39],e)&&(t.stop(),e=37===e?"prev":"next",i.jump(e,2))},i.onHistoryStateChange=function(t){try{t.oe.state&&"Sirv.viewer"===t.oe.state.name?(O.FULLSCREEN_VIEWERS_IDs_ARRAY.indexOf(t.oe.state.hash)<0&&(O.FULLSCREEN_VIEWERS_IDs_ARRAY.splice(O.FULLSCREEN_VIEWERS_IDs_ARRAY.indexOf(i.fullscreenViewId),1),i.fullscreenViewId=t.oe.state.hash,O.FULLSCREEN_VIEWERS_IDs_ARRAY.push(i.fullscreenViewId)),t.oe.state.hash===i.fullscreenViewId&&i.enterFullScreen()):i.isFullscreenState()&&i.exitFullScreen()}catch(t){}};var s,n,o,r=i.getSlides();return i.addComponentsCSS=d.debounce(function(){h.rootDOM.addCSSStringToHtml()},100),C.load((s=r,t=i.producDetailsText,e=i.option("slide.socialbuttons.enable"),n=[],o=O.SLIDE.TYPES,s.forEach(function(t){!t.type||T.contains([o.IMAGE,o.HTML],t.type)||T.contains(n,t.type)||n.push(O.SLIDE.NAMES[t.type])}),t&&n.push("productDetail"),e&&n.push("socialButtons"),n)).then(function(){i.destroyed||(h.rootDOM.addCSSStringToHtml(),h.rootDOM.addCSSString(i.instanceNode.node),i.setComponentsEvents(),i.createSlides(r),!T.browser.ready&&"loading"===T.D.node.readyState||i.startFullInit(),E&&i.option("productdetail.enable")&&i.producDetailsText&&i.createProductDetails())}),i}l.inheritsLoose(t,a);var e=t.prototype;return e.isFullscreenState=function(){return T.contains([O.FULLSCREEN.OPENING,O.FULLSCREEN.OPENED],this.isFullscreen)},e.createProductDetails=function(){this.productDetail=new E({text:this.producDetailsText,position:this.option("productdetail.position")},this.movingContainer,this.fullScreenBox)},e.setRootMargin=function(){var t=parseInt(this.option("threshold"),10);"string"===T.typeOf(this.option("threshold"))&&(t=(T.W.node.innerHeight||T.D.node.documentElement.clientHeight)/100*t),this.rootMargin=t},e.startFullInit=function(e){var i=this;if(!this.isStartedFullInit&&this.slides.length&&(this.isStartedFullInit=!0,!this.isHiddenSlides())){e&&(this.instanceOptions=e.options,this.option=function(){return 1<arguments.length?i.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):i.instanceOptions.get(arguments.length<=0?void 0:arguments[0])},this.slideOptions=T.extend(e.slideOptions,{fullscreenOnly:this.option(J+".always"),autoplay:this.option("video.autoplay")}),this.lazyInit=e.lazyInit,this.isAutoplay=this.option("slide.autoplay"),this.autoplayDelay=this.option("slide.delay"),this.residualAutoplayTime=this.autoplayDelay),this.option(J+".always")&&this.movingContainer.addClass(m+"-fullsreen-always"),null===rt&&(rt=T.browser.mobile&&window.matchMedia&&window.matchMedia("(max-device-width: 767px), (max-device-height: 767px)").matches),rt&&"ios"===T.browser.platform&&(at=T.$new("div").setCss({position:"fixed",top:0,width:0,height:"100vh"})),this.normalizeOptions(),this.setRootMargin(),this.slideWrapper.addClass(m+"-"+("horizontal"===this.option("orientation")?"h":"v")),this.index=this.option("slide.first");var t=this.slides.length;if(this.index>t-1&&(this.index=0),0<t&&(!this.slides[this.index].isEnabled()||!this.slides[this.index].isSlideAvailable())){for(var s=null,n=0;n<t;n++){var o=d.sliderLib.findIndex("next",this.index+n,t,!0);if(this.slides[o].isEnabled()&&this.slides[o].isSlideAvailable()){s=o;break}}if(null===s)return console.warn("Sirv Media Viewer: All items are disabled.",this.instanceNode.node),void this.emit("destroy",{data:{id:this.id,node:this.instanceNode.node}});this.index=s}this.createContextMenu(),this.setInViewAction(),this.option("thumbnails.enable")&&this.option("thumbnails.target")&&(this.externalContainer=g(T.D.node.querySelector(this.option("thumbnails.target"))),this.externalContainer||(this.externalContainer=null));var r=T.D.node.createDocumentFragment();r.appendChild(this.movingContainer.node),this.movingContainer.setCss(nt),this.movingContainer.setCssProp("font-size",0),this.movingContainer.append(this.slideWrapper),this.slides.forEach(function(t){t.startFullInit(e?i.slideOptions:null)}),this.appendSelectors(!0),this.createClasses(),this.setClasses(),this.instanceNode.append(r),this.instanceNode.setCssProp("font-size",0),this.slideWrapper.append(this.slidesContainer),this.slidesContainer.setCss(nt),this.instanceNode.getSize(),this.movingContainer.getSize(),this.selectorsWrapper.getSize(),this.slideWrapper.getSize();var a=0<this.instanceNode.getSize().height;this.createSelectors(),this.selectors&&this.isStandardGrid&&this.selectorsWrapper.setCss({flexBasis:this.option("thumbnails.size")+"px"});var h=10,l=function(){var t;i.destroyed||((t=i.slidesContainer.node.getBoundingClientRect()).height||(t=i.slideWrapper.node.getBoundingClientRect()),0<--h&&(!t.width&&!t.height||a&&!t.height)?setTimeout(l,16):(i.instanceNode.setCssProp("font-size",""),t.width&&t.height||(i.doSetSize=!0),i.slides.forEach(function(t){t.isSlideAvailable()&&i.slidesContainer.append(t.getNode()),t.appendToDOM(),t.initVideoPlayer()}),i.setClasses(),i.searchingOfProportions(),i.selectors&&i.selectors.init(),i.postInitialization()))};this.firstSlideAhead&&this.broadcast("inView",{data:this.isInView}),setTimeout(l,16)}},e.visibleSlides=function(){return this.slides.filter(function(t){return t.isSlideAvailable()&&t.isEnabled()}).length},e.searchingOfProportions=function(){function t(){var i=h.index,s=!h.firstSlideAhead&&h.option("slide.preload");h.hasSize=h.setContainerSize(),h.inViewModule&&d.isIe()&&h.inViewModule.takeRecords(),h.slides.forEach(function(t,e){t.startTool(i===e,s,h.firstSlideAhead)}),h.createEffect(),h.isToolStarted=!0,h.checkSingleSlide(),h.slides[h.index].beforeShow(),h.slides[h.index].afterShow(O.SLIDE_SHOWN_BY.INIT),h.postInitialization()}var h=this,l=this.slides.length,c=function(r,a){return new A(function(i,s){var n,t=h.slides[r],o=h.slides.length;a.push(r),t&&(n=function(){var t,e=d.getArrayIndex(r+1,l);o!==h.slides.length&&r<e&&(e=r),T.contains(a,e)?((t=h.slidesContainer.getSize()).width||(t.width=500),t.height||(t.height=.5625*t.width),h.heightProportion=t,i()):c(e,a).then(i)},t.getSlideSize().then(function(t){t=t.size;t&&t.width&&t.height?(h.heightProportion=t,i()):n()}).catch(function(t){var e=h.slides.length;t&&t.error&&404===t.error.status&&(--e,h.pickOut(t.UUID)),(0<e?n:s)()}))})};this.doSetSize?c(this.index,[]).then(function(){t()}).catch(function(){}):t()},e.initTouchDrag=function(){function i(t){return t/c*100}function a(t,e){t&&t.getNode().setCssProp("transform",(t=e,(e={x:0,y:0})[u[0]]=t,"translate3d("+e.x+"%, "+e.y+"%, 0px)"))}function s(){var t;m&&(t={transform:"",transition:""},g.getNode().removeEvent("transitionend"),I&&(E?(d.checkLoop(d.index),I.afterShow(O.SLIDE_SHOWN_BY.USER),g.afterHide(),d.sendEvent("afterSlideIn",{slide:I.getData()}),d.sendEvent("afterSlideOut",{slide:g.getData()})):I&&I.afterHide(),I&&I.getNode().setCss(t)),g.getNode().setCss(t),E=b=!0,C=I=null,d.enableFullscreenButton(),d.autoplay(),m=!1,d.isMoving=!1,v=g=f=w=y=null,P=!1)}function n(t){var e;m&&!P&&(m=!0,t.stop(),t=t[u[0]]-r,y=e=t<w?"prev":w<t?"next":e||(0<l?"next":"prev"),l=i(w=t)-h,!v&&l<-10&&(l=-10),!f&&10<l&&(l=10),a(f,(t=l)-100),a(g,t),a(v,t+100))}function o(t){var r;m&&!P&&(1===x&&t.stop(),g.dragEvent(t.state),P=!0,r=y,new A(function(e,t){var i,s=100,n=0,o=Math.abs(l);(o<25||2===x||"next"===r&&l<0||"prev"===r&&0<l)&&(E=!1),E||(r=l<0?"prev":"next"),I="next"===r?f:v,"next"!==r&&(s*=-1),(C="next"===r?v:f)&&(C.getNode().setCssProp("transform",""),C.afterHide()),E?(g.beforeHide(),d.sendEvent("beforeSlideIn",{slide:I.getData()}),d.sendEvent("beforeSlideOut",{slide:g.getData()}),d.index=I.getIndex()):(i=s,s=n,n=i,n*=-1,o<2&&(b=!1)),b&&(g.getNode().addEvent("transitionend",function(t){t.stop(),e()}),I&&I.getNode().setCssProp("transition","transform, .3s"),g.getNode().setCssProp("transition","transform, .3s"),I&&I.getNode().getSize(),g.getNode().getSize(),d.selectors&&(d.selectors.setActiveItem(d.index),d.selectors.jump(d.index))),I&&a(I,n),a(g,s),b||e()}).finally(function(){P=!1,s()}))}var r,h,l,c,d=this,u=["x","left","width"],p="y",m=!1,f=null,g=null,v=null,S=this.option("loop"),y=null,w=null,b=!0,E=!0,I=null,C=null,x=0,z={x:null,y:null},P=!1,N=function(t,e){var i=null,e=e;e===T.U&&(e=d.index);e=d.getNextIndex(t,e,d.slides.length,S);return null===e||(e=d.slides[e]).getIndex()!==d.index&&(i=e.isEnabled()?e:N(t,e.getIndex())),i};"vertical"===this.option("orientation")&&(u=["y","top","height"],p="x"),this.clearingTouchdragFunction=s,this.slidesContainer.addEvent("touchdrag",function(t){var e;d.isComponentPinching||d.isZoomIn||d.slides[d.index].isBlokedTouchdrag()||d.option(J+".always")&&d.isFullscreen!==O.FULLSCREEN.OPENED||("dragstart"===t.state?(z={x:t.x,y:t.y},e=t,P||(s(),d.effect.stop(),null!==d.index&&((g=d.slides[d.index]).isSwipeDisabled()||(m=!0,d.isMoving=!0,r=d.slidesContainer.getPosition()[u[1]],c=d.slidesContainer.getSize()[u[2]],w=e[u[0]]-r,h=i(w),l=h,f=N("prev"),v=N("next"),f&&v&&(f.getIndex()===v.getIndex()?f.getIndex()<g.getIndex()?v=null:f=null:f.getIndex()!==g.getIndex()&&g.getIndex()!==v.getIndex()||(f.getIndex()===g.getIndex()?f=null:v=null)),f&&(a(f,-100),f.beforeShow()),v&&(a(v,100),v.beforeShow()),d.disableFullscreenButton()))),g.dragEvent(t.state)):"dragmove"===t.state?(1===(x=x||(Math.abs(z[u[0]]-t[u[0]])>Math.abs(z[p]-t[p])?1:2))&&n(t),z={x:t.x,y:t.y}):"dragend"===t.state&&(o(t),x=0,z={x:null,y:null}))})},e.appendSelectors=function(t){var e=this.movingContainer;this.externalContainer&&(this.isFullscreenState()?this.selectorsWrapper.removeClass(m+"-external"):(e=this.externalContainer,this.selectorsWrapper.addClass(m+"-external"))),(t||this.externalContainer)&&e.append(this.selectorsWrapper)},e.createClasses=function(){var r=this,a=this.option;["standard","fullscreen"].forEach(function(t){var e="standard"===t,i=a(e?"thumbnails.enable":"fullscreen.thumbnails.enable"),s=a(e?"thumbnails.position":"fullscreen.thumbnails.position"),n="bullets"===(o=a(e?"thumbnails.type":"fullscreen.thumbnails.type"))?o:"thumbnails",o=e?r.isStandardGrid:r.isFullscreenGrid;i&&(e&&r.externalContainer||r.classes[t].movingContainerClasses.push(m+"-selectors-"+s),r.classes[t].selectorsWrapperClasses.push(m+"-"+n),r.classes[t].selectorsWrapperClasses.push(m+"-"+(s=s,T.contains(["left","right"],s)?"v":"h")),o&&r.classes[t].selectorsWrapperClasses.push(m+"-grid"),a("fullscreen.thumbnails.autohide")&&!e&&(r.classes[t].movingContainerClasses.push(m+"-autohide"),r.classes[t].movingContainerClasses.push(m+"-selectors-closed")))})},e.changeClasses=function(t,e){var i=this,s=e?"removeClass":"addClass";t.movingContainerClasses.forEach(function(t){i.movingContainer[s](t)}),t.selectorsWrapperClasses.forEach(function(t){i.selectorsWrapper[s](t)})},e.setClasses=function(){this.isFullscreenState()?(this.changeClasses(this.classes.standard,!0),this.changeClasses(this.classes.fullscreen)):(this.changeClasses(this.classes.fullscreen,!0),this.changeClasses(this.classes.standard))},e.setInViewAction=function(){var i=this;"visible"===this.option("autostart")?(this.inViewModule=new d.InViewModule(function(t){t.forEach(function(t){var e=i.isInView,t=t.isIntersecting||0<t.intersectionRatio;i.isFullscreenState()&&!t&&(t=!0),e!==t&&(i.isInView=t,i.postInitialization(),i.broadcast("inView",{data:t}),i.isInView?i.autoplay():i.pauseAutoplay())})},{rootMargin:this.rootMargin+"px 0px"}),this.inViewModule.observe(this.instanceNode.node)):this.isInView=!0},e.sendEvent=function(t,e){(e=e||{}).node=this.instanceNode,e.slider||(e.slider={type:t}),this.emit("viewerPublicEvent",{data:e})},e.checkReadiness=function(t,e){var i=!1;if(T.contains(["init","ready"],t))if("viewer"===e)"ready"===t&&(i=this.isReady);else for(var s=0,n=this.slides.length;s<n;s++)if(this.slides[s].checkReadiness(t,e)){i=!0;break}return i},e.sendReadyEvent=function(e,i){"viewer"===i?this.sendEvent("ready"):this.slides.forEach(function(t){t.sendReadyEvent(e,i)})},e.sendStats=function(t,e){var i,s;(e=e||{}).slider=this.id,t&&(e.data={},e.data.event=t),"spin"===e.component&&((i={account:e.account,event:{type:e.component,name:e.event,data:e.data||{},sessionId:e.sessionId,origin:e.origin}}).event["sessionStart"===e.event?"ts":"time"]=e.eventTime,(s=JSON.parse(JSON.stringify(i))).event=JSON.stringify(s.event)),i&&(!0===e.useBeacon?d.sendRawStats(s,!0):setTimeout(function(){d.sendRawStats(s)},1),this.sendEvent("sendStats",T.detach(i)))},e.setComponentsEvents=function(){function i(t){var e;o.firstSlideAhead&&t===o.index&&(e=o.option("slide.preload"),o.enabledIndexesOfSlides.forEach(function(t){o.slides[t].startGettingInfo(),e?o.slides[t].loadContent():o.slides[t].loadThumbnail()}))}function s(t){o.index===t&&o.autoplay()}function n(t){o.index===t&&o.pauseAutoplay()}var o=this;this.on("stats",function(t){t.stopAll();var e=T.D.node,i=T.W.node,s=i.screen;"sessionStart"===t.data.event&&(t.data.data||(t.data.data={}),t.data.data.screen={width:s.width,height:s.height,availWidth:s.availWidth,availHeight:s.availHeight,colorDepth:s.colorDepth,pixelDepth:s.pixelDepth},t.data.data.browser={width:i.innerWidth||e.documentElement.clientWidth||e.body.clientWidth||0,height:i.innerHeight||e.documentElement.clientWidth||e.body.clientWidth||0}),o.sendStats(null,t.data)}),this.on("slideVideoPlay",function(t){t.stopAll(),n(t.data.slide.index)}),this.on("slideVideoPause",function(t){t.stopAll()}),this.on("slideVideoEnd",function(t){t.stopAll(),s(t.data.slide.index)}),this.on("contentLoaded",function(t){t.stopAll(),i(t.data.slide.index)}),this.on("componentEvent",function(t){var e=t.data.type;switch(t.stopAll(),e){case"init":(o.index===t.data.slide.index||o.slides[o.index]&&o.slides[o.index].isSpinInited())&&(o.addControllWrapper(),o.enableFullscreenButton(),o.visibleFullscreenButton()),o.sendEvent("componentEvent",t.data);break;case"ready":o.index!==t.data.slide.index||"spin"===t.data.component||o.slides[t.data.slide.index].isVideoSlide()&&!o.isFullscreenState()||(o.addControllWrapper(),o.enableFullscreenButton(),o.visibleFullscreenButton()),o.sendEvent("componentEvent",t.data);break;case"rotate":o.sendEvent("componentEvent",t.data);break;case"fullscreenIn":"video"===t.data.component?o.sendEvent("componentEvent",t.data):o.option(J+".enable")&&o.isFullscreen===O.FULLSCREEN.CLOSED&&o.enterFullScreen();break;case"fullscreenOut":"video"===t.data.component?o.sendEvent("componentEvent",t.data):o.exitFullScreen();break;case"pinchStart":o.isComponentPinching=!0;break;case"pinchEnd":o.isComponentPinching=!1;break;case"zoomIn":o.isZoomIn=!0,n(t.data.slide.index),o.sendEvent("componentEvent",t.data);break;case"zoomOut":o.isZoomIn=!1,s(t.data.slide.index),o.sendEvent("componentEvent",t.data);break;case"hotspotOpened":n(t.data.slide.index);break;case"hotspotClosed":s(t.data.slide.index);break;case"spinStart":n(t.data.slide.index);break;case"spinEnd":s(t.data.slide.index);break;case"play":case"resume":"video"===t.data.component&&(n(t.data.slide.index),o.sendEvent("componentEvent",t.data));break;case"pause":"video"===t.data.component&&o.sendEvent("componentEvent",t.data);break;case"end":"video"===t.data.component&&(s(t.data.slide.index),o.sendEvent("componentEvent",t.data));break;case"seek":o.sendEvent("componentEvent",t.data);break;case"contentLoaded":i(t.data.slide.index)}}),this.on("goTo"+K,function(t){t.stopAll(),o.option(J+".enable")&&o.isFullscreen===O.FULLSCREEN.CLOSED&&o.enterFullScreen()}),this.on("goTo"+K+"Out",function(t){t.stopAll(),o.exitFullScreen()}),this.on("infoReady",function(t){t.stop(),o.isFullscreen===O.FULLSCREEN.OPENED&&((t=o.slides[t.data.index]).broadcast("before"+K+"In",{data:{pseudo:o.isPseudo}}),t.broadcast("after"+K+"In",{data:{pseudo:o.isPseudo}}))}),this.on(function(t){t.stopAll()})},e.normalizeOptions=function(){var i=this,t=g(["contextmenu.text.zoom.in","contextmenu.text.zoom.out","contextmenu."+J+".enter","contextmenu."+J+".exit","contextmenu.text.download"]);"auto"===this.option("fullscreen.thumbnails.size")&&this.option("fullscreen.thumbnails.size",this.option("thumbnails.size")),"off"===this.option("slide.animation.type")&&this.option("slide.animation.type",!1),"grid"===this.option("thumbnails.type")&&(this.isStandardGrid=!0,this.option("thumbnails.type","square")),"grid"===this.option("fullscreen.thumbnails.type")&&(this.isFullscreenGrid=!1,this.option("fullscreen.thumbnails.type","square")),t.forEach(function(t){var e;e=i.option(t),"string"===T.typeOf(e)&&""===e.trim()&&i.option(t,!1)}),this.option("thumbnails.enable")&&this.option("thumbnails.target")&&""===this.option("thumbnails.target").trim()&&this.option("thumbnails.target",!1),!this.option("slide.socialbuttons.enable")||this.option("slide.socialbuttons.types.facebook")||this.option("slide.socialbuttons.types.twitter")||this.option("slide.socialbuttons.types.linkedin")||this.option("slide.socialbuttons.types.reddit")||this.option("slide.socialbuttons.types.tumblr")||this.option("slide.socialbuttons.types.pinterest")||this.option("slide.socialbuttons.types.telegram")||this.option("slide.socialbuttons.enable",!1),this.slideOptions.sbEnable=this.option("slide.socialbuttons.enable")},e.addControllWrapper=function(){!this.controlsWrapperWasAppended&&this.controlsWrapper.node.childNodes.length&&(this.controlsWrapperWasAppended=!0,this.slideWrapper.append(this.controlsWrapper))},e.postInitialization=function(){var t,i=this;!this.isInitialized&&this.isInView&&this.isSelectorsReady&&this.isToolStarted&&this.isStartedFullInit&&(this.isInitialized=!0,this.hasSize||this.setContainerSize(),this.broadcast("inView",{data:this.isInView}),this.createArrows(),this.selectors&&(this.selectors.inView(this.isInView,this.instanceNode),this.selectors.setActiveItem(this.index)),T.browser.mobile||(t="mouseout",d.isIe()&&(t="pointerout"),this.movingContainer.addEvent(t,function(t){if(!t.pointerType||"mouse"===t.pointerType){for(var e=t.getRelated();e&&e!==i.movingContainer.node;)e=e.parentNode;i.movingContainer.node!==e&&null!==i.index&&i.slides[i.index].mouseAction("mouseout",t)}})),1<this.slides.length&&this.initTouchDrag(),g(T.W).addEvent("resize",this.onResizeHandler),this.showHideArrows(),this.showHideSelectors(),this.option(J+".always")&&this.slideWrapper.addClass(O.CSS_CURSOR_FULSCREEN_ALWAYS),this.movingContainer.attr("id",this.movingContainerId),this.createFullscreenButton(),this.addControllWrapper(),!this.slides[this.index]||this.slides[this.index].isSirv()||this.slides[this.index].isVideoSlide()&&!this.isFullscreenState()||(this.enableFullscreenButton(),this.visibleFullscreenButton()),this.checkLoop(this.index),this.movingContainer.setCssProp("font-size",""),this.doHistory&&g(T.W).addEvent("popstate",this.onHistoryStateChange),this.autoplay(),this.isReady=!0,this.sendEvent("ready"))},e.addHistory=function(){if(this.doHistory){var t="#sirv-viewer-"+this.fullscreenViewId;if(T.W.node.location.hash!==t){var e={name:"Sirv.viewer",hash:this.fullscreenViewId},i=T.D.node.body.title||"Sirv viewer";try{T.W.node.history.state&&"Sirv.viewer"===T.W.node.history.state.name&&T.W.node.history.replaceState(null,i,""),T.W.node.history.pushState(e,i,t)}catch(t){}}}},e.setContainerSize=function(){var t=!1,e=0;this.selectors&&(e=this.selectorsWrapper.getSize()[this.selectors.getShortSide()]);var i=this.movingContainer.getSize(),s=this.option("thumbnails.position"),n=this.option("thumbnails.enable")&&this.canShowSelectors(this.slides.length)&&0<e&&!this.externalContainer;return(i.width||i.height)&&(t=!0,this.isFullscreen===O.FULLSCREEN.OPENED?(this.movingContainer.setCssProp("height",""),this.slideWrapper.setCssProp("height","")):this.doSetSize&&this.heightProportion&&(n&&T.contains(["left","right"],s)&&(i.width-=e),(i=i.width*(this.heightProportion.height/this.heightProportion.width))>this.heightProportion.height&&(i=this.heightProportion.height),(!n||T.contains(["left","right"],s)&&!this.isStandardGrid?this.movingContainer:this.slideWrapper).setCssProp("height",i+"px"))),t},e.findSlideIndex=function(t){for(var e=-1,i=0,s=this.slides.length;i<s;i++)if(this.slides[i].id&&this.slides[i].id===t){e=this.slides[i].index;break}return e},e.getCountOfEnabledSlides=function(t){var e=this.enabledIndexesOfSlides.length;return t&&(e=this.slides.length-e),e},e.getItems=function(t){var e=null,i=this.slides;t&&(T.defined(t.enabled)&&(e=t.enabled),t.group&&(i=this.getSlidesByGroup(t.group)));var s=[];return i.forEach(function(t){!0===e?t.isEnabled()&&s.push(t.getData()):!1===e&&t.isEnabled()||s.push(t.getData())}),s},e.controlEnabledSlides=function(t,e){e?this.enabledIndexesOfSlides.splice(this.enabledIndexesOfSlides.indexOf(t),1):(this.enabledIndexesOfSlides.push(t),this.enabledIndexesOfSlides=this.enabledIndexesOfSlides.sort(function(t,e){var i=0;return t<e?i=-1:e<t&&(i=1),i}))},e.disableSlide=function(t,e){var i,s=!1,n="next",o=this.slides.length;return"string"===T.typeOf(t)&&(t=this.findSlideIndex(t)),"number"===T.typeOf(t)&&0<=t&&t<this.slides.length&&this.slides[t].isEnabled()&&(i=this.slides[t].$J_UUID,this.effect&&this.effect.stop(),this.slides[t].isActive&&(this.index===o-1&&this.option("loop")&&(n=0),this.jump(n,4,!0)||(this.slides[t].beforeHide(),this.slides[t].afterHide())),this.slides[t].isEnabled()&&this.controlEnabledSlides(t,!0),this.slides[t].disable(),this.checkLoop(this.index),this.enabledIndexesOfSlides.length||(this.index=null),this.selectors&&this.selectors.disableSelector(i),e||this.sendEvent("disableItem",{slide:this.slides[t].getData()}),this.checkSingleSlide(),this.showHideArrows(),this.showHideSelectors(),s=!0),s},e.enableSlide=function(t){var e,i=this,s=!1;return"string"===T.typeOf(t)&&(t=this.findSlideIndex(t)),"number"===T.typeOf(t)&&0<=t&&t<this.slides.length&&!this.slides[t].isEnabled()&&(this.slides[t].startGettingInfo(),this.slides[t].loadThumbnail(),this.slides[t].enable(),this.slides[t].resize(),e=this.enabledIndexesOfSlides.filter(function(t){return i.slides[t].isSlideAvailable()}),this.enabledIndexesOfSlides.length||(this.index=t),this.slides[t].isSlideAvailable()&&!e.length&&(this.index=t,this.slides[t].loadContent(),this.slides[t].beforeShow(),this.slides[t].afterShow(O.SLIDE_SHOWN_BY.ENABLE)),this.controlEnabledSlides(t),this.checkLoop(this.index),this.selectors&&(this.selectors.enableSelector(this.slides[t].getUUID()),this.slides[t].isSlideAvailable()&&this.selectors.setCurrentActiveItemByUUID(this.slides[t].getUUID())),this.sendEvent("enableItem",{slide:this.slides[t].getData()}),this.checkSingleSlide(),this.showHideArrows(),this.showHideSelectors(),s=!0),s},e.getSlidesByGroup=function(e){var i=null;return e&&(i=[],this.slides.forEach(function(t){t.belongsTo(e)&&i.push(t)})),i},e.enableGroupOfSlides=function(t){var e=this,i=!1,t=this.getSlidesByGroup(t);return t&&t.length&&(i=!0,t.forEach(function(t){e.enableSlide(t.getIndex())})),i},e.disableGroupOfSlides=function(t){var e=this,i=!1,t=this.getSlidesByGroup(t);return t&&t.length&&(i=!0,t.forEach(function(t){e.disableSlide(t.getIndex())})),i},e.switchGroupOfSlides=function(e){var i=this,t=!1;return e&&(this.getItems({enabled:!0}).forEach(function(t){i.slides[t.index].belongsTo(e)||i.disableSlide(t.index)}),t=this.enableGroupOfSlides(e)),t},e.jump=function(t,e,i,s){var n=!1,o=this.option("slide.animation.type"),r=s,a=T.contains(["next","prev"],t),h=this.slides.length;if(!this.effect||!this.enabledIndexesOfSlides.length||null===this.index)return n;r===T.U&&(r=this.index),a||0<=(s=this.findSlideIndex(t))&&(t=s);h=d.sliderLib.findIndex(t,r,h,this.option("loop"));if(null===h)return n;if(this.index!==h){if(!this.slides[h].isEnabled()||!this.slides[h].isSlideAvailable())return a&&(n=this.jump(t,e,i,h)),n;clearTimeout(this.autoplayTimer),a||(t=h>this.index?"next":"prev"),this.checkLoop(h),o&&!i||(o="blank"),this.selectors&&(this.selectors.setActiveItem(h),this.selectors.jump(h)),this.effect.make({index:this.index,node:this.slides[this.index].getNode()},{index:h,node:this.slides[h].getNode()},{effect:o,direction:t},{whoUse:e}),n=!0}else this.slides[h].secondSelectorClick();return this.index=h,n},e.checkLoop=function(t){var e,i=this;this.arrows&&((e=this.enabledIndexesOfSlides.filter(function(t){return!i.slides[t].isSelectorPinned()&&i.slides[t].isSlideAvailable()}).length)<2?(this.arrows.disable("backward"),this.arrows.disable("forward")):this.option("loop")?this.arrows.disable():(t=this.enabledIndexesOfSlides.indexOf(t),this.arrows.disable(),0!==t&&1!==e||this.arrows.disable("backward"),t!==e-1&&1!==e||this.arrows.disable("forward")))},e.createFullscreenButton=function(){var e=this;this.option(J+".enable")&&!this.fullscreenButton&&(this.fullscreenButton=T.$new("div").addClass(m+"-button").addClass(m+"-button-"+J).addClass(tt),this.fullscreenButton.append(T.$new("div").addClass(m+"-icon")),this.disableFullscreenButton(),this.hideFullscreenButton(),this.fullscreenButton.addEvent("btnclick tap",function(t){t.stop(),e.isFullscreen!==O.FULLSCREEN.CLOSED&&e.isFullscreen!==O.FULLSCREEN.OPENED||(e.disableFullscreenButton(),e.hideFullscreenButton(),e.isFullscreen===O.FULLSCREEN.CLOSED?e.enterFullScreen():e.exitFullScreen())}),this.controlsWrapper.append(this.fullscreenButton),this.slides[this.index].isSlideReady()&&setTimeout(function(){e.slides[e.index].isVideoSlide()&&!e.isFullscreenState()||(e.enableFullscreenButton(),e.visibleFullscreenButton())},0))},e.visibleFullscreenButton=function(){this.fullscreenButton&&this.fullscreenButton.removeClass(it)},e.hideFullscreenButton=function(){this.fullscreenButton&&this.fullscreenButton.addClass(it)},e.enableFullscreenButton=function(){this.fullscreenButton&&this.fullscreenButton.removeAttr("disabled")},e.disableFullscreenButton=function(){this.fullscreenButton&&this.fullscreenButton.attr("disabled","disabled")},e.createEffect=function(){var e=this;this.effect=new P({time:this.option("slide.animation.duration"),orientation:this.option("orientation")}),this.effect.setParent(this),this.on("effectStart",function(t){t.stopAll(),e.isMoving=!0,e.disableFullscreenButton(),e.slides[t.indexes[1]].isVideoSlide()&&e.isFullscreen!==O.FULLSCREEN.OPENED&&e.hideFullscreenButton(),e.slides[t.indexes[0]].beforeHide(),e.slides[t.indexes[1]].beforeShow(),4!==t.data.callbackData.whoUse&&(e.sendEvent("beforeSlideIn",{slide:e.slides[t.indexes[1]].getData()}),e.sendEvent("beforeSlideOut",{slide:e.slides[t.indexes[0]].getData()}))}),this.on("effectEnd",function(t){t.stopAll(),e.slides[t.indexes[1]].isVideoSlide()&&e.isFullscreen!==O.FULLSCREEN.OPENED||(e.enableFullscreenButton(),e.visibleFullscreenButton()),e.slides[t.indexes[0]].afterHide(),e.slides[t.indexes[1]].afterShow(t.data.callbackData.whoUse),4!==t.data.callbackData.whoUse&&(e.sendEvent("afterSlideIn",{slide:e.slides[t.indexes[1]].getData()}),e.sendEvent("afterSlideOut",{slide:e.slides[t.indexes[0]].getData()})),e.autoplay(),e.isMoving=!1,e.residualAutoplayTime=e.autoplayDelay})},e.createArrows=function(){var e=this,t=this.option;t("arrows")&&(this.arrows=new B({orientation:t("orientation")}),this.arrows.hide(),this.arrows.setParent(this),this.on("arrowAction",function(t){t.stopAll();t=e.getNextIndex(t.data.type,e.index,e.slides.length,e.option("loop"));e.jump(t,2)}),this.arrows.getNodes().forEach(function(t){e.controlsWrapper.append(t)}))},e.getNextIndex=function(t,e,i,s){var n=d.sliderLib.findIndex(t,e,i,s),e=n;return null===n||n===this.index||!this.slides[n].isSelectorPinned()&&this.slides[n].isSlideAvailable()&&this.slides[n].isEnabled()||(e=this.getNextIndex(t,n,i,s)),e},e.isHiddenSlides=function(){return!this.slides.some(function(t){return!t.isCustomSelector()||t.isCustomSelector()&&t.isSlideAvailable()})},e.createSelectors=function(){var n=this,t=this.option;t("thumbnails.enable")||t("fullscreen.thumbnails.enable")?(this.selectors=new U(this.slides.map(function(t){return t.getSelector()}),{isStandardGrid:this.isStandardGrid,standardStyle:t("thumbnails.type"),standardSize:t("thumbnails.size"),standardPosition:!!t("thumbnails.enable")&&t("thumbnails.position"),standardWatermark:t("thumbnails.watermark"),isFullscreenGrid:this.isFullscreenGrid,fullscreenStyle:t("fullscreen.thumbnails.type"),fullscreenSize:t("fullscreen.thumbnails.size"),fullscreenPosition:!!t("fullscreen.thumbnails.enable")&&t("fullscreen.thumbnails.position"),fullscreenAutohide:t("fullscreen.thumbnails.autohide"),fullscreenWatermark:t("fullscreen.thumbnails.watermark"),arrows:t("arrows")}),this.selectors.setParent(this),this.on("selectorsReady",function(t){t.stopAll(),n.isSelectorsReady=!0,n.postInitialization()}),this.on("getSelectorProportion",function(e){e.stopAll();var i,s,t=n.getSlideByUUID(e.data.UUID);null!==t&&(i=n.slides[t])?(s={size:null,isSirv:!0},i.getSelectorProportion().then(function(t){s.isSirv=i.isSirvSelector(),s.size=t.size,e.data.resultingCallback(s)}).catch(function(t){s.isSirv=i.isSirvSelector(),n.pickOut(t.UUID),e.data.resultingCallback(s)})):e.data.resultingCallback(null)}),this.on("getSelectorImgUrl",function(e){e.stopAll();var t,i=n.getSlideByUUID(e.data.UUID);null!==i&&(t=n.slides[i])?t.getSelectorImgUrl(e.data.type,e.data.size,e.data.crop,e.data.watermark).then(function(t){e.data.resultingCallback({src:t.src,srcset:t.srcset,size:t.size,alt:t.alt,referrerpolicy:t.referrerpolicy})}).catch(function(t){e.data.resultingCallback(null)}):e.data.resultingCallback(null)}),this.on("changeSlide",function(t){t.stopAll();var e=n.getSlideByUUID(t.data.UUID);null!==e&&(t=n.option(J+".enable")&&n.option(J+".always"),n.slides[e].isCustomSelector()&&n.sendEvent("thumbnailClick",{slide:n.slides[e].getData()}),n.jump(e,2,t),t&&n.enterFullScreen())}),this.on("visibility",function(t){switch(t.stop(),t.action){case"show":n.movingContainer.removeClass(m+"-selectors-closed");break;case"hide":n.movingContainer.addClass(m+"-selectors-closed")}}),this.on("selectorsDone",function(t){t.stopAll(),T.contains(["left","right"],n.selectors.getCurrentStylePosition())&&n.onResize()}),this.selectorsWrapper.append(this.selectors.getNode()),this.slides.forEach(function(t,e){t.isEnabled()||n.selectors.disableSelector(t.getUUID())}),this.showHideSelectors(!0)):this.isSelectorsReady=!0},e.findSlide=function(){var t,e,i=this.instanceNode.attr("data-src");if(i){try{t=this.viewerFileContent||(t=(t=i.split("?")[0]).split("."))[t.length-1]}catch(t){}"spin"===t||d.isVideo(i)?(e=T.$new("div",{"data-src":i}),t=O.SLIDE.TYPES.SPIN):e=T.contains([this.instanceNode.attr("data-type"),this.instanceNode.attr("data-effect")],"zoom")?(t=O.SLIDE.TYPES.ZOOM,T.$new("div",{"data-type":"zoom","data-src":i})):(t=O.SLIDE.TYPES.IMAGE,T.$new("img",{"data-src":i})),this.viewerFileContent&&e.store("view-content",t),this.instanceNode.append(e)}else(i=this.instanceNode.attr("data-bg-src"))&&this.instanceNode.append(T.$new("img",{"data-src":i}));return this.getSlides(!0)},e.canPinSlide=function(t){var e=X.findPinnedSelectorSide(t);return this.slides.filter(function(t){return t.getPinnedSelectorSide()===e}).length<3},e.getSlideByUUID=function(t){for(var e=null,i=0,s=this.slides.length;i<s;i++)if(this.slides[i].getUUID()===t){e=i;break}return e},e.pickOut=function(t){t=this.getSlideByUUID(t);null!==t&&(this.removeSlide(t),this.slides.length?(this.slides.length<2&&(this.option("thumbnails.enable")||this.option("fullscreen.thumbnails.enable"))&&(this.changeClasses(this.classes.standard,!0),this.setContainerSize()),this.isToolStarted||this.searchingOfProportions(),this.postInitialization()):this.emit("destroy",{data:{id:this.id,node:this.instanceNode.node}}))},e.getSlides=function(t){var i=this,e=t?T.$A(this.instanceNode.node.childNodes):function(t){for(var e,i=[],s=0,n=0,o=0,r=t.length;o<r;o++){(a=t[o]).querySelector(f)&&(a=a.querySelector(f)),e=T.$(a).attr("data-pinned");var a=a.hasAttribute("data-pinned");3<=n&&"start"===e||3<=s&&(a&&e&&("end"===e||"end"!==e&&"start"!==e)||a&&!e)||(n<3&&"start"===e&&n++,(s<3&&a&&e&&("end"===e||"end"!==e&&"start"!==e)||a&&!e)&&s++,i.push(t[o]))}return i}(e=T.$A(this.instanceNode.node.childNodes).filter(function(t){var e=!1;return i.sliderNodes.push(t.cloneNode(!0)),t.tagName&&T.contains(["div","img","iframe","figure","video","picture",f],g(t).getTagName())&&(e=!0),t.parentNode.removeChild(t),e})),n=e.map(function(t){return X.parse(t)});return h.viewerFilters.forEach(function(t){var e=(e=[].concat(n)).map(function(t){var i={};return d.objEach(t,function(t,e){"type"===t&&(e=O.SLIDE.NAMES[e]),d.createReadOnlyProp(i,t,e)}),i}),e=t(i.id,e);Array.isArray(e)&&(n=e.map(function(t){for(var e=t,i=0,s=n.length;i<s;i++)if(t.node===n[i].node){e=n.splice(i,1)[0];break}return e}))}),e=n,t||e.length||(e=this.findSlide()),e=d.sortSlidesByOrder(this.option("itemsOrder"),e)},e.createSlides=function(t){var i=this,s=0;t.forEach(function(t){var e;X.isSirvComponent(t.node)&&!X.hasComponent(t.node)||((t=g(t.node)).getTagName()===f&&(e=T.$new("div"),t.attr("data-id")&&e.attr("data-id",t.attr("data-id")),t.attr("data-group")&&e.attr("data-group",t.attr("data-group")),e.append(t),t=e),t.addClass(m+"-component"),(t=new X(t.node,s,i.slideOptions)).setParent(i),i.slides.push(t),t.isEnabled()&&t.isSlideAvailable()&&i.enabledIndexesOfSlides.push(s),s+=1)}),this.firstSlideAhead=8<this.enabledIndexesOfSlides.length,this.enabledIndexesOfSlides.forEach(function(t,e){(!i.firstSlideAhead||e<8)&&i.slides[t].startGettingInfo()}),this.index>this.slides.length-1&&(this.index=0),this.postInitialization()},e.checkSingleSlide=function(){var e=this,i=1===this.enabledIndexesOfSlides.length;this.enabledIndexesOfSlides.forEach(function(t){e.slides[t].single(i)})},e.showHideArrows=function(){var t;this.arrows&&((t=this.visibleSlides())<2||this.option(J+".always")&&!this.isFullscreenState()?this.arrows.hide():1<t&&(!this.option(J+".always")||this.isFullscreenState())&&this.arrows.show())},e.canShowSelectors=function(t){var e=this.isFullscreen===O.FULLSCREEN.OPENED?"fullscreen.thumbnails.always":"thumbnails.always";return this.option(e)||1<t},e.showHideSelectors=function(t){var e=this;this.selectors&&(this.selectorsDebounce||(this.selectorsDebounce=d.debounce(function(){e.selectors&&(e.canShowSelectors(e.enabledIndexesOfSlides.length)?e.selectors.isSelectorsActionEnabled()||(e.movingContainer.setCssProp("height","100%"),e.selectorsWrapper.removeClass(m+"-hide-selectors"),e.selectors.enableActions(),e.onResize()):e.selectors.isSelectorsActionEnabled()&&(e.selectorsWrapper.addClass(m+"-hide-selectors"),e.selectors.disableActions(),e.onResize()))},t?0:32)),this.selectorsDebounce())},e.getAvailableSlideIndex=function(t){return t!==this.slides.length-1||this.slides[t].isSlideAvailable()?this.slides[t+1].isSlideAvailable()?t+1:this.getAvailableSlideIndex(t+1):-1},e.addAvailableSlideNode=function(t,e){var i=t.getNode(),s=this.slides.length;t.isSlideAvailable()&&(1<s&&e!==s-1?this.slides[e+1].isSlideAvailable()?this.slidesContainer.node.insertBefore(i.node,this.slides[e+1].getNode().node):(e=this.getAvailableSlideIndex(e))<0?this.slidesContainer.append(i):this.slidesContainer.node.insertBefore(i.node,this.slides[e].getNode().node):this.slidesContainer.append(i))},e.sortItems=function(t){if(Array.isArray(t)||(t=this.option("itemsOrder")),t.length){this.slides=d.sortSlidesByOrder(t,this.slides),this.selectors&&this.selectors.sortSelectors(this.slides.map(function(t){return t.getUUID()}),t.length),this.slides.forEach(function(t,e){t.setNewIndex(e)});for(var e=0,i=this.slides.length;e<i;e++)if(this.slides[e].isSlideActive()){this.index=this.slides[e].getIndex();break}}},e.insertSlide=function(t,e){var i=this,s=e.querySelector(f)||e;if(X.findPinnedSelectorSide(s)&&!this.canPinSlide(s))return!1;if(T.defined(t)||(t=this.slides.length+1),"number"===T.typeOf(t)&&0<=t&&e&&(!X.isSirvComponent(e)||X.hasComponent(e))){g(e).addClass(m+"-component"),t>this.slides.length&&(t=this.slides.length),clearTimeout(this.timerRemove);s=new X(e,t,this.slideOptions,!0);s.setParent(this),this.slides.splice(t,0,s);e=null===this.index;return null===this.index?s.isEnabled()&&s.isSlideAvailable()?this.index=t:e=!1:t<=this.index&&(this.index+=1),this.enabledIndexesOfSlides=[],this.slides.forEach(function(t,e){t.setNewIndex(e),t.isEnabled()&&i.controlEnabledSlides(e)}),this.addAvailableSlideNode(s,t),this.addComponentsCSS(),s.appendToDOM(),s.initVideoPlayer(),s.startGettingInfo(),s.loadThumbnail(),s.startFullInit(null),s.startTool(this.index===t,!this.firstSlideAhead&&this.option("slide.preload"),this.firstSlideAhead),s.broadcast("inView",{data:this.isInView}),this.index===t&&(s.loadContent(),s.beforeShow(),s.afterShow(O.SLIDE_SHOWN_BY.INIT)),this.isFullscreen!==O.FULLSCREEN.OPENED||s.isSirv()||(s.broadcast("before"+K+"In",{data:{pseudo:this.isPseudo}}),s.broadcast("after"+K+"In",{data:{pseudo:this.isPseudo}})),this.checkLoop(this.index),this.selectors&&(this.selectors.insertSelector(t,s.getSelector()),e&&this.selectors.setActiveItem(this.index)),this.checkSingleSlide(),this.showHideSelectors(),this.showHideArrows(),!0}return!1},e.removeSlide=function(t){var i=this,e=!1;if("string"===T.typeOf(t)&&(t=this.findSlideIndex(t)),"number"===T.typeOf(t)&&0<=t&&t<this.slides.length){var s=this.slides[t].$J_UUID;return this.slides[t].isEnabled()?this.disableSlide(t,!0):e=!0,this.slides[t].destroy(),this.slides.splice(t,1),this.enabledIndexesOfSlides=[],this.slides.forEach(function(t,e){t.setNewIndex(e),t.isEnabled()&&i.controlEnabledSlides(e)}),this.selectors&&this.selectors.pickOut(s),null!==this.index&&t<=this.index&&0!==this.index&&--this.index,e&&this.checkSingleSlide(),this.isHiddenSlides()&&(this.timerRemove=setTimeout(function(){i.instanceNode&&i.emit("destroy",{data:{id:i.id,node:i.instanceNode.node}})},100)),!0}return!1},e.createContextMenu=function(){var m=this,f=this.option,t=g([]);f("contextmenu.enable")?((f("contextmenu.text.zoom.in")||f("contextmenu.text.zoom.out"))&&(f("contextmenu.text.zoom.in")&&t.push({id:"zoomin",label:f("contextmenu.text.zoom.in"),hidden:!1,action:function(t){m.slides[m.index].zoomIn(t.left,t.top)}}),f("contextmenu.text.zoom.out")&&t.push({id:"zoomout",label:f("contextmenu.text.zoom.out"),disabled:!0,hidden:!1,action:function(t){m.slides[m.index].zoomOut(t.left,t.top)}})),f(J+".enable")&&(f("contextmenu.text."+J+".enter")||f("contextmenu.text."+J+".exit"))&&(f("contextmenu.text."+J+".enter")&&t.push({id:"enter"+J,label:f("contextmenu.text."+J+".enter"),hidden:!f(J+".enable"),action:function(){m.enterFullScreen()}}),f("contextmenu.text."+J+".exit")&&t.push({id:"exit"+J,label:f("contextmenu.text."+J+".exit"),hidden:!0,action:function(){m.exitFullScreen()}})),f("contextmenu.text.download")&&(t.length&&t.push({id:"sirv-separator",hidden:!1,separator:!0}),t.push({id:"download",label:f("contextmenu.text.download"),action:function(){var t=m.slides[m.index].getOriginImageUrl();t&&(T.$new("iframe").setCss({width:0,height:0,display:"none"}).appendTo(T.D.node.body).node.src=t+"?format=original&dl")}})),this.movingContainer.addEvent("contextmenu",function(t){var e,i,s=!1,n=!0,o=!1,r=!1,a=!1,h="zoomin",l="zoomout",c="enter"+J,d="exit"+J;if(t.stopDefaults(),m.contextMenu&&!m.isMoving&&m.enabledIndexesOfSlides.length){var u=m.slides[m.index],p=u.getTypeOfSlide(),t=O.SLIDE.TYPES;if(m.isReady&&u.isReady&&u.isSirv()&&p){u=u.getOptions();switch(p){case t.SPIN:e=!0;break;case t.ZOOM:e="deep"===u.mode;break;case t.IMAGE:break;case t.VIDEO:n=!1}e&&m.slides[m.index].isZoomSizeExist()&&(f("contextmenu.text.zoom.in")||f("contextmenu.text.zoom.out"))?(i=m.slides[m.index].getZoomData(),m.contextMenu.showItem(h),i.isZoomed&&1===i.zoom?m.contextMenu.disableItem(h):m.contextMenu.enableItem(h),m.contextMenu.showItem(l),i.isZoomed?m.contextMenu.enableItem(l):m.contextMenu.disableItem(l),o=!0):(m.contextMenu.hideItem(h),m.contextMenu.hideItem(l)),f(J+".enable")&&(m.isFullscreenState()?(m.contextMenu.hideItem(c),m.contextMenu.isExist(d)&&(m.contextMenu.showItem(d),i&&i.isZoomed?m.contextMenu.disableItem(d):m.contextMenu.enableItem(d),r=!0)):(m.contextMenu.isExist(c)&&(m.contextMenu.showItem(c),i&&i.isZoomed?m.contextMenu.disableItem(c):m.contextMenu.enableItem(c),r=!0),m.contextMenu.hideItem(d))),m.contextMenu.isExist("download")&&n?(m.contextMenu.showItem("download"),a=!0):m.contextMenu.hideItem("download"),(o||r||a)&&((o||r)&&a&&p!==t.VIDEO?m.contextMenu.showItem("sirv-separator"):m.contextMenu.hideItem("sirv-separator"),s=!0,m.broadcast("stopContext"))}m.contextMenu.setCanShow(s)}}),t.length&&!T.browser.mobile&&(this.contextMenu=new o(this.movingContainer,t,"sirv"),f("fullscreen.enable")&&this.contextMenu.setFullScreenBox(this.fullScreenBox))):this.movingContainer.addEvent("contextmenu",function(t){t.stop()})},e.enterFullScreen=function(){var e=this;if(this.isFullscreen!==O.FULLSCREEN.CLOSED)return!1;this.addHistory(),this.isFullscreen=O.FULLSCREEN.OPENING,this.fullscreenStartTime=+new Date;var t=!this.option("fullscreen.native")||!T.browser.fullScreen.capable||!T.browser.fullScreen.enabled();return at&&at.appendTo(T.D.node.body),this.disableFullscreenButton(),this.hideFullscreenButton(),this.selectors&&(this.setClasses(),this.option("fullscreen.thumbnails.enable")&&this.appendSelectors(),this.selectors.beforeEnterFullscreen()),this.slideWrapper.removeClass(O.CSS_CURSOR_FULSCREEN_ALWAYS),this.fullScreenBox.setCss({position:"fixed",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:99999999999}),this.boxSize=this.instanceNode.getSize(),this.boxBoundaries=this.instanceNode.getRect(),this.fullScreenBox.append(this.movingContainer),g(T.D.node.body).append(this.fullScreenBox),this.movingContainer.setCssProp("height","100%"),this.broadcast("before"+K+"In",{data:{pseudo:t}}),this.slideWrapper.setCssProp("height",""),E&&this.productDetail&&this.productDetail.open(),T.browser.fullScreen.request(this.fullScreenBox,{windowFullscreen:!this.option("fullscreen.native"),onEnter:this.onEnteredFullScreen.bind(this),onExit:function(){T.contains([O.FULLSCREEN.CLOSED,O.FULLSCREEN.OPENING],e.isFullscreen)||(e.isFullscreen=O.FULLSCREEN.CLOSING,e._beforeExitFullscreen(),e.broadcast("before"+K+"Out",{data:{pseudo:!1}}),e.onExitFullScreen())},fallback:function(){var t=T.D.node.getElementsByTagName("html")[0];g(t).addClass(st),g(document.body).getSize(),setTimeout(function(){return e.onEnteredFullScreen(!0)},64)}}),!0},e.onEnteredFullScreen=function(t){var e=this;this.isFullscreen===O.FULLSCREEN.OPENING&&((this.isPseudo=t)&&this.isFullscreen===O.FULLSCREEN.OPENING&&(this.fullScreenBox.setCss({top:at?Math.abs(at.node.getBoundingClientRect().top):0,left:0,right:0,bottom:0,width:"auto",height:at?T.W.node.innerHeight:"auto",display:this.productDetail?"flex":"block",position:"fixed"}),T.D.addEvent("keydown",this.pseudoFSEvent)),this.isFullscreen=O.FULLSCREEN.OPENED,this.fullscreenButton&&(this.fullscreenButton.removeClass(tt),this.fullscreenButton.addClass(et),this.slides[this.index]&&this.slides[this.index].isVideoSlide()&&this.isFullscreen!==O.FULLSCREEN.OPENED||setTimeout(function(){e.enableFullscreenButton(),e.visibleFullscreenButton()},1)),this.selectors&&this.selectors.afterEnterFullscreen(),1<this.slides.length&&T.D.addEvent("keyup",this.keyBoardArrowsCallback),this.showHideArrows(),this.showHideSelectors(),this.broadcast("after"+K+"In",{data:{pseudo:t}}),this.onResize(),t={},this.enabledIndexesOfSlides.length&&(t={slide:this.slides[this.index].getData()}),this.sendEvent(J+"In",t))},e._beforeExitFullscreen=function(){this.disableFullscreenButton(),this.hideFullscreenButton(),this.option(J+".always")&&this.slideWrapper.addClass(O.CSS_CURSOR_FULSCREEN_ALWAYS),this.selectors&&(this.option("fullscreen.thumbnails.enable")&&this.appendSelectors(),this.setClasses(),this.selectors.beforeExitFullscreen()),E&&this.productDetail&&this.productDetail.close()},e.exitFullScreen=function(){return this.isFullscreen===O.FULLSCREEN.OPENED&&(this.isFullscreen=O.FULLSCREEN.CLOSING,this._beforeExitFullscreen(),at&&at.remove(),T.browser.fullScreen.capable&&T.browser.fullScreen.enabled()&&this.option("fullscreen.native")?(this.broadcast("before"+K+"Out",{data:{pseudo:!1}}),T.browser.fullScreen.cancel.call(document)):(t=T.D.node.getElementsByTagName("html")[0],g(t).removeClass(st),this.broadcast("before"+K+"Out",{data:{pseudo:!0}}),this.onExitFullScreen(!0)),!0);var t},e.onExitFullScreen=function(t){var e=this;if(!T.contains([O.FULLSCREEN.CLOSED,O.FULLSCREEN.OPENING],this.isFullscreen)){if(T.D.removeEvent("keyup",this.keyBoardArrowsCallback),this.showHideArrows(),this.showHideSelectors(),this.instanceNode.append(this.movingContainer),this.fullScreenBox.remove(),this.fullscreenButton&&(this.fullscreenButton.removeClass(et),this.fullscreenButton.addClass(tt),this.slides[this.index]&&this.slides[this.index].isVideoSlide()&&this.isFullscreen!==O.FULLSCREEN.OPENED||setTimeout(function(){e.enableFullscreenButton(),e.visibleFullscreenButton()},1)),this.doHistory){var i="#sirv-viewer-"+this.fullscreenViewId;try{T.W.node.location.hash===i&&T.W.node.history.back()}catch(t){}}this.isFullscreen=O.FULLSCREEN.CLOSED,this.isPseudo=!1,this.selectors&&this.selectors.afterExitFullscreen(),this.setContainerSize(),this.fullscreenStartTime=null,this.broadcast("after"+K+"Out",{data:{pseudo:t}});t={};this.enabledIndexesOfSlides.length&&(t={slide:this.slides[this.index].getData()}),this.sendEvent(J+"Out",t),this.onResize()}},e.getSlide=function(t){return(null===t||"number"===T.typeOf(t)&&t>=this.slides.length)&&(t=this.index),"string"===T.typeOf(t)&&(t=this.findSlideIndex(t)),null==(t=this.slides[t])?void 0:t.getData()},e.onResizeWithoutSelectors=function(){this.destroyed||(at&&this.isFullscreen===O.FULLSCREEN.OPENED&&this.fullScreenBox.setCss({height:T.W.node.innerHeight,top:Math.abs(at.node.getBoundingClientRect().top)}),this.setRootMargin(),this.setContainerSize(),this.slides.forEach(function(t){t.resize()}))},e.onResize=function(){this.destroyed||(this.selectors&&this.selectors.onResize(),this.onResizeDebounce())},e.play=function(t){var e=!1,i=this.option("slide.delay");return T.defined(t)&&"number"===T.typeOf(t)&&9<t&&(i=t),(null!==this.autoplayTimer||this.isAutoplay)&&i===this.autoplayDelay||(this.autoplayDelay=i,this.isAutoplay=!0,this.residualAutoplayTime=this.autoplayDelay,this.autoplay(),e=!0),e},e.pause=function(){var t=this.autoplayTimer;return this.isAutoplay=!1,clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.residualAutoplayTime=this.autoplayDelay,null===t},e.pauseAutoplay=function(){clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.residualAutoplayTime-=T.now()-this.currentAutoplayTime},e.autoplay=function(){var t,e=this;this.isAutoplay&&(this.currentAutoplayTime=T.now(),t=this.autoplayDelay,this.residualAutoplayTime!==t&&(t=this.residualAutoplayTime<1e3?1e3:this.residualAutoplayTime),clearTimeout(this.autoplayTimer),this.autoplayTimer=setTimeout(function(){e.destroyed||e.jump("next",O.SLIDE_SHOWN_BY.AUTOPLAY)},t))},e.destroy=function(){var t,e,i=this;this.destroyed=!0,this.onResizeDebounce.cancel(),this.onResizeDebounce=null,clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.selectorsDebounce&&(this.selectorsDebounce.cancel(),this.selectorsDebounce=null),g(T.W).removeEvent("resize",this.onResizeHandler),this.onResizeHandler=null,g(T.D).removeEvent("keyup",this.keyBoardArrowsCallback),this.inViewModule&&(this.inViewModule.disconnect(),this.inViewModule=null),this.doHistory&&(g(T.W).removeEvent("popstate",this.onHistoryStateChange),O.FULLSCREEN_VIEWERS_IDs_ARRAY.splice(O.FULLSCREEN_VIEWERS_IDs_ARRAY.indexOf(this.fullscreenViewId),1)),this.movingContainer.removeEvent("mouseout"),this.slideWrapper.removeClass(O.CSS_CURSOR_FULSCREEN_ALWAYS),this.clearingTouchdragFunction&&this.clearingTouchdragFunction(),this.slidesContainer.removeEvent("touchdrag"),t=this.id,e=!1,(t=t.split("-")).splice(t.length-1,1),(t=t.join("-"))===m&&(e=!0),e&&this.instanceNode.removeAttr("id"),this.contextMenu&&(this.movingContainer.removeEvent("contextmenu"),this.contextMenu.destroy(),this.contextMenu=null),this.productDetail&&(this.productDetail.destroy(),this.productDetail=null),this.fullscreenButton&&(this.fullscreenButton.removeEvent("btnclick tap"),this.fullscreenButton.remove()),this.fullscreenButton=null,this.effect&&(this.effect.destroy(),this.effect=null,this.on("effectStart"),this.on("effectEnd")),this.arrows&&(this.arrows.destroy(),this.arrows=null,this.off("arrowAction")),this.selectors&&(this.selectors.destroy(),this.selectors=null,this.off("visibility"),this.off("changeSlide"),this.off("selectorsReady"),this.off("getSelectorImgUrl"),this.off("selectorsDone"),this.off("getSelectorProportion")),this.off("componentEvent"),this.off("goTo"+K),this.off("goTo"+K+"Out"),this.off("infoReady"),this.off("slideVideoPlay"),this.off("slideVideoPause"),this.off("slideVideoEnd"),this.slides.forEach(function(t){var e=t.getOriginNode();g(e).removeClass(m+"-component"),t.destroy()}),this.slides=[],this.off("stats"),this.sliderNodes.forEach(function(t){return i.instanceNode.append(t)}),this.sliderNodes=[],g(T.D).removeEvent("keydown",this.pseudoFSEvent),this.pseudoFSEvent=null,g(T.D).removeEvent("keyup",this.keyBoardArrowsCallback),this.keyBoardArrowsCallback=null,this.fullScreenBox.remove(),this.fullScreenBox=null,this.controlsWrapper.remove(),this.controlsWrapper=null,this.slidesContainer.remove(),this.slidesContainer=null,this.selectorsWrapper.remove(),this.selectorsWrapper=null,this.slideWrapper.remove(),this.slideWrapper=null,this.movingContainer.remove(),this.movingContainer=null,this.isReady=!1,this.doSetSize=!1,this.instanceNode=null,this.externalContainer=null,a.prototype.destroy.call(this)},t}(i));function lt(i){return d.objEach(i,function(e,t){(t=g(t.split(";"))).length&&(""===t[t.length-1]&&t.splice(t.length-1,1),t=t.map(function(t){return t.replace(new RegExp("^"+e+"\\."),"")}),i[e]=t.join(";"))}),i}function ct(t,e,i){return{common:ot(t.common,e)||i,mobile:ot(t.mobile,e)||i}}function dt(t){function e(e){["spin","zoom","image","video"].forEach(function(t){e[t]&&delete e[t]})}e(t.common),e(t.mobile)}return ot=function(t,e){var i,s=T.typeOf(e),n=null;return"string"===s?n=t[e]:"array"===s&&t[i=e.shift()]&&(n=e.length?ot(t[i],e):t[i]),n},function(o){"use strict";function t(t,e,i,s){var n=o.call(this)||this;n.node=t,n.slider=null,n.lazyInit=s,n.options={},n.spinOptions={},n.zoomOptions={},n.imageOptions={},n.videoOptions={},n.sliderBuilder=new u(e,n.node),n.parseOptions(e),n.privateOptions={common:{},mobile:{}},n.toolOptions=null,n.inViewTimer=null,n.isRun=!1,n.api={isReady:n.isReady.bind(l.assertThisInitialized(n)),items:n.items.bind(l.assertThisInitialized(n)),disableItem:n.disableItem.bind(l.assertThisInitialized(n)),enableItem:n.enableItem.bind(l.assertThisInitialized(n)),enableGroup:n.enableGroup.bind(l.assertThisInitialized(n)),disableGroup:n.disableGroup.bind(l.assertThisInitialized(n)),switchGroup:n.switchGroup.bind(l.assertThisInitialized(n)),insertItem:n.insertItem.bind(l.assertThisInitialized(n)),removeItem:n.removeItem.bind(l.assertThisInitialized(n)),removeAllItems:n.removeAllItems.bind(l.assertThisInitialized(n)),jump:n.jump.bind(l.assertThisInitialized(n)),itemsCount:n.itemsCount.bind(l.assertThisInitialized(n)),next:n.next.bind(l.assertThisInitialized(n)),prev:n.prev.bind(l.assertThisInitialized(n)),isFullscreen:n.isFullscreen.bind(l.assertThisInitialized(n)),fullscreen:n.fullscreen.bind(l.assertThisInitialized(n)),child:n.child.bind(l.assertThisInitialized(n)),play:n.play.bind(l.assertThisInitialized(n)),pause:n.pause.bind(l.assertThisInitialized(n)),sortItems:n.sortItems.bind(l.assertThisInitialized(n))},n.on("viewerPublicEvent",function(t){T.extend(t.data.slider,n.api),t.data.slide&&(t.data.slide.parent=function(){return n.api},t.data.slide[t.data.slide.component]&&(t.data.slide[t.data.slide.component].parent=function(){return t.data.slide}))}),n.makeOptions();e=n.toolOptions.get("autostart");return(e&&"off"!==e||i)&&n.run(),n}l.inheritsLoose(t,o);var e=t.prototype;return e.parseOptions=function(t){var e="viewer",i="spin",s="zoom",n="image",o="video",r=t.common,a=t.mobile;this.options=ct(t,e,{}),this.spinOptions={common:ot(r,[e,i])||ot(r,i)||{},mobile:ot(a,[e,i])||ot(a,i)||{}},this.zoomOptions={common:ot(r,[e,s])||ot(r,s)||{},mobile:ot(a,[e,s])||ot(a,s)||{}},this.imageOptions={common:ot(r,[e,n])||ot(r,n)||{},mobile:ot(a,[e,n])||ot(a,n)||{}},this.videoOptions={common:ot(r,[e,o])||ot(r,o)||{},mobile:ot(a,[e,o])||ot(a,o)||{}},dt(this.options)},e.getSlideOptions=function(){var t=ct(this.privateOptions,"spin",""),e=ct(this.privateOptions,"zoom",""),i=ct(this.privateOptions,"image",""),s=ct(this.privateOptions,"video","");return{spin:{common:this.spinOptions,local:t},zoom:{common:this.zoomOptions,local:e},image:{common:this.imageOptions,local:i},video:{common:this.videoOptions,local:s}}},e.makeOptions=function(){var t={spin:/^spin/,zoom:/^zoom/,image:/^image/,video:/^video/};this.toolOptions=new T.Options(S),this.toolOptions.fromJSON(this.options.common),this.privateOptions.common=this.toolOptions.fromString(this.node.attr("data-options")||"",t),this.privateOptions.common=lt(this.privateOptions.common),T.browser.touchScreen&&T.browser.mobile&&(this.toolOptions.fromJSON(this.options.mobile),this.privateOptions.mobile=this.toolOptions.fromString(this.node.attr("data-mobile-options")||"",t),this.privateOptions.mobile=lt(this.privateOptions.mobile))},e.createSlider=function(t){this.slider=new ht(this.node,{options:this.toolOptions,slideOptions:this.getSlideOptions(),lazyInit:this.lazyInit,viewerFileContent:t}),this.slider.setParent(this),this.api.id=this.slider.id},e.run=function(e){var i=this;return this.isRun=!0,this.sliderBuilder.getOptions().then(function(t){i.parseOptions(t.dataOptions),e&&i.makeOptions(),t.content?i.createSlider(t.content):i.sliderBuilder.buildViewer().then(function(t){i.node=t.mainNode,i.createSlider()})}).catch(function(t){console.log("Sirv: cannot get view from "+t.error)}),!0},e.isReady=function(){var t=!1;return this.slider&&(t=this.slider.isReady),t},e.isFullscreen=function(){var t=!1;return this.isReady()&&(t=2===this.slider.isFullscreen),t},e.startFullInit=function(t,e,i){this.slider&&(this.lazyInit=i,this.parseOptions(t),this.makeOptions(),((t=this.toolOptions.get("autostart"))&&"off"!==t||e)&&this.slider.startFullInit({options:this.toolOptions,slideOptions:this.getSlideOptions(),lazyInit:this.lazyInit}))},e.start=function(){var t=!1;return this.slider||(t=this.run(!0)),t},e.stop=function(){var t=!1;return this.slider&&(t=!0,this.slider.destroy(),this.slider=null,this.off("viewerPublicEvent"),this.isRun=!1,this.sliderBuilder.destroy(),this.sliderBuilder=null,this.destroy()),t},e.insertItem=function(t,e){var i,s=!1;return this.isReady()&&("string"===T.typeOf(t)?((i=T.$new("div")).node.innerHTML=t.trim(),!(t=i.node.firstChild)||3!==t.nodeType&&8!==t.nodeType&&T.contains(["div","img",f],g(t).getTagName())||(t=null)):g(t).getTagName()===f&&((i=T.$new("div")).append(t),t=i.node),s=this.slider.insertSlide(e,t)),s},e.removeItem=function(t){var e=!1;return this.isReady()&&(e=this.slider.removeSlide(t)),e},e.removeAllItems=function(){var t=!0;if(this.isReady())for(var e=this.itemsCount()-1;0<=e;e--)var i=this.removeItem(e),t=t&&i;else t=!1;return t},e.itemsCount=function(t){var e=0;return!this.isReady()||null!==(t=this.items(t))&&(e=t.length),e},e.items=function(t){var e=this,i=null;return this.isReady()&&(i=this.slider.getItems(t)).forEach(function(t){t.parent=function(){return e.api}}),i},e.disableItem=function(t){var e=!1;return this.isReady()&&(e=this.slider.disableSlide(t)),e},e.enableItem=function(t){var e=!1;return this.isReady()&&(e=this.slider.enableSlide(t)),e},e.enableGroup=function(t){var e=!1;return this.isReady()&&(e=this.slider.enableGroupOfSlides(t)),e},e.disableGroup=function(t){var e=!1;return this.isReady()&&(e=this.slider.disableGroupOfSlides(t)),e},e.switchGroup=function(t){var e=!1;return this.isReady()&&(e=this.slider.switchGroupOfSlides(t)),e},e.jump=function(t){var e=!1;return this.isReady()&&(e=this.slider.jump(t)),e},e.next=function(){var t=!1;return this.isReady()&&(t=this.slider.jump("next")),t},e.prev=function(){var t=!1;return this.isReady()&&(t=this.slider.jump("prev")),t},e.fullscreen=function(){var t=!1;return this.isReady()&&(t=this.isFullscreen()?this.slider.exitFullScreen():this.slider.enterFullScreen()),t},e.child=function(t){var e,i=this,s=null;return this.isReady()&&(e=t,"number"!==T.typeOf(e)&&"string"!==T.typeOf(e)&&(e=null),t=e,(s=this.slider.getSlide(t))&&(s.parent=function(){return i.api})),s},e.play=function(t){var e=!1;return this.isReady()&&(e=this.slider.play(t)),e},e.pause=function(){var t=!1;return this.isReady()&&(t=this.slider.pause()),t},e.sortItems=function(t){this.isReady()&&this.slider.sortItems(t)},e.isEqual=function(t){return t===this.node},e.checkReadiness=function(t,e){var i=!1;return this.isReady()&&(i=this.slider.checkReadiness(t,e)),i},e.sendEvent=function(t,e){this.isReady()&&this.slider.sendReadyEvent(t,e)},t}(i)});var w=window,_Sirv={items:{},eventManager:null,options:{}};sirvRequirejs.require(["globalVariables"],function(t){t.SIRV_ASSETS_URL=SIRV_ASSETS_URL,t.SIRV_BASE_URL=SIRV_BASE_URL,t.SIRV_HTTP_PROTOCOL=SIRV_HTTP_PROTOCOL});var waitModules=(Ukb=[],Vkb.start=function(){for(;Ukb.length;)Ukb.shift()()},Vkb),Ukb;function Vkb(t){_Sirv.start?t():Ukb.push(t)}var baseModules=["bHelpers","magicJS","globalVariables","globalFunctions","EventManager","helper","Slider"];isLazyImage&&baseModules.push("LazyImage"),sirvRequirejs.require(baseModules,function(t,e,i,c,s,d,u,p){function m(t,e,i){var s=[],n=null;return(e=_Sirv.items[e]).length&&t&&(t=t,i=i,"string"===g.typeOf(t)&&(t=(i||document).querySelector(t)),(n=g.$(t))&&(s=e.filter(function(t){return t.node===n}))),s.length?s[0]:null}function n(t,e){return e=e||document,"collection"===g.typeOf(t)?t:"element"===g.typeOf(t)||"magicjs-element"===g.typeOf(t)?[t]:g.$A((g.$(e).node||e).querySelectorAll(t||".Sirv"))}function f(t){var e=null;return(t=g.$(t)).hasClass("Sirv")&&(e="img"===t.getTagName()||t.attr("data-bg-src")||t.getCss("background-image")&&"none"!==t.getCss("background-image")?"image":"viewer"),e}var g=e;g.$;_Sirv.items.image=[],_Sirv.items.viewer=[],_Sirv.start=function(t,e,o,r){var a,h=null,l=!1;"boolean"===g.typeOf(t)&&(l=t,t=void 0),g.$A(n(t,e)).forEach(function(t){var e,i,s,n=g.$(t);if(t&&n.hasClass("Sirv")&&(a=f(n.node),o&&o!==a&&(a=null),_Sirv.options.common=d.deepExtend({},g.W.node.SirvOptions||{}),_Sirv.options.mobile=d.deepExtend({},g.W.node.SirvMobileOptions||{}),a&&g.contains(["image","viewer"],a)&&(r||(e=_Sirv.options,s=!1,"image"===(i=a)&&(i="lazyImage"),e.common[i]&&(!1===e.common[i].autostart||g.contains(["false","off"],e.common[i].autostart))&&(s=!0),!s&&g.browser.touchScreen&&g.browser.mobile&&e.mobile[i]&&(!1===e.mobile[i].autostart||g.contains(["false","off"],e.mobile[i].autostart))&&(s=!0),!s))))if(h=m(n.node,a))h.startFullInit(g.extend({},_Sirv.options),r,l);else switch(a){case"image":isLazyImage?(c.rootDOM.attachNode(t),c.rootDOM.resetGlobalCSS(t),(h=new p(n.node,{options:{common:d.deepExtend({},_Sirv.options.common.lazyImage||{}),mobile:d.deepExtend({},_Sirv.options.mobile.lazyImage||{})}},r)).isRun?(_Sirv.items.image.push(h),h.setParent(_Sirv.eventManager)):c.rootDOM.detachNode(t)):console.info("Sirv: Image component wasn't found.");break;case"viewer":c.rootDOM.attachNode(t),c.rootDOM.addMainStyle(t),(h=new u(n,g.extend({},_Sirv.options),r,l)).isRun?(_Sirv.items.viewer.push(h),h.setParent(_Sirv.eventManager)):c.rootDOM.detachNode(t)}})},_Sirv.stop=function(t,i,e){(e?[e]:["image","viewer"]).forEach(function(e){t||i?g.$A(n(t,i)).forEach(function(t){t=m(t,e);t&&t.stop()&&_Sirv.items[e].splice(_Sirv.items[e].indexOf(t),1)}):_Sirv.items[e]=_Sirv.items[e].filter(function(t){return!t.stop(!0)})})},_Sirv.getInstance=function(t,e,i){i=m(t,e,i);return i&&i.api},_Sirv.eventManager=new s(_Sirv.items),_Sirv.addFilterCallback=function(t,e){e?c.viewerFilters.unshift(t):c.viewerFilters.push(t)},_Sirv.removeFilterCallback=function(e){var i=[];c.viewerFilters.forEach(function(t){t!==e&&i.push(t)}),c.viewerFilters=i},_Sirv.removeAllFilterCallback=function(){c.viewerFilters=[]},c.stop=function(t,e){return _Sirv.stop(t,null,e)};function o(){var n={added:[],removed:[]},o=d.debounce(function(){var t=n.added.splice(0),e=n.removed.splice(0);t.forEach(function(t){var e;(t=g.$(t)).node&&3!==t.node.nodeType&&8!==t.node.nodeType&&t.node.getElementsByClassName&&(t.hasClass("Sirv")?_Sirv.start(t,null,f(t)):c.rootDOM.rootContains(t.node)&&((e=t.node).closest?!e.closest("div.Sirv"):"trident"===g.browser.engine)&&_Sirv.start(null,t))});var i=[];e.forEach(function(t){(t=g.$(t)).node&&3!==t.node.nodeType&&8!==t.node.nodeType&&t.node.getElementsByClassName&&(t.hasClass("Sirv")?i.push(t):[].push.apply(i,t.node.getElementsByClassName("Sirv"))),i.forEach(function(t){if(t=g.$(t),!g.D.node.body.contains(t.node))try{_Sirv.stop(t,null,f(t))}catch(t){}})})},250);g.W.node.MutationObserver&&new MutationObserver(function(t,e){for(var i=0,s=t.length;i<s;i++)"childList"===t[i].type&&([].push.apply(n.added,t[i].addedNodes),[].push.apply(n.removed,t[i].removedNodes));o()}).observe(g.D.node.body,{childList:!0,subtree:!0,attributes:!1})}c.rootDOM.resetGlobalCSS(),c.iconsHash.make(),"loading"===g.D.node.readyState&&_Sirv.start(!0),g.D.addEvent("domready",function(){_Sirv.start(),o()}),waitModules.start()});var sayDeprecated=function(t){console.log("sirv.js: The method Sirv"+t+".refresh() is deprecated. \r\n         Use Sirv"+t+".stop() and Sirv"+t+".start() instead.")};w.Sirv.version="v3.7.11",w.Sirv.build="d9416467",w.Sirv.options={},w.Sirv.lazyimage={start:function(t,e){waitModules(function(){_Sirv.start(t,e,"image",!0)})},stop:function(t,e){waitModules(function(){_Sirv.stop(t,e,"image")})},getInstance:function(t,e){var i=null;return _Sirv.getInstance&&(i=_Sirv.getInstance(t,"image",e)),i},refresh:function(){sayDeprecated(".image")},on:function(t,e){return w.Sirv.on(t,e)},off:function(t,e){return w.Sirv.off(t,e)}},w.Sirv.viewer={start:function(t,e){waitModules(function(){_Sirv.start(t,e,"viewer",!0)})},stop:function(t,e){waitModules(function(){_Sirv.stop(t,e,"viewer")})},getInstance:function(t,e){var i=null;return _Sirv.getInstance&&(i=_Sirv.getInstance(t,"viewer",e)),i},refresh:function(){sayDeprecated(".viewer")},on:function(t,e){return w.Sirv.on(t,e)},off:function(t,e){return w.Sirv.off(t,e)},filters:{add:function(t,e){_Sirv.addFilterCallback?_Sirv.addFilterCallback(t,e):waitModules(function(){_Sirv.addFilterCallback(t,e)})},remove:function(t){_Sirv.removeFilterCallback?_Sirv.removeFilterCallback(t):waitModules(function(){_Sirv.removeFilterCallback(t)})},removeAll:function(){_Sirv.removeAllFilterCallback?_Sirv.removeAllFilterCallback():waitModules(function(){_Sirv.removeAllFilterCallback()})}}},w.Sirv.start=function(t,e){waitModules(function(){_Sirv.start(t,e,null,!0)})},w.Sirv.stop=function(t,e){waitModules(function(){_Sirv.stop(t,e)})},w.Sirv.getInstance=function(t,e,i){var s=null;return _Sirv.getInstance&&(s=("viewer"!==e&&"lazyimage"===e?w.Sirv.lazyimage:w.Sirv.viewer).getInstance(t,i)),s},w.Sirv.refresh=function(){sayDeprecated("")},w.Sirv.on=function(t,e){var i,s;return _Sirv.eventManager?_Sirv.eventManager.addEvent(t,e):(i=1,s=function(){return!0},waitModules(function(){i&&(s=_Sirv.eventManager.addEvent(t,e))}),function(){return i=0,s()})},w.Sirv.off=function(t,e){var i,s;return _Sirv.eventManager?_Sirv.eventManager.removeEvent(t,e):(i=1,s=function(){return!0},waitModules(function(){i&&(s=_Sirv.eventManager.removeEvent(t,e))}),function(){return i=0,s()})},w.Sirv.whenReady=function(t){waitModules(t)},w.Sirv.whenLoaded=function(t){sirvRequirejs.require(sirvDeps,function(){t()})}}();
